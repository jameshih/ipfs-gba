{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///../node_modules/prop-types/index.js","webpack:///../node_modules/js-sha1/src/sha1.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/emulator/mmu.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./assets/bios.bin","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///../node_modules/prop-types/factoryWithThrowingShims.js","webpack:///../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///../node_modules/process/browser.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/emulator/core.js","webpack:///./src/emulator/arm.js","webpack:///./src/emulator/thumb.js","webpack:///./src/emulator/io.js","webpack:///./src/emulator/audio.js","webpack:///./src/emulator/video.js","webpack:///./src/emulator/video/proxy.js","webpack:///./src/emulator/video/software.js","webpack:///./src/emulator/irq.js","webpack:///./src/emulator/keypad.js","webpack:///./src/emulator/sio.js","webpack:///./src/emulator/gpio.js","webpack:///./src/emulator/gba.js","webpack:///../node_modules/arraybuffer-loader/lib/to-array-buffer.js","webpack:///../node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///../node_modules/base64-js/index.js","webpack:///../node_modules/ieee754/index.js","webpack:///../node_modules/isarray/index.js","webpack:///./src/emulator/fades.js","webpack:///./src/emulator/util.js","webpack:///./src/emulator/savedata.js","webpack:///./src/emulator/index.js","webpack:///./src/emulator/reset.js","webpack:///./src/emulator/setVolume.js","webpack:///./src/react/index.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","root","window","NODE_JS","JS_SHA1_NO_NODE_JS","process","versions","node","global","COMMON_JS","JS_SHA1_NO_COMMON_JS","AMD","HEX_CHARS","split","EXTRA","SHIFT","OUTPUT_TYPES","blocks","createOutputMethod","outputType","message","Sha1","update","createMethod","method","nodeWrap","length","type","crypto","eval","Buffer","nodeMethod","createHash","digest","constructor","ArrayBuffer","Uint8Array","undefined","sharedMemory","this","h0","h1","h2","h3","h4","block","start","bytes","hBytes","finalized","hashed","first","notString","code","index","charCodeAt","lastByteIndex","hash","finalize","j","a","b","e","hex","toString","array","arrayBuffer","buffer","dataView","DataView","setUint32","sha1","g","Function","ROMView","rom","offset","MemoryView","ICACHE_PAGE_BITS","PAGE_MASK","icache","Array","byteLength","mask","resetMask","BIOSView","BadMemory","mmu","cpu","memory","view","mask8","mask16","mask32","load8","getInt8","load16","getInt16","loadU8","getUint8","loadU16","getUint16","load32","rotate","mem","getInt32","store8","setInt8","store16","setInt16","store32","setInt32","invalidatePage","address","replaceData","MemoryBlock","size","cacheBits","page","invalid","gpio","allocGPIO","gprs","PC","instructionWidth","execMode","MODE_ARM","halfword","GameBoyAdvanceMMU","REGION_BIOS","REGION_WORKING_RAM","REGION_WORKING_IRAM","REGION_IO","REGION_PALETTE_RAM","REGION_VRAM","REGION_OAM","REGION_CART0","REGION_CART1","REGION_CART2","REGION_CART_SRAM","BASE_BIOS","BASE_WORKING_RAM","BASE_WORKING_IRAM","BASE_IO","BASE_PALETTE_RAM","BASE_VRAM","BASE_OAM","BASE_CART0","BASE_CART1","BASE_CART2","BASE_CART_SRAM","BASE_MASK","BASE_OFFSET","OFFSET_MASK","SIZE_BIOS","SIZE_WORKING_RAM","SIZE_WORKING_IRAM","SIZE_IO","SIZE_PALETTE_RAM","SIZE_VRAM","SIZE_OAM","SIZE_CART0","SIZE_CART1","SIZE_CART2","SIZE_CART_SRAM","SIZE_CART_FLASH512","SIZE_CART_FLASH1M","SIZE_CART_EEPROM","DMA_TIMING_NOW","DMA_TIMING_VBLANK","DMA_TIMING_HBLANK","DMA_TIMING_CUSTOM","DMA_INCREMENT","DMA_DECREMENT","DMA_FIXED","DMA_INCREMENT_RELOAD","DMA_OFFSET","WAITSTATES","WAITSTATES_32","WAITSTATES_SEQ","WAITSTATES_SEQ_32","NULLWAIT","ROM_WS","ROM_WS_SEQ","bios","mmap","region","clear","badMemory","waitstates","slice","waitstatesSeq","waitstates32","waitstatesSeq32","waitstatesPrefetch","waitstatesPrefetch32","cart","save","DMA_REGISTER","core","io","DMA0CNT_HI","DMA1CNT_HI","DMA2CNT_HI","DMA3CNT_HI","freeze","Serializer","prefix","defrost","frost","ram","iram","loadBios","real","loadRom","title","maker","saveType","lo","hi","String","fromCharCode","next","state","terminal","FlashSavedata","SRAMSavedata","EEPROMSavedata","loadSavedata","maskedOffset","waitPrefetch","cycles","waitPrefetch32","wait","wait32","waitSeq","waitSeq32","waitMul","rs","waitMulti32","seq","addressToPage","accessPage","pageId","thumb","arm","scheduleDma","number","info","timing","serviceDma","WARN","irq","audio","scheduleFIFODma","video","scheduleVCaptureDma","dma","runHblankDmas","enable","runVblankDmas","word","width","sourceOffset","srcControl","destOffset","dstControl","wordsRemaining","nextCount","source","nextSource","dest","nextDest","sourceRegion","destRegion","sourceBlock","destBlock","sourceView","destView","sourceMask","destMask","endPage","setUint16","doIrq","nextIRQ","count","repeat","registers","adjustTimings","sram","ws0","ws0seq","ws1","ws1seq","ws2","ws2seq","prefetch","saveNeedsFlush","writePending","flushSave","GameBoyAdvanceGPIO","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","_typeof2","obj","iterator","_typeof","isArray","_arr","_n","_d","_e","_s","_i","done","push","err","TypeError","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","Error","getShim","isRequired","ReactPropTypes","bool","func","string","symbol","any","arrayOf","element","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","noop","nextTick","args","arguments","apply","browser","env","argv","version","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","__webpack_amd_options__","ARMCore","SP","LR","MODE_THUMB","MODE_USER","MODE_FIQ","MODE_IRQ","MODE_SUPERVISOR","MODE_ABORT","MODE_UNDEFINED","MODE_SYSTEM","BANK_NONE","BANK_FIQ","BANK_IRQ","BANK_SUPERVISOR","BANK_ABORT","BANK_UNDEFINED","UNALLOC_MASK","USER_MASK","PRIV_MASK","STATE_MASK","WORD_SIZE_ARM","WORD_SIZE_THUMB","BASE_RESET","BASE_UNDEF","BASE_SWI","BASE_PABT","BASE_DABT","BASE_IRQ","BASE_FIQ","armCompiler","ARMCoreArm","thumbCompiler","ARMCoreThumb","generateConds","Int32Array","resetCPU","startOffset","loadInstruction","loadInstructionArm","cpsrI","cpsrF","cpsrV","cpsrC","cpsrZ","cpsrN","bankedRegisters","spsr","bankedSPSRs","shifterOperand","shifterCarryOut","pageRegion","instruction","step","conditionPassed","writesPC","pc","fixedJump","updateTimers","fetchPage","pageMask","compileArm","opcode","loadInstructionThumb","compileThumb","selectBank","switchExecMode","newMode","switchMode","newBank","oldBank","oldFiqBank","newFiqBank","packCPSR","unpackCPSR","testIRQ","hasSPSR","raiseIRQ","cpsr","raiseTrap","badOp","conds","barrelShiftImmediate","shiftType","immediate","rm","shiftOp","op","condOp","constructBX","rd","rn","constructSWPB","constructSWP","constructMUL","constructMULS","constructMLA","constructMLAS","constructUMULL","constructUMULLS","constructUMLAL","constructUMLALS","constructSMULL","constructSMULLS","constructSMLAL","constructSMLALS","load","loOffset","h","w","constructAddressingMode23Immediate","constructAddressingMode23Register","constructLDRSH","constructLDRH","constructLDRSB","constructSTRH","shiftImmediate","constructAddressingMode2RegisterShifted","constructLDRB","constructLDR","constructSTRB","constructSTR","user","overlap","constructAddressingMode4Writeback","constructAddressingMode4","constructLDMS","constructLDM","constructSTMS","constructSTM","constructBL","constructB","constructSWI","constructAddressingMode1ImmediateRotate","constructAddressingMode1Immediate","constructAddressingMode1LSL","constructAddressingMode1LSR","constructAddressingMode1ASR","constructAddressingMode1ROR","constructANDS","constructAND","constructEORS","constructEOR","constructSUBS","constructSUB","constructRSBS","constructRSB","constructADDS","constructADD","constructADCS","constructADC","constructSBCS","constructSBC","constructRSCS","constructRSC","constructTST","constructTEQ","constructCMP","constructCMN","constructORRS","constructORR","constructMOVS","constructMOV","constructBICS","constructBIC","constructMVNS","constructMVN","rotateImm","constructMSR","constructMRS","constructLSL2","constructLSR2","constructASR2","constructROR","constructNEG","constructCMP2","constructADD4","constructCMP3","constructMOV3","constructADD3","constructSUB3","constructADD1","constructMOV2","constructSUB1","constructMOV1","constructCMP1","constructADD2","constructSUB2","constructLDR3","constructSTR2","constructSTRH2","constructSTRB2","constructLDR2","constructLDRH2","constructLDRB2","constructLDRB1","constructLDR1","constructSTRB1","constructSTR1","constructPOP","constructPUSH","constructLDRH1","constructSTRH1","constructLDR4","constructSTR3","constructADD6","constructADD5","constructADD7","constructLDMIA","constructSTMIA","cond","constructB1","constructB2","constructBL1","constructBL2","constructLSL1","constructLSR1","constructASR1","addressingMode23Immediate","addr","addressingMode23Register","addressingMode2RegisterShifted","writePC","shift","shiftVal","writeInitial","aluOut","total","f","operand","carry","Math","floor","swi32","oldD","oldDn","dn","mn","misalign","an","r4","swi","GameBoyAdvanceIO","DISPCNT","GREENSWP","DISPSTAT","VCOUNT","BG0CNT","BG1CNT","BG2CNT","BG3CNT","BG0HOFS","BG0VOFS","BG1HOFS","BG1VOFS","BG2HOFS","BG2VOFS","BG3HOFS","BG3VOFS","BG2PA","BG2PB","BG2PC","BG2PD","BG2X_LO","BG2X_HI","BG2Y_LO","BG2Y_HI","BG3PA","BG3PB","BG3PC","BG3PD","BG3X_LO","BG3X_HI","BG3Y_LO","BG3Y_HI","WIN0H","WIN1H","WIN0V","WIN1V","WININ","WINOUT","MOSAIC","BLDCNT","BLDALPHA","BLDY","SOUND1CNT_LO","SOUND1CNT_HI","SOUND1CNT_X","SOUND2CNT_LO","SOUND2CNT_HI","SOUND3CNT_LO","SOUND3CNT_HI","SOUND3CNT_X","SOUND4CNT_LO","SOUND4CNT_HI","SOUNDCNT_LO","SOUNDCNT_HI","SOUNDCNT_X","SOUNDBIAS","WAVE_RAM0_LO","WAVE_RAM0_HI","WAVE_RAM1_LO","WAVE_RAM1_HI","WAVE_RAM2_LO","WAVE_RAM2_HI","WAVE_RAM3_LO","WAVE_RAM3_HI","FIFO_A_LO","FIFO_A_HI","FIFO_B_LO","FIFO_B_HI","DMA0SAD_LO","DMA0SAD_HI","DMA0DAD_LO","DMA0DAD_HI","DMA0CNT_LO","DMA1SAD_LO","DMA1SAD_HI","DMA1DAD_LO","DMA1DAD_HI","DMA1CNT_LO","DMA2SAD_LO","DMA2SAD_HI","DMA2DAD_LO","DMA2DAD_HI","DMA2CNT_LO","DMA3SAD_LO","DMA3SAD_HI","DMA3DAD_LO","DMA3DAD_HI","DMA3CNT_LO","TM0CNT_LO","TM0CNT_HI","TM1CNT_LO","TM1CNT_HI","TM2CNT_LO","TM2CNT_HI","TM3CNT_LO","TM3CNT_HI","SIODATA32_LO","SIOMULTI0","SIODATA32_HI","SIOMULTI1","SIOMULTI2","SIOMULTI3","SIOCNT","SIOMLT_SEND","SIODATA8","RCNT","JOYCNT","JOY_RECV","JOY_TRANS","JOYSTAT","KEYINPUT","KEYCNT","IE","IF","WAITCNT","IME","POSTFLG","HALTCNT","DEFAULT_DISPCNT","DEFAULT_SOUNDBIAS","DEFAULT_BGPA","DEFAULT_BGPD","DEFAULT_RCNT","Uint16Array","STUB","odd","readDisplayStat","vcount","timerRead","sio","readSIOCNT","keypad","pollGamepads","currentDown","read","STUB_REG","halt","renderPath","writeDisplayControl","DISPSTAT_MASK","writeDisplayStat","writeBackgroundControl","writeBackgroundHOffset","writeBackgroundVOffset","writeBackgroundRefX","writeBackgroundRefY","writeBackgroundParamA","writeBackgroundParamB","writeBackgroundParamC","writeBackgroundParamD","writeWin0H","writeWin1H","writeWin0V","writeWin1V","writeWinIn","writeWinOut","writeBlendControl","writeBlendAlpha","writeBlendY","writeMosaic","writeSquareChannelSweep","writeSquareChannelDLE","writeSquareChannelFC","writeChannel3Lo","writeChannel3Hi","writeChannel3X","writeChannel4LE","writeChannel4FC","writeSoundControlLo","writeSoundControlHi","writeEnable","writeWaveData","dmaSetWordCount","dmaWriteControl","timerSetReload","timerWriteControl","setMode","writeRCNT","writeSIOCNT","setInterruptsEnabled","dismissIRQs","masterEnable","dmaSetSourceAddress","dmaSetDestAddress","appendToFifoA","appendToFifoB","GameBoyAdvanceAudio","AudioContext","webkitAudioContext","self","context","bufferSize","maxSamples","buffers","Float32Array","sampleMask","createScriptProcessor","jsAudio","createJavaScriptNode","onaudioprocess","audioProcess","masterVolume","SOUND_MAX","FIFO_MAX","PSG_MAX","fifoA","fifoB","fifoASample","fifoBSample","enabled","disconnect","destination","enableChannel3","enableChannel4","enableChannelA","enableChannelB","enableRightChannelA","enableLeftChannelA","enableRightChannelB","enableLeftChannelB","playingChannel3","playingChannel4","volumeLeft","volumeRight","ratioChannelA","ratioChannelB","enabledLeft","enabledRight","dmaA","dmaB","soundTimerA","soundTimerB","soundRatio","soundBias","squareChannels","playing","sample","duty","increment","initialVolume","volume","frequency","interval","sweepSteps","sweepIncrement","sweepInterval","doSweep","raise","lower","nextStep","timed","end","waveData","channel3Dimension","channel3Bank","channel3Volume","channel3Interval","channel3Next","channel3Length","channel3Timed","channel3End","channel3Pointer","channel3Sample","cpuFrequency","FREQUENCY","channel4","lfsr","nextEvent","nextSample","outputPointer","samplePointer","backup","totalSamples","sampleRate","sampleInterval","resampleRatio","pause","paused","connect","channel","Infinity","updateSquareChannel","channel3Write","updateEnvelope","ceil","pollNextEvent","masterVolumeLeft","masterVolumeRight","setSquareChannelEnabled","setChannel4Enabled","resetSquareChannel","channelId","nextSweep","writeChannelLE","resetChannel3","data","resetChannel4","sampleFifoA","sampleFifoB","sampleLeft","sampleRight","max","min","audioProcessingEvent","left","outputBuffer","getChannelData","right","GameBoyAdvanceVideo","GameBoyAdvanceSoftwareRenderer","CYCLES_PER_PIXEL","HORIZONTAL_PIXELS","HBLANK_PIXELS","HDRAW_LENGTH","HBLANK_LENGTH","HORIZONTAL_LENGTH","VERTICAL_PIXELS","VBLANK_PIXELS","VERTICAL_TOTAL_PIXELS","TOTAL_LENGTH","drawCallback","vblankCallback","inHblank","inVblank","vcounter","vblankIRQ","hblankIRQ","vcounterIRQ","vcountSetting","lastHblank","nextHblank","nextHblankIRQ","nextVblankIRQ","nextVcounterIRQ","encodeBase64","decodeBase64","setBacking","backing","pixelData","createImageData","finishDraw","IRQ_VBLANK","startDraw","IRQ_VCOUNTER","drawScanline","IRQ_HBLANK","putImageData","MemoryProxy","owner","blockSize","GameBoyAdvanceRenderProxy","worker","Worker","currentFrame","delay","skipFrame","dirty","handlers","finish","caller","onmessage","combine","combined","set","replace","memoryDirtied","palette","oam","vram","scanlineQueue","postMessage","bg","BGCNT","BGHOFS","BGVOFS","BGX","BGY","BGPA","BGPB","BGPC","BGPD","clearSubsets","regions","y","scanlines","frame","MemoryAligned16","GameBoyAdvanceVRAM","GameBoyAdvanceOAM","objs","GameBoyAdvanceOBJ","scalerot","GameBoyAdvancePalette","colors","adjustedColors","passthroughColors","blendY","TILE_OFFSET","x","doublesize","disable","mosaic","multipalette","scalerotParam","hflip","vflip","tileBase","priority","drawScanlineNormal","pushPixel","cachedWidth","cachedHeight","GameBoyAdvanceOBJLayer","LAYER_OBJ","objwin","insert","overwrite","wasScalerot","scalerotOam","recalcSize","drawScanlineAffine","adjustColor","convert16To32","input","mix","aWeight","aColor","bWeight","bColor","ar","ag","ab","br","bb","makeDarkPalettes","layers","adjustColorDark","resetPalettes","resetPaletteLayers","makeBrightPalettes","adjustColorBright","makeNormalPalettes","makeSpecialPalette","layer","makeNormalPalette","outPalette","inPalette","accessColor","color","setBlendY","yOff","underflow","target2","TARGET1_MASK","blendMode","alphaEnabled","target1","localX","localY","totalWidth","mosaicX","tileOffset","localYLo","paletteShift","objCharacterMapping","objMosaicX","tileRow","accessTile","yDiff","totalHeight","drawWidth","objMosaicY","wrappedY","mosaicY","OBJWIN_MASK","objComparator","LAYER_BG0","LAYER_BG1","LAYER_BG2","LAYER_BG3","LAYER_BACKDROP","LAYER_MASK","BACKGROUND_MASK","TARGET2_MASK","WRITTEN_MASK","PRIORITY_MASK","drawBackdrop","stencil","blendB","blendA","objLayers","objwinLayer","backgroundMode","displayFrameSelect","hblankIntervalFree","forcedBlank","win0","win1","win0Left","win0Right","win1Left","win1Right","win0Top","win0Bottom","win1Top","win1Bottom","windows","special","bgMosaicX","bgMosaicY","charBase","screenBase","overflow","refx","refy","dx","dmx","dy","dmy","sx","sy","drawScanlineBGMode0","bgModes","drawScanlineBGMode2","drawScanlineBGMode3","drawScanlineBGMode4","drawScanlineBGMode5","drawLayers","objwinActive","scanline","sharedColor","sharedMap","tile","SIZE_PALETTE","resetLayers","bgData","sort","layerComparator","writeWindow","setBlendEnabled","override","diff","accessMapMode0","base","yBase","out","accessMapMode1","map","row","raw","oldStencil","blend","pixel","highPriority","identity","drawScanlineBlank","prepareScanline","localXLo","xOff","xMask","sizeAdjusted","firstStart","firstEnd","lastStart","lastEnd","finishScanline","bd","xx","isTarget2","GameBoyAdvanceInterruptHandler","IRQ_TIMER0","IRQ_TIMER1","IRQ_TIMER2","IRQ_TIMER3","IRQ_SIO","IRQ_DMA0","IRQ_DMA1","IRQ_DMA2","IRQ_DMA3","IRQ_KEYPAD","IRQ_GAMEPAK","MASK_VBLANK","MASK_HBLANK","MASK_VCOUNTER","MASK_TIMER0","MASK_TIMER1","MASK_TIMER2","MASK_TIMER3","MASK_SIO","MASK_DMA0","MASK_DMA1","MASK_DMA2","MASK_DMA3","MASK_KEYPAD","MASK_GAMEPAK","enabledIRQs","interruptFlags","drq","timersEnabled","timers","reload","oldReload","prescaleBits","countUp","lastEvent","overflowInterval","springIRQ","resetSP","timer","flag","result","mod","abs","sqrt","atan2","PI","wordsize","ox","oy","cx","cy","rx","ry","theta","cos","sin","lz77","huffman","rl","pow","test","ASSERT","waitForIRQ","irqPending","irqType","irqMask","control","currentDma","wasEnabled","currentTimer","oldPrescale","unitsize","blockheader","disp","loaded","remaining","sPointer","dPointer","blocksRemaining","header","bits","padding","tree","treesize","bitsRemaining","readBits","bitsSeen","bitstream","lTerm","rTerm","GameBoyAdvanceKeypad","KEYCODE_LEFT","KEYCODE_UP","KEYCODE_RIGHT","KEYCODE_DOWN","KEYCODE_START","KEYCODE_SELECT","KEYCODE_A","KEYCODE_B","KEYCODE_L","KEYCODE_R","GAMEPAD_LEFT","GAMEPAD_UP","GAMEPAD_RIGHT","GAMEPAD_DOWN","GAMEPAD_START","GAMEPAD_SELECT","GAMEPAD_A","GAMEPAD_B","GAMEPAD_L","GAMEPAD_R","GAMEPAD_THRESHOLD","A","B","SELECT","START","RIGHT","LEFT","UP","DOWN","R","L","eatInput","gamepads","keyboardHandler","toggle","keyCode","preventDefault","gamepadHandler","gamepad","buttons","gamepadConnectHandler","gamepadDisconnectHandler","filter","other","navigatorList","navigator","webkitGetGamepads","getGamepads","registerHandlers","addEventListener","GameBoyAdvanceSIO","SIO_NORMAL_8","SIO_NORMAL_32","SIO_MULTI","SIO_UART","SIO_GPIO","SIO_JOYBUS","BAUD","sd","multiplayer","baud","si","id","error","busy","states","linkLayer","INFO","setBaud","startMultiplayerTransfer","slot","GameBoyAdvanceRTC","pins","direction","totalBytes","bytesRemaining","transferStep","reading","bitsRead","command","time","readWrite","device","setPins","setDirection","old","outputPins","nybble","processByte","sioOutputPin","updateClock","outputByte","date","Date","bcd","getFullYear","getMonth","getDate","getDay","getHours","getMinutes","getSeconds","binary","counter","GameBoyAdvance","LOG_ERROR","LOG_WARN","LOG_STUB","LOG_INFO","LOG_DEBUG","SYS_ID","logLevel","doStep","waitFrame","seenFrame","seenSave","lastVblank","reportFPS","throttle","queueFrame","URL","webkitURL","setCanvas","canvas","offsetWidth","offsetHeight","indirectCanvas","document","createElement","setAttribute","targetCanvas","setCanvasDirect","targetContext","getContext","drawImage","setBios","setRom","reset","retrieveSavedata","hasRom","loadRomFromFile","romBuffer","callback","seen","advanceFrame","storeSavedata","runStable","runFunc","frames","now","exception","ERROR","stack","logStackTrace","setSavedata","loadSavedataFromFile","saveFile","reader","FileReader","onload","target","readAsArrayBuffer","decodeSavedata","match","atob","triplet","wordstring","splice","btoa","join","downloadSavedata","url","createObjectURL","Blob","open","localStorage","log","level","setLogger","logger","warn","DEBUG","ASSERT_UNREACHED","base64Data","from","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","byteOffset","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","fromString","isBuffer","checked","copy","val","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","isNaN","arrayIndexOf","indexOf","lastIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","hexWrite","Number","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","utf16leToBytes","fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","ret","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","toByteArray","trim","stringtrim","base64clean","src","dst","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","lookup","num","output","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","fadeOut","nextId","kill","getElementById","e2","removeSelf","parentElement","removeChild","removeEventListener","removeAttribute","TAG_INT","TAG_STRING","TAG_STRUCT","TAG_BLOB","TAG_BOOLEAN","TYPE","pointer","top","pack","pack8","setUint8","serialize","stream","tag","body","head","console","unshift","deserialize","blob","deserealizeStream","getUint32","advance","mark","readString","pop","serializePNG","pixels","getImageData","height","transparent","bytesInCanvas","multiplier","edges","pixelPointer","newPixels","oldY","oldX","byte","toDataURL","deserializePNG","image","newBlob","readAsDataURL","amount","COMMAND_WIPE","COMMAND_ERASE_SECTOR","COMMAND_ERASE","COMMAND_ID","COMMAND_WRITE","COMMAND_SWITCH_BANK","COMMAND_TERMINATE_ID","ID_PANASONIC","ID_SANYO","bank0","bank1","bank","idMode","second","pendingCommand","writeAddress","readBitsRemaining","readAddress","commandBitsRemaining","realSize","addressBits","COMMAND_NULL","COMMAND_PENDING","COMMAND_READ_PENDING","COMMAND_READ","current","drawEmulator","gba","runCommands","screen","getAttribute","crash","insertBefore","file","biosBin","webkitIsFullScreen","onclick","click","clearRect","drawInterval","setInterval","xDiff","xFactor","yFactor","clearInterval","lcdFade","setVolume","ReactGbaJs","romBufferMemory","useState","setGba","useEffect","newGbaInstance","propTypes"],"mappings":"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","file":"react-gbajs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","module.exports = require(\"react\");","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function() {\n  'use strict';\n\n  var root = typeof window === 'object' ? window : {};\n  var NODE_JS = !root.JS_SHA1_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  }\n  var COMMON_JS = !root.JS_SHA1_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  var createOutputMethod = function (outputType) {\n    return function (message) {\n      return new Sha1(true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function () {\n    var method = createOutputMethod('hex');\n    if (NODE_JS) {\n      method = nodeWrap(method);\n    }\n    method.create = function () {\n      return new Sha1();\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash('sha1').update(message, 'utf8').digest('hex');\n      } else if (message.constructor === ArrayBuffer) {\n        message = new Uint8Array(message);\n      } else if (message.length === undefined) {\n        return method(message);\n      }\n      return crypto.createHash('sha1').update(new Buffer(message)).digest('hex');\n    };\n    return nodeMethod;\n  };\n\n  function Sha1(sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    this.h0 = 0x67452301;\n    this.h1 = 0xEFCDAB89;\n    this.h2 = 0x98BADCFE;\n    this.h3 = 0x10325476;\n    this.h4 = 0xC3D2E1F0;\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n  }\n\n  Sha1.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString = typeof(message) !== 'string';\n    if (notString && message.constructor === root.ArrayBuffer) {\n      message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if(notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha1.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha1.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n\n    for(j = 16; j < 80; ++j) {\n      t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n      blocks[j] =  (t << 1) | (t >>> 31);\n    }\n\n    for(j = 0; j < 20; j += 5) {\n      f = (b & c) | ((~b) & d);\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e + 1518500249 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = (a & b) | ((~a) & c);\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = (e & a) | ((~e) & b);\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = (d & e) | ((~d) & a);\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = (c & d) | ((~c) & e);\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    for(; j < 40; j += 5) {\n      f = b ^ c ^ d;\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e + 1859775393 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = a ^ b ^ c;\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = e ^ a ^ b;\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = d ^ e ^ a;\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = c ^ d ^ e;\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    for(; j < 60; j += 5) {\n      f = (b & c) | (b & d) | (c & d);\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e - 1894007588 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = (a & b) | (a & c) | (b & c);\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = (e & a) | (e & b) | (a & b);\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = (d & e) | (d & a) | (e & a);\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = (c & d) | (c & e) | (d & e);\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    for(; j < 80; j += 5) {\n      f = b ^ c ^ d;\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e - 899497514 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = a ^ b ^ c;\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d - 899497514 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = e ^ a ^ b;\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c - 899497514 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = d ^ e ^ a;\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b - 899497514 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = c ^ d ^ e;\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a - 899497514 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n  };\n\n  Sha1.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n\n    return HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n           HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n           HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n           HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n           HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n           HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n           HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n           HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n           HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n           HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n           HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n           HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n           HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n           HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n           HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n           HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n           HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n           HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n           HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n           HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F];\n  };\n\n  Sha1.prototype.toString = Sha1.prototype.hex;\n\n  Sha1.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n\n    return [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF\n    ];\n  };\n\n  Sha1.prototype.array = Sha1.prototype.digest;\n\n  Sha1.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n  };\n\n  var exports = createMethod();\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha1 = exports;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","window.MemoryView = function MemoryView(memory, offset) {\n\tthis.buffer = memory;\n\tthis.view = new DataView(this.buffer, typeof(offset) === \"number\" ? offset : 0);\n\tthis.mask = memory.byteLength - 1;\n\tthis.resetMask();\n};\n\nMemoryView.prototype.resetMask = function() {\n\tthis.mask8 = this.mask & 0xFFFFFFFF;\n\tthis.mask16 = this.mask & 0xFFFFFFFE;\n\tthis.mask32 = this.mask & 0xFFFFFFFC;\n};\n\nMemoryView.prototype.load8 = function(offset) {\n\treturn this.view.getInt8(offset & this.mask8);\n};\n\nMemoryView.prototype.load16 = function(offset) {\n\t// Unaligned 16-bit loads are unpredictable...let's just pretend they work\n\treturn this.view.getInt16(offset & this.mask, true);\n};\n\nMemoryView.prototype.loadU8 = function(offset) {\n\treturn this.view.getUint8(offset & this.mask8);\n};\n\nMemoryView.prototype.loadU16 = function(offset) {\n\t// Unaligned 16-bit loads are unpredictable...let's just pretend they work\n\treturn this.view.getUint16(offset & this.mask, true);\n};\n\nMemoryView.prototype.load32 = function(offset) {\n\t// Unaligned 32-bit loads are \"rotated\" so they make some semblance of sense\n\tvar rotate = (offset & 3) << 3;\n\tvar mem = this.view.getInt32(offset & this.mask32, true);\n\treturn (mem >>> rotate) | (mem << (32 - rotate));\n};\n\nMemoryView.prototype.store8 = function(offset, value) {\n\tthis.view.setInt8(offset & this.mask8, value);\n};\n\nMemoryView.prototype.store16 = function(offset, value) {\n\tthis.view.setInt16(offset & this.mask16, value, true);\n};\n\nMemoryView.prototype.store32 = function(offset, value) {\n\tthis.view.setInt32(offset & this.mask32, value, true);\n};\n\nMemoryView.prototype.invalidatePage = function(address) {};\n\nMemoryView.prototype.replaceData = function(memory, offset) {\n\tthis.buffer = memory;\n\tthis.view = new DataView(this.buffer, typeof(offset) === \"number\" ? offset : 0);\n\tif (this.icache) {\n\t\tthis.icache = new Array(this.icache.length);\n\t}\n};\n\nwindow.MemoryBlock = function MemoryBlock(size, cacheBits) {\n\tMemoryView.call(this, new ArrayBuffer(size));\n\tthis.ICACHE_PAGE_BITS = cacheBits;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\tthis.icache = new Array(size >> (this.ICACHE_PAGE_BITS + 1));\n};\n\nMemoryBlock.prototype = Object.create(MemoryView.prototype);\n\nMemoryBlock.prototype.invalidatePage = function(address) {\n\tvar page = this.icache[(address & this.mask) >> this.ICACHE_PAGE_BITS];\n\tif (page) {\n\t\tpage.invalid = true;\n\t}\n};\n\nfunction ROMView(rom, offset) {\n\tMemoryView.call(this, rom, offset);\n\tthis.ICACHE_PAGE_BITS = 10;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\tthis.icache = new Array(rom.byteLength >> (this.ICACHE_PAGE_BITS + 1));\n\tthis.mask = 0x01FFFFFF;\n\tthis.resetMask();\n};\n\nROMView.prototype = Object.create(MemoryView.prototype);\n\nROMView.prototype.store8 = function(offset, value) {};\n\nROMView.prototype.store16 = function(offset, value) {\n\tif (offset < 0xCA && offset >= 0xC4) {\n\t\tif (!this.gpio) {\n\t\t\tthis.gpio = this.mmu.allocGPIO(this);\n\t\t}\n\t\tthis.gpio.store16(offset, value);\n\t}\n};\n\nROMView.prototype.store32 = function(offset, value) {\n\tif (offset < 0xCA && offset >= 0xC4) {\n\t\tif (!this.gpio) {\n\t\t\tthis.gpio = this.mmu.allocGPIO(this);\n\t\t}\n\t\tthis.gpio.store32(offset, value);\n\t}\n};\n\nfunction BIOSView(rom, offset) {\n\tMemoryView.call(this, rom, offset);\n\tthis.ICACHE_PAGE_BITS = 16;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\tthis.icache = new Array(1);\n};\n\nBIOSView.prototype = Object.create(MemoryView.prototype);\n\nBIOSView.prototype.load8 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getInt8(offset);\n};\n\nBIOSView.prototype.load16 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getInt16(offset, true);\n};\n\nBIOSView.prototype.loadU8 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getUint8(offset);\n};\n\nBIOSView.prototype.loadU16 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getUint16(offset, true);\n};\n\nBIOSView.prototype.load32 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getInt32(offset, true);\n};\n\nBIOSView.prototype.store8 = function(offset, value) {};\n\nBIOSView.prototype.store16 = function(offset, value) {};\n\nBIOSView.prototype.store32 = function(offset, value) {};\n\nfunction BadMemory(mmu, cpu) {\n\tthis.cpu = cpu;\n\tthis.mmu = mmu\n};\n\nBadMemory.prototype.load8 = function(offset) {\n\treturn this.mmu.load8(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x3));\n};\n\nBadMemory.prototype.load16 = function(offset) {\n\treturn this.mmu.load16(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x2));\n};\n\nBadMemory.prototype.loadU8 = function(offset) {\n\treturn this.mmu.loadU8(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x3));\n};\n\nBadMemory.prototype.loadU16 = function(offset) {\n\treturn this.mmu.loadU16(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x2));\n};\n\nBadMemory.prototype.load32 = function(offset) {\n\tif (this.cpu.execMode == this.cpu.MODE_ARM) {\n\t\treturn this.mmu.load32(this.cpu.gprs[this.cpu.gprs.PC] - this.cpu.instructionWidth);\n\t} else {\n\t\tvar halfword = this.mmu.loadU16(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth);\n\t\treturn halfword | (halfword << 16);\n\t}\n};\n\nBadMemory.prototype.store8 = function(offset, value) {};\n\nBadMemory.prototype.store16 = function(offset, value) {};\n\nBadMemory.prototype.store32 = function(offset, value) {};\n\nBadMemory.prototype.invalidatePage = function(address) {};\n\nwindow.GameBoyAdvanceMMU = function GameBoyAdvanceMMU() {\n\tthis.REGION_BIOS = 0x0;\n\tthis.REGION_WORKING_RAM = 0x2;\n\tthis.REGION_WORKING_IRAM = 0x3;\n\tthis.REGION_IO = 0x4;\n\tthis.REGION_PALETTE_RAM = 0x5;\n\tthis.REGION_VRAM = 0x6;\n\tthis.REGION_OAM = 0x7;\n\tthis.REGION_CART0 = 0x8;\n\tthis.REGION_CART1 = 0xA;\n\tthis.REGION_CART2 = 0xC;\n\tthis.REGION_CART_SRAM = 0xE;\n\n\tthis.BASE_BIOS = 0x00000000;\n\tthis.BASE_WORKING_RAM = 0x02000000;\n\tthis.BASE_WORKING_IRAM = 0x03000000;\n\tthis.BASE_IO = 0x04000000;\n\tthis.BASE_PALETTE_RAM = 0x05000000;\n\tthis.BASE_VRAM = 0x06000000;\n\tthis.BASE_OAM = 0x07000000;\n\tthis.BASE_CART0 = 0x08000000;\n\tthis.BASE_CART1 = 0x0A000000;\n\tthis.BASE_CART2 = 0x0C000000;\n\tthis.BASE_CART_SRAM = 0x0E000000;\n\n\tthis.BASE_MASK = 0x0F000000;\n\tthis.BASE_OFFSET = 24;\n\tthis.OFFSET_MASK = 0x00FFFFFF;\n\n\tthis.SIZE_BIOS = 0x00004000;\n\tthis.SIZE_WORKING_RAM = 0x00040000;\n\tthis.SIZE_WORKING_IRAM = 0x00008000;\n\tthis.SIZE_IO = 0x00000400;\n\tthis.SIZE_PALETTE_RAM = 0x00000400;\n\tthis.SIZE_VRAM = 0x00018000;\n\tthis.SIZE_OAM = 0x00000400;\n\tthis.SIZE_CART0 = 0x02000000;\n\tthis.SIZE_CART1 = 0x02000000;\n\tthis.SIZE_CART2 = 0x02000000;\n\tthis.SIZE_CART_SRAM = 0x00008000;\n\tthis.SIZE_CART_FLASH512 = 0x00010000;\n\tthis.SIZE_CART_FLASH1M = 0x00020000;\n\tthis.SIZE_CART_EEPROM = 0x00002000;\n\n\tthis.DMA_TIMING_NOW = 0;\n\tthis.DMA_TIMING_VBLANK = 1;\n\tthis.DMA_TIMING_HBLANK = 2;\n\tthis.DMA_TIMING_CUSTOM = 3;\n\n\tthis.DMA_INCREMENT = 0;\n\tthis.DMA_DECREMENT = 1;\n\tthis.DMA_FIXED = 2;\n\tthis.DMA_INCREMENT_RELOAD = 3;\n\n\tthis.DMA_OFFSET = [ 1, -1, 0, 1 ];\n\n\tthis.WAITSTATES = [ 0, 0, 2, 0, 0, 0, 0, 0, 4, 4, 4, 4, 4, 4, 4 ];\n\tthis.WAITSTATES_32 = [ 0, 0, 5, 0, 0, 1, 0, 1, 7, 7, 9, 9, 13, 13, 8 ];\n\tthis.WAITSTATES_SEQ = [ 0, 0, 2, 0, 0, 0, 0, 0, 2, 2, 4, 4, 8, 8, 4 ];\n\tthis.WAITSTATES_SEQ_32 = [ 0, 0, 5, 0, 0, 1, 0, 1, 5, 5, 9, 9, 17, 17, 8 ];\n\tthis.NULLWAIT = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\tfor (var i = 15; i < 256; ++i) {\n\t\tthis.WAITSTATES[i] = 0;\n\t\tthis.WAITSTATES_32[i] = 0;\n\t\tthis.WAITSTATES_SEQ[i] = 0;\n\t\tthis.WAITSTATES_SEQ_32[i] = 0;\n\t\tthis.NULLWAIT[i] = 0;\n\t}\n\n\tthis.ROM_WS = [ 4, 3, 2, 8 ];\n\tthis.ROM_WS_SEQ = [\n\t\t[ 2, 1 ],\n\t\t[ 4, 1 ],\n\t\t[ 8, 1 ]\n\t];\n\n\tthis.ICACHE_PAGE_BITS = 8;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\n\tthis.bios = null;\n};\n\nGameBoyAdvanceMMU.prototype.mmap = function(region, object) {\n\tthis.memory[region] = object;\n}\n\nGameBoyAdvanceMMU.prototype.clear = function() {\n\tthis.badMemory = new BadMemory(this, this.cpu);\n\tthis.memory = [\n\t\tthis.bios,\n\t\tthis.badMemory, // Unused\n\t\tnew MemoryBlock(this.SIZE_WORKING_RAM, 9),\n\t\tnew MemoryBlock(this.SIZE_WORKING_IRAM, 7),\n\t\tnull, // This is owned by GameBoyAdvanceIO\n\t\tnull, // This is owned by GameBoyAdvancePalette\n\t\tnull, // This is owned by GameBoyAdvanceVRAM\n\t\tnull, // This is owned by GameBoyAdvanceOAM\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory // Unused\n\t];\n\tfor (var i = 16; i < 256; ++i) {\n\t\tthis.memory[i] = this.badMemory;\n\t}\n\n\tthis.waitstates = this.WAITSTATES.slice(0);\n\tthis.waitstatesSeq = this.WAITSTATES_SEQ.slice(0);\n\tthis.waitstates32 = this.WAITSTATES_32.slice(0);\n\tthis.waitstatesSeq32 = this.WAITSTATES_SEQ_32.slice(0);\n\tthis.waitstatesPrefetch = this.WAITSTATES_SEQ.slice(0);\n\tthis.waitstatesPrefetch32 = this.WAITSTATES_SEQ_32.slice(0);\n\n\tthis.cart = null;\n\tthis.save = null;\n\n\tthis.DMA_REGISTER = [\n\t\tthis.core.io.DMA0CNT_HI >> 1,\n\t\tthis.core.io.DMA1CNT_HI >> 1,\n\t\tthis.core.io.DMA2CNT_HI >> 1,\n\t\tthis.core.io.DMA3CNT_HI >> 1\n\t];\n};\n\nGameBoyAdvanceMMU.prototype.freeze = function() {\n\treturn {\n\t\t'ram': Serializer.prefix(this.memory[this.REGION_WORKING_RAM].buffer),\n\t\t'iram': Serializer.prefix(this.memory[this.REGION_WORKING_IRAM].buffer),\n\t};\n};\n\nGameBoyAdvanceMMU.prototype.defrost = function(frost) {\n\tthis.memory[this.REGION_WORKING_RAM].replaceData(frost.ram);\n\tthis.memory[this.REGION_WORKING_IRAM].replaceData(frost.iram);\n};\n\nGameBoyAdvanceMMU.prototype.loadBios = function(bios, real) {\n\tthis.bios = new BIOSView(bios);\n\tthis.bios.real = !!real;\n};\n\nGameBoyAdvanceMMU.prototype.loadRom = function(rom, process) {\n\tvar cart = {\n\t\ttitle: null,\n\t\tcode: null,\n\t\tmaker: null,\n\t\tmemory: rom,\n\t\tsaveType: null,\n\t};\n\n\tvar lo = new ROMView(rom);\n\tif (lo.view.getUint8(0xB2) != 0x96) {\n\t\t// Not a valid ROM\n\t\treturn null;\n\t}\n\tlo.mmu = this; // Needed for GPIO\n\tthis.memory[this.REGION_CART0] = lo;\n\tthis.memory[this.REGION_CART1] = lo;\n\tthis.memory[this.REGION_CART2] = lo;\n\n\tif (rom.byteLength > 0x01000000) {\n\t\tvar hi = new ROMView(rom, 0x01000000);\n\t\tthis.memory[this.REGION_CART0 + 1] = hi;\n\t\tthis.memory[this.REGION_CART1 + 1] = hi;\n\t\tthis.memory[this.REGION_CART2 + 1] = hi;\n\t}\n\n\tif (process) {\n\t\tvar name = '';\n\t\tfor (var i = 0; i < 12; ++i) {\n\t\t\tvar c = lo.loadU8(i + 0xA0);\n\t\t\tif (!c) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tname += String.fromCharCode(c);\n\t\t}\n\t\tcart.title = name;\n\n\t\tvar code = '';\n\t\tfor (var i = 0; i < 4; ++i) {\n\t\t\tvar c = lo.loadU8(i + 0xAC);\n\t\t\tif (!c) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcode += String.fromCharCode(c);\n\t\t}\n\t\tcart.code = code;\n\n\t\tvar maker = '';\n\t\tfor (var i = 0; i < 2; ++i) {\n\t\t\tvar c = lo.loadU8(i + 0xB0);\n\t\t\tif (!c) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmaker += String.fromCharCode(c);\n\t\t}\n\t\tcart.maker = maker;\n\n\t\t// Find savedata type\n\t\tvar state = '';\n\t\tvar next;\n\t\tvar terminal = false;\n\t\tfor (var i = 0xE4; i < rom.byteLength && !terminal; ++i) {\n\t\t\tnext = String.fromCharCode(lo.loadU8(i));\n\t\t\tstate += next;\n\t\t\tswitch (state) {\n\t\t\tcase 'F':\n\t\t\tcase 'FL':\n\t\t\tcase 'FLA':\n\t\t\tcase 'FLAS':\n\t\t\tcase 'FLASH':\n\t\t\tcase 'FLASH_':\n\t\t\tcase 'FLASH5':\n\t\t\tcase 'FLASH51':\n\t\t\tcase 'FLASH512':\n\t\t\tcase 'FLASH512_':\n\t\t\tcase 'FLASH1':\n\t\t\tcase 'FLASH1M':\n\t\t\tcase 'FLASH1M_':\n\t\t\tcase 'S':\n\t\t\tcase 'SR':\n\t\t\tcase 'SRA':\n\t\t\tcase 'SRAM':\n\t\t\tcase 'SRAM_':\n\t\t\tcase 'E':\n\t\t\tcase 'EE':\n\t\t\tcase 'EEP':\n\t\t\tcase 'EEPR':\n\t\t\tcase 'EEPRO':\n\t\t\tcase 'EEPROM':\n\t\t\tcase 'EEPROM_':\n\t\t\t\tbreak;\n\t\t\tcase 'FLASH_V':\n\t\t\tcase 'FLASH512_V':\n\t\t\tcase 'FLASH1M_V':\n\t\t\tcase 'SRAM_V':\n\t\t\tcase 'EEPROM_V':\n\t\t\t\tterminal = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tstate = next;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (terminal) {\n\t\t\tcart.saveType = state;\n\t\t\tswitch (state) {\n\t\t\tcase 'FLASH_V':\n\t\t\tcase 'FLASH512_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new FlashSavedata(this.SIZE_CART_FLASH512);\n\t\t\t\tbreak;\n\t\t\tcase 'FLASH1M_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new FlashSavedata(this.SIZE_CART_FLASH1M);\n\t\t\t\tbreak;\n\t\t\tcase 'SRAM_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new SRAMSavedata(this.SIZE_CART_SRAM);\n\t\t\t\tbreak;\n\t\t\tcase 'EEPROM_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART2 + 1] = new EEPROMSavedata(this.SIZE_CART_EEPROM, this);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!this.save) {\n\t\t\t// Assume we have SRAM\n\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new SRAMSavedata(this.SIZE_CART_SRAM);\n\t\t}\n\t}\n\n\tthis.cart = cart;\n\treturn cart;\n};\n\nGameBoyAdvanceMMU.prototype.loadSavedata = function(save) {\n\tthis.save.replaceData(save);\n};\n\nGameBoyAdvanceMMU.prototype.load8 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].load8(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.load16 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].load16(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.load32 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].load32(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.loadU8 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].loadU8(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.loadU16 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].loadU16(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.store8 = function(offset, value) {\n\tvar maskedOffset = offset & 0x00FFFFFF;\n\tvar memory = this.memory[offset >>> this.BASE_OFFSET];\n\tmemory.store8(maskedOffset, value);\n\tmemory.invalidatePage(maskedOffset);\n};\n\nGameBoyAdvanceMMU.prototype.store16 = function(offset, value) {\n\tvar maskedOffset = offset & 0x00FFFFFE;\n\tvar memory = this.memory[offset >>> this.BASE_OFFSET];\n\tmemory.store16(maskedOffset, value);\n\tmemory.invalidatePage(maskedOffset);\n};\n\nGameBoyAdvanceMMU.prototype.store32 = function(offset, value) {\n\tvar maskedOffset = offset & 0x00FFFFFC;\n\tvar memory = this.memory[offset >>> this.BASE_OFFSET];\n\tmemory.store32(maskedOffset, value);\n\tmemory.invalidatePage(maskedOffset);\n\tmemory.invalidatePage(maskedOffset + 2);\n};\n\nGameBoyAdvanceMMU.prototype.waitPrefetch = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesPrefetch[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitPrefetch32 = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesPrefetch32[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.wait = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstates[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.wait32 = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstates32[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitSeq = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesSeq[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitSeq32 = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesSeq32[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitMul = function(rs) {\n\tif ((rs & 0xFFFFFF00 == 0xFFFFFF00) || !(rs & 0xFFFFFF00)) {\n\t\tthis.cpu.cycles += 1;\n\t} else if ((rs & 0xFFFF0000 == 0xFFFF0000) || !(rs & 0xFFFF0000)) {\n\t\tthis.cpu.cycles += 2;\n\t} else if ((rs & 0xFF000000 == 0xFF000000) || !(rs & 0xFF000000)) {\n\t\tthis.cpu.cycles += 3;\n\t} else {\n\t\tthis.cpu.cycles += 4;\n\t}\n}\n\nGameBoyAdvanceMMU.prototype.waitMulti32 = function(memory, seq) {\n\tthis.cpu.cycles += 1 + this.waitstates32[memory >>> this.BASE_OFFSET];\n\tthis.cpu.cycles += (1 + this.waitstatesSeq32[memory >>> this.BASE_OFFSET]) * (seq - 1);\n};\n\nGameBoyAdvanceMMU.prototype.addressToPage = function(region, address) {\n\treturn address >> this.memory[region].ICACHE_PAGE_BITS;\n};\n\nGameBoyAdvanceMMU.prototype.accessPage = function(region, pageId) {\n\tvar memory = this.memory[region];\n\tvar page = memory.icache[pageId];\n\tif (!page || page.invalid) {\n\t\tpage = {\n\t\t\tthumb: new Array(1 << (memory.ICACHE_PAGE_BITS)),\n\t\t\tarm: new Array(1 << memory.ICACHE_PAGE_BITS - 1),\n\t\t\tinvalid: false\n\t\t}\n\t\tmemory.icache[pageId] = page;\n\t}\n\treturn page;\n};\n\nGameBoyAdvanceMMU.prototype.scheduleDma = function(number, info) {\n\tswitch (info.timing) {\n\tcase this.DMA_TIMING_NOW:\n\t\tthis.serviceDma(number, info);\n\t\tbreak;\n\tcase this.DMA_TIMING_HBLANK:\n\t\t// Handled implicitly\n\t\tbreak;\n\tcase this.DMA_TIMING_VBLANK:\n\t\t// Handled implicitly\n\t\tbreak;\n\tcase this.DMA_TIMING_CUSTOM:\n\t\tswitch (number) {\n\t\tcase 0:\n\t\t\tthis.core.WARN('Discarding invalid DMA0 scheduling');\n\t\t\tbreak;\n\t\tcase 1:\n\t\tcase 2:\n\t\t\tthis.cpu.irq.audio.scheduleFIFODma(number, info);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tthis.cpu.irq.video.scheduleVCaptureDma(dma, info);\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.runHblankDmas = function() {\n\tvar dma;\n\tfor (var i = 0; i < this.cpu.irq.dma.length; ++i) {\n\t\tdma = this.cpu.irq.dma[i];\n\t\tif (dma.enable && dma.timing == this.DMA_TIMING_HBLANK) {\n\t\t\tthis.serviceDma(i, dma);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.runVblankDmas = function() {\n\tvar dma;\n\tfor (var i = 0; i < this.cpu.irq.dma.length; ++i) {\n\t\tdma = this.cpu.irq.dma[i];\n\t\tif (dma.enable && dma.timing == this.DMA_TIMING_VBLANK) {\n\t\t\tthis.serviceDma(i, dma);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.serviceDma = function(number, info) {\n\tif (!info.enable) {\n\t\t// There was a DMA scheduled that got canceled\n\t\treturn;\n\t}\n\n\tvar width = info.width;\n\tvar sourceOffset = this.DMA_OFFSET[info.srcControl] * width;\n\tvar destOffset = this.DMA_OFFSET[info.dstControl] * width;\n\tvar wordsRemaining = info.nextCount;\n\tvar source = info.nextSource & this.OFFSET_MASK;\n\tvar dest = info.nextDest & this.OFFSET_MASK;\n\tvar sourceRegion = info.nextSource >>> this.BASE_OFFSET;\n\tvar destRegion = info.nextDest >>> this.BASE_OFFSET;\n\tvar sourceBlock = this.memory[sourceRegion];\n\tvar destBlock = this.memory[destRegion];\n\tvar sourceView = null;\n\tvar destView = null;\n\tvar sourceMask = 0xFFFFFFFF;\n\tvar destMask = 0xFFFFFFFF;\n\tvar word;\n\n\tif (destBlock.ICACHE_PAGE_BITS) {\n\t\tvar endPage = (dest + wordsRemaining * width) >> destBlock.ICACHE_PAGE_BITS;\n\t\tfor (var i = dest >> destBlock.ICACHE_PAGE_BITS; i <= endPage; ++i) {\n\t\t\tdestBlock.invalidatePage(i << destBlock.ICACHE_PAGE_BITS);\n\t\t}\n\t}\n\n\tif (destRegion == this.REGION_WORKING_RAM || destRegion == this.REGION_WORKING_IRAM) {\n\t\tdestView = destBlock.view;\n\t\tdestMask = destBlock.mask;\n\t}\n\n\tif (sourceRegion == this.REGION_WORKING_RAM || sourceRegion == this.REGION_WORKING_IRAM || sourceRegion == this.REGION_CART0 || sourceRegion == this.REGION_CART1) {\n\t\tsourceView = sourceBlock.view;\n\t\tsourceMask = sourceBlock.mask;\n\t}\n\n\tif (sourceBlock && destBlock) {\n\t\tif (sourceView && destView) {\n\t\t\tif (width == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getInt32(source & sourceMask);\n\t\t\t\t\tdestView.setInt32(dest & destMask, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getUint16(source & sourceMask);\n\t\t\t\t\tdestView.setUint16(dest & destMask, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (sourceView) {\n\t\t\tif (width == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getInt32(source & sourceMask, true);\n\t\t\t\t\tdestBlock.store32(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getUint16(source & sourceMask, true);\n\t\t\t\t\tdestBlock.store16(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (width == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceBlock.load32(source);\n\t\t\t\t\tdestBlock.store32(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceBlock.loadU16(source);\n\t\t\t\t\tdestBlock.store16(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.core.WARN('Invalid DMA');\n\t}\n\n\tif (info.doIrq) {\n\t\tinfo.nextIRQ = this.cpu.cycles + 2;\n\t\tinfo.nextIRQ += (width == 4 ? this.waitstates32[sourceRegion] + this.waitstates32[destRegion]\n\t\t                            : this.waitstates[sourceRegion] + this.waitstates[destRegion]);\n\t\tinfo.nextIRQ += (info.count - 1) * (width == 4 ? this.waitstatesSeq32[sourceRegion] + this.waitstatesSeq32[destRegion]\n\t\t                                               : this.waitstatesSeq[sourceRegion] + this.waitstatesSeq[destRegion]);\n\t}\n\n\tinfo.nextSource = source | (sourceRegion << this.BASE_OFFSET);\n\tinfo.nextDest = dest | (destRegion << this.BASE_OFFSET);\n\tinfo.nextCount = wordsRemaining;\n\n\tif (!info.repeat) {\n\t\tinfo.enable = false;\n\n\t\t// Clear the enable bit in memory\n\t\tvar io = this.memory[this.REGION_IO];\n\t\tio.registers[this.DMA_REGISTER[number]] &= 0x7FE0;\n\t} else {\n\t\tinfo.nextCount = info.count;\n\t\tif (info.dstControl == this.DMA_INCREMENT_RELOAD) {\n\t\t\tinfo.nextDest = info.dest;\n\t\t}\n\t\tthis.scheduleDma(number, info);\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.adjustTimings = function(word) {\n\tvar sram = word & 0x0003;\n\tvar ws0 = (word & 0x000C) >> 2;\n\tvar ws0seq = (word & 0x0010) >> 4;\n\tvar ws1 = (word & 0x0060) >> 5;\n\tvar ws1seq = (word & 0x0080) >> 7;\n\tvar ws2 = (word & 0x0300) >> 8;\n\tvar ws2seq = (word & 0x0400) >> 10;\n\tvar prefetch = word & 0x4000;\n\n\tthis.waitstates[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\tthis.waitstatesSeq[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\tthis.waitstates32[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\tthis.waitstatesSeq32[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\n\tthis.waitstates[this.REGION_CART0] = this.waitstates[this.REGION_CART0 + 1] = this.ROM_WS[ws0];\n\tthis.waitstates[this.REGION_CART1] = this.waitstates[this.REGION_CART1 + 1] = this.ROM_WS[ws1];\n\tthis.waitstates[this.REGION_CART2] = this.waitstates[this.REGION_CART2 + 1] = this.ROM_WS[ws2];\n\n\tthis.waitstatesSeq[this.REGION_CART0] = this.waitstatesSeq[this.REGION_CART0 + 1] = this.ROM_WS_SEQ[0][ws0seq];\n\tthis.waitstatesSeq[this.REGION_CART1] = this.waitstatesSeq[this.REGION_CART1 + 1] = this.ROM_WS_SEQ[1][ws1seq];\n\tthis.waitstatesSeq[this.REGION_CART2] = this.waitstatesSeq[this.REGION_CART2 + 1] = this.ROM_WS_SEQ[2][ws2seq];\n\n\tthis.waitstates32[this.REGION_CART0] = this.waitstates32[this.REGION_CART0 + 1] = this.waitstates[this.REGION_CART0] + 1 + this.waitstatesSeq[this.REGION_CART0];\n\tthis.waitstates32[this.REGION_CART1] = this.waitstates32[this.REGION_CART1 + 1] = this.waitstates[this.REGION_CART1] + 1 + this.waitstatesSeq[this.REGION_CART1];\n\tthis.waitstates32[this.REGION_CART2] = this.waitstates32[this.REGION_CART2 + 1] = this.waitstates[this.REGION_CART2] + 1 + this.waitstatesSeq[this.REGION_CART2];\n\n\tthis.waitstatesSeq32[this.REGION_CART0] = this.waitstatesSeq32[this.REGION_CART0 + 1] = 2 * this.waitstatesSeq[this.REGION_CART0] + 1;\n\tthis.waitstatesSeq32[this.REGION_CART1] = this.waitstatesSeq32[this.REGION_CART1 + 1] = 2 * this.waitstatesSeq[this.REGION_CART1] + 1;\n\tthis.waitstatesSeq32[this.REGION_CART2] = this.waitstatesSeq32[this.REGION_CART2 + 1] = 2 * this.waitstatesSeq[this.REGION_CART2] + 1;\n\n\tif (prefetch) {\n\t\tthis.waitstatesPrefetch[this.REGION_CART0] = this.waitstatesPrefetch[this.REGION_CART0 + 1] = 0;\n\t\tthis.waitstatesPrefetch[this.REGION_CART1] = this.waitstatesPrefetch[this.REGION_CART1 + 1] = 0;\n\t\tthis.waitstatesPrefetch[this.REGION_CART2] = this.waitstatesPrefetch[this.REGION_CART2 + 1] = 0;\n\n\t\tthis.waitstatesPrefetch32[this.REGION_CART0] = this.waitstatesPrefetch32[this.REGION_CART0 + 1] = 0;\n\t\tthis.waitstatesPrefetch32[this.REGION_CART1] = this.waitstatesPrefetch32[this.REGION_CART1 + 1] = 0;\n\t\tthis.waitstatesPrefetch32[this.REGION_CART2] = this.waitstatesPrefetch32[this.REGION_CART2 + 1] = 0;\n\t} else {\n\t\tthis.waitstatesPrefetch[this.REGION_CART0] = this.waitstatesPrefetch[this.REGION_CART0 + 1] = this.waitstatesSeq[this.REGION_CART0];\n\t\tthis.waitstatesPrefetch[this.REGION_CART1] = this.waitstatesPrefetch[this.REGION_CART1 + 1] = this.waitstatesSeq[this.REGION_CART1];\n\t\tthis.waitstatesPrefetch[this.REGION_CART2] = this.waitstatesPrefetch[this.REGION_CART2 + 1] = this.waitstatesSeq[this.REGION_CART2];\n\n\t\tthis.waitstatesPrefetch32[this.REGION_CART0] = this.waitstatesPrefetch32[this.REGION_CART0 + 1] = this.waitstatesSeq32[this.REGION_CART0];\n\t\tthis.waitstatesPrefetch32[this.REGION_CART1] = this.waitstatesPrefetch32[this.REGION_CART1 + 1] = this.waitstatesSeq32[this.REGION_CART1];\n\t\tthis.waitstatesPrefetch32[this.REGION_CART2] = this.waitstatesPrefetch32[this.REGION_CART2 + 1] = this.waitstatesSeq32[this.REGION_CART2];\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.saveNeedsFlush = function() {\n\treturn this.save.writePending;\n};\n\nGameBoyAdvanceMMU.prototype.flushSave = function() {\n\tthis.save.writePending = false;\n};\n\nGameBoyAdvanceMMU.prototype.allocGPIO = function(rom) {\n\treturn new GameBoyAdvanceGPIO(this.core, rom);\n};\n","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","module.exports = require(\"../../node_modules/arraybuffer-loader/lib/to-array-buffer.js\")(\"BgAA6v7//+oFAADq/v//6v7//+oAAKDhDAAA6v7//+oC86DjAABd4wHToAMg0E0CAEAt6QIAXuUEAFDjCQAACwUAUOMHAAALAEC96A7wsOEPUC3pAQOg4wDgj+IE8BDlD1C96ATwXuIQQC3pBNBN4rAQzeEBQ6DjAkyE4rAA1OGyAM3hsBDd4QEAgOGwAMThAUOg4x8AoOMA8CnhAACg4wEDxOXTAKDjAPAp4bgAVOGwEN3hABAR4AAQIRC4EEQR8///CgFDoOMCTITisgDd4bAAxOEE0I3iEIC96A==\")","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","window.ARMCore = function ARMCore() {\n\tthis.SP = 13;\n\tthis.LR = 14;\n\tthis.PC = 15;\n\n\tthis.MODE_ARM = 0;\n\tthis.MODE_THUMB = 1;\n\n\tthis.MODE_USER = 0x10;\n\tthis.MODE_FIQ = 0x11;\n\tthis.MODE_IRQ = 0x12;\n\tthis.MODE_SUPERVISOR = 0x13;\n\tthis.MODE_ABORT = 0x17;\n\tthis.MODE_UNDEFINED = 0x1B;\n\tthis.MODE_SYSTEM = 0x1F;\n\n\tthis.BANK_NONE = 0\n\tthis.BANK_FIQ = 1;\n\tthis.BANK_IRQ = 2;\n\tthis.BANK_SUPERVISOR = 3;\n\tthis.BANK_ABORT = 4;\n\tthis.BANK_UNDEFINED = 5;\n\n\tthis.UNALLOC_MASK = 0x0FFFFF00;\n\tthis.USER_MASK = 0xF0000000;\n\tthis.PRIV_MASK = 0x000000CF; // This is out of spec, but it seems to be what's done in other implementations\n\tthis.STATE_MASK = 0x00000020;\n\n\tthis.WORD_SIZE_ARM = 4;\n\tthis.WORD_SIZE_THUMB = 2;\n\n\tthis.BASE_RESET = 0x00000000;\n\tthis.BASE_UNDEF = 0x00000004;\n\tthis.BASE_SWI = 0x00000008;\n\tthis.BASE_PABT = 0x0000000C;\n\tthis.BASE_DABT = 0x00000010;\n\tthis.BASE_IRQ = 0x00000018;\n\tthis.BASE_FIQ = 0x0000001C;\n\n\tthis.armCompiler = new ARMCoreArm(this);\n\tthis.thumbCompiler = new ARMCoreThumb(this);\n\tthis.generateConds();\n\n\tthis.gprs = new Int32Array(16);\n};\n\nARMCore.prototype.resetCPU = function(startOffset) {\n\tfor (var i = 0; i < this.PC; ++i) {\n\t\tthis.gprs[i] = 0;\n\t}\n\tthis.gprs[this.PC] = startOffset + this.WORD_SIZE_ARM;\n\n\tthis.loadInstruction = this.loadInstructionArm;\n\tthis.execMode = this.MODE_ARM;\n\tthis.instructionWidth = this.WORD_SIZE_ARM;\n\n\tthis.mode = this.MODE_SYSTEM;\n\n\tthis.cpsrI = false;\n\tthis.cpsrF = false;\n\n\tthis.cpsrV = false;\n\tthis.cpsrC = false;\n\tthis.cpsrZ = false;\n\tthis.cpsrN = false;\n\n\tthis.bankedRegisters = [\n\t\tnew Int32Array(7),\n\t\tnew Int32Array(7),\n\t\tnew Int32Array(2),\n\t\tnew Int32Array(2),\n\t\tnew Int32Array(2),\n\t\tnew Int32Array(2)\n\t];\n\tthis.spsr = 0;\n\tthis.bankedSPSRs = new Int32Array(6);\n\n\tthis.cycles = 0;\n\n\tthis.shifterOperand = 0;\n\tthis.shifterCarryOut = 0;\n\n\tthis.page = null;\n\tthis.pageId = 0;\n\tthis.pageRegion = -1;\n\n\tthis.instruction = null;\n\n\tthis.irq.clear();\n\n\tvar gprs = this.gprs;\n\tvar mmu = this.mmu;\n\tthis.step = function() {\n\t\tvar instruction = this.instruction || (this.instruction = this.loadInstruction(gprs[this.PC] - this.instructionWidth));\n\t\tgprs[this.PC] += this.instructionWidth;\n\t\tthis.conditionPassed = true;\n\t\tinstruction();\n\n\t\tif (!instruction.writesPC) {\n\t\t\tif (this.instruction != null) { // We might have gotten an interrupt from the instruction\n\t\t\t\tif (instruction.next == null || instruction.next.page.invalid) {\n\t\t\t\t\tinstruction.next = this.loadInstruction(gprs[this.PC] - this.instructionWidth);\n\t\t\t\t}\n\t\t\t\tthis.instruction = instruction.next;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.conditionPassed) {\n\t\t\t\tvar pc = gprs[this.PC] &= 0xFFFFFFFE;\n\t\t\t\tif (this.execMode == this.MODE_ARM) {\n\t\t\t\t\tmmu.wait32(pc);\n\t\t\t\t\tmmu.waitPrefetch32(pc);\n\t\t\t\t} else {\n\t\t\t\t\tmmu.wait(pc);\n\t\t\t\t\tmmu.waitPrefetch(pc);\n\t\t\t\t}\n\t\t\t\tgprs[this.PC] += this.instructionWidth;\n\t\t\t\tif (!instruction.fixedJump) {\n\t\t\t\t\tthis.instruction = null;\n\t\t\t\t} else if  (this.instruction != null) {\n\t\t\t\t\tif (instruction.next == null || instruction.next.page.invalid) {\n\t\t\t\t\t\tinstruction.next = this.loadInstruction(gprs[this.PC] - this.instructionWidth);\n\t\t\t\t\t}\n\t\t\t\t\tthis.instruction = instruction.next;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.instruction = null;\n\t\t\t}\n\t\t}\n\t\tthis.irq.updateTimers();\n\t};\n};\n\nARMCore.prototype.freeze = function() {\n\treturn {\n\t\t'gprs': [\n\t\t\tthis.gprs[0],\n\t\t\tthis.gprs[1],\n\t\t\tthis.gprs[2],\n\t\t\tthis.gprs[3],\n\t\t\tthis.gprs[4],\n\t\t\tthis.gprs[5],\n\t\t\tthis.gprs[6],\n\t\t\tthis.gprs[7],\n\t\t\tthis.gprs[8],\n\t\t\tthis.gprs[9],\n\t\t\tthis.gprs[10],\n\t\t\tthis.gprs[11],\n\t\t\tthis.gprs[12],\n\t\t\tthis.gprs[13],\n\t\t\tthis.gprs[14],\n\t\t\tthis.gprs[15],\n\t\t],\n\t\t'mode': this.mode,\n\t\t'cpsrI': this.cpsrI,\n\t\t'cpsrF': this.cpsrF,\n\t\t'cpsrV': this.cpsrV,\n\t\t'cpsrC': this.cpsrC,\n\t\t'cpsrZ': this.cpsrZ,\n\t\t'cpsrN': this.cpsrN,\n\t\t'bankedRegisters': [\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[0][0],\n\t\t\t\tthis.bankedRegisters[0][1],\n\t\t\t\tthis.bankedRegisters[0][2],\n\t\t\t\tthis.bankedRegisters[0][3],\n\t\t\t\tthis.bankedRegisters[0][4],\n\t\t\t\tthis.bankedRegisters[0][5],\n\t\t\t\tthis.bankedRegisters[0][6]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[1][0],\n\t\t\t\tthis.bankedRegisters[1][1],\n\t\t\t\tthis.bankedRegisters[1][2],\n\t\t\t\tthis.bankedRegisters[1][3],\n\t\t\t\tthis.bankedRegisters[1][4],\n\t\t\t\tthis.bankedRegisters[1][5],\n\t\t\t\tthis.bankedRegisters[1][6]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[2][0],\n\t\t\t\tthis.bankedRegisters[2][1]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[3][0],\n\t\t\t\tthis.bankedRegisters[3][1]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[4][0],\n\t\t\t\tthis.bankedRegisters[4][1]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[5][0],\n\t\t\t\tthis.bankedRegisters[5][1]\n\t\t\t]\n\t\t],\n\t\t'spsr': this.spsr,\n\t\t'bankedSPSRs': [\n\t\t\tthis.bankedSPSRs[0],\n\t\t\tthis.bankedSPSRs[1],\n\t\t\tthis.bankedSPSRs[2],\n\t\t\tthis.bankedSPSRs[3],\n\t\t\tthis.bankedSPSRs[4],\n\t\t\tthis.bankedSPSRs[5]\n\t\t],\n\t\t'cycles': this.cycles\n\t};\n};\n\nARMCore.prototype.defrost = function(frost) {\n\tthis.instruction = null;\n\n\tthis.page = null;\n\tthis.pageId = 0;\n\tthis.pageRegion = -1;\n\n\tthis.gprs[0] = frost.gprs[0];\n\tthis.gprs[1] = frost.gprs[1];\n\tthis.gprs[2] = frost.gprs[2];\n\tthis.gprs[3] = frost.gprs[3];\n\tthis.gprs[4] = frost.gprs[4];\n\tthis.gprs[5] = frost.gprs[5];\n\tthis.gprs[6] = frost.gprs[6];\n\tthis.gprs[7] = frost.gprs[7];\n\tthis.gprs[8] = frost.gprs[8];\n\tthis.gprs[9] = frost.gprs[9];\n\tthis.gprs[10] = frost.gprs[10];\n\tthis.gprs[11] = frost.gprs[11];\n\tthis.gprs[12] = frost.gprs[12];\n\tthis.gprs[13] = frost.gprs[13];\n\tthis.gprs[14] = frost.gprs[14];\n\tthis.gprs[15] = frost.gprs[15];\n\n\tthis.mode = frost.mode;\n\tthis.cpsrI = frost.cpsrI;\n\tthis.cpsrF = frost.cpsrF;\n\tthis.cpsrV = frost.cpsrV;\n\tthis.cpsrC = frost.cpsrC;\n\tthis.cpsrZ = frost.cpsrZ;\n\tthis.cpsrN = frost.cpsrN;\n\n\tthis.bankedRegisters[0][0] = frost.bankedRegisters[0][0];\n\tthis.bankedRegisters[0][1] = frost.bankedRegisters[0][1];\n\tthis.bankedRegisters[0][2] = frost.bankedRegisters[0][2];\n\tthis.bankedRegisters[0][3] = frost.bankedRegisters[0][3];\n\tthis.bankedRegisters[0][4] = frost.bankedRegisters[0][4];\n\tthis.bankedRegisters[0][5] = frost.bankedRegisters[0][5];\n\tthis.bankedRegisters[0][6] = frost.bankedRegisters[0][6];\n\n\tthis.bankedRegisters[1][0] = frost.bankedRegisters[1][0];\n\tthis.bankedRegisters[1][1] = frost.bankedRegisters[1][1];\n\tthis.bankedRegisters[1][2] = frost.bankedRegisters[1][2];\n\tthis.bankedRegisters[1][3] = frost.bankedRegisters[1][3];\n\tthis.bankedRegisters[1][4] = frost.bankedRegisters[1][4];\n\tthis.bankedRegisters[1][5] = frost.bankedRegisters[1][5];\n\tthis.bankedRegisters[1][6] = frost.bankedRegisters[1][6];\n\n\tthis.bankedRegisters[2][0] = frost.bankedRegisters[2][0];\n\tthis.bankedRegisters[2][1] = frost.bankedRegisters[2][1];\n\n\tthis.bankedRegisters[3][0] = frost.bankedRegisters[3][0];\n\tthis.bankedRegisters[3][1] = frost.bankedRegisters[3][1];\n\n\tthis.bankedRegisters[4][0] = frost.bankedRegisters[4][0];\n\tthis.bankedRegisters[4][1] = frost.bankedRegisters[4][1];\n\n\tthis.bankedRegisters[5][0] = frost.bankedRegisters[5][0];\n\tthis.bankedRegisters[5][1] = frost.bankedRegisters[5][1];\n\n\tthis.spsr = frost.spsr;\n\tthis.bankedSPSRs[0] = frost.bankedSPSRs[0];\n\tthis.bankedSPSRs[1] = frost.bankedSPSRs[1];\n\tthis.bankedSPSRs[2] = frost.bankedSPSRs[2];\n\tthis.bankedSPSRs[3] = frost.bankedSPSRs[3];\n\tthis.bankedSPSRs[4] = frost.bankedSPSRs[4];\n\tthis.bankedSPSRs[5] = frost.bankedSPSRs[5];\n\n\tthis.cycles = frost.cycles;\n};\n\nARMCore.prototype.fetchPage = function(address) {\n\tvar region = address >> this.mmu.BASE_OFFSET;\n\tvar pageId = this.mmu.addressToPage(region, address & this.mmu.OFFSET_MASK);\n\tif (region == this.pageRegion) {\n\t\tif (pageId == this.pageId && !this.page.invalid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.pageId = pageId;\n\t} else {\n\t\tthis.pageMask = this.mmu.memory[region].PAGE_MASK;\n\t\tthis.pageRegion = region;\n\t\tthis.pageId = pageId;\n\t}\n\n\tthis.page = this.mmu.accessPage(region, pageId);\n};\n\nARMCore.prototype.loadInstructionArm = function(address) {\n\tvar next = null;\n\tthis.fetchPage(address);\n\tvar offset = (address & this.pageMask) >> 2;\n\tnext = this.page.arm[offset];\n\tif (next) {\n\t\treturn next;\n\t}\n\tvar instruction = this.mmu.load32(address) >>> 0;\n\tnext = this.compileArm(instruction);\n\tnext.next = null;\n\tnext.page = this.page;\n\tnext.address = address;\n\tnext.opcode = instruction;\n\tthis.page.arm[offset] = next;\n\treturn next;\n};\n\nARMCore.prototype.loadInstructionThumb = function(address) {\n\tvar next = null;\n\tthis.fetchPage(address);\n\tvar offset = (address & this.pageMask) >> 1;\n\tnext = this.page.thumb[offset];\n\tif (next) {\n\t\treturn next;\n\t}\n\tvar instruction = this.mmu.load16(address);\n\tnext = this.compileThumb(instruction);\n\tnext.next = null;\n\tnext.page = this.page;\n\tnext.address = address;\n\tnext.opcode = instruction;\n\tthis.page.thumb[offset] = next;\n\treturn next;\n};\n\nARMCore.prototype.selectBank = function(mode) {\n\tswitch (mode) {\n\tcase this.MODE_USER:\n\tcase this.MODE_SYSTEM:\n\t\t// No banked registers\n\t\treturn this.BANK_NONE;\n\tcase this.MODE_FIQ:\n\t\treturn this.BANK_FIQ;\n\tcase this.MODE_IRQ:\n\t\treturn this.BANK_IRQ;\n\tcase this.MODE_SUPERVISOR:\n\t\treturn this.BANK_SUPERVISOR;\n\tcase this.MODE_ABORT:\n\t\treturn this.BANK_ABORT;\n\tcase this.MODE_UNDEFINED:\n\t\treturn this.BANK_UNDEFINED;\n\tdefault:\n\t\tthrow \"Invalid user mode passed to selectBank\";\n\t}\n};\n\nARMCore.prototype.switchExecMode = function(newMode) {\n\tif (this.execMode != newMode) {\n\t\tthis.execMode = newMode;\n\t\tif (newMode == this.MODE_ARM) {\n\t\t\tthis.instructionWidth = this.WORD_SIZE_ARM;\n\t\t\tthis.loadInstruction = this.loadInstructionArm;\n\t\t} else {\n\t\t\tthis.instructionWidth = this.WORD_SIZE_THUMB;\n\t\t\tthis.loadInstruction = this.loadInstructionThumb;\n\t\t}\n\t}\n\t\n};\n\nARMCore.prototype.switchMode = function(newMode) {\n\tif (newMode == this.mode) {\n\t\t// Not switching modes after all\n\t\treturn;\n\t}\n\tif (newMode != this.MODE_USER || newMode != this.MODE_SYSTEM) {\n\t\t// Switch banked registers\n\t\tvar newBank = this.selectBank(newMode);\n\t\tvar oldBank = this.selectBank(this.mode);\n\t\tif (newBank != oldBank) {\n\t\t\t// TODO: support FIQ\n\t\t\tif (newMode == this.MODE_FIQ || this.mode == this.MODE_FIQ) {\n\t\t\t\tvar oldFiqBank = (oldBank == this.BANK_FIQ) + 0;\n\t\t\t\tvar newFiqBank = (newBank == this.BANK_FIQ) + 0;\n\t\t\t\tthis.bankedRegisters[oldFiqBank][2] = this.gprs[8];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][3] = this.gprs[9];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][4] = this.gprs[10];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][5] = this.gprs[11];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][6] = this.gprs[12];\n\t\t\t\tthis.gprs[8] = this.bankedRegisters[newFiqBank][2];\n\t\t\t\tthis.gprs[9] = this.bankedRegisters[newFiqBank][3];\n\t\t\t\tthis.gprs[10] = this.bankedRegisters[newFiqBank][4];\n\t\t\t\tthis.gprs[11] = this.bankedRegisters[newFiqBank][5];\n\t\t\t\tthis.gprs[12] = this.bankedRegisters[newFiqBank][6];\n\t\t\t}\n\t\t\tthis.bankedRegisters[oldBank][0] = this.gprs[this.SP];\n\t\t\tthis.bankedRegisters[oldBank][1] = this.gprs[this.LR];\n\t\t\tthis.gprs[this.SP] = this.bankedRegisters[newBank][0];\n\t\t\tthis.gprs[this.LR] = this.bankedRegisters[newBank][1];\n\n\t\t\tthis.bankedSPSRs[oldBank] = this.spsr;\n\t\t\tthis.spsr = this.bankedSPSRs[newBank];\n\t\t}\n\t}\n\tthis.mode = newMode;\n};\n\nARMCore.prototype.packCPSR = function() {\n\treturn this.mode | (!!this.execMode << 5) | (!!this.cpsrF << 6) | (!!this.cpsrI << 7) |\n\t       (!!this.cpsrN << 31) | (!!this.cpsrZ << 30) | (!!this.cpsrC << 29) | (!!this.cpsrV << 28);\n};\n\nARMCore.prototype.unpackCPSR = function(spsr) {\n\tthis.switchMode(spsr & 0x0000001F);\n\tthis.switchExecMode(!!(spsr & 0x00000020));\n\tthis.cpsrF = spsr & 0x00000040;\n\tthis.cpsrI = spsr & 0x00000080;\n\tthis.cpsrN = spsr & 0x80000000;\n\tthis.cpsrZ = spsr & 0x40000000;\n\tthis.cpsrC = spsr & 0x20000000;\n\tthis.cpsrV = spsr & 0x10000000;\n\n\tthis.irq.testIRQ();\n};\n\nARMCore.prototype.hasSPSR = function() {\n\treturn this.mode != this.MODE_SYSTEM && this.mode != this.MODE_USER;\n};\n\nARMCore.prototype.raiseIRQ = function() {\n\tif (this.cpsrI) {\n\t\treturn;\n\t}\n\tvar cpsr = this.packCPSR();\n\tvar instructionWidth = this.instructionWidth;\n\tthis.switchMode(this.MODE_IRQ);\n\tthis.spsr = cpsr;\n\tthis.gprs[this.LR] = this.gprs[this.PC] - instructionWidth + 4;\n\tthis.gprs[this.PC] = this.BASE_IRQ + this.WORD_SIZE_ARM;\n\tthis.instruction = null;\n\tthis.switchExecMode(this.MODE_ARM);\n\tthis.cpsrI = true;\n};\n\nARMCore.prototype.raiseTrap = function() {\n\tvar cpsr = this.packCPSR();\n\tvar instructionWidth = this.instructionWidth;\n\tthis.switchMode(this.MODE_SUPERVISOR);\n\tthis.spsr = cpsr;\n\tthis.gprs[this.LR] = this.gprs[this.PC] - instructionWidth;\n\tthis.gprs[this.PC] = this.BASE_SWI + this.WORD_SIZE_ARM;\n\tthis.instruction = null;\n\tthis.switchExecMode(this.MODE_ARM);\n\tthis.cpsrI = true;\n};\n\nARMCore.prototype.badOp = function(instruction) {\n\tvar func = function() {\n\t\tthrow \"Illegal instruction: 0x\" + instruction.toString(16);\n\t};\n\tfunc.writesPC = true;\n\tfunc.fixedJump = false;\n\treturn func;\n};\n\nARMCore.prototype.generateConds = function() {\n\tvar cpu = this;\n\tthis.conds = [\n\t\t// EQ\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrZ;\n\t\t},\n\t\t// NE\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrZ;\n\t\t},\n\t\t// CS\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrC;\n\t\t},\n\t\t// CC\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrC;\n\t\t},\n\t\t// MI\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrN;\n\t\t},\n\t\t// PL\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrN;\n\t\t},\n\t\t// VS\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrV;\n\t\t},\n\t\t// VC\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrV;\n\t\t},\n\t\t// HI\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrC && !cpu.cpsrZ;\n\t\t},\n\t\t// LS\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrC || cpu.cpsrZ;\n\t\t},\n\t\t// GE\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrN == !cpu.cpsrV;\n\t\t},\n\t\t// LT\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrN != !cpu.cpsrV;\n\t\t},\n\t\t// GT\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrZ && !cpu.cpsrN == !cpu.cpsrV;\n\t\t},\n\t\t// LE\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrZ || !cpu.cpsrN != !cpu.cpsrV;\n\t\t},\n\t\t// AL\n\t\tnull,\n\t\tnull\n\t]\n}\n\nARMCore.prototype.barrelShiftImmediate = function(shiftType, immediate, rm) {\n\tvar cpu = this;\n\tvar gprs = this.gprs;\n\tvar shiftOp = this.badOp;\n\tswitch (shiftType) {\n\tcase 0x00000000:\n\t\t// LSL\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm] << immediate;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (32 - immediate));\n\t\t\t};\n\t\t} else {\n\t\t\t// This boils down to no shift\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm];\n\t\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 0x00000020:\n\t\t// LSR\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm] >>> immediate;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (immediate - 1));\n\t\t\t};\n\t\t} else {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = 0;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & 0x80000000;\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 0x00000040:\n\t\t// ASR\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm] >> immediate;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (immediate - 1));\n\t\t\t};\n\t\t} else {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & 0x80000000;\n\t\t\t\tif (cpu.shifterCarryOut) {\n\t\t\t\t\tcpu.shifterOperand = 0xFFFFFFFF;\n\t\t\t\t} else {\n\t\t\t\t\tcpu.shifterOperand = 0;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 0x00000060:\n\t\t// ROR\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = (gprs[rm] >>> immediate) | (gprs[rm] << (32 - immediate));\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (immediate - 1));\n\t\t\t};\n\t\t} else {\n\t\t\t// RRX\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = (!!cpu.cpsrC << 31) | (gprs[rm] >>> 1);\n\t\t\t\tcpu.shifterCarryOut =  gprs[rm] & 0x00000001;\n\t\t\t};\n\t\t}\n\t\tbreak;\n\t}\n\treturn shiftOp;\n}\n\nARMCore.prototype.compileArm = function(instruction) {\n\tvar op = this.badOp(instruction);\n\tvar i = instruction & 0x0E000000;\n\tvar cpu = this;\n\tvar gprs = this.gprs;\n\n\tvar condOp = this.conds[(instruction & 0xF0000000) >>> 28];\n\tif ((instruction & 0x0FFFFFF0) == 0x012FFF10) {\n\t\t// BX\n\t\tvar rm = instruction & 0xF;\n\t\top = this.armCompiler.constructBX(rm, condOp);\n\t\top.writesPC = true;\n\t\top.fixedJump = false;\n\t} else if (!(instruction & 0x0C000000) && (i == 0x02000000 || (instruction & 0x00000090) != 0x00000090)) {\n\t\tvar opcode = instruction & 0x01E00000;\n\t\tvar s = instruction & 0x00100000;\n\t\tvar shiftsRs = false;\n\t\tif ((opcode & 0x01800000) == 0x01000000 && !s) {\n\t\t\tvar r = instruction & 0x00400000;\n\t\t\tif ((instruction & 0x00B0F000) == 0x0020F000) {\n\t\t\t\t// MSR\n\t\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\t\tvar immediate = instruction & 0x000000FF;\n\t\t\t\tvar rotateImm = (instruction & 0x00000F00) >> 7;\n\t\t\t\timmediate = (immediate >>> rotateImm) | (immediate << (32 - rotateImm));\n\t\t\t\top = this.armCompiler.constructMSR(rm, r, instruction, immediate, condOp);\n\t\t\t\top.writesPC = false;\n\t\t\t} else if ((instruction & 0x00BF0000) == 0x000F0000) {\n\t\t\t\t// MRS\n\t\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\t\t\t\top = this.armCompiler.constructMRS(rd, r, condOp);\n\t\t\t\top.writesPC = rd == this.PC;\n\t\t\t}\n\t\t} else {\n\t\t\t// Data processing/FSR transfer\n\t\t\tvar rn = (instruction & 0x000F0000) >> 16;\n\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\n\t\t\t// Parse shifter operand\n\t\t\tvar shiftType = instruction & 0x00000060;\n\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\tvar shiftOp = function() {\n\t\t\t\tthrow 'BUG: invalid barrel shifter';\n\t\t\t};\n\t\t\tif (instruction & 0x02000000) {\n\t\t\t\tvar immediate = instruction & 0x000000FF;\n\t\t\t\tvar rotate = (instruction & 0x00000F00) >> 7;\n\t\t\t\tif (!rotate) {\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1Immediate(immediate);\n\t\t\t\t} else {\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1ImmediateRotate(immediate, rotate);\n\t\t\t\t}\n\t\t\t} else if (instruction & 0x00000010) {\n\t\t\t\tvar rs = (instruction & 0x00000F00) >> 8;\n\t\t\t\tshiftsRs = true;\n\t\t\t\tswitch (shiftType) {\n\t\t\t\tcase 0x00000000:\n\t\t\t\t\t// LSL\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1LSL(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00000020:\n\t\t\t\t\t// LSR\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1LSR(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00000040:\n\t\t\t\t\t// ASR\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1ASR(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00000060:\n\t\t\t\t\t// ROR\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1ROR(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar immediate = (instruction & 0x00000F80) >> 7;\n\t\t\t\tshiftOp = this.barrelShiftImmediate(shiftType, immediate, rm);\n\t\t\t}\n\n\t\t\tswitch (opcode) {\n\t\t\tcase 0x00000000:\n\t\t\t\t// AND\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructANDS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructAND(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00200000:\n\t\t\t\t// EOR\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructEORS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructEOR(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00400000:\n\t\t\t\t// SUB\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructSUBS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructSUB(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00600000:\n\t\t\t\t// RSB\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructRSBS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructRSB(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00800000:\n\t\t\t\t// ADD\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructADDS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructADD(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00A00000:\n\t\t\t\t// ADC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructADCS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructADC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00C00000:\n\t\t\t\t// SBC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructSBCS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructSBC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00E00000:\n\t\t\t\t// RSC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructRSCS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructRSC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01000000:\n\t\t\t\t// TST\n\t\t\t\top = this.armCompiler.constructTST(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01200000:\n\t\t\t\t// TEQ\n\t\t\t\top = this.armCompiler.constructTEQ(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01400000:\n\t\t\t\t// CMP\n\t\t\t\top = this.armCompiler.constructCMP(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01600000:\n\t\t\t\t// CMN\n\t\t\t\top = this.armCompiler.constructCMN(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01800000:\n\t\t\t\t// ORR\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructORRS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructORR(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01A00000:\n\t\t\t\t// MOV\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructMOVS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructMOV(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01C00000:\n\t\t\t\t// BIC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructBICS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructBIC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01E00000:\n\t\t\t\t// MVN\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructMVNS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructMVN(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\top.writesPC = rd == this.PC;\n\t\t}\n\t} else if ((instruction & 0x0FB00FF0) == 0x01000090) {\n\t\t// Single data swap\n\t\tvar rm = instruction & 0x0000000F;\n\t\tvar rd = (instruction >> 12) & 0x0000000F;\n\t\tvar rn = (instruction >> 16) & 0x0000000F;\n\t\tif (instruction & 0x00400000) {\n\t\t\top = this.armCompiler.constructSWPB(rd, rn, rm, condOp);\n\t\t} else {\n\t\t\top = this.armCompiler.constructSWP(rd, rn, rm, condOp);\n\t\t}\n\t\top.writesPC = rd == this.PC;\n\t} else {\n\t\tswitch (i) {\n\t\tcase 0x00000000:\n\t\t\tif ((instruction & 0x010000F0) == 0x00000090) {\n\t\t\t\t// Multiplies\n\t\t\t\tvar rd = (instruction & 0x000F0000) >> 16;\n\t\t\t\tvar rn = (instruction & 0x0000F000) >> 12;\n\t\t\t\tvar rs = (instruction & 0x00000F00) >> 8;\n\t\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\t\tswitch (instruction & 0x00F00000) {\n\t\t\t\tcase 0x00000000:\n\t\t\t\t\t// MUL\n\t\t\t\t\top = this.armCompiler.constructMUL(rd, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00100000:\n\t\t\t\t\t// MULS\n\t\t\t\t\top = this.armCompiler.constructMULS(rd, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00200000:\n\t\t\t\t\t// MLA\n\t\t\t\t\top = this.armCompiler.constructMLA(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak\n\t\t\t\tcase 0x00300000:\n\t\t\t\t\t// MLAS\n\t\t\t\t\top = this.armCompiler.constructMLAS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00800000:\n\t\t\t\t\t// UMULL\n\t\t\t\t\top = this.armCompiler.constructUMULL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00900000:\n\t\t\t\t\t// UMULLS\n\t\t\t\t\top = this.armCompiler.constructUMULLS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00A00000:\n\t\t\t\t\t// UMLAL\n\t\t\t\t\top = this.armCompiler.constructUMLAL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00B00000:\n\t\t\t\t\t// UMLALS\n\t\t\t\t\top = this.armCompiler.constructUMLALS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00C00000:\n\t\t\t\t\t// SMULL\n\t\t\t\t\top = this.armCompiler.constructSMULL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00D00000:\n\t\t\t\t\t// SMULLS\n\t\t\t\t\top = this.armCompiler.constructSMULLS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00E00000:\n\t\t\t\t\t// SMLAL\n\t\t\t\t\top = this.armCompiler.constructSMLAL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00F00000:\n\t\t\t\t\t// SMLALS\n\t\t\t\t\top = this.armCompiler.constructSMLALS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\top.writesPC = rd == this.PC;\n\t\t\t} else {\n\t\t\t\t// Halfword and signed byte data transfer\n\t\t\t\tvar load = instruction & 0x00100000;\n\t\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\t\t\t\tvar hiOffset = (instruction & 0x00000F00) >> 4;\n\t\t\t\tvar loOffset = rm = instruction & 0x0000000F;\n\t\t\t\tvar h = instruction & 0x00000020;\n\t\t\t\tvar s = instruction & 0x00000040;\n\t\t\t\tvar w = instruction & 0x00200000;\n\t\t\t\tvar i = instruction & 0x00400000;\n\n\t\t\t\tvar address;\n\t\t\t\tif (i) {\n\t\t\t\t\tvar immediate = loOffset | hiOffset;\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode23Immediate(instruction, immediate, condOp);\n\t\t\t\t} else {\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode23Register(instruction, rm, condOp);\n\t\t\t\t}\n\t\t\t\taddress.writesPC = !!w && rn == this.PC;\n\n\t\t\t\tif ((instruction & 0x00000090) == 0x00000090) {\n\t\t\t\t\tif (load) {\n\t\t\t\t\t\t// Load [signed] halfword/byte\n\t\t\t\t\t\tif (h) {\n\t\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\t\t// LDRSH\n\t\t\t\t\t\t\t\top = this.armCompiler.constructLDRSH(rd, address, condOp);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// LDRH\n\t\t\t\t\t\t\t\top = this.armCompiler.constructLDRH(rd, address, condOp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\t\t// LDRSB\n\t\t\t\t\t\t\t\top = this.armCompiler.constructLDRSB(rd, address, condOp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (!s && h) {\n\t\t\t\t\t\t// STRH\n\t\t\t\t\t\top = this.armCompiler.constructSTRH(rd, address, condOp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\top.writesPC = rd == this.PC || address.writesPC;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x04000000:\n\t\tcase 0x06000000:\n\t\t\t// LDR/STR\n\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\t\t\tvar load = instruction & 0x00100000;\n\t\t\tvar b = instruction & 0x00400000;\n\t\t\tvar i = instruction & 0x02000000;\n\n\t\t\tvar address = function() {\n\t\t\t\tthrow \"Unimplemented memory access: 0x\" + instruction.toString(16);\n\t\t\t};\n\t\t\tif (~instruction & 0x01000000) {\n\t\t\t\t// Clear the W bit if the P bit is clear--we don't support memory translation, so these turn into regular accesses\n\t\t\t\tinstruction &= 0xFFDFFFFF;\n\t\t\t}\n\t\t\tif (i) {\n\t\t\t\t// Register offset\n\t\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\t\tvar shiftType = instruction & 0x00000060;\n\t\t\t\tvar shiftImmediate = (instruction & 0x00000F80) >> 7;\n\t\t\t\t\n\t\t\t\tif (shiftType || shiftImmediate) {\n\t\t\t\t\tvar shiftOp = this.barrelShiftImmediate(shiftType, shiftImmediate, rm);\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode2RegisterShifted(instruction, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode23Register(instruction, rm, condOp);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Immediate\n\t\t\t\tvar offset = instruction & 0x00000FFF;\n\t\t\t\taddress = this.armCompiler.constructAddressingMode23Immediate(instruction, offset, condOp);\n\t\t\t}\n\t\t\tif (load) {\n\t\t\t\tif (b) {\n\t\t\t\t\t// LDRB\n\t\t\t\t\top = this.armCompiler.constructLDRB(rd, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\t// LDR\n\t\t\t\t\top = this.armCompiler.constructLDR(rd, address, condOp);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (b) {\n\t\t\t\t\t// STRB\n\t\t\t\t\top = this.armCompiler.constructSTRB(rd, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\t// STR\n\t\t\t\t\top = this.armCompiler.constructSTR(rd, address, condOp);\n\t\t\t\t}\n\t\t\t}\n\t\t\top.writesPC = rd == this.PC || address.writesPC;\n\t\t\tbreak;\n\t\tcase 0x08000000:\n\t\t\t// Block data transfer\n\t\t\tvar load = instruction & 0x00100000;\n\t\t\tvar w = instruction & 0x00200000;\n\t\t\tvar user = instruction & 0x00400000;\n\t\t\tvar u = instruction & 0x00800000;\n\t\t\tvar p = instruction & 0x01000000;\n\t\t\tvar rs = instruction & 0x0000FFFF;\n\t\t\tvar rn = (instruction & 0x000F0000) >> 16;\n\n\t\t\tvar address;\n\t\t\tvar immediate = 0;\n\t\t\tvar offset = 0;\n\t\t\tvar overlap = false;\n\t\t\tif (u) {\n\t\t\t\tif (p) {\n\t\t\t\t\timmediate = 4;\n\t\t\t\t}\n\t\t\t\tfor (var m = 0x01, i = 0; i < 16; m <<= 1, ++i) {\n\t\t\t\t\tif (rs & m) {\n\t\t\t\t\t\tif (w && i == rn && !offset) {\n\t\t\t\t\t\t\trs &= ~m;\n\t\t\t\t\t\t\timmediate += 4;\n\t\t\t\t\t\t\toverlap = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset += 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!p) {\n\t\t\t\t\timmediate = 4;\n\t\t\t\t}\n\t\t\t\tfor (var m = 0x01, i = 0; i < 16; m <<= 1, ++i) {\n\t\t\t\t\tif (rs & m) {\n\t\t\t\t\t\tif (w && i == rn && !offset) {\n\t\t\t\t\t\t\trs &= ~m;\n\t\t\t\t\t\t\timmediate += 4;\n\t\t\t\t\t\t\toverlap = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\timmediate -= 4;\n\t\t\t\t\t\toffset -= 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (w) {\n\t\t\t\taddress = this.armCompiler.constructAddressingMode4Writeback(immediate, offset, rn, overlap);\n\t\t\t} else {\n\t\t\t\taddress = this.armCompiler.constructAddressingMode4(immediate, rn);\n\t\t\t}\n\t\t\tif (load) {\n\t\t\t\t// LDM\n\t\t\t\tif (user) {\n\t\t\t\t\top = this.armCompiler.constructLDMS(rs, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructLDM(rs, address, condOp);\n\t\t\t\t}\n\t\t\t\top.writesPC = !!(rs & (1 << 15));\n\t\t\t} else {\n\t\t\t\t// STM\n\t\t\t\tif (user) {\n\t\t\t\t\top = this.armCompiler.constructSTMS(rs, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructSTM(rs, address, condOp);\n\t\t\t\t}\n\t\t\t\top.writesPC = false;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x0A000000:\n\t\t\t// Branch\n\t\t\tvar immediate = instruction & 0x00FFFFFF;\n\t\t\tif (immediate & 0x00800000) {\n\t\t\t\timmediate |= 0xFF000000;\n\t\t\t}\n\t\t\timmediate <<= 2;\n\t\t\tvar link = instruction & 0x01000000;\n\t\t\tif (link) {\n\t\t\t\top = this.armCompiler.constructBL(immediate, condOp);\n\t\t\t} else {\n\t\t\t\top = this.armCompiler.constructB(immediate, condOp);\n\t\t\t}\n\t\t\top.writesPC = true;\n\t\t\top.fixedJump = true;\n\t\t\tbreak;\n\t\tcase 0x0C000000:\n\t\t\t// Coprocessor data transfer\n\t\t\tbreak;\n\t\tcase 0x0E000000:\n\t\t\t// Coprocessor data operation/SWI\n\t\t\tif ((instruction & 0x0F000000) == 0x0F000000) {\n\t\t\t\t// SWI\n\t\t\t\tvar immediate = (instruction & 0x00FFFFFF);\n\t\t\t\top = this.armCompiler.constructSWI(immediate, condOp);\n\t\t\t\top.writesPC = false;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow 'Bad opcode: 0x' + instruction.toString(16);\n\t\t}\n\t}\n\n\top.execMode = this.MODE_ARM;\n\top.fixedJump = op.fixedJump || false;\n\treturn op;\n};\n\nARMCore.prototype.compileThumb = function(instruction) {\n\tvar op = this.badOp(instruction & 0xFFFF);\n\tvar cpu = this;\n\tvar gprs = this.gprs;\n\tif ((instruction & 0xFC00) == 0x4000) {\n\t\t// Data-processing register\n\t\tvar rm = (instruction & 0x0038) >> 3;\n\t\tvar rd = instruction & 0x0007;\n\t\tswitch (instruction & 0x03C0) {\n\t\tcase 0x0000:\n\t\t\t// AND\n\t\t\top = this.thumbCompiler.constructAND(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0040:\n\t\t\t// EOR\n\t\t\top = this.thumbCompiler.constructEOR(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0080:\n\t\t\t// LSL(2)\n\t\t\top = this.thumbCompiler.constructLSL2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x00C0:\n\t\t\t// LSR(2)\n\t\t\top = this.thumbCompiler.constructLSR2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0100:\n\t\t\t// ASR(2)\n\t\t\top = this.thumbCompiler.constructASR2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0140:\n\t\t\t// ADC\n\t\t\top = this.thumbCompiler.constructADC(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0180:\n\t\t\t// SBC\n\t\t\top = this.thumbCompiler.constructSBC(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x01C0:\n\t\t\t// ROR\n\t\t\top = this.thumbCompiler.constructROR(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// TST\n\t\t\top = this.thumbCompiler.constructTST(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0240:\n\t\t\t// NEG\n\t\t\top = this.thumbCompiler.constructNEG(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0280:\n\t\t\t// CMP(2)\n\t\t\top = this.thumbCompiler.constructCMP2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x02C0:\n\t\t\t// CMN\n\t\t\top = this.thumbCompiler.constructCMN(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0300:\n\t\t\t// ORR\n\t\t\top = this.thumbCompiler.constructORR(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0340:\n\t\t\t// MUL\n\t\t\top = this.thumbCompiler.constructMUL(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0380:\n\t\t\t// BIC\n\t\t\top = this.thumbCompiler.constructBIC(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x03C0:\n\t\t\t// MVN\n\t\t\top = this.thumbCompiler.constructMVN(rd, rm);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xFC00) == 0x4400) {\n\t\t// Special data processing / branch/exchange instruction set\n\t\tvar rm = (instruction & 0x0078) >> 3;\n\t\tvar rn = instruction & 0x0007;\n\t\tvar h1 = instruction & 0x0080;\n\t\tvar rd = rn | (h1 >> 4);\n\t\tswitch (instruction & 0x0300) {\n\t\tcase 0x0000:\n\t\t\t// ADD(4)\n\t\t\top = this.thumbCompiler.constructADD4(rd, rm)\n\t\t\top.writesPC = rd == this.PC;\n\t\t\tbreak;\n\t\tcase 0x0100:\n\t\t\t// CMP(3)\n\t\t\top = this.thumbCompiler.constructCMP3(rd, rm);\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// MOV(3)\n\t\t\top = this.thumbCompiler.constructMOV3(rd, rm);\n\t\t\top.writesPC = rd == this.PC;\n\t\t\tbreak;\n\t\tcase 0x0300:\n\t\t\t// BX\n\t\t\top = this.thumbCompiler.constructBX(rd, rm);\n\t\t\top.writesPC = true;\n\t\t\top.fixedJump = false;\n\t\t\tbreak;\n\t\t}\n\t} else if ((instruction & 0xF800) == 0x1800) {\n\t\t// Add/subtract\n\t\tvar rm = (instruction & 0x01C0) >> 6;\n\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\tvar rd = instruction & 0x0007;\n\t\tswitch (instruction & 0x0600) {\n\t\tcase 0x0000:\n\t\t\t// ADD(3)\n\t\t\top = this.thumbCompiler.constructADD3(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// SUB(3)\n\t\t\top = this.thumbCompiler.constructSUB3(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0400:\n\t\t\tvar immediate = (instruction & 0x01C0) >> 6;\n\t\t\tif (immediate) {\n\t\t\t\t// ADD(1)\n\t\t\t\top = this.thumbCompiler.constructADD1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// MOV(2)\n\t\t\t\top = this.thumbCompiler.constructMOV2(rd, rn, rm);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x0600:\n\t\t\t// SUB(1)\n\t\t\tvar immediate = (instruction & 0x01C0) >> 6;\n\t\t\top = this.thumbCompiler.constructSUB1(rd, rn, immediate);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if (!(instruction & 0xE000)) {\n\t\t// Shift by immediate\n\t\tvar rd = instruction & 0x0007;\n\t\tvar rm = (instruction & 0x0038) >> 3;\n\t\tvar immediate = (instruction & 0x07C0) >> 6;\n\t\tswitch (instruction & 0x1800) {\n\t\tcase 0x0000:\n\t\t\t// LSL(1)\n\t\t\top = this.thumbCompiler.constructLSL1(rd, rm, immediate);\n\t\t\tbreak;\n\t\tcase 0x0800:\n\t\t\t// LSR(1)\n\t\t\top = this.thumbCompiler.constructLSR1(rd, rm, immediate);\n\t\t\tbreak;\n\t\tcase 0x1000:\n\t\t\t// ASR(1)\n\t\t\top = this.thumbCompiler.constructASR1(rd, rm, immediate);\n\t\t\tbreak;\n\t\tcase 0x1800:\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xE000) == 0x2000) {\n\t\t// Add/subtract/compare/move immediate\n\t\tvar immediate = instruction & 0x00FF;\n\t\tvar rn = (instruction & 0x0700) >> 8;\n\t\tswitch (instruction & 0x1800) {\n\t\tcase 0x0000:\n\t\t\t// MOV(1)\n\t\t\top = this.thumbCompiler.constructMOV1(rn, immediate);\n\t\t\tbreak;\n\t\tcase 0x0800:\n\t\t\t// CMP(1)\n\t\t\top = this.thumbCompiler.constructCMP1(rn, immediate);\n\t\t\tbreak;\n\t\tcase 0x1000:\n\t\t\t// ADD(2)\n\t\t\top = this.thumbCompiler.constructADD2(rn, immediate);\n\t\t\tbreak;\n\t\tcase 0x1800:\n\t\t\t// SUB(2)\n\t\t\top = this.thumbCompiler.constructSUB2(rn, immediate);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xF800) == 0x4800) {\n\t\t// LDR(3)\n\t\tvar rd = (instruction & 0x0700) >> 8;\n\t\tvar immediate = (instruction & 0x00FF) << 2;\n\t\top = this.thumbCompiler.constructLDR3(rd, immediate);\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xF000) == 0x5000) {\n\t\t// Load and store with relative offset\n\t\tvar rd = instruction & 0x0007;\n\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\tvar rm = (instruction & 0x01C0) >> 6;\n\t\tvar opcode = instruction & 0x0E00;\n\t\tswitch (opcode) {\n\t\tcase 0x0000:\n\t\t\t// STR(2)\n\t\t\top = this.thumbCompiler.constructSTR2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// STRH(2)\n\t\t\top = this.thumbCompiler.constructSTRH2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0400:\n\t\t\t// STRB(2)\n\t\t\top = this.thumbCompiler.constructSTRB2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0600:\n\t\t\t// LDRSB\n\t\t\top = this.thumbCompiler.constructLDRSB(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0800:\n\t\t\t// LDR(2)\n\t\t\top = this.thumbCompiler.constructLDR2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0A00:\n\t\t\t// LDRH(2)\n\t\t\top = this.thumbCompiler.constructLDRH2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0C00:\n\t\t\t// LDRB(2)\n\t\t\top = this.thumbCompiler.constructLDRB2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0E00:\n\t\t\t// LDRSH\n\t\t\top = this.thumbCompiler.constructLDRSH(rd, rn, rm);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xE000) == 0x6000) {\n\t\t// Load and store with immediate offset\n\t\tvar rd = instruction & 0x0007;\n\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\tvar immediate = (instruction & 0x07C0) >> 4;\n\t\tvar b = instruction & 0x1000;\n\t\tif (b) {\n\t\t\timmediate >>= 2;\n\t\t}\n\t\tvar load = instruction & 0x0800;\n\t\tif (load) {\n\t\t\tif (b) {\n\t\t\t\t// LDRB(1)\n\t\t\t\top = this.thumbCompiler.constructLDRB1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// LDR(1)\n\t\t\t\top = this.thumbCompiler.constructLDR1(rd, rn, immediate);\n\t\t\t}\n\t\t} else {\n\t\t\tif (b) {\n\t\t\t\t// STRB(1)\n\t\t\t\top = this.thumbCompiler.constructSTRB1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// STR(1)\n\t\t\t\top = this.thumbCompiler.constructSTR1(rd, rn, immediate);\n\t\t\t}\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xF600) == 0xB400) {\n\t\t// Push and pop registers\n\t\tvar r = !!(instruction & 0x0100);\n\t\tvar rs = instruction & 0x00FF;\n\t\tif (instruction & 0x0800) {\n\t\t\t// POP\n\t\t\top = this.thumbCompiler.constructPOP(rs, r);\n\t\t\top.writesPC = r;\n\t\t\top.fixedJump = false;\n\t\t} else {\n\t\t\t// PUSH\n\t\t\top = this.thumbCompiler.constructPUSH(rs, r);\n\t\t\top.writesPC = false;\n\t\t}\n\t} else if (instruction & 0x8000) {\n\t\tswitch (instruction & 0x7000) {\n\t\tcase 0x0000:\n\t\t\t// Load and store halfword\n\t\t\tvar rd = instruction & 0x0007;\n\t\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\t\tvar immediate = (instruction & 0x07C0) >> 5;\n\t\t\tif (instruction & 0x0800) {\n\t\t\t\t// LDRH(1)\n\t\t\t\top = this.thumbCompiler.constructLDRH1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// STRH(1)\n\t\t\t\top = this.thumbCompiler.constructSTRH1(rd, rn, immediate);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x1000:\n\t\t\t// SP-relative load and store\n\t\t\tvar rd = (instruction & 0x0700) >> 8;\n\t\t\tvar immediate = (instruction & 0x00FF) << 2;\n\t\t\tvar load = instruction & 0x0800;\n\t\t\tif (load) {\n\t\t\t\t// LDR(4)\n\t\t\t\top = this.thumbCompiler.constructLDR4(rd, immediate);\n\t\t\t} else {\n\t\t\t\t// STR(3)\n\t\t\t\top = this.thumbCompiler.constructSTR3(rd, immediate);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x2000:\n\t\t\t// Load address\n\t\t\tvar rd = (instruction & 0x0700) >> 8;\n\t\t\tvar immediate = (instruction & 0x00FF) << 2;\n\t\t\tif (instruction & 0x0800) {\n\t\t\t\t// ADD(6)\n\t\t\t\top = this.thumbCompiler.constructADD6(rd, immediate);\n\t\t\t} else {\n\t\t\t\t// ADD(5)\n\t\t\t\top = this.thumbCompiler.constructADD5(rd, immediate);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x3000:\n\t\t\t// Miscellaneous\n\t\t\tif (!(instruction & 0x0F00)) {\n\t\t\t\t// Adjust stack pointer\n\t\t\t\t// ADD(7)/SUB(4)\n\t\t\t\tvar b = instruction & 0x0080;\n\t\t\t\tvar immediate = (instruction & 0x7F) << 2;\n\t\t\t\tif (b) {\n\t\t\t\t\timmediate = -immediate;\n\t\t\t\t}\n\t\t\t\top = this.thumbCompiler.constructADD7(immediate)\n\t\t\t\top.writesPC = false;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x4000:\n\t\t\t// Multiple load and store\n\t\t\tvar rn = (instruction & 0x0700) >> 8;\n\t\t\tvar rs = instruction & 0x00FF;\n\t\t\tif (instruction & 0x0800) {\n\t\t\t\t// LDMIA\n\t\t\t\top = this.thumbCompiler.constructLDMIA(rn, rs);\n\t\t\t} else {\n\t\t\t\t// STMIA\n\t\t\t\top = this.thumbCompiler.constructSTMIA(rn, rs);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x5000:\n\t\t\t// Conditional branch\n\t\t\tvar cond = (instruction & 0x0F00) >> 8;\n\t\t\tvar immediate = (instruction & 0x00FF);\n\t\t\tif (cond == 0xF) {\n\t\t\t\t// SWI\n\t\t\t\top = this.thumbCompiler.constructSWI(immediate);\n\t\t\t\top.writesPC = false;\n\t\t\t} else {\n\t\t\t\t// B(1)\n\t\t\t\tif (instruction & 0x0080) {\n\t\t\t\t\timmediate |= 0xFFFFFF00;\n\t\t\t\t}\n\t\t\t\timmediate <<= 1;\n\t\t\t\tvar condOp = this.conds[cond];\n\t\t\t\top = this.thumbCompiler.constructB1(immediate, condOp);\n\t\t\t\top.writesPC = true;\n\t\t\t\top.fixedJump = true;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x6000:\n\t\tcase 0x7000:\n\t\t\t// BL(X)\n\t\t\tvar immediate = instruction & 0x07FF;\n\t\t\tvar h = instruction & 0x1800;\n\t\t\tswitch (h) {\n\t\t\tcase 0x0000:\n\t\t\t\t// B(2)\n\t\t\t\tif (immediate & 0x0400) {\n\t\t\t\t\timmediate |= 0xFFFFF800;\n\t\t\t\t}\n\t\t\t\timmediate <<= 1;\n\t\t\t\top = this.thumbCompiler.constructB2(immediate);\n\t\t\t\top.writesPC = true;\n\t\t\t\top.fixedJump = true;\n\t\t\t\tbreak;\n\t\t\tcase 0x0800:\n\t\t\t\t// BLX (ARMv5T)\n\t\t\t\t/*op = function() {\n\t\t\t\t\tvar pc = gprs[cpu.PC];\n\t\t\t\t\tgprs[cpu.PC] = (gprs[cpu.LR] + (immediate << 1)) & 0xFFFFFFFC;\n\t\t\t\t\tgprs[cpu.LR] = pc - 1;\n\t\t\t\t\tcpu.switchExecMode(cpu.MODE_ARM);\n\t\t\t\t}*/\n\t\t\t\tbreak;\n\t\t\tcase 0x1000:\n\t\t\t\t// BL(1)\n\t\t\t\tif (immediate & 0x0400) {\n\t\t\t\t\timmediate |= 0xFFFFFC00;\n\t\t\t\t}\n\t\t\t\timmediate <<= 12;\n\t\t\t\top = this.thumbCompiler.constructBL1(immediate);\n\t\t\t\top.writesPC = false;\n\t\t\t\tbreak;\n\t\t\tcase 0x1800:\n\t\t\t\t// BL(2)\n\t\t\t\top = this.thumbCompiler.constructBL2(immediate);\n\t\t\t\top.writesPC = true;\n\t\t\t\top.fixedJump = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.WARN(\"Undefined instruction: 0x\" + instruction.toString(16));\n\t\t}\n\t} else {\n\t\tthrow 'Bad opcode: 0x' + instruction.toString(16);\n\t}\n\n\top.execMode = this.MODE_THUMB;\n\top.fixedJump = op.fixedJump || false;\n\treturn op;\n};\n","ARMCoreArm = function (cpu) {\n\tthis.cpu = cpu;\n\n\tthis.addressingMode23Immediate = [\n\t\t// 000x0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] -= offset;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 000xW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// 00Ux0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] += offset;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 00UxW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// 0P0x0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\treturn addr = gprs[rn] - offset;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 0P0xW\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] - offset;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\n\t\t// 0PUx0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\treturn addr = gprs[rn] + offset;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 0PUxW\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] + offset;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\t];\n\n\tthis.addressingMode23Register = [\n\t\t// I00x0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] -= gprs[rm];\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// I00xW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// I0Ux0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] += gprs[rm];\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// I0UxW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IP0x0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\treturn gprs[rn] - gprs[rm];\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IP0xW\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] - gprs[rm];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IPUx0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] + gprs[rm];\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IPUxW\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] + gprs[rm];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull\n\t];\n\n\tthis.addressingMode2RegisterShifted = [\n\t\t// I00x0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tshiftOp();\n\t\t\t\t\tgprs[rn] -= cpu.shifterOperand;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// I00xW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// I0Ux0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tshiftOp();\n\t\t\t\t\tgprs[rn] += cpu.shifterOperand;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\t\t// I0UxW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IP0x0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\treturn gprs[rn] - cpu.shifterOperand;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IP0xW\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\tvar addr = gprs[rn] - cpu.shifterOperand;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IPUx0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\treturn gprs[rn] + cpu.shifterOperand;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IPUxW\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\tvar addr = gprs[rn] + cpu.shifterOperand;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writePC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\t];\n}\n\nARMCoreArm.prototype.constructAddressingMode1ASR = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (shift < 32) {\n\t\t\tcpu.shifterOperand = shiftVal >> shift;\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (shift - 1));\n\t\t} else if (gprs[rm] >> 31) {\n\t\t\tcpu.shifterOperand = 0xFFFFFFFF;\n\t\t\tcpu.shifterCarryOut = 0x80000000;\n\t\t} else {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = 0;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1Immediate = function(immediate) {\n\tvar cpu = this.cpu;\n\treturn function() {\n\t\tcpu.shifterOperand = immediate;\n\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1ImmediateRotate = function(immediate, rotate) {\n\tvar cpu = this.cpu;\n\treturn function() {\n\t\tcpu.shifterOperand = (immediate >>> rotate) | (immediate << (32 - rotate));\n\t\tcpu.shifterCarryOut = cpu.shifterOperand >> 31;\n\t}\n};\n\nARMCoreArm.prototype.constructAddressingMode1LSL = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (shift < 32) {\n\t\t\tcpu.shifterOperand = shiftVal << shift;\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (32 - shift));\n\t\t} else if (shift == 32) {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = shiftVal & 1;\n\t\t} else {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = 0;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1LSR = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (shift < 32) {\n\t\t\tcpu.shifterOperand = shiftVal >>> shift;\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (shift - 1));\n\t\t} else if (shift == 32) {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = shiftVal >> 31;\n\t\t} else {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = 0;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1ROR = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tvar rotate = shift & 0x1F;\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (rotate) {\n\t\t\tcpu.shifterOperand = (gprs[rm] >>> rotate) | (gprs[rm] << (32 - rotate));\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (rotate - 1));\n\t\t} else {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = shiftVal >> 31;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode23Immediate = function(instruction, immediate, condOp) {\n\tvar rn = (instruction & 0x000F0000) >> 16;\n\treturn this.addressingMode23Immediate[(instruction & 0x01A00000) >> 21](rn, immediate, condOp);\n};\n\nARMCoreArm.prototype.constructAddressingMode23Register = function(instruction, rm, condOp) {\n\tvar rn = (instruction & 0x000F0000) >> 16;\n\treturn this.addressingMode23Register[(instruction & 0x01A00000) >> 21](rn, rm, condOp);\n};\n\nARMCoreArm.prototype.constructAddressingMode2RegisterShifted = function(instruction, shiftOp, condOp) {\n\tvar rn = (instruction & 0x000F0000) >> 16;\n\treturn this.addressingMode2RegisterShifted[(instruction & 0x01A00000) >> 21](rn, shiftOp, condOp);\n};\n\nARMCoreArm.prototype.constructAddressingMode4 = function(immediate, rn) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar addr = gprs[rn] + immediate;\n\t\treturn addr;\n\t}\n};\n\nARMCoreArm.prototype.constructAddressingMode4Writeback = function(immediate, offset, rn, overlap) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function(writeInitial) {\n\t\tvar addr = gprs[rn] + immediate;\n\t\tif (writeInitial && overlap) {\n\t\t\tcpu.mmu.store32(gprs[rn] + immediate - 4, gprs[rn]);\n\t\t}\n\t\tgprs[rn] += offset;\n\t\treturn addr;\n\t}\n};\n\nARMCoreArm.prototype.constructADC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !!cpu.cpsrC;\n\t\tgprs[rd] = (gprs[rn] >>> 0) + shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructADCS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !!cpu.cpsrC;\n\t\tvar d = (gprs[rn] >>> 0) + shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) == (shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31) &&\n\t\t\t\t\t\t(shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructADD = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = (gprs[rn] >>> 0) + (cpu.shifterOperand >>> 0);\n\t};\n};\n\nARMCoreArm.prototype.constructADDS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar d = (gprs[rn] >>> 0) + (cpu.shifterOperand >>> 0);\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) == (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31) &&\n\t\t\t\t\t\t(cpu.shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructAND = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructANDS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructB = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tgprs[cpu.PC] += immediate;\n\t};\n};\n\nARMCoreArm.prototype.constructBIC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & ~cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructBICS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & ~cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructBL = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tgprs[cpu.LR] = gprs[cpu.PC] - 4;\n\t\tgprs[cpu.PC] += immediate;\n\t};\n};\n\nARMCoreArm.prototype.constructBX = function(rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tcpu.switchExecMode(gprs[rm] & 0x00000001);\n\t\tgprs[cpu.PC] = gprs[rm] & 0xFFFFFFFE;\n\t};\n};\n\nARMCoreArm.prototype.constructCMN = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = (gprs[rn] >>> 0) + (cpu.shifterOperand >>> 0);\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = aluOut > 0xFFFFFFFF;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) == (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t(gprs[rn] >> 31) != (aluOut >> 31) &&\n\t\t\t\t\t(cpu.shifterOperand >> 31) != (aluOut >> 31);\n\t};\n};\n\nARMCoreArm.prototype.constructCMP = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = gprs[rn] - cpu.shifterOperand;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (cpu.shifterOperand >>> 0);\n\t\tcpu.cpsrV = (gprs[rn] >> 31) != (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t(gprs[rn] >> 31) != (aluOut >> 31);\n\t};\n};\n\nARMCoreArm.prototype.constructEOR = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] ^ cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructEORS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] ^ cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructLDM = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address(false);\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tgprs[i] = mmu.load32(addr & 0xFFFFFFFC);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tmmu.waitMulti32(addr, total);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDMS = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address(false);\n\t\tvar total = 0;\n\t\tvar mode = cpu.mode;\n\t\tcpu.switchMode(cpu.MODE_SYSTEM);\n\t\tvar m, i;\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tgprs[i] = mmu.load32(addr & 0xFFFFFFFC);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.switchMode(mode);\n\t\tmmu.waitMulti32(addr, total);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDR = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.load32(addr);\n\t\tcpu.mmu.wait32(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRB = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.loadU8(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRH = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.loadU16(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRSB = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.load8(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRSH = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.load16(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructMLA = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(rs);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tgprs[rd] = (hi + lo + gprs[rn]) & 0xFFFFFFFF;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs] + gprs[rn];\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMLAS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(rs);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tgprs[rd] = (hi + lo + gprs[rn]) & 0xFFFFFFFF;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs] + gprs[rn];\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreArm.prototype.constructMOV = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructMOVS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMRS = function(rd, r, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tif (r) {\n\t\t\tgprs[rd] = cpu.spsr;\n\t\t} else {\n\t\t\tgprs[rd] = cpu.packCPSR();\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMSR = function(rm, r, instruction, immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar c = instruction & 0x00010000;\n\t//var x = instruction & 0x00020000;\n\t//var s = instruction & 0x00040000;\n\tvar f = instruction & 0x00080000;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar operand;\n\t\tif (instruction & 0x02000000) {\n\t\t\toperand = immediate;\n\t\t} else {\n\t\t\toperand = gprs[rm];\n\t\t}\n\t\tvar mask = (c ? 0x000000FF : 0x00000000) |\n\t\t\t\t   //(x ? 0x0000FF00 : 0x00000000) | // Irrelevant on ARMv4T\n\t\t\t\t   //(s ? 0x00FF0000 : 0x00000000) | // Irrelevant on ARMv4T\n\t\t\t\t   (f ? 0xFF000000 : 0x00000000);\n\n\t\tif (r) {\n\t\t\tmask &= cpu.USER_MASK | cpu.PRIV_MASK | cpu.STATE_MASK;\n\t\t\tcpu.spsr = (cpu.spsr & ~mask) | (operand & mask);\n\t\t} else {\n\t\t\tif (mask & cpu.USER_MASK) {\n\t\t\t\tcpu.cpsrN = operand >> 31;\n\t\t\t\tcpu.cpsrZ = operand & 0x40000000;\n\t\t\t\tcpu.cpsrC = operand & 0x20000000;\n\t\t\t\tcpu.cpsrV = operand & 0x10000000;\n\t\t\t}\n\t\t\tif (cpu.mode != cpu.MODE_USER && (mask & cpu.PRIV_MASK)) {\n\t\t\t\tcpu.switchMode((operand & 0x0000000F) | 0x00000010);\n\t\t\t\tcpu.cpsrI = operand & 0x00000080;\n\t\t\t\tcpu.cpsrF = operand & 0x00000040;\n\t\t\t}\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMUL = function(rd, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) | 0;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) | 0;\n\t\t\tgprs[rd] = hi + lo;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs];\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMULS = function(rd, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) | 0;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) | 0;\n\t\t\tgprs[rd] = hi + lo;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs];\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreArm.prototype.constructMVN = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = ~cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructMVNS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = ~cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructORR = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] | cpu.shifterOperand;\n\t}\n};\n\nARMCoreArm.prototype.constructORRS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] | cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructRSB = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = cpu.shifterOperand - gprs[rn];\n\t};\n};\n\nARMCoreArm.prototype.constructRSBS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar d = cpu.shifterOperand - gprs[rn];\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (cpu.shifterOperand >>> 0) >= (gprs[rn] >>> 0);\n\t\t\tcpu.cpsrV = (cpu.shifterOperand >> 31) != (gprs[rn] >> 31) &&\n\t\t\t\t\t\t(cpu.shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructRSC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar n = (gprs[rn] >>> 0) + !cpu.cpsrC;\n\t\tgprs[rd] = (cpu.shifterOperand >>> 0) - n;\n\t};\n};\n\nARMCoreArm.prototype.constructRSCS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar n = (gprs[rn] >>> 0) + !cpu.cpsrC;\n\t\tvar d = (cpu.shifterOperand >>> 0) - n;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (cpu.shifterOperand >>> 0) >= (d >>> 0);\n\t\t\tcpu.cpsrV = (cpu.shifterOperand >> 31) != (n >> 31) &&\n\t\t\t\t\t\t(cpu.shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructSBC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !cpu.cpsrC;\n\t\tgprs[rd] = (gprs[rn] >>> 0) - shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructSBCS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !cpu.cpsrC;\n\t\tvar d = (gprs[rn] >>> 0) - shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (d >>> 0);\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) != (shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructSMLAL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = (gprs[rm] & 0xFFFF0000) * gprs[rs];\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * gprs[rs];\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += Math.floor(carry * SHIFT_32);\n\t};\n};\n\nARMCoreArm.prototype.constructSMLALS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = (gprs[rm] & 0xFFFF0000) * gprs[rs];\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * gprs[rs];\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += Math.floor(carry * SHIFT_32);\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n\nARMCoreArm.prototype.constructSMULL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >> 0) * (gprs[rs] >> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >> 0) * (gprs[rs] >> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = Math.floor(hi * SHIFT_32 + lo * SHIFT_32);\n\t};\n};\n\nARMCoreArm.prototype.constructSMULLS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >> 0) * (gprs[rs] >> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >> 0) * (gprs[rs] >> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = Math.floor(hi * SHIFT_32 + lo * SHIFT_32);\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n\nARMCoreArm.prototype.constructSTM = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tmmu.wait32(gprs[cpu.PC]);\n\t\tvar addr = address(true);\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tmmu.store32(addr, gprs[i]);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tmmu.waitMulti32(addr, total);\n\t};\n};\n\nARMCoreArm.prototype.constructSTMS = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tmmu.wait32(gprs[cpu.PC]);\n\t\tvar mode = cpu.mode;\n\t\tvar addr = address(true);\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tcpu.switchMode(cpu.MODE_SYSTEM);\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tmmu.store32(addr, gprs[i]);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.switchMode(mode);\n\t\tmmu.waitMulti32(addr, total);\n\t};\n};\n\nARMCoreArm.prototype.constructSTR = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tcpu.mmu.store32(addr, gprs[rd]);\n\t\tcpu.mmu.wait32(addr);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSTRB = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tcpu.mmu.store8(addr, gprs[rd]);\n\t\tcpu.mmu.wait(addr);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSTRH = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tcpu.mmu.store16(addr, gprs[rd]);\n\t\tcpu.mmu.wait(addr);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSUB = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] - cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructSUBS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar d = gprs[rn] - cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (cpu.shifterOperand >>> 0);\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) != (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructSWI = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.irq.swi32(immediate);\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSWP = function(rd, rn, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.wait32(gprs[rn]);\n\t\tcpu.mmu.wait32(gprs[rn]);\n\t\tvar d = cpu.mmu.load32(gprs[rn]);\n\t\tcpu.mmu.store32(gprs[rn], gprs[rm]);\n\t\tgprs[rd] = d;\n\t\t++cpu.cycles;\n\t}\n};\n\nARMCoreArm.prototype.constructSWPB = function(rd, rn, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.wait(gprs[rn]);\n\t\tcpu.mmu.wait(gprs[rn]);\n\t\tvar d = cpu.mmu.load8(gprs[rn]);\n\t\tcpu.mmu.store8(gprs[rn], gprs[rm]);\n\t\tgprs[rd] = d;\n\t\t++cpu.cycles;\n\t}\n};\n\nARMCoreArm.prototype.constructTEQ = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = gprs[rn] ^ cpu.shifterOperand;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t};\n};\n\nARMCoreArm.prototype.constructTST = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = gprs[rn] & cpu.shifterOperand;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t};\n};\n\nARMCoreArm.prototype.constructUMLAL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * (gprs[rs] >>> 0);\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += carry * SHIFT_32;\n\t};\n};\n\nARMCoreArm.prototype.constructUMLALS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * (gprs[rs] >>> 0);\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += carry * SHIFT_32;\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n\nARMCoreArm.prototype.constructUMULL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >>> 0) * (gprs[rs] >>> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = (hi * SHIFT_32 + lo * SHIFT_32) >>> 0;\n\t};\n};\n\nARMCoreArm.prototype.constructUMULLS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >>> 0) * (gprs[rs] >>> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = (hi * SHIFT_32 + lo * SHIFT_32) >>> 0;\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n","window.ARMCoreThumb = ARMCoreThumb = function (cpu) {\n\tthis.cpu = cpu;\n};\n\nARMCoreThumb.prototype.constructADC = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar m = (gprs[rm] >>> 0) + !!cpu.cpsrC;\n\t\tvar oldD = gprs[rd];\n\t\tvar d = (oldD >>> 0) + m;\n\t\tvar oldDn = oldD >> 31;\n\t\tvar dn = d >> 31;\n\t\tvar mn = m >> 31;\n\t\tcpu.cpsrN = dn;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = oldDn == mn && oldDn != dn && mn != dn;\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = (gprs[rn] >>> 0) + immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = !(gprs[rn] >> 31) && ((gprs[rn] >> 31 ^ d) >> 31) && (d >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD2 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = (gprs[rn] >>> 0) + immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = !(gprs[rn] >> 31) && ((gprs[rn] ^ d) >> 31) && ((immediate ^ d) >> 31);\n\t\tgprs[rn] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD3 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = (gprs[rn] >>> 0) + (gprs[rm] >>> 0);\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = !((gprs[rn] ^ gprs[rm]) >> 31) && ((gprs[rn] ^ d) >> 31) && ((gprs[rm] ^ d) >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD4 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] += gprs[rm];\n\t};\n};\n\nARMCoreThumb.prototype.constructADD5 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = (gprs[cpu.PC] & 0xFFFFFFFC) + immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD6 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[cpu.SP] + immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD7 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[cpu.SP] += immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructAND = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] & gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructASR1 = function(rd, rm, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (immediate == 0) {\n\t\t\tcpu.cpsrC = gprs[rm] >> 31;\n\t\t\tif (cpu.cpsrC) {\n\t\t\t\tgprs[rd] = 0xFFFFFFFF;\n\t\t\t} else {\n\t\t\t\tgprs[rd] = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tcpu.cpsrC = gprs[rm] & (1 << (immediate - 1));\n\t\t\tgprs[rd] = gprs[rm] >> immediate;\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructASR2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tif (rs < 32) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (rs - 1));\n\t\t\t\tgprs[rd] >>= rs;\n\t\t\t} else {\n\t\t\t\tcpu.cpsrC = gprs[rd] >> 31;\n\t\t\t\tif (cpu.cpsrC) {\n\t\t\t\t\tgprs[rd] = 0xFFFFFFFF;\n\t\t\t\t} else {\n\t\t\t\t\tgprs[rd] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructB1 = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (condOp()) {\n\t\t\tgprs[cpu.PC] += immediate;\n\t\t}\n\t};\n};\n\nARMCoreThumb.prototype.constructB2 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[cpu.PC] += immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructBIC = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] & ~gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructBL1 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[cpu.LR] = gprs[cpu.PC] + immediate;\n\t}\n};\n\nARMCoreThumb.prototype.constructBL2 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar pc = gprs[cpu.PC];\n\t\tgprs[cpu.PC] = gprs[cpu.LR] + (immediate << 1);\n\t\tgprs[cpu.LR] = pc - 1;\n\t}\n};\n\nARMCoreThumb.prototype.constructBX = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tcpu.switchExecMode(gprs[rm] & 0x00000001);\n\t\tvar misalign = 0;\n\t\tif (rm == 15) {\n\t\t\tmisalign = gprs[rm] & 0x00000002;\n\t\t}\n\t\tgprs[cpu.PC] = gprs[rm] & 0xFFFFFFFE - misalign;\n\t};\n};\n\nARMCoreThumb.prototype.constructCMN = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = (gprs[rd] >>> 0) + (gprs[rm] >>> 0);\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = aluOut > 0xFFFFFFFF;\n\t\tcpu.cpsrV = (gprs[rd] >> 31) == (gprs[rm] >> 31) &&\n\t\t\t\t\t(gprs[rd] >> 31) != (aluOut >> 31) &&\n\t\t\t\t\t(gprs[rm] >> 31) != (aluOut >> 31);\n\t};\n};\n\nARMCoreThumb.prototype.constructCMP1 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = gprs[rn] - immediate;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= immediate;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) && ((gprs[rn] ^ aluOut) >> 31);\n\t};\n}\n\nARMCoreThumb.prototype.constructCMP2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rd];\n\t\tvar m = gprs[rm];\n\t\tvar aluOut = d - m;\n\t\tvar an = aluOut >> 31;\n\t\tvar dn = d >> 31;\n\t\tcpu.cpsrN = an;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (d >>> 0) >= (m >>> 0);\n\t\tcpu.cpsrV = dn != (m >> 31) && dn != an;\n\t};\n};\n\nARMCoreThumb.prototype.constructCMP3 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = gprs[rd] - gprs[rm];\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rd] >>> 0) >= (gprs[rm] >>> 0);\n\t\tcpu.cpsrV = ((gprs[rd] ^ gprs[rm]) >> 31) && ((gprs[rd] ^ aluOut) >> 31);\n\t};\n};\n\nARMCoreThumb.prototype.constructEOR = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] ^ gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructLDMIA = function(rn, rs) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar address = gprs[rn];\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = 0x01, i = 0; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tgprs[i] = cpu.mmu.load32(address);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tif (!((1 << rn) & rs)) {\n\t\t\tgprs[rn] = address;\n\t\t}\n\t};\n};\n\nARMCoreThumb.prototype.constructLDR1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar n = gprs[rn] + immediate;\n\t\tgprs[rd] = cpu.mmu.load32(n);\n\t\tcpu.mmu.wait32(n);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDR2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load32(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait32(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t}\n};\n\nARMCoreThumb.prototype.constructLDR3 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load32((gprs[cpu.PC] & 0xFFFFFFFC) + immediate);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDR4 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load32(gprs[cpu.SP] + immediate);\n\t\tcpu.mmu.wait32(gprs[cpu.SP] + immediate);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRB1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU8(n);\n\t\tcpu.mmu.wait(n);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRB2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU8(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRH1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU16(n);\n\t\tcpu.mmu.wait(n);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRH2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU16(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRSB = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load8(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRSH = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load16(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLSL1 = function(rd, rm, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (immediate == 0) {\n\t\t\tgprs[rd] = gprs[rm];\n\t\t} else {\n\t\t\tcpu.cpsrC = gprs[rm] & (1 << (32 - immediate));\n\t\t\tgprs[rd] = gprs[rm] << immediate;\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructLSL2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tif (rs < 32) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (32 - rs));\n\t\t\t\tgprs[rd] <<= rs;\n\t\t\t} else {\n\t\t\t\tif (rs > 32) {\n\t\t\t\t\tcpu.cpsrC = 0;\n\t\t\t\t} else {\n\t\t\t\t\tcpu.cpsrC = gprs[rd] & 0x00000001;\n\t\t\t\t}\n\t\t\t\tgprs[rd] = 0;\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructLSR1 = function(rd, rm, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (immediate == 0) {\n\t\t\tcpu.cpsrC = gprs[rm] >> 31;\n\t\t\tgprs[rd] = 0;\n\t\t} else {\n\t\t\tcpu.cpsrC = gprs[rm] & (1 << (immediate - 1));\n\t\t\tgprs[rd] = gprs[rm] >>> immediate;\n\t\t}\n\t\tcpu.cpsrN = 0;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n}\n\nARMCoreThumb.prototype.constructLSR2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tif (rs < 32) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (rs - 1));\n\t\t\t\tgprs[rd] >>>= rs;\n\t\t\t} else {\n\t\t\t\tif (rs > 32) {\n\t\t\t\t\tcpu.cpsrC = 0;\n\t\t\t\t} else {\n\t\t\t\t\tcpu.cpsrC = gprs[rd] >> 31;\n\t\t\t\t}\n\t\t\t\tgprs[rd] = 0;\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructMOV1 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rn] = immediate;\n\t\tcpu.cpsrN = immediate >> 31;\n\t\tcpu.cpsrZ = !(immediate & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructMOV2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn];\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = 0;\n\t\tcpu.cpsrV = 0;\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructMOV3 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rm];\n\t};\n};\n\nARMCoreThumb.prototype.constructMUL = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tcpu.mmu.waitMul(gprs[rm]);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rd] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rd] & 0xFFFF0000) * gprs[rm]) & 0xFFFFFFFF;\n\t\t\tvar lo = ((gprs[rd] & 0x0000FFFF) * gprs[rm]) & 0xFFFFFFFF;\n\t\t\tgprs[rd] = (hi + lo) & 0xFFFFFFFF;\n\t\t} else {\n\t\t\tgprs[rd] *= gprs[rm];\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructMVN = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = ~gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructNEG = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = -gprs[rm];\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = 0 >= (d >>> 0);\n\t\tcpu.cpsrV = (gprs[rm] >> 31) && (d >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructORR = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] | gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructPOP = function(rs, r) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\t++cpu.cycles;\n\t\tvar address = gprs[cpu.SP];\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = 0x01, i = 0; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.waitSeq32(address);\n\t\t\t\tgprs[i] = cpu.mmu.load32(address);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tif (r) {\n\t\t\tgprs[cpu.PC] = cpu.mmu.load32(address) & 0xFFFFFFFE;\n\t\t\taddress += 4;\n\t\t\t++total;\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tgprs[cpu.SP] = address;\n\t};\n};\n\nARMCoreThumb.prototype.constructPUSH = function(rs, r) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar address = gprs[cpu.SP] - 4;\n\t\tvar total = 0;\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (r) {\n\t\t\tcpu.mmu.store32(address, gprs[cpu.LR]);\n\t\t\taddress -= 4;\n\t\t\t++total;\n\t\t}\n\t\tvar m, i;\n\t\tfor (m = 0x80, i = 7; m; m >>= 1, --i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress -= 4;\n\t\t\t\t++total;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor (m >>= 1, --i; m; m >>= 1, --i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress -= 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tgprs[cpu.SP] = address + 4;\n\t};\n};\n\nARMCoreThumb.prototype.constructROR = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tvar r4 = rs & 0x1F;\n\t\t\tif (r4 > 0) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (r4 - 1));\n\t\t\t\tgprs[rd] = (gprs[rd] >>> r4) | (gprs[rd] << (32 - r4));\n\t\t\t} else {\n\t\t\t\tcpu.cpsrC = gprs[rd] >> 31;\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructSBC = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar m = (gprs[rm] >>> 0) + !cpu.cpsrC;\n\t\tvar d = (gprs[rd] >>> 0) - m;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rd] >>> 0) >= (d >>> 0);\n\t\tcpu.cpsrV = ((gprs[rd] ^ m) >> 31) && ((gprs[rd] ^ d) >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructSTMIA = function(rn, rs) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tvar address = gprs[rn];\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = 0x01, i = 0; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor (m <<= 1, ++i; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tgprs[rn] = address;\n\t};\n};\n\nARMCoreThumb.prototype.constructSTR1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.store32(n, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait32(n);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTR2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store32(gprs[rn] + gprs[rm], gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait32(gprs[rn] + gprs[rm]);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTR3 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store32(gprs[cpu.SP] + immediate, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait32(gprs[cpu.SP] + immediate);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTRB1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.store8(n, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(n);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTRB2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store8(gprs[rn] + gprs[rm], gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t}\n};\n\nARMCoreThumb.prototype.constructSTRH1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.store16(n, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(n);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTRH2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store16(gprs[rn] + gprs[rm], gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t}\n};\n\nARMCoreThumb.prototype.constructSUB1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn] - immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= immediate;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) && ((gprs[rn] ^ d) >> 31);\n\t\tgprs[rd] = d;\n\t};\n}\n\nARMCoreThumb.prototype.constructSUB2 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn] - immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= immediate;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) && ((gprs[rn] ^ d) >> 31);\n\t\tgprs[rn] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructSUB3 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn] - gprs[rm];\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (gprs[rm] >>> 0);\n\t\tcpu.cpsrV = (gprs[rn] >> 31) != (gprs[rm] >> 31) &&\n\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructSWI = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.irq.swi(immediate);\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t}\n};\n\nARMCoreThumb.prototype.constructTST = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = gprs[rd] & gprs[rm];\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t};\n};\n","window.GameBoyAdvanceIO = function GameBoyAdvanceIO() {\n\t// Video\n\tthis.DISPCNT = 0x000;\n\tthis.GREENSWP = 0x002;\n\tthis.DISPSTAT = 0x004;\n\tthis.VCOUNT = 0x006;\n\tthis.BG0CNT = 0x008;\n\tthis.BG1CNT = 0x00A;\n\tthis.BG2CNT = 0x00C;\n\tthis.BG3CNT = 0x00E;\n\tthis.BG0HOFS = 0x010;\n\tthis.BG0VOFS = 0x012;\n\tthis.BG1HOFS = 0x014;\n\tthis.BG1VOFS = 0x016;\n\tthis.BG2HOFS = 0x018;\n\tthis.BG2VOFS = 0x01A;\n\tthis.BG3HOFS = 0x01C;\n\tthis.BG3VOFS = 0x01E;\n\tthis.BG2PA = 0x020;\n\tthis.BG2PB = 0x022;\n\tthis.BG2PC = 0x024;\n\tthis.BG2PD = 0x026;\n\tthis.BG2X_LO = 0x028;\n\tthis.BG2X_HI = 0x02A;\n\tthis.BG2Y_LO = 0x02C;\n\tthis.BG2Y_HI = 0x02E;\n\tthis.BG3PA = 0x030;\n\tthis.BG3PB = 0x032;\n\tthis.BG3PC = 0x034;\n\tthis.BG3PD = 0x036;\n\tthis.BG3X_LO = 0x038;\n\tthis.BG3X_HI = 0x03A;\n\tthis.BG3Y_LO = 0x03C;\n\tthis.BG3Y_HI = 0x03E;\n\tthis.WIN0H = 0x040;\n\tthis.WIN1H = 0x042;\n\tthis.WIN0V = 0x044;\n\tthis.WIN1V = 0x046;\n\tthis.WININ = 0x048;\n\tthis.WINOUT = 0x04A;\n\tthis.MOSAIC = 0x04C;\n\tthis.BLDCNT = 0x050;\n\tthis.BLDALPHA = 0x052;\n\tthis.BLDY = 0x054;\n\n\t// Sound\n\tthis.SOUND1CNT_LO = 0x060;\n\tthis.SOUND1CNT_HI = 0x062;\n\tthis.SOUND1CNT_X = 0x064;\n\tthis.SOUND2CNT_LO = 0x068;\n\tthis.SOUND2CNT_HI = 0x06C;\n\tthis.SOUND3CNT_LO = 0x070;\n\tthis.SOUND3CNT_HI = 0x072;\n\tthis.SOUND3CNT_X = 0x074;\n\tthis.SOUND4CNT_LO = 0x078;\n\tthis.SOUND4CNT_HI = 0x07C;\n\tthis.SOUNDCNT_LO = 0x080;\n\tthis.SOUNDCNT_HI = 0x082;\n\tthis.SOUNDCNT_X = 0x084;\n\tthis.SOUNDBIAS = 0x088;\n\tthis.WAVE_RAM0_LO = 0x090;\n\tthis.WAVE_RAM0_HI = 0x092;\n\tthis.WAVE_RAM1_LO = 0x094;\n\tthis.WAVE_RAM1_HI = 0x096;\n\tthis.WAVE_RAM2_LO = 0x098;\n\tthis.WAVE_RAM2_HI = 0x09A;\n\tthis.WAVE_RAM3_LO = 0x09C;\n\tthis.WAVE_RAM3_HI = 0x09E;\n\tthis.FIFO_A_LO = 0x0A0;\n\tthis.FIFO_A_HI = 0x0A2;\n\tthis.FIFO_B_LO = 0x0A4;\n\tthis.FIFO_B_HI = 0x0A6;\n\n\t// DMA\n\tthis.DMA0SAD_LO = 0x0B0;\n\tthis.DMA0SAD_HI = 0x0B2;\n\tthis.DMA0DAD_LO = 0x0B4;\n\tthis.DMA0DAD_HI = 0x0B6;\n\tthis.DMA0CNT_LO = 0x0B8;\n\tthis.DMA0CNT_HI = 0x0BA;\n\tthis.DMA1SAD_LO = 0x0BC;\n\tthis.DMA1SAD_HI = 0x0BE;\n\tthis.DMA1DAD_LO = 0x0C0;\n\tthis.DMA1DAD_HI = 0x0C2;\n\tthis.DMA1CNT_LO = 0x0C4;\n\tthis.DMA1CNT_HI = 0x0C6;\n\tthis.DMA2SAD_LO = 0x0C8;\n\tthis.DMA2SAD_HI = 0x0CA;\n\tthis.DMA2DAD_LO = 0x0CC;\n\tthis.DMA2DAD_HI = 0x0CE;\n\tthis.DMA2CNT_LO = 0x0D0;\n\tthis.DMA2CNT_HI = 0x0D2;\n\tthis.DMA3SAD_LO = 0x0D4;\n\tthis.DMA3SAD_HI = 0x0D6;\n\tthis.DMA3DAD_LO = 0x0D8;\n\tthis.DMA3DAD_HI = 0x0DA;\n\tthis.DMA3CNT_LO = 0x0DC;\n\tthis.DMA3CNT_HI = 0x0DE;\n\n\t// Timers\n\tthis.TM0CNT_LO = 0x100;\n\tthis.TM0CNT_HI = 0x102;\n\tthis.TM1CNT_LO = 0x104;\n\tthis.TM1CNT_HI = 0x106;\n\tthis.TM2CNT_LO = 0x108;\n\tthis.TM2CNT_HI = 0x10A;\n\tthis.TM3CNT_LO = 0x10C;\n\tthis.TM3CNT_HI = 0x10E;\n\n\t// SIO (note: some of these are repeated)\n\tthis.SIODATA32_LO = 0x120;\n\tthis.SIOMULTI0 = 0x120;\n\tthis.SIODATA32_HI = 0x122;\n\tthis.SIOMULTI1 = 0x122;\n\tthis.SIOMULTI2 = 0x124;\n\tthis.SIOMULTI3 = 0x126;\n\tthis.SIOCNT = 0x128;\n\tthis.SIOMLT_SEND = 0x12A;\n\tthis.SIODATA8 = 0x12A;\n\tthis.RCNT = 0x134;\n\tthis.JOYCNT = 0x140;\n\tthis.JOY_RECV = 0x150;\n\tthis.JOY_TRANS = 0x154;\n\tthis.JOYSTAT = 0x158;\n\n\t// Keypad\n\tthis.KEYINPUT = 0x130;\n\tthis.KEYCNT = 0x132;\n\n\t// Interrupts, etc\n\tthis.IE = 0x200;\n\tthis.IF = 0x202;\n\tthis.WAITCNT = 0x204;\n\tthis.IME = 0x208;\n\n\tthis.POSTFLG = 0x300;\n\tthis.HALTCNT = 0x301;\n\n\tthis.DEFAULT_DISPCNT = 0x0080;\n\tthis.DEFAULT_SOUNDBIAS = 0x200;\n\tthis.DEFAULT_BGPA = 1;\n\tthis.DEFAULT_BGPD = 1;\n\tthis.DEFAULT_RCNT = 0x8000;\n};\n\nGameBoyAdvanceIO.prototype.clear = function() {\n\tthis.registers = new Uint16Array(this.cpu.mmu.SIZE_IO);\n\n\tthis.registers[this.DISPCNT >> 1] = this.DEFAULT_DISPCNT;\n\tthis.registers[this.SOUNDBIAS >> 1] = this.DEFAULT_SOUNDBIAS;\n\tthis.registers[this.BG2PA >> 1] = this.DEFAULT_BGPA;\n\tthis.registers[this.BG2PD >> 1] = this.DEFAULT_BGPD;\n\tthis.registers[this.BG3PA >> 1] = this.DEFAULT_BGPA;\n\tthis.registers[this.BG3PD >> 1] = this.DEFAULT_BGPD;\n\tthis.registers[this.RCNT >> 1] = this.DEFAULT_RCNT;\n};\n\nGameBoyAdvanceIO.prototype.freeze = function() {\n\treturn {\n\t\t'registers': Serializer.prefix(this.registers.buffer)\n\t};\n};\n\nGameBoyAdvanceIO.prototype.defrost = function(frost) {\n\tthis.registers = new Uint16Array(frost.registers);\n\t// Video registers don't serialize themselves\n\tfor (var i = 0; i <= this.BLDY; i += 2) {\n\t\tthis.store16(this.registers[i >> 1]);\n\t}\n};\n\nGameBoyAdvanceIO.prototype.load8 = function(offset) {\n\tthrow 'Unimplmeneted unaligned I/O access';\n}\n\nGameBoyAdvanceIO.prototype.load16 = function(offset) {\n\treturn (this.loadU16(offset) << 16) >> 16;\n}\n\nGameBoyAdvanceIO.prototype.load32 = function(offset) {\n\toffset &= 0xFFFFFFFC;\n\tswitch (offset) {\n\tcase this.DMA0CNT_LO:\n\tcase this.DMA1CNT_LO:\n\tcase this.DMA2CNT_LO:\n\tcase this.DMA3CNT_LO:\n\t\treturn this.loadU16(offset | 2) << 16;\n\tcase this.IME:\n\t\treturn this.loadU16(offset) & 0xFFFF;\n\tcase this.JOY_RECV:\n\tcase this.JOY_TRANS:\n \t\tthis.core.STUB('Unimplemented JOY register read: 0x' + offset.toString(16));\n \t\treturn 0;\n\t}\n\n\treturn this.loadU16(offset) | (this.loadU16(offset | 2) << 16);\n};\n\nGameBoyAdvanceIO.prototype.loadU8 = function(offset) {\n\tvar odd = offset & 0x0001;\n\tvar value = this.loadU16(offset & 0xFFFE);\n\treturn (value >>> (odd << 3)) & 0xFF;\n}\n\nGameBoyAdvanceIO.prototype.loadU16 = function(offset) {\n\tswitch (offset) {\n\tcase this.DISPCNT:\n\tcase this.BG0CNT:\n\tcase this.BG1CNT:\n\tcase this.BG2CNT:\n\tcase this.BG3CNT:\n\tcase this.WININ:\n\tcase this.WINOUT:\n\tcase this.SOUND1CNT_LO:\n\tcase this.SOUND3CNT_LO:\n\tcase this.SOUNDCNT_LO:\n\tcase this.SOUNDCNT_HI:\n\tcase this.SOUNDBIAS:\n\tcase this.BLDCNT:\n\tcase this.BLDALPHA:\n\n\tcase this.TM0CNT_HI:\n\tcase this.TM1CNT_HI:\n\tcase this.TM2CNT_HI:\n\tcase this.TM3CNT_HI:\n\tcase this.DMA0CNT_HI:\n\tcase this.DMA1CNT_HI:\n\tcase this.DMA2CNT_HI:\n\tcase this.DMA3CNT_HI:\n\tcase this.RCNT:\n\tcase this.WAITCNT:\n\tcase this.IE:\n\tcase this.IF:\n\tcase this.IME:\n\tcase this.POSTFLG:\n\t\t// Handled transparently by the written registers\n\t\tbreak;\n\n\t// Video\n\tcase this.DISPSTAT:\n\t\treturn this.registers[offset >> 1] | this.video.readDisplayStat();\n\tcase this.VCOUNT:\n\t\treturn this.video.vcount;\n\n\t// Sound\n\tcase this.SOUND1CNT_HI:\n\tcase this.SOUND2CNT_LO:\n\t\treturn this.registers[offset >> 1] & 0xFFC0;\n\tcase this.SOUND1CNT_X:\n\tcase this.SOUND2CNT_HI:\n\tcase this.SOUND3CNT_X:\n\t\treturn this.registers[offset >> 1] & 0x4000;\n\tcase this.SOUND3CNT_HI:\n\t\treturn this.registers[offset >> 1] & 0xE000;\n\tcase this.SOUND4CNT_LO:\n\t\treturn this.registers[offset >> 1] & 0xFF00;\n\tcase this.SOUND4CNT_HI:\n\t\treturn this.registers[offset >> 1] & 0x40FF;\n\tcase this.SOUNDCNT_X:\n\t\tthis.core.STUB('Unimplemented sound register read: SOUNDCNT_X');\n\t\treturn this.registers[offset >> 1] | 0x0000;\n\n\t// Timers\n\tcase this.TM0CNT_LO:\n\t\treturn this.cpu.irq.timerRead(0);\n\tcase this.TM1CNT_LO:\n\t\treturn this.cpu.irq.timerRead(1);\n\tcase this.TM2CNT_LO:\n\t\treturn this.cpu.irq.timerRead(2);\n\tcase this.TM3CNT_LO:\n\t\treturn this.cpu.irq.timerRead(3);\n\n\t// SIO\n\tcase this.SIOCNT:\n\t\treturn this.sio.readSIOCNT();\n\n\tcase this.KEYINPUT:\n\t\tthis.keypad.pollGamepads();\n\t\treturn this.keypad.currentDown;\n\tcase this.KEYCNT:\n\t\tthis.core.STUB('Unimplemented I/O register read: KEYCNT');\n\t\treturn 0;\n\n\tcase this.BG0HOFS:\n\tcase this.BG0VOFS:\n\tcase this.BG1HOFS:\n\tcase this.BG1VOFS:\n\tcase this.BG2HOFS:\n\tcase this.BG2VOFS:\n\tcase this.BG3HOFS:\n\tcase this.BG3VOFS:\n\tcase this.BG2PA:\n\tcase this.BG2PB:\n\tcase this.BG2PC:\n\tcase this.BG2PD:\n\tcase this.BG3PA:\n\tcase this.BG3PB:\n\tcase this.BG3PC:\n\tcase this.BG3PD:\n\tcase this.BG2X_LO:\n\tcase this.BG2X_HI:\n\tcase this.BG2Y_LO:\n\tcase this.BG2Y_HI:\n\tcase this.BG3X_LO:\n\tcase this.BG3X_HI:\n\tcase this.BG3Y_LO:\n\tcase this.BG3Y_HI:\n\tcase this.WIN0H:\n\tcase this.WIN1H:\n\tcase this.WIN0V:\n\tcase this.WIN1V:\n\tcase this.BLDY:\n\tcase this.DMA0SAD_LO:\n\tcase this.DMA0SAD_HI:\n\tcase this.DMA0DAD_LO:\n\tcase this.DMA0DAD_HI:\n\tcase this.DMA0CNT_LO:\n\tcase this.DMA1SAD_LO:\n\tcase this.DMA1SAD_HI:\n\tcase this.DMA1DAD_LO:\n\tcase this.DMA1DAD_HI:\n\tcase this.DMA1CNT_LO:\n\tcase this.DMA2SAD_LO:\n\tcase this.DMA2SAD_HI:\n\tcase this.DMA2DAD_LO:\n\tcase this.DMA2DAD_HI:\n\tcase this.DMA2CNT_LO:\n\tcase this.DMA3SAD_LO:\n\tcase this.DMA3SAD_HI:\n\tcase this.DMA3DAD_LO:\n\tcase this.DMA3DAD_HI:\n\tcase this.DMA3CNT_LO:\n\tcase this.FIFO_A_LO:\n\tcase this.FIFO_A_HI:\n\tcase this.FIFO_B_LO:\n\tcase this.FIFO_B_HI:\n\t\tthis.core.WARN('Read for write-only register: 0x' + offset.toString(16));\n\t\treturn this.core.mmu.badMemory.loadU16(0);\n\n\tcase this.MOSAIC:\n\t\tthis.core.WARN('Read for write-only register: 0x' + offset.toString(16));\n\t\treturn 0;\n\n\tcase this.SIOMULTI0:\n \tcase this.SIOMULTI1:\n \tcase this.SIOMULTI2:\n \tcase this.SIOMULTI3:\n \t\treturn this.sio.read((offset - this.SIOMULTI0) >> 1);\n\n \tcase this.SIODATA8:\n \t\tthis.core.STUB('Unimplemented SIO register read: 0x' + offset.toString(16));\n \t\treturn 0;\n\tcase this.JOYCNT:\n\tcase this.JOYSTAT:\n \t\tthis.core.STUB('Unimplemented JOY register read: 0x' + offset.toString(16));\n \t\treturn 0;\n\n\tdefault:\n\t\tthis.core.WARN('Bad I/O register read: 0x' + offset.toString(16));\n\t\treturn this.core.mmu.badMemory.loadU16(0);\n\t}\n\treturn this.registers[offset >> 1];\n};\n\nGameBoyAdvanceIO.prototype.store8 = function(offset, value) {\n\tswitch (offset) {\n\tcase this.WININ:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.WININ | 1:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.WINOUT:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.WINOUT | 1:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.SOUND1CNT_LO:\n\tcase this.SOUND1CNT_LO | 1:\n\tcase this.SOUND1CNT_HI:\n\tcase this.SOUND1CNT_HI | 1:\n\tcase this.SOUND1CNT_X:\n\tcase this.SOUND1CNT_X | 1:\n\tcase this.SOUND2CNT_LO:\n\tcase this.SOUND2CNT_LO | 1:\n\tcase this.SOUND2CNT_HI:\n\tcase this.SOUND2CNT_HI | 1:\n\tcase this.SOUND3CNT_LO:\n\tcase this.SOUND3CNT_LO | 1:\n\tcase this.SOUND3CNT_HI:\n\tcase this.SOUND3CNT_HI | 1:\n\tcase this.SOUND3CNT_X:\n\tcase this.SOUND3CNT_X | 1:\n\tcase this.SOUND4CNT_LO:\n\tcase this.SOUND4CNT_LO | 1:\n\tcase this.SOUND4CNT_HI:\n\tcase this.SOUND4CNT_HI | 1:\n\tcase this.SOUNDCNT_LO:\n\tcase this.SOUNDCNT_LO | 1:\n\tcase this.SOUNDCNT_X:\n\tcase this.IF:\n\tcase this.IME:\n\t\tbreak;\n\tcase this.SOUNDBIAS | 1:\n\t\tthis.STUB_REG('sound', offset);\n\t\tbreak;\n\tcase this.HALTCNT:\n\t\tvalue &= 0x80;\n\t\tif (!value) {\n\t\t\tthis.core.irq.halt();\n\t\t} else {\n\t\t\tthis.core.STUB('Stop');\n\t\t}\n\t\treturn;\n\tdefault:\n\t\tthis.STUB_REG('8-bit I/O', offset);\n\t\tbreak;\n\t}\n\n\tif (offset & 1) {\n\t\tvalue <<= 8;\n\t\tvalue |= (this.registers[offset >> 1] & 0x00FF);\n\t} else {\n\t\tvalue &= 0x00FF;\n\t\tvalue |= (this.registers[offset >> 1] & 0xFF00);\n\t}\n\tthis.store16(offset & 0xFFFFFFE, value);\n};\n\nGameBoyAdvanceIO.prototype.store16 = function(offset, value) {\n\tswitch (offset) {\n\t// Video\n\tcase this.DISPCNT:\n\t\tthis.video.renderPath.writeDisplayControl(value);\n\t\tbreak;\n\tcase this.DISPSTAT:\n\t\tvalue &= this.video.DISPSTAT_MASK;\n\t\tthis.video.writeDisplayStat(value);\n\t\tbreak;\n\tcase this.BG0CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(0, value);\n\t\tbreak;\n\tcase this.BG1CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(1, value);\n\t\tbreak;\n\tcase this.BG2CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(2, value);\n\t\tbreak;\n\tcase this.BG3CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(3, value);\n\t\tbreak;\n\tcase this.BG0HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(0, value);\n\t\tbreak;\n\tcase this.BG0VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(0, value);\n\t\tbreak;\n\tcase this.BG1HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(1, value);\n\t\tbreak;\n\tcase this.BG1VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(1, value);\n\t\tbreak;\n\tcase this.BG2HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(2, value);\n\t\tbreak;\n\tcase this.BG2VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(2, value);\n\t\tbreak;\n\tcase this.BG3HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(3, value);\n\t\tbreak;\n\tcase this.BG3VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(3, value);\n\t\tbreak;\n\tcase this.BG2X_LO:\n\t\tthis.video.renderPath.writeBackgroundRefX(2, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG2X_HI:\n\t\tthis.video.renderPath.writeBackgroundRefX(2, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG2Y_LO:\n\t\tthis.video.renderPath.writeBackgroundRefY(2, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG2Y_HI:\n\t\tthis.video.renderPath.writeBackgroundRefY(2, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG2PA:\n\t\tthis.video.renderPath.writeBackgroundParamA(2, value);\n\t\tbreak;\n\tcase this.BG2PB:\n\t\tthis.video.renderPath.writeBackgroundParamB(2, value);\n\t\tbreak;\n\tcase this.BG2PC:\n\t\tthis.video.renderPath.writeBackgroundParamC(2, value);\n\t\tbreak;\n\tcase this.BG2PD:\n\t\tthis.video.renderPath.writeBackgroundParamD(2, value);\n\t\tbreak;\n\tcase this.BG3X_LO:\n\t\tthis.video.renderPath.writeBackgroundRefX(3, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG3X_HI:\n\t\tthis.video.renderPath.writeBackgroundRefX(3, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG3Y_LO:\n\t\tthis.video.renderPath.writeBackgroundRefY(3, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG3Y_HI:\n\t\tthis.video.renderPath.writeBackgroundRefY(3, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG3PA:\n\t\tthis.video.renderPath.writeBackgroundParamA(3, value);\n\t\tbreak;\n\tcase this.BG3PB:\n\t\tthis.video.renderPath.writeBackgroundParamB(3, value);\n\t\tbreak;\n\tcase this.BG3PC:\n\t\tthis.video.renderPath.writeBackgroundParamC(3, value);\n\t\tbreak;\n\tcase this.BG3PD:\n\t\tthis.video.renderPath.writeBackgroundParamD(3, value);\n\t\tbreak;\n\tcase this.WIN0H:\n\t\tthis.video.renderPath.writeWin0H(value);\n\t\tbreak;\n\tcase this.WIN1H:\n\t\tthis.video.renderPath.writeWin1H(value);\n\t\tbreak;\n\tcase this.WIN0V:\n\t\tthis.video.renderPath.writeWin0V(value);\n\t\tbreak;\n\tcase this.WIN1V:\n\t\tthis.video.renderPath.writeWin1V(value);\n\t\tbreak;\n\tcase this.WININ:\n\t\tvalue &= 0x3F3F;\n\t\tthis.video.renderPath.writeWinIn(value);\n\t\tbreak;\n\tcase this.WINOUT:\n\t\tvalue &= 0x3F3F;\n\t\tthis.video.renderPath.writeWinOut(value);\n\t\tbreak;\n\tcase this.BLDCNT:\n\t\tvalue &= 0x7FFF;\n\t\tthis.video.renderPath.writeBlendControl(value);\n\t\tbreak;\n\tcase this.BLDALPHA:\n\t\tvalue &= 0x1F1F;\n\t\tthis.video.renderPath.writeBlendAlpha(value);\n\t\tbreak;\n\tcase this.BLDY:\n\t\tvalue &= 0x001F;\n\t\tthis.video.renderPath.writeBlendY(value);\n\t\tbreak;\n\tcase this.MOSAIC:\n\t\tthis.video.renderPath.writeMosaic(value);\n\t\tbreak;\n\n\t// Sound\n\tcase this.SOUND1CNT_LO:\n\t\tvalue &= 0x007F;\n\t\tthis.audio.writeSquareChannelSweep(0, value);\n\t\tbreak;\n\tcase this.SOUND1CNT_HI:\n\t\tthis.audio.writeSquareChannelDLE(0, value);\n\t\tbreak;\n\tcase this.SOUND1CNT_X:\n\t\tvalue &= 0xC7FF;\n\t\tthis.audio.writeSquareChannelFC(0, value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUND2CNT_LO:\n\t\tthis.audio.writeSquareChannelDLE(1, value);\n\t\tbreak;\n\tcase this.SOUND2CNT_HI:\n\t\tvalue &= 0xC7FF;\n\t\tthis.audio.writeSquareChannelFC(1, value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUND3CNT_LO:\n\t\tvalue &= 0x00E0;\n\t\tthis.audio.writeChannel3Lo(value);\n\t\tbreak;\n\tcase this.SOUND3CNT_HI:\n\t\tvalue &= 0xE0FF;\n\t\tthis.audio.writeChannel3Hi(value);\n\t\tbreak;\n\tcase this.SOUND3CNT_X:\n\t\tvalue &= 0xC7FF;\n\t\tthis.audio.writeChannel3X(value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUND4CNT_LO:\n\t\tvalue &= 0xFF3F;\n\t\tthis.audio.writeChannel4LE(value);\n\t\tbreak;\n\tcase this.SOUND4CNT_HI:\n\t\tvalue &= 0xC0FF;\n\t\tthis.audio.writeChannel4FC(value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUNDCNT_LO:\n\t\tvalue &= 0xFF77;\n\t\tthis.audio.writeSoundControlLo(value);\n\t\tbreak;\n\tcase this.SOUNDCNT_HI:\n\t\tvalue &= 0xFF0F;\n\t\tthis.audio.writeSoundControlHi(value);\n\t\tbreak;\n\tcase this.SOUNDCNT_X:\n\t\tvalue &= 0x0080;\n\t\tthis.audio.writeEnable(value);\n\t\tbreak;\n\tcase this.WAVE_RAM0_LO:\n\tcase this.WAVE_RAM0_HI:\n\tcase this.WAVE_RAM1_LO:\n\tcase this.WAVE_RAM1_HI:\n\tcase this.WAVE_RAM2_LO:\n\tcase this.WAVE_RAM2_HI:\n\tcase this.WAVE_RAM3_LO:\n\tcase this.WAVE_RAM3_HI:\n\t\tthis.audio.writeWaveData(offset - this.WAVE_RAM0_LO, value, 2);\n\t\tbreak;\n\n\t// DMA\n\tcase this.DMA0SAD_LO:\n\tcase this.DMA0DAD_LO:\n\tcase this.DMA1SAD_LO:\n\tcase this.DMA1DAD_LO:\n\tcase this.DMA2SAD_LO:\n\tcase this.DMA2DAD_LO:\n\tcase this.DMA3SAD_LO:\n\tcase this.DMA3DAD_LO:\n\t\tthis.store32(offset, (this.registers[(offset >> 1) + 1] << 16) | value);\n\t\treturn;\n\n\tcase this.DMA0SAD_HI:\n\tcase this.DMA0DAD_HI:\n\tcase this.DMA1SAD_HI:\n\tcase this.DMA1DAD_HI:\n\tcase this.DMA2SAD_HI:\n\tcase this.DMA2DAD_HI:\n\tcase this.DMA3SAD_HI:\n\tcase this.DMA3DAD_HI:\n\t\tthis.store32(offset - 2, this.registers[(offset >> 1) - 1] | (value << 16));\n\t\treturn;\n\n\tcase this.DMA0CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(0, value);\n\t\tbreak;\n\tcase this.DMA0CNT_HI:\n\t\t// The DMA registers need to set the values before writing the control, as writing the\n\t\t// control can synchronously trigger a DMA transfer\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(0, value);\n\t\treturn;\n\tcase this.DMA1CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(1, value);\n\t\tbreak;\n\tcase this.DMA1CNT_HI:\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(1, value);\n\t\treturn;\n\tcase this.DMA2CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(2, value);\n\t\tbreak;\n\tcase this.DMA2CNT_HI:\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(2, value);\n\t\treturn;\n\tcase this.DMA3CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(3, value);\n\t\tbreak;\n\tcase this.DMA3CNT_HI:\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(3, value);\n\t\treturn;\n\n\t// Timers\n\tcase this.TM0CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(0, value);\n\t\treturn;\n\tcase this.TM1CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(1, value);\n\t\treturn;\n\tcase this.TM2CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(2, value);\n\t\treturn;\n\tcase this.TM3CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(3, value);\n\t\treturn;\n\n\tcase this.TM0CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(0, value);\n\t\tbreak;\n\tcase this.TM1CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(1, value);\n\t\tbreak;\n\tcase this.TM2CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(2, value);\n\t\tbreak;\n\tcase this.TM3CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(3, value);\n\t\tbreak;\n\n\t// SIO\n\tcase this.SIOMULTI0:\n \tcase this.SIOMULTI1:\n \tcase this.SIOMULTI2:\n \tcase this.SIOMULTI3:\n \tcase this.SIODATA8:\n \t\tthis.STUB_REG('SIO', offset);\n \t\tbreak;\n\tcase this.RCNT:\n\t\tthis.sio.setMode(((value >> 12) & 0xC) | ((this.registers[this.SIOCNT >> 1] >> 12) & 0x3));\n\t\tthis.sio.writeRCNT(value);\n\t\tbreak;\n\tcase this.SIOCNT:\n\t\tthis.sio.setMode(((value >> 12) & 0x3) | ((this.registers[this.RCNT >> 1] >> 12) & 0xC));\n\t\tthis.sio.writeSIOCNT(value);\n\t\treturn;\n\tcase this.JOYCNT:\n\tcase this.JOYSTAT:\n\t\tthis.STUB_REG('JOY', offset);\n\t\tbreak;\n\n\t// Misc\n\tcase this.IE:\n\t\tvalue &= 0x3FFF;\n\t\tthis.cpu.irq.setInterruptsEnabled(value);\n\t\tbreak;\n\tcase this.IF:\n\t\tthis.cpu.irq.dismissIRQs(value);\n\t\treturn;\n\tcase this.WAITCNT:\n\t\tvalue &= 0xDFFF;\n\t\tthis.cpu.mmu.adjustTimings(value);\n\t\tbreak;\n\tcase this.IME:\n\t\tvalue &= 0x0001;\n\t\tthis.cpu.irq.masterEnable(value);\n\t\tbreak;\n\tdefault:\n\t\tthis.STUB_REG('I/O', offset);\n\t}\n\tthis.registers[offset >> 1] = value;\n};\n\nGameBoyAdvanceIO.prototype.store32 = function(offset, value) {\n\tswitch (offset) {\n\tcase this.BG2X_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefX(2, value);\n\t\tbreak;\n\tcase this.BG2Y_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefY(2, value);\n\t\tbreak;\n\tcase this.BG3X_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefX(3, value);\n\t\tbreak;\n\tcase this.BG3Y_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefY(3, value);\n\t\tbreak;\n\tcase this.DMA0SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(0, value);\n\t\tbreak;\n\tcase this.DMA0DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(0, value);\n\t\tbreak;\n\tcase this.DMA1SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(1, value);\n\t\tbreak;\n\tcase this.DMA1DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(1, value);\n\t\tbreak;\n\tcase this.DMA2SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(2, value);\n\t\tbreak;\n\tcase this.DMA2DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(2, value);\n\t\tbreak;\n\tcase this.DMA3SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(3, value);\n\t\tbreak;\n\tcase this.DMA3DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(3, value);\n\t\tbreak;\n\tcase this.FIFO_A_LO:\n\t\tthis.audio.appendToFifoA(value);\n\t\treturn;\n\tcase this.FIFO_B_LO:\n\t\tthis.audio.appendToFifoB(value);\n\t\treturn;\n\n\t// High bits of this write should be ignored\n\tcase this.IME:\n\t\tthis.store16(offset, value & 0xFFFF);\n\t\treturn;\n\tcase this.JOY_RECV:\n\tcase this.JOY_TRANS:\n\t\tthis.STUB_REG('JOY', offset);\n\t\treturn;\n\tdefault:\n\t\tthis.store16(offset, value & 0xFFFF);\n\t\tthis.store16(offset | 2, value >>> 16);\n\t\treturn;\n\t}\n\n\tthis.registers[offset >> 1] = value & 0xFFFF;\n\tthis.registers[(offset >> 1) + 1] = value >>> 16;\n};\n\nGameBoyAdvanceIO.prototype.invalidatePage = function(address) {};\n\nGameBoyAdvanceIO.prototype.STUB_REG = function(type, offset) {\n\tthis.core.STUB('Unimplemented ' + type + ' register write: ' + offset.toString(16));\n};\n","window.GameBoyAdvanceAudio = function GameBoyAdvanceAudio() {\n\twindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\tif (window.AudioContext) {\n\t\tvar self = this;\n\t\tthis.context = new AudioContext();\n\t\tthis.bufferSize = 0;\n\t\tthis.bufferSize = 4096;\n\t\tthis.maxSamples = this.bufferSize << 2;\n\t\tthis.buffers = [new Float32Array(this.maxSamples), new Float32Array(this.maxSamples)];\n\t\tthis.sampleMask = this.maxSamples - 1;\n\t\tif (this.context.createScriptProcessor) {\n\t\t\tthis.jsAudio = this.context.createScriptProcessor(this.bufferSize);\n\t\t} else {\n\t\t\tthis.jsAudio = this.context.createJavaScriptNode(this.bufferSize);\n\t\t}\n\t\tthis.jsAudio.onaudioprocess = function(e) { self.audioProcess(e) };\n\t} else {\n\t\tthis.context = null;\n\t}\n\n\tthis.masterEnable = true;\n\tthis.masterVolume = 1.0;\n\n\tthis.SOUND_MAX = 0x400;\n\tthis.FIFO_MAX = 0x200;\n\tthis.PSG_MAX = 0x080;\n};\n\nGameBoyAdvanceAudio.prototype.clear = function() {\n\tthis.fifoA = [];\n\tthis.fifoB = [];\n\tthis.fifoASample = 0;\n\tthis.fifoBSample = 0;\n\n\tthis.enabled = false;\n\tif (this.context) {\n\t\ttry {\n\t\t\tthis.jsAudio.disconnect(this.context.destination);\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\tthis.enableChannel3 = false;\n\tthis.enableChannel4 = false;\n\tthis.enableChannelA = false;\n\tthis.enableChannelB = false;\n\tthis.enableRightChannelA = false;\n\tthis.enableLeftChannelA = false;\n\tthis.enableRightChannelB = false;\n\tthis.enableLeftChannelB = false;\n\n\tthis.playingChannel3 = false;\n\tthis.playingChannel4 = false;\n\n\tthis.volumeLeft = 0;\n\tthis.volumeRight = 0;\n\tthis.ratioChannelA = 1;\n\tthis.ratioChannelB = 1;\n\tthis.enabledLeft = 0;\n\tthis.enabledRight = 0;\n\n\tthis.dmaA = -1;\n\tthis.dmaB = -1;\n\tthis.soundTimerA = 0;\n\tthis.soundTimerB = 0;\n\n\tthis.soundRatio = 1;\n\tthis.soundBias = 0x200;\n\n\tthis.squareChannels = new Array();\n\tfor (var i = 0; i < 2; ++i) {\n\t\tthis.squareChannels[i] = {\n\t\t\tenabled: false,\n\t\t\tplaying: false,\n\t\t\tsample: 0,\n\t\t\tduty: 0.5,\n\t\t\tincrement: 0,\n\t\t\tstep: 0,\n\t\t\tinitialVolume: 0,\n\t\t\tvolume: 0,\n\t\t\tfrequency: 0,\n\t\t\tinterval: 0,\n\t\t\tsweepSteps: 0,\n\t\t\tsweepIncrement: 0,\n\t\t\tsweepInterval: 0,\n\t\t\tdoSweep: false,\n\t\t\traise: 0,\n\t\t\tlower: 0,\n\t\t\tnextStep: 0,\n\t\t\ttimed: false,\n\t\t\tlength: 0,\n\t\t\tend: 0\n\t\t}\n\t}\n\n\tthis.waveData = new Uint8Array(32);\n\tthis.channel3Dimension = 0;\n\tthis.channel3Bank = 0;\n\tthis.channel3Volume = 0;\n\tthis.channel3Interval = 0;\n\tthis.channel3Next = 0;\n\tthis.channel3Length = 0;\n\tthis.channel3Timed = false;\n\tthis.channel3End = 0;\n\tthis.channel3Pointer =0;\n\tthis.channel3Sample = 0;\n\n\tthis.cpuFrequency = this.core.irq.FREQUENCY;\n\n\tthis.channel4 = {\n\t\tsample: 0,\n\t\tlfsr: 0,\n\t\twidth: 15,\n\t\tinterval: this.cpuFrequency / 524288,\n\t\tincrement: 0,\n\t\tstep: 0,\n\t\tinitialVolume: 0,\n\t\tvolume: 0,\n\t\tnextStep: 0,\n\t\ttimed: false,\n\t\tlength: 0,\n\t\tend: 0\n\t};\n\n\tthis.nextEvent = 0;\n\n\tthis.nextSample = 0;\n\tthis.outputPointer = 0;\n\tthis.samplePointer = 0;\n\n\tthis.backup = 0;\n\tthis.totalSamples = 0;\n\n\tthis.sampleRate = 32768;\n\tthis.sampleInterval = this.cpuFrequency / this.sampleRate;\n\tthis.resampleRatio = 1;\n\tif (this.context) {\n\t\tthis.resampleRatio = this.sampleRate / this.context.sampleRate;\n\t}\n\n\tthis.writeSquareChannelFC(0, 0);\n\tthis.writeSquareChannelFC(1, 0);\n\tthis.writeChannel4FC(0);\n};\n\nGameBoyAdvanceAudio.prototype.freeze = function() {\n\treturn {\n\t\tnextSample: this.nextSample\n\t};\n};\n\nGameBoyAdvanceAudio.prototype.defrost = function(frost) {\n\tthis.nextSample = frost.nextSample;\n};\n\nGameBoyAdvanceAudio.prototype.pause = function(paused) {\n\tif (this.context) {\n\t\tif (paused) {\n\t\t\ttry {\n\t\t\t\tthis.jsAudio.disconnect(this.context.destination);\n\t\t\t} catch (e) {\n\t\t\t\t// Sigh\n\t\t\t}\n\t\t} else if (this.enabled) {\n\t\t\tthis.jsAudio.connect(this.context.destination);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.updateTimers = function() {\n\tvar cycles = this.cpu.cycles;\n\tif (!this.enabled || (cycles < this.nextEvent && cycles < this.nextSample)) {\n\t\treturn;\n\t}\n\n\tif (cycles >= this.nextEvent) {\n\t\tvar channel = this.squareChannels[0];\n\t\tthis.nextEvent = Infinity;\n\t\tif (channel.playing) {\n\t\t\tthis.updateSquareChannel(channel, cycles);\n\t\t}\n\n\t\tchannel = this.squareChannels[1];\n\t\tif (channel.playing) {\n\t\t\tthis.updateSquareChannel(channel, cycles);\n\t\t}\n\n\t\tif (this.enableChannel3 && this.playingChannel3) {\n\t\t\tif (cycles >= this.channel3Next) {\n\t\t\t\tif (this.channel3Write) {\n\t\t\t\t\tvar sample = this.waveData[this.channel3Pointer >> 1];\n\t\t\t\t\tthis.channel3Sample = (((sample >> ((this.channel3Pointer & 1) << 2)) & 0xF) - 0x8) / 8;\n\t\t\t\t\tthis.channel3Pointer = (this.channel3Pointer + 1);\n\t\t\t\t\tif (this.channel3Dimension && this.channel3Pointer >= 64) {\n\t\t\t\t\t\tthis.channel3Pointer -= 64;\n\t\t\t\t\t} else if (!this.channel3Bank && this.channel3Pointer >= 32) {\n\t\t\t\t\t\tthis.channel3Pointer -= 32;\n\t\t\t\t\t} else if (this.channel3Pointer >= 64) {\n\t\t\t\t\t\tthis.channel3Pointer -= 32;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.channel3Next += this.channel3Interval;\n\t\t\t\tif (this.channel3Interval && this.nextEvent > this.channel3Next) {\n\t\t\t\t\tthis.nextEvent = this.channel3Next;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.channel3Timed && cycles >= this.channel3End) {\n\t\t\t\tthis.playingChannel3 = false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.enableChannel4 && this.playingChannel4) {\n\t\t\tif (this.channel4.timed && cycles >= this.channel4.end) {\n\t\t\t\tthis.playingChannel4 = false;\n\t\t\t} else {\n\t\t\t\tif (cycles >= this.channel4.next) {\n\t\t\t\t\tthis.channel4.lfsr >>= 1;\n\t\t\t\t\tvar sample = this.channel4.lfsr & 1;\n\t\t\t\t\tthis.channel4.lfsr |= (((this.channel4.lfsr >> 1) & 1) ^ sample) << (this.channel4.width - 1);\n\t\t\t\t\tthis.channel4.next += this.channel4.interval;\n\t\t\t\t\tthis.channel4.sample = (sample - 0.5) * 2 * this.channel4.volume;\n\t\t\t\t}\n\t\t\t\tthis.updateEnvelope(this.channel4, cycles);\n\t\t\t\tif (this.nextEvent > this.channel4.next) {\n\t\t\t\t\tthis.nextEvent = this.channel4.next;\n\t\t\t\t}\n\t\t\t\tif (this.channel4.timed && this.nextEvent > this.channel4.end) {\n\t\t\t\t\tthis.nextEvent = this.channel4.end;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (cycles >= this.nextSample) {\n\t\tthis.sample();\n\t\tthis.nextSample += this.sampleInterval;\n\t}\n\n\tthis.nextEvent = Math.ceil(this.nextEvent);\n\tif ((this.nextEvent < cycles) || (this.nextSample < cycles)) {\n\t\t// STM instructions may take a long time\n\t\tthis.updateTimers();\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeEnable = function(value) {\n\tthis.enabled = !!value;\n\tthis.nextEvent = this.cpu.cycles;\n\tthis.nextSample = this.nextEvent;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n\tif (this.context) {\n\t\tif (value) {\n\t\t\tthis.jsAudio.connect(this.context.destination);\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tthis.jsAudio.disconnect(this.context.destination);\n\t\t\t} catch (e) {\n\t\t\t}\n\t\t}\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeSoundControlLo = function(value) {\n\tthis.masterVolumeLeft = value & 0x7;\n\tthis.masterVolumeRight = (value >> 4) & 0x7;\n\tthis.enabledLeft = (value >> 8) & 0xF;\n\tthis.enabledRight = (value >> 12) & 0xF;\n\n\tthis.setSquareChannelEnabled(this.squareChannels[0], (this.enabledLeft | this.enabledRight) & 0x1);\n\tthis.setSquareChannelEnabled(this.squareChannels[1], (this.enabledLeft | this.enabledRight) & 0x2);\n\tthis.enableChannel3 = (this.enabledLeft | this.enabledRight) & 0x4;\n\tthis.setChannel4Enabled((this.enabledLeft | this.enabledRight) & 0x8);\n\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.writeSoundControlHi = function(value) {\n\tswitch (value & 0x0003) {\n\tcase 0:\n\t\tthis.soundRatio = 0.25;\n\t\tbreak;\n\tcase 1:\n\t\tthis.soundRatio = 0.50;\n\t\tbreak;\n\tcase 2:\n\t\tthis.soundRatio = 1;\n\t\tbreak;\n\t}\n\tthis.ratioChannelA = (((value & 0x0004) >> 2) + 1) * 0.5;\n\tthis.ratioChannelB = (((value & 0x0008) >> 3) + 1) * 0.5;\n\n\tthis.enableRightChannelA = value & 0x0100;\n\tthis.enableLeftChannelA = value & 0x0200;\n\tthis.enableChannelA  = value & 0x0300;\n\tthis.soundTimerA = value & 0x0400;\n\tif (value & 0x0800) {\n\t\tthis.fifoA = [];\n\t}\n\tthis.enableRightChannelB = value & 0x1000;\n\tthis.enableLeftChannelB = value & 0x2000;\n\tthis.enableChannelB  = value & 0x3000;\n\tthis.soundTimerB = value & 0x4000;\n\tif (value & 0x8000) {\n\t\tthis.fifoB = [];\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.resetSquareChannel = function(channel) {\n\tif (channel.step) {\n\t\tchannel.nextStep = this.cpu.cycles + channel.step;\n\t}\n\tif (channel.enabled && !channel.playing) {\n\t\tchannel.raise = this.cpu.cycles;\n\t\tchannel.lower = channel.raise + channel.duty * channel.interval;\n\t\tchannel.end = this.cpu.cycles + channel.length;\n\t\tthis.nextEvent = this.cpu.cycles;\n\t}\n\tchannel.playing = channel.enabled;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.setSquareChannelEnabled = function(channel, enable) {\n\tif (!(channel.enabled && channel.playing) && enable) {\n\t\tchannel.enabled = !!enable;\n\t\tthis.updateTimers();\n\t\tthis.core.irq.pollNextEvent();\n\t} else {\n\t\tchannel.enabled = !!enable;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeSquareChannelSweep = function(channelId, value) {\n\tvar channel = this.squareChannels[channelId];\n\tchannel.sweepSteps = value & 0x07;\n\tchannel.sweepIncrement = (value & 0x08) ? -1 : 1;\n\tchannel.sweepInterval = ((value >> 4) & 0x7) * this.cpuFrequency / 128;\n\tchannel.doSweep = !!channel.sweepInterval;\n\tchannel.nextSweep = this.cpu.cycles + channel.sweepInterval;\n\tthis.resetSquareChannel(channel);\n};\n\nGameBoyAdvanceAudio.prototype.writeSquareChannelDLE = function(channelId, value) {\n\tvar channel = this.squareChannels[channelId];\n\tvar duty = (value >> 6) & 0x3;\n\tswitch (duty) {\n\tcase 0:\n\t\tchannel.duty = 0.125;\n\t\tbreak;\n\tcase 1:\n\t\tchannel.duty = 0.25;\n\t\tbreak;\n\tcase 2:\n\t\tchannel.duty = 0.5;\n\t\tbreak;\n\tcase 3:\n\t\tchannel.duty = 0.75;\n\t\tbreak;\n\t}\n\tthis.writeChannelLE(channel, value);\n\tthis.resetSquareChannel(channel);\n};\n\nGameBoyAdvanceAudio.prototype.writeSquareChannelFC = function(channelId, value) {\n\tvar channel = this.squareChannels[channelId];\n\tvar frequency = value & 2047;\n\tchannel.frequency = frequency;\n\tchannel.interval = this.cpuFrequency * (2048 - frequency) / 131072;\n\tchannel.timed = !!(value & 0x4000);\n\n\tif (value & 0x8000) {\n\t\tthis.resetSquareChannel(channel);\n\t\tchannel.volume = channel.initialVolume;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.updateSquareChannel = function(channel, cycles) {\n\tif (channel.timed && cycles >= channel.end) {\n\t\tchannel.playing = false;\n\t\treturn;\n\t}\n\n\tif (channel.doSweep && cycles >= channel.nextSweep) {\n\t\tchannel.frequency += channel.sweepIncrement * (channel.frequency >> channel.sweepSteps);\n\t\tif (channel.frequency < 0) {\n\t\t\tchannel.frequency = 0;\n\t\t} else if (channel.frequency > 2047) {\n\t\t\tchannel.frequency = 2047;\n\t\t\tchannel.playing = false;\n\t\t\treturn;\n\t\t}\n\t\tchannel.interval = this.cpuFrequency * (2048 - channel.frequency) / 131072;\n\t\tchannel.nextSweep += channel.sweepInterval;\n\t}\n\n\tif (cycles >= channel.raise) {\n\t\tchannel.sample = channel.volume;\n\t\tchannel.lower = channel.raise + channel.duty * channel.interval;\n\t\tchannel.raise += channel.interval;\n\t} else if (cycles >= channel.lower) {\n\t\tchannel.sample = -channel.volume;\n\t\tchannel.lower += channel.interval;\n\t}\n\n\tthis.updateEnvelope(channel, cycles);\n\n\tif (this.nextEvent > channel.raise) {\n\t\tthis.nextEvent = channel.raise;\n\t}\n\tif (this.nextEvent > channel.lower) {\n\t\tthis.nextEvent = channel.lower;\n\t}\n\tif (channel.timed && this.nextEvent > channel.end) {\n\t\tthis.nextEvent = channel.end;\n\t}\n\tif (channel.doSweep && this.nextEvent > channel.nextSweep) {\n\t\tthis.nextEvent = channel.nextSweep;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel3Lo = function(value) {\n\tthis.channel3Dimension = value & 0x20;\n\tthis.channel3Bank = value & 0x40;\n\tvar enable = value & 0x80;\n\tif (!this.channel3Write && enable) {\n\t\tthis.channel3Write = enable;\n\t\tthis.resetChannel3();\n\t} else {\n\t\tthis.channel3Write = enable;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel3Hi = function(value) {\n\tthis.channel3Length = this.cpuFrequency * (0x100 - (value & 0xFF)) / 256;\n\tvar volume = (value >> 13) & 0x7;\n\tswitch (volume) {\n\tcase 0:\n\t\tthis.channel3Volume = 0;\n\t\tbreak;\n\tcase 1:\n\t\tthis.channel3Volume = 1;\n\t\tbreak;\n\tcase 2:\n\t\tthis.channel3Volume = 0.5;\n\t\tbreak;\n\tcase 3:\n\t\tthis.channel3Volume = 0.25;\n\t\tbreak;\n\tdefault:\n\t\tthis.channel3Volume = 0.75;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel3X = function(value) {\n\tthis.channel3Interval = this.cpuFrequency * (2048 - (value & 0x7FF)) / 2097152;\n\tthis.channel3Timed = !!(value & 0x4000);\n\tif (this.channel3Write) {\n\t\tthis.resetChannel3();\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.resetChannel3 = function() {\n\tthis.channel3Next = this.cpu.cycles;\n\tthis.nextEvent = this.channel3Next;\n\tthis.channel3End = this.cpu.cycles + this.channel3Length;\n\tthis.playingChannel3 = this.channel3Write;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.writeWaveData = function(offset, data, width) {\n\tif (!this.channel3Bank) {\n\t\toffset += 16;\n\t}\n\tif (width == 2) {\n\t\tthis.waveData[offset] = data & 0xFF;\n\t\tdata >>= 8;\n\t\t++offset;\n\t}\n\tthis.waveData[offset] = data & 0xFF;\n};\n\nGameBoyAdvanceAudio.prototype.setChannel4Enabled = function(enable) {\n\tif (!this.enableChannel4 && enable) {\n\t\tthis.channel4.next = this.cpu.cycles;\n\t\tthis.channel4.end = this.cpu.cycles + this.channel4.length;\n\t\tthis.enableChannel4 = true;\n\t\tthis.playingChannel4 = true;\n\t\tthis.nextEvent = this.cpu.cycles;\n\t\tthis.updateEnvelope(this.channel4);\n\t\tthis.updateTimers();\n\t\tthis.core.irq.pollNextEvent();\n\t} else {\n\t\tthis.enableChannel4 = enable;\n\t}\n}\n\nGameBoyAdvanceAudio.prototype.writeChannel4LE = function(value) {\n\tthis.writeChannelLE(this.channel4, value);\n\tthis.resetChannel4();\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel4FC = function(value) {\n\tthis.channel4.timed = !!(value & 0x4000);\n\n\tvar r = value & 0x7;\n\tif (!r) {\n\t\tr = 0.5;\n\t}\n\tvar s = (value >> 4) & 0xF;\n\tvar interval = this.cpuFrequency * (r * (2 << s)) / 524288;\n\tif (interval != this.channel4.interval) {\n\t\tthis.channel4.interval = interval;\n\t\tthis.resetChannel4();\n\t}\n\n\tvar width = (value & 0x8) ? 7 : 15;\n\tif (width != this.channel4.width) {\n\t\tthis.channel4.width = width;\n\t\tthis.resetChannel4();\n\t}\n\n\tif (value & 0x8000) {\n\t\tthis.resetChannel4();\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.resetChannel4 = function() {\n\tif (this.channel4.width == 15) {\n\t\tthis.channel4.lfsr = 0x4000;\n\t} else {\n\t\tthis.channel4.lfsr = 0x40;\n\t}\n\tthis.channel4.volume = this.channel4.initialVolume;\n\tif (this.channel4.step) {\n\t\tthis.channel4.nextStep = this.cpu.cycles + this.channel4.step;\n\t}\n\tthis.channel4.end = this.cpu.cycles + this.channel4.length;\n\tthis.channel4.next = this.cpu.cycles;\n\tthis.nextEvent = this.channel4.next;\n\n\tthis.playingChannel4 = this.enableChannel4;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.writeChannelLE = function(channel, value) {\n\tchannel.length = this.cpuFrequency * ((0x40 - (value & 0x3F)) / 256);\n\n\tif (value & 0x0800) {\n\t\tchannel.increment = 1 / 16;\n\t} else {\n\t\tchannel.increment = -1 / 16;\n\t}\n\tchannel.initialVolume = ((value >> 12) & 0xF) / 16;\n\n\tchannel.step = this.cpuFrequency * (((value >> 8) & 0x7) / 64);\n};\n\nGameBoyAdvanceAudio.prototype.updateEnvelope = function(channel, cycles) {\n\tif (channel.step) {\n\t\tif (cycles >= channel.nextStep) {\n\t\t\tchannel.volume += channel.increment;\n\t\t\tif (channel.volume > 1) {\n\t\t\t\tchannel.volume = 1;\n\t\t\t} else if (channel.volume < 0) {\n\t\t\t\tchannel.volume = 0;\n\t\t\t}\n\t\t\tchannel.nextStep += channel.step;\n\t\t}\n\n\t\tif (this.nextEvent > channel.nextStep) {\n\t\t\tthis.nextEvent = channel.nextStep;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.appendToFifoA = function(value) {\n\tvar b;\n\tif (this.fifoA.length > 28) {\n\t\tthis.fifoA = this.fifoA.slice(-28);\n\t}\n\tfor (var i = 0; i < 4; ++i) {\n\t\tb = (value & 0xFF) << 24;\n\t\tvalue >>= 8;\n\t\tthis.fifoA.push(b / 0x80000000);\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.appendToFifoB = function(value) {\n\tvar b;\n\tif (this.fifoB.length > 28) {\n\t\tthis.fifoB = this.fifoB.slice(-28);\n\t}\n\tfor (var i = 0; i < 4; ++i) {\n\t\tb = (value & 0xFF) << 24;\n\t\tvalue >>= 8;\n\t\tthis.fifoB.push(b / 0x80000000);\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.sampleFifoA = function() {\n\tif (this.fifoA.length <= 16) {\n\t\tvar dma = this.core.irq.dma[this.dmaA];\n\t\tdma.nextCount = 4;\n\t\tthis.core.mmu.serviceDma(this.dmaA, dma);\n\t}\n\tthis.fifoASample = this.fifoA.shift();\n};\n\nGameBoyAdvanceAudio.prototype.sampleFifoB = function() {\n\tif (this.fifoB.length <= 16) {\n\t\tvar dma = this.core.irq.dma[this.dmaB];\n\t\tdma.nextCount = 4;\n\t\tthis.core.mmu.serviceDma(this.dmaB, dma);\n\t}\n\tthis.fifoBSample = this.fifoB.shift();\n};\n\nGameBoyAdvanceAudio.prototype.scheduleFIFODma = function(number, info) {\n\tswitch (info.dest) {\n\tcase this.cpu.mmu.BASE_IO | this.cpu.irq.io.FIFO_A_LO:\n\t\t// FIXME: is this needed or a hack?\n\t\tinfo.dstControl = 2;\n\t\tthis.dmaA = number;\n\t\tbreak;\n\tcase this.cpu.mmu.BASE_IO | this.cpu.irq.io.FIFO_B_LO:\n\t\tinfo.dstControl = 2;\n\t\tthis.dmaB = number;\n\t\tbreak;\n\tdefault:\n\t\tthis.core.WARN('Tried to schedule FIFO DMA for non-FIFO destination');\n\t\tbreak;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.sample = function() {\n\tvar sampleLeft = 0;\n\tvar sampleRight = 0;\n\tvar sample;\n\tvar channel;\n\n\tchannel = this.squareChannels[0];\n\tif (channel.playing) {\n\t\tsample = channel.sample * this.soundRatio * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x1) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x1) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tchannel = this.squareChannels[1];\n\tif (channel.playing) {\n\t\tsample = channel.sample * this.soundRatio * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x2) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x2) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.playingChannel3) {\n\t\tsample = this.channel3Sample * this.soundRatio * this.channel3Volume * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x4) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x4) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.playingChannel4) {\n\t\tsample = this.channel4.sample * this.soundRatio * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x8) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x8) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.enableChannelA) {\n\t\tsample = this.fifoASample * this.FIFO_MAX * this.ratioChannelA;\n\t\tif (this.enableLeftChannelA) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enableRightChannelA) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.enableChannelB) {\n\t\tsample = this.fifoBSample * this.FIFO_MAX * this.ratioChannelB;\n\t\tif (this.enableLeftChannelB) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enableRightChannelB) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tvar samplePointer = this.samplePointer;\n\tsampleLeft *= this.masterVolume / this.SOUND_MAX;\n\tsampleLeft = Math.max(Math.min(sampleLeft, 1), -1);\n\tsampleRight *= this.masterVolume / this.SOUND_MAX;\n\tsampleRight = Math.max(Math.min(sampleRight, 1), -1);\n\tif (this.buffers) {\n\t\tthis.buffers[0][samplePointer] = sampleLeft;\n\t\tthis.buffers[1][samplePointer] = sampleRight;\n\t}\n\tthis.samplePointer = (samplePointer + 1) & this.sampleMask;\n};\n\nGameBoyAdvanceAudio.prototype.audioProcess = function(audioProcessingEvent) {\n\tvar left = audioProcessingEvent.outputBuffer.getChannelData(0);\n\tvar right = audioProcessingEvent.outputBuffer.getChannelData(1);\n\tif (this.masterEnable) {\n\t\tvar i;\n\t\tvar o = this.outputPointer;\n\t\tfor (i = 0; i < this.bufferSize; ++i, o += this.resampleRatio) {\n\t\t\tif (o >= this.maxSamples) {\n\t\t\t\to -= this.maxSamples;\n\t\t\t}\n\t\t\tif ((o | 0) == this.samplePointer) {\n\t\t\t\t++this.backup;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tleft[i] = this.buffers[0][o | 0];\n\t\t\tright[i] = this.buffers[1][o | 0];\n\t\t}\n\t\tfor (; i < this.bufferSize; ++i) {\n\t\t\tleft[i] = 0;\n\t\t\tright[i] = 0;\n\t\t}\n\t\tthis.outputPointer = o;\n\t\t++this.totalSamples;\n\t} else {\n\t\tfor (i = 0; i < this.bufferSize; ++i) {\n\t\t\tleft[i] = 0;\n\t\t\tright[i] = 0;\n\t\t}\n\t}\n};\n","window.GameBoyAdvanceVideo = function GameBoyAdvanceVideo() {\n\tthis.renderPath = new GameBoyAdvanceSoftwareRenderer();\n\n\tthis.CYCLES_PER_PIXEL = 4;\n\n\tthis.HORIZONTAL_PIXELS = 240;\n\tthis.HBLANK_PIXELS = 68;\n\tthis.HDRAW_LENGTH = 1006;\n\tthis.HBLANK_LENGTH = 226;\n\tthis.HORIZONTAL_LENGTH = 1232;\n\n\tthis.VERTICAL_PIXELS = 160;\n\tthis.VBLANK_PIXELS = 68;\n\tthis.VERTICAL_TOTAL_PIXELS = 228;\n\n\tthis.TOTAL_LENGTH = 280896;\n\n\tthis.drawCallback = function() {};\n\tthis.vblankCallback = function() {};\n};\n\nGameBoyAdvanceVideo.prototype.clear = function() {\n\tthis.renderPath.clear(this.cpu.mmu);\n\n\t// DISPSTAT\n\tthis.DISPSTAT_MASK = 0xFF38;\n\tthis.inHblank = false;\n\tthis.inVblank = false;\n\tthis.vcounter = 0;\n\tthis.vblankIRQ = 0;\n\tthis.hblankIRQ = 0;\n\tthis.vcounterIRQ = 0;\n\tthis.vcountSetting = 0;\n\n\t// VCOUNT\n\tthis.vcount = -1;\n\n\tthis.lastHblank = 0;\n\tthis.nextHblank = this.HDRAW_LENGTH;\n\tthis.nextEvent = this.nextHblank;\n\n\tthis.nextHblankIRQ = 0;\n\tthis.nextVblankIRQ = 0;\n\tthis.nextVcounterIRQ = 0;\n};\n\nGameBoyAdvanceVideo.prototype.freeze = function() {\n\treturn {\n\t\t'inHblank': this.inHblank,\n\t\t'inVblank': this.inVblank,\n\t\t'vcounter': this.vcounter,\n\t\t'vblankIRQ': this.vblankIRQ,\n\t\t'hblankIRQ': this.hblankIRQ,\n\t\t'vcounterIRQ': this.vcounterIRQ,\n\t\t'vcountSetting': this.vcountSetting,\n\t\t'vcount': this.vcount,\n\t\t'lastHblank': this.lastHblank,\n\t\t'nextHblank': this.nextHblank,\n\t\t'nextEvent': this.nextEvent,\n\t\t'nextHblankIRQ': this.nextHblankIRQ,\n\t\t'nextVblankIRQ': this.nextVblankIRQ,\n\t\t'nextVcounterIRQ': this.nextVcounterIRQ,\n\t\t'renderPath': this.renderPath.freeze(this.core.encodeBase64)\n\t};\n};\n\nGameBoyAdvanceVideo.prototype.defrost = function(frost) {\n\tthis.inHblank = frost.inHblank;\n\tthis.inVblank = frost.inVblank;\n\tthis.vcounter = frost.vcounter;\n\tthis.vblankIRQ = frost.vblankIRQ;\n\tthis.hblankIRQ = frost.hblankIRQ;\n\tthis.vcounterIRQ = frost.vcounterIRQ;\n\tthis.vcountSetting = frost.vcountSetting;\n\tthis.vcount = frost.vcount;\n\tthis.lastHblank = frost.lastHblank;\n\tthis.nextHblank = frost.nextHblank;\n\tthis.nextEvent = frost.nextEvent;\n\tthis.nextHblankIRQ = frost.nextHblankIRQ;\n\tthis.nextVblankIRQ = frost.nextVblankIRQ;\n\tthis.nextVcounterIRQ = frost.nextVcounterIRQ;\n\tthis.renderPath.defrost(frost.renderPath, this.core.decodeBase64);\n};\n\nGameBoyAdvanceVideo.prototype.setBacking = function(backing) {\n\tvar pixelData = backing.createImageData(this.HORIZONTAL_PIXELS, this.VERTICAL_PIXELS);\n\tthis.context = backing;\n\n\t// Clear backing first\n\tfor (var offset = 0; offset < this.HORIZONTAL_PIXELS * this.VERTICAL_PIXELS * 4;) {\n\t\tpixelData.data[offset++] = 0xFF;\n\t\tpixelData.data[offset++] = 0xFF;\n\t\tpixelData.data[offset++] = 0xFF;\n\t\tpixelData.data[offset++] = 0xFF;\n\t}\n\n\tthis.renderPath.setBacking(pixelData);\n}\n\nGameBoyAdvanceVideo.prototype.updateTimers = function(cpu) {\n\tvar cycles = cpu.cycles;\n\n\tif (this.nextEvent <= cycles) {\n\t\tif (this.inHblank) {\n\t\t\t// End Hblank\n\t\t\tthis.inHblank = false;\n\t\t\tthis.nextEvent = this.nextHblank;\n\n\t\t\t++this.vcount;\n\n\t\t\tswitch (this.vcount) {\n\t\t\tcase this.VERTICAL_PIXELS:\n\t\t\t\tthis.inVblank = true;\n\t\t\t\tthis.renderPath.finishDraw(this);\n\t\t\t\tthis.nextVblankIRQ = this.nextEvent + this.TOTAL_LENGTH;\n\t\t\t\tthis.cpu.mmu.runVblankDmas();\n\t\t\t\tif (this.vblankIRQ) {\n\t\t\t\t\tthis.cpu.irq.raiseIRQ(this.cpu.irq.IRQ_VBLANK);\n\t\t\t\t}\n\t\t\t\tthis.vblankCallback();\n\t\t\t\tbreak;\n\t\t\tcase this.VERTICAL_TOTAL_PIXELS - 1:\n\t\t\t\tthis.inVblank = false;\n\t\t\t\tbreak;\n\t\t\tcase this.VERTICAL_TOTAL_PIXELS:\n\t\t\t\tthis.vcount = 0;\n\t\t\t\tthis.renderPath.startDraw();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.vcounter = this.vcount == this.vcountSetting;\n\t\t\tif (this.vcounter && this.vcounterIRQ) {\n\t\t\t\tthis.cpu.irq.raiseIRQ(this.cpu.irq.IRQ_VCOUNTER);\n\t\t\t\tthis.nextVcounterIRQ += this.TOTAL_LENGTH;\n\t\t\t}\n\n\t\t\tif (this.vcount < this.VERTICAL_PIXELS) {\n\t\t\t\tthis.renderPath.drawScanline(this.vcount);\n\t\t\t}\n\t\t} else {\n\t\t\t// Begin Hblank\n\t\t\tthis.inHblank = true;\n\t\t\tthis.lastHblank = this.nextHblank;\n\t\t\tthis.nextEvent = this.lastHblank + this.HBLANK_LENGTH;\n\t\t\tthis.nextHblank = this.nextEvent + this.HDRAW_LENGTH;\n\t\t\tthis.nextHblankIRQ = this.nextHblank;\n\n\t\t\tif (this.vcount < this.VERTICAL_PIXELS) {\n\t\t\t\tthis.cpu.mmu.runHblankDmas();\n\t\t\t}\n\t\t\tif (this.hblankIRQ) {\n\t\t\t\tthis.cpu.irq.raiseIRQ(this.cpu.irq.IRQ_HBLANK);\n\t\t\t}\n\t\t}\n\t}\n};\n\nGameBoyAdvanceVideo.prototype.writeDisplayStat = function(value) {\n\tthis.vblankIRQ = value & 0x0008;\n\tthis.hblankIRQ = value & 0x0010;\n\tthis.vcounterIRQ = value & 0x0020;\n\tthis.vcountSetting = (value & 0xFF00) >> 8;\n\n\tif (this.vcounterIRQ) {\n\t\t// FIXME: this can be too late if we're in the middle of an Hblank\n\t\tthis.nextVcounterIRQ = this.nextHblank + this.HBLANK_LENGTH + (this.vcountSetting - this.vcount) * this.HORIZONTAL_LENGTH;\n\t\tif (this.nextVcounterIRQ < this.nextEvent) {\n\t\t\tthis.nextVcounterIRQ += this.TOTAL_LENGTH;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceVideo.prototype.readDisplayStat = function() {\n\treturn (this.inVblank) | (this.inHblank << 1) | (this.vcounter << 2);\n};\n\nGameBoyAdvanceVideo.prototype.finishDraw = function(pixelData) {\n\tthis.context.putImageData(pixelData, 0, 0);\n\tthis.drawCallback();\n};\n","function MemoryProxy(owner, size, blockSize) {\n\tthis.owner = owner;\n\tthis.blocks = [];\n\tthis.blockSize = blockSize;\n\tthis.mask = (1 << blockSize) - 1;\n\tthis.size = size;\n\tif (blockSize) {\n\t\tfor (var i = 0; i < (size >> blockSize); ++i) {\n\t\t\tthis.blocks.push(new MemoryView(new ArrayBuffer(1 << blockSize)));\n\t\t}\n\t} else {\n\t\tthis.blockSize = 31;\n\t\tthis.mask = -1;\n\t\tthis.blocks[0] = new MemoryView(new ArrayBuffer(size));\n\t}\n};\n\nMemoryProxy.prototype.combine = function() {\n\tif (this.blocks.length > 1) {\n\t\tvar combined = new Uint8Array(this.size);\n\t\tfor (var i = 0; i < this.blocks.length; ++i) {\n\t\t\tcombined.set(new Uint8Array(this.blocks[i].buffer), i << this.blockSize);\n\t\t}\n\t\treturn combined.buffer;\n\t} else {\n\t\treturn this.blocks[0].buffer;\n\t}\n};\n\nMemoryProxy.prototype.replace = function(buffer) {\n\tfor (var i = 0; i < this.blocks.length; ++i) {\n\t\tthis.blocks[i] = new MemoryView(buffer.slice(i << this.blockSize, (i << this.blockSize) + this.blocks[i].buffer.byteLength));\n\t}\n};\n\nMemoryProxy.prototype.load8 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].load8(offset & this.mask);\n};\n\nMemoryProxy.prototype.load16 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].load16(offset & this.mask);\n};\n\nMemoryProxy.prototype.loadU8 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].loadU8(offset & this.mask);\n};\n\nMemoryProxy.prototype.loadU16 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].loadU16(offset & this.mask);\n};\n\nMemoryProxy.prototype.load32 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].load32(offset & this.mask);\n};\n\nMemoryProxy.prototype.store8 = function(offset, value) {\n\tif (offset >= this.size) {\n\t\treturn;\n\t}\n\tthis.owner.memoryDirtied(this, offset >> this.blockSize);\n\tthis.blocks[offset >> this.blockSize].store8(offset & this.mask, value);\n\tthis.blocks[offset >> this.blockSize].store8((offset & this.mask) ^ 1, value);\n};\n\nMemoryProxy.prototype.store16 = function(offset, value) {\n\tif (offset >= this.size) {\n\t\treturn;\n\t}\n\tthis.owner.memoryDirtied(this, offset >> this.blockSize);\n\treturn this.blocks[offset >> this.blockSize].store16(offset & this.mask, value);\n};\n\nMemoryProxy.prototype.store32 = function(offset, value) {\n\tif (offset >= this.size) {\n\t\treturn;\n\t}\n\tthis.owner.memoryDirtied(this, offset >> this.blockSize);\n\treturn this.blocks[offset >> this.blockSize].store32(offset & this.mask, value);\n};\n\nMemoryProxy.prototype.invalidatePage = function(address) {};\n\nfunction GameBoyAdvanceRenderProxy() {\n\tthis.worker = new Worker('js/video/worker.js');\n\n\tthis.currentFrame = 0;\n\tthis.delay = 0;\n\tthis.skipFrame = false;\n\n\tthis.dirty = null;\n\tvar self = this;\n\tvar handlers = {\n\t\tfinish: function(data) {\n\t\t\tself.backing = data.backing;\n\t\t\tself.caller.finishDraw(self.backing);\n\t\t\t--self.delay;\n\t\t}\n\t};\n\tthis.worker.onmessage = function(message) {\n\t\thandlers[message.data['type']](message.data);\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.memoryDirtied = function(mem, block) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.memory = this.dirty.memory || {};\n\tif (mem === this.palette) {\n\t\tthis.dirty.memory.palette = mem.blocks[0].buffer;\n\t}\n\tif (mem === this.oam) {\n\t\tthis.dirty.memory.oam = mem.blocks[0].buffer;\n\t}\n\tif (mem === this.vram) {\n\t\tthis.dirty.memory.vram = this.dirty.memory.vram || [];\n\t\tthis.dirty.memory.vram[block] = mem.blocks[block].buffer;\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.clear = function(mmu) {\n\tthis.palette = new MemoryProxy(this, mmu.SIZE_PALETTE_RAM, 0);\n\tthis.vram = new MemoryProxy(this, mmu.SIZE_VRAM, 13);\n\tthis.oam = new MemoryProxy(this, mmu.SIZE_OAM, 0);\n\n\tthis.dirty = null;\n\tthis.scanlineQueue = [];\n\n\tthis.worker.postMessage({ type: 'clear', SIZE_VRAM: mmu.SIZE_VRAM, SIZE_OAM: mmu.SIZE_OAM });\n};\n\nGameBoyAdvanceRenderProxy.prototype.freeze = function(encodeBase64) {\n\treturn {\n\t\t'palette': Serializer.prefix(this.palette.combine()),\n\t\t'vram': Serializer.prefix(this.vram.combine()),\n\t\t'oam': Serializer.prefix(this.oam.combine())\n\t};\n};\n\nGameBoyAdvanceRenderProxy.prototype.defrost = function(frost, decodeBase64) {\n\tthis.palette.replace(frost.palette);\n\tthis.memoryDirtied(this.palette, 0);\n\tthis.vram.replace(frost.vram);\n\tfor (var i = 0; i < this.vram.blocks.length; ++i) {\n\t\tthis.memoryDirtied(this.vram, i);\n\t}\n\tthis.oam.replace(frost.oam);\n\tthis.memoryDirtied(this.oam, 0);\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeDisplayControl = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.DISPCNT = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundControl = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGCNT = this.dirty.BGCNT || [];\n\tthis.dirty.BGCNT[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundHOffset = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGHOFS = this.dirty.BGHOFS || [];\n\tthis.dirty.BGHOFS[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundVOffset = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGVOFS = this.dirty.BGVOFS || [];\n\tthis.dirty.BGVOFS[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundRefX = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGX = this.dirty.BGX || [];\n\tthis.dirty.BGX[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundRefY = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGY = this.dirty.BGY || [];\n\tthis.dirty.BGY[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamA = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPA = this.dirty.BGPA || [];\n\tthis.dirty.BGPA[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamB = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPB = this.dirty.BGPB || [];\n\tthis.dirty.BGPB[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamC = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPC = this.dirty.BGPC || [];\n\tthis.dirty.BGPC[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamD = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPD = this.dirty.BGPD || [];\n\tthis.dirty.BGPD[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin0H = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN0H = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin1H = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN1H = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin0V = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN0V = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin1V = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN1V = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWinIn = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WININ = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWinOut = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WINOUT = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBlendControl = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BLDCNT = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBlendAlpha = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BLDALPHA = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBlendY = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BLDY = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeMosaic = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.MOSAIC = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.clearSubsets = function(mmu, regions) {\n\tthis.dirty = this.dirty || {};\n\tif (regions & 0x04) {\n\t\tthis.palette = new MemoryProxy(this, mmu.SIZE_PALETTE_RAM, 0);\n\t\tmmu.mmap(mmu.REGION_PALETTE_RAM, this.palette);\n\t\tthis.memoryDirtied(this.palette, 0);\n\t}\n\tif (regions & 0x08) {\n\t\tthis.vram = new MemoryProxy(this, mmu.SIZE_VRAM, 13);\n\t\tmmu.mmap(mmu.REGION_VRAM, this.vram);\n\t\tfor (var i = 0; i < this.vram.blocks.length; ++i) {\n\t\t\tthis.memoryDirtied(this.vram, i);\n\t\t}\n\t}\n\tif (regions & 0x10) {\n\t\tthis.oam = new MemoryProxy(this, mmu.SIZE_OAM, 0);\n\t\tmmu.mmap(mmu.REGION_OAM, this.oam);\n\t\tthis.memoryDirtied(this.oam, 0);\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.setBacking = function(backing) {\n\tthis.backing = backing;\n\tthis.worker.postMessage({ type: 'start', backing: this.backing });\n};\n\nGameBoyAdvanceRenderProxy.prototype.drawScanline = function(y) {\n\tif (!this.skipFrame) {\n\t\tif (this.dirty) {\n\t\t\tif (this.dirty.memory) {\n\t\t\t\tif (this.dirty.memory.palette) {\n\t\t\t\t\tthis.dirty.memory.palette = this.dirty.memory.palette.slice(0);\n\t\t\t\t}\n\t\t\t\tif (this.dirty.memory.oam) {\n\t\t\t\t\tthis.dirty.memory.oam = this.dirty.memory.oam.slice(0);\n\t\t\t\t}\n\t\t\t\tif (this.dirty.memory.vram) {\n\t\t\t\t\tfor (var i = 0; i < 12; ++i) {\n\t\t\t\t\t\tif (this.dirty.memory.vram[i]) {\n\t\t\t\t\t\t\tthis.dirty.memory.vram[i] = this.dirty.memory.vram[i].slice(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scanlineQueue.push({ y: y, dirty: this.dirty });\n\t\t\tthis.dirty = null;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.startDraw = function() {\n\t++this.currentFrame;\n\tif (this.delay <= 0) {\n\t\tthis.skipFrame = false;\n\t}\n\tif (!this.skipFrame) {\n\t\t++this.delay;\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.finishDraw = function(caller) {\n\tthis.caller = caller;\n\tif (!this.skipFrame) {\n\t\tthis.worker.postMessage({ type: 'finish', scanlines: this.scanlineQueue, frame: this.currentFrame });\n\t\tthis.scanlineQueue = [];\n\t\tif (this.delay > 2) {\n\t\t\tthis.skipFrame = true;\n\t\t}\n\t}\n};\n","function MemoryAligned16(size) {\n\tthis.buffer = new Uint16Array(size >> 1);\n};\n\nMemoryAligned16.prototype.load8 = function(offset) {\n\treturn (this.loadU8(offset) << 24) >> 24;\n};\n\nMemoryAligned16.prototype.load16 = function(offset) {\n\treturn (this.loadU16(offset) << 16) >> 16;\n};\n\nMemoryAligned16.prototype.loadU8 = function(offset) {\n\tvar index = offset >> 1;\n\tif (offset & 1) {\n\t\treturn (this.buffer[index] & 0xFF00) >>> 8;\n\t} else {\n\t\treturn this.buffer[index] & 0x00FF;\n\t}\n};\n\nMemoryAligned16.prototype.loadU16 = function(offset) {\n\treturn this.buffer[offset >> 1];\n};\n\nMemoryAligned16.prototype.load32 = function(offset) {\n\treturn this.buffer[(offset >> 1) & ~1] | (this.buffer[(offset >> 1) | 1] << 16);\n};\n\nMemoryAligned16.prototype.store8 = function(offset, value) {\n\tvar index = offset >> 1;\n\tthis.store16(offset, (value << 8) | value);\n};\n\nMemoryAligned16.prototype.store16 = function(offset, value) {\n\tthis.buffer[offset >> 1] = value;\n};\n\nMemoryAligned16.prototype.store32 = function(offset, value) {\n\tvar index = offset >> 1;\n\tthis.store16(offset, this.buffer[index] = value & 0xFFFF);\n\tthis.store16(offset + 2, this.buffer[index + 1] = value >>> 16);\n};\n\nMemoryAligned16.prototype.insert = function(start, data) {\n\tthis.buffer.set(data, start);\n};\n\nMemoryAligned16.prototype.invalidatePage = function(address) {};\n\nfunction GameBoyAdvanceVRAM(size) {\n\tMemoryAligned16.call(this, size);\n\tthis.vram = this.buffer;\n};\n\nGameBoyAdvanceVRAM.prototype = Object.create(MemoryAligned16.prototype);\n\nfunction GameBoyAdvanceOAM(size) {\n\tMemoryAligned16.call(this, size);\n\tthis.oam = this.buffer;\n\tthis.objs = new Array(128);\n\tfor (var i = 0; i < 128; ++i) {\n\t\tthis.objs[i] = new GameBoyAdvanceOBJ(this, i);\n\t}\n\tthis.scalerot = new Array(32);\n\tfor (var i = 0; i < 32; ++i) {\n\t\tthis.scalerot[i] = {\n\t\t\ta: 1,\n\t\t\tb: 0,\n\t\t\tc: 0,\n\t\t\td: 1\n\t\t};\n\t}\n};\n\nGameBoyAdvanceOAM.prototype = Object.create(MemoryAligned16.prototype);\n\nGameBoyAdvanceOAM.prototype.overwrite = function(memory) {\n\tfor (var i = 0; i < (this.buffer.byteLength >> 1); ++i) {\n\t\tthis.store16(i << 1, memory[i]);\n\t}\n};\n\nGameBoyAdvanceOAM.prototype.store16 = function(offset, value) {\n\tvar index = (offset & 0x3F8) >> 3;\n\tvar obj = this.objs[index];\n\tvar scalerot = this.scalerot[index >> 2];\n\tvar layer = obj.priority;\n\tvar disable = obj.disable;\n\tvar y = obj.y;\n\tswitch (offset & 0x00000006) {\n\tcase 0:\n\t\t// Attribute 0\n\t\tobj.y = value & 0x00FF;\n\t\tvar wasScalerot = obj.scalerot;\n\t\tobj.scalerot = value & 0x0100;\n\t\tif (obj.scalerot) {\n\t\t\tobj.scalerotOam = this.scalerot[obj.scalerotParam];\n\t\t\tobj.doublesize = !!(value & 0x0200);\n\t\t\tobj.disable = 0;\n\t\t\tobj.hflip = 0;\n\t\t\tobj.vflip = 0;\n\t\t} else {\n\t\t\tobj.doublesize = false;\n\t\t\tobj.disable = value & 0x0200;\n\t\t\tif (wasScalerot) {\n\t\t\t\tobj.hflip = obj.scalerotParam & 0x0008;\n\t\t\t\tobj.vflip = obj.scalerotParam & 0x0010;\n\t\t\t}\n\t\t}\n\t\tobj.mode = (value & 0x0C00) >> 6; // This lines up with the stencil format\n\t\tobj.mosaic = value & 0x1000;\n\t\tobj.multipalette = value & 0x2000;\n\t\tobj.shape = (value & 0xC000) >> 14;\n\n\t\tobj.recalcSize();\n\t\tbreak;\n\tcase 2:\n\t\t// Attribute 1\n\t\tobj.x = value & 0x01FF;\n\t\tif (obj.scalerot) {\n\t\t\tobj.scalerotParam = (value & 0x3E00) >> 9;\n\t\t\tobj.scalerotOam = this.scalerot[obj.scalerotParam];\n\t\t\tobj.hflip = 0;\n\t\t\tobj.vflip = 0;\n\t\t\tobj.drawScanline = obj.drawScanlineAffine;\n\t\t} else {\n\t\t\tobj.hflip = value & 0x1000;\n\t\t\tobj.vflip = value & 0x2000;\n\t\t\tobj.drawScanline = obj.drawScanlineNormal;\n\t\t}\n\t\tobj.size = (value & 0xC000) >> 14;\n\n\t\tobj.recalcSize();\n\t\tbreak;\n\tcase 4:\n\t\t// Attribute 2\n\t\tobj.tileBase = value & 0x03FF;\n\t\tobj.priority = (value & 0x0C00) >> 10;\n\t\tobj.palette = (value & 0xF000) >> 8; // This is shifted up 4 to make pushPixel faster\n\t\tbreak;\n\tcase 6:\n\t\t// Scaling/rotation parameter\n\t\tswitch (index & 0x3) {\n\t\tcase 0:\n\t\t\tscalerot.a = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tscalerot.b = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tscalerot.c = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tscalerot.d = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\t}\n\n\tMemoryAligned16.prototype.store16.call(this, offset, value);\n};\n\nfunction GameBoyAdvancePalette() {\n\tthis.colors = [ new Array(0x100), new Array(0x100) ];\n\tthis.adjustedColors = [ new Array(0x100), new Array(0x100) ];\n\tthis.passthroughColors = [\n\t\tthis.colors[0], // BG0\n\t\tthis.colors[0], // BG1\n\t\tthis.colors[0], // BG2\n\t\tthis.colors[0], // BG3\n\t\tthis.colors[1], // OBJ\n\t\tthis.colors[0] // Backdrop\n\t];\n\tthis.blendY = 1;\n};\n\nGameBoyAdvancePalette.prototype.overwrite = function(memory) {\n\tfor (var i = 0; i < 512; ++i) {\n\t\tthis.store16(i << 1, memory[i]);\n\t}\n};\n\nGameBoyAdvancePalette.prototype.loadU8 = function(offset) {\n\treturn (this.loadU16(offset) >> (8 * (offset & 1))) & 0xFF;\n};\n\nGameBoyAdvancePalette.prototype.loadU16 = function(offset) {\n\treturn this.colors[(offset & 0x200) >> 9][(offset & 0x1FF) >> 1];\n};\n\nGameBoyAdvancePalette.prototype.load16 = function(offset) {\n\treturn (this.loadU16(offset) << 16) >> 16;\n};\n\nGameBoyAdvancePalette.prototype.load32 = function(offset) {\n\treturn this.loadU16(offset) | (this.loadU16(offset + 2) << 16);\n};\n\nGameBoyAdvancePalette.prototype.store16 = function(offset, value) {\n\tvar type = (offset & 0x200) >> 9;\n\tvar index = (offset & 0x1FF) >> 1;\n\tthis.colors[type][index] = value;\n\tthis.adjustedColors[type][index] = this.adjustColor(value);\n};\n\nGameBoyAdvancePalette.prototype.store32 = function(offset, value) {\n\tthis.store16(offset, value & 0xFFFF);\n\tthis.store16(offset + 2, value >> 16);\n};\n\nGameBoyAdvancePalette.prototype.invalidatePage = function(address) {};\n\nGameBoyAdvancePalette.prototype.convert16To32 = function(value, input) {\n\tvar r = (value & 0x001F) << 3;\n\tvar g = (value & 0x03E0) >> 2;\n\tvar b = (value & 0x7C00) >> 7;\n\n\tinput[0] = r;\n\tinput[1] = g;\n\tinput[2] = b;\n};\n\nGameBoyAdvancePalette.prototype.mix = function(aWeight, aColor, bWeight, bColor) {\n\tvar ar = (aColor & 0x001F);\n\tvar ag = (aColor & 0x03E0) >> 5;\n\tvar ab = (aColor & 0x7C00) >> 10;\n\n\tvar br = (bColor & 0x001F);\n\tvar bg = (bColor & 0x03E0) >> 5;\n\tvar bb = (bColor & 0x7C00) >> 10;\n\n\tvar r = Math.min(aWeight * ar + bWeight * br, 0x1F);\n\tvar g = Math.min(aWeight * ag + bWeight * bg, 0x1F);\n\tvar b = Math.min(aWeight * ab + bWeight * bb, 0x1F);\n\n\treturn r | (g << 5) | (b << 10);\n};\n\nGameBoyAdvancePalette.prototype.makeDarkPalettes = function(layers) {\n\tif (this.adjustColor != this.adjustColorDark) {\n\t\tthis.adjustColor = this.adjustColorDark;\n\t\tthis.resetPalettes();\n\t}\n\tthis.resetPaletteLayers(layers);\n};\n\nGameBoyAdvancePalette.prototype.makeBrightPalettes = function(layers) {\n\tif (this.adjustColor != this.adjustColorBright) {\n\t\tthis.adjustColor = this.adjustColorBright;\n\t\tthis.resetPalettes();\n\t}\n\tthis.resetPaletteLayers(layers);\n};\n\nGameBoyAdvancePalette.prototype.makeNormalPalettes = function() {\n\tthis.passthroughColors[0] = this.colors[0];\n\tthis.passthroughColors[1] = this.colors[0];\n\tthis.passthroughColors[2] = this.colors[0];\n\tthis.passthroughColors[3] = this.colors[0];\n\tthis.passthroughColors[4] = this.colors[1];\n\tthis.passthroughColors[5] = this.colors[0];\n};\n\nGameBoyAdvancePalette.prototype.makeSpecialPalette = function(layer) {\n\tthis.passthroughColors[layer] = this.adjustedColors[layer == 4 ? 1 : 0];\n};\n\nGameBoyAdvancePalette.prototype.makeNormalPalette = function(layer) {\n\tthis.passthroughColors[layer] = this.colors[layer == 4 ? 1 : 0];\n};\n\nGameBoyAdvancePalette.prototype.resetPaletteLayers = function(layers) {\n\tif (layers & 0x01) {\n\t\tthis.passthroughColors[0] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[0] = this.colors[0];\n\t}\n\tif (layers & 0x02) {\n\t\tthis.passthroughColors[1] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[1] = this.colors[0];\n\t}\n\tif (layers & 0x04) {\n\t\tthis.passthroughColors[2] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[2] = this.colors[0];\n\t}\n\tif (layers & 0x08) {\n\t\tthis.passthroughColors[3] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[3] = this.colors[0];\n\t}\n\tif (layers & 0x10) {\n\t\tthis.passthroughColors[4] = this.adjustedColors[1];\n\t} else {\n\t\tthis.passthroughColors[4] = this.colors[1];\n\t}\n\tif (layers & 0x20) {\n\t\tthis.passthroughColors[5] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[5] = this.colors[0];\n\t}\n};\n\nGameBoyAdvancePalette.prototype.resetPalettes = function() {\n\tvar i;\n\tvar outPalette = this.adjustedColors[0];\n\tvar inPalette = this.colors[0];\n\tfor (i = 0; i < 256; ++i) {\n\t\toutPalette[i] = this.adjustColor(inPalette[i]);\n\t}\n\n\toutPalette = this.adjustedColors[1];\n\tinPalette = this.colors[1];\n\tfor (i = 0; i < 256; ++i) {\n\t\toutPalette[i] = this.adjustColor(inPalette[i]);\n\t}\n}\n\nGameBoyAdvancePalette.prototype.accessColor = function(layer, index) {\n\treturn this.passthroughColors[layer][index];\n};\n\nGameBoyAdvancePalette.prototype.adjustColorDark = function(color) {\n\tvar r = (color & 0x001F);\n\tvar g = (color & 0x03E0) >> 5;\n\tvar b = (color & 0x7C00) >> 10;\n\n\tr = r - (r * this.blendY);\n\tg = g - (g * this.blendY);\n\tb = b - (b * this.blendY);\n\n\treturn r | (g << 5) | (b << 10);\n};\n\nGameBoyAdvancePalette.prototype.adjustColorBright = function(color) {\n\tvar r = (color & 0x001F);\n\tvar g = (color & 0x03E0) >> 5;\n\tvar b = (color & 0x7C00) >> 10;\n\n\tr = r + ((31 - r) * this.blendY);\n\tg = g + ((31 - g) * this.blendY);\n\tb = b + ((31 - b) * this.blendY);\n\n\treturn r | (g << 5) | (b << 10);\n};\n\nGameBoyAdvancePalette.prototype.adjustColor = GameBoyAdvancePalette.prototype.adjustColorBright;\n\nGameBoyAdvancePalette.prototype.setBlendY = function(y) {\n\tif (this.blendY != y) {\n\t\tthis.blendY = y;\n\t\tthis.resetPalettes();\n\t}\n};\n\nfunction GameBoyAdvanceOBJ(oam, index) {\n\tthis.TILE_OFFSET = 0x10000;\n\tthis.oam = oam;\n\n\tthis.index = index;\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.scalerot = 0;\n\tthis.doublesize = false;\n\tthis.disable = 1;\n\tthis.mode = 0;\n\tthis.mosaic = false;\n\tthis.multipalette = false;\n\tthis.shape = 0;\n\tthis.scalerotParam = 0;\n\tthis.hflip = 0;\n\tthis.vflip = 0;\n\tthis.tileBase = 0;\n\tthis.priority = 0;\n\tthis.palette = 0;\n\tthis.drawScanline = this.drawScanlineNormal;\n\tthis.pushPixel = GameBoyAdvanceSoftwareRenderer.pushPixel;\n\tthis.cachedWidth = 8;\n\tthis.cachedHeight = 8;\n};\n\nGameBoyAdvanceOBJ.prototype.drawScanlineNormal = function(backing, y, yOff, start, end) {\n\tvar video = this.oam.video;\n\tvar x;\n\tvar underflow;\n\tvar offset;\n\tvar mask = this.mode | video.target2[video.LAYER_OBJ] | (this.priority << 1);\n\tif (this.mode == 0x10) {\n\t\tmask |= video.TARGET1_MASK;\n\t}\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[video.LAYER_OBJ];\n\t}\n\n\tvar totalWidth = this.cachedWidth;\n\tif (this.x < video.HORIZONTAL_PIXELS) {\n\t\tif (this.x < start) {\n\t\t\tunderflow = start - this.x;\n\t\t\toffset = start;\n\t\t} else {\n\t\t\tunderflow = 0;\n\t\t\toffset = this.x;\n\t\t}\n\t\tif (end < this.cachedWidth + this.x) {\n\t\t\ttotalWidth = end - this.x;\n\t\t}\n\t} else {\n\t\tunderflow = start + 512 - this.x;\n\t\toffset = start;\n\t\tif (end < this.cachedWidth - underflow) {\n\t\t\ttotalWidth = end;\n\t\t}\n\t}\n\t\n\tvar localX;\n\tvar localY;\n\tif (!this.vflip) {\n\t\tlocalY = y - yOff;\n\t} else {\n\t\tlocalY = this.cachedHeight - y + yOff - 1;\n\t}\n\tvar localYLo = localY & 0x7;\n\tvar mosaicX;\n\tvar tileOffset;\n\n\tvar paletteShift = this.multipalette ? 1 : 0;\n\n\tif (video.objCharacterMapping) {\n\t\ttileOffset = ((localY & 0x01F8) * this.cachedWidth) >> 6;\n\t} else {\n\t\ttileOffset = (localY & 0x01F8) << (2 - paletteShift);\n\t}\n\n\tif (this.mosaic) {\n\t\tmosaicX = video.objMosaicX - 1 - (video.objMosaicX + offset - 1) % video.objMosaicX;\n\t\toffset += mosaicX;\n\t\tunderflow += mosaicX;\n\t}\n\tif (!this.hflip) {\n\t\tlocalX = underflow;\n\t} else {\n\t\tlocalX = this.cachedWidth - underflow - 1;\n\t}\n\n\tvar tileRow = video.accessTile(this.TILE_OFFSET + (x & 0x4) * paletteShift, this.tileBase + (tileOffset << paletteShift) + ((localX & 0x01F8) >> (3 - paletteShift)), localYLo << paletteShift);\n\tfor (x = underflow; x < totalWidth; ++x) {\n\t\tmosaicX = this.mosaic ? offset % video.objMosaicX : 0;\n\t\tif (!this.hflip) {\n\t\t\tlocalX = x - mosaicX;\n\t\t} else {\n\t\t\tlocalX = this.cachedWidth - (x - mosaicX) - 1;\n\t\t}\n\t\tif (!paletteShift) {\n\t\t\tif (!(x & 0x7) || (this.mosaic && !mosaicX)) {\n\t\t\t\ttileRow = video.accessTile(this.TILE_OFFSET, this.tileBase + tileOffset + (localX >> 3), localYLo);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!(x & 0x3) || (this.mosaic && !mosaicX)) {\n\t\t\t\ttileRow = video.accessTile(this.TILE_OFFSET + (localX & 0x4), this.tileBase + (tileOffset << 1) + ((localX & 0x01F8) >> 2), localYLo << 1);\n\t\t\t}\n\t\t}\n\t\tthis.pushPixel(video.LAYER_OBJ, this, video, tileRow, localX & 0x7, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceOBJ.prototype.drawScanlineAffine = function(backing, y, yOff, start, end) {\n\tvar video = this.oam.video;\n\tvar x;\n\tvar underflow;\n\tvar offset;\n\tvar mask = this.mode | video.target2[video.LAYER_OBJ] | (this.priority << 1);\n\tif (this.mode == 0x10) {\n\t\tmask |= video.TARGET1_MASK;\n\t}\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[video.LAYER_OBJ];\n\t}\n\n\tvar localX;\n\tvar localY;\n\tvar yDiff = y - yOff;\n\tvar tileOffset;\n\n\tvar paletteShift = this.multipalette ? 1 : 0;\n\tvar totalWidth = this.cachedWidth << this.doublesize;\n\tvar totalHeight = this.cachedHeight << this.doublesize;\n\tvar drawWidth = totalWidth;\n\tif (drawWidth > video.HORIZONTAL_PIXELS) {\n\t\ttotalWidth = video.HORIZONTAL_PIXELS;\n\t}\n\n\tif (this.x < video.HORIZONTAL_PIXELS) {\n\t\tif (this.x < start) {\n\t\t\tunderflow = start - this.x;\n\t\t\toffset = start;\n\t\t} else {\n\t\t\tunderflow = 0;\n\t\t\toffset = this.x;\n\t\t}\n\t\tif (end < drawWidth + this.x) {\n\t\t\tdrawWidth = end - this.x;\n\t\t}\n\t} else {\n\t\tunderflow = start + 512 - this.x;\n\t\toffset = start;\n\t\tif (end < drawWidth - underflow) {\n\t\t\tdrawWidth = end;\n\t\t}\n\t}\n\n\tfor (x = underflow; x < drawWidth; ++x) {\n\t\tlocalX = this.scalerotOam.a * (x - (totalWidth >> 1)) + this.scalerotOam.b * (yDiff - (totalHeight >> 1)) + (this.cachedWidth >> 1);\n\t\tlocalY = this.scalerotOam.c * (x - (totalWidth >> 1)) + this.scalerotOam.d * (yDiff - (totalHeight >> 1)) + (this.cachedHeight >> 1);\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.objMosaicX) * this.scalerotOam.a + (y % video.objMosaicY) * this.scalerotOam.b;\n\t\t\tlocalY -= (x % video.objMosaicX) * this.scalerotOam.c + (y % video.objMosaicY) * this.scalerotOam.d;\n\t\t}\n\n\t\tif (localX < 0 || localX >= this.cachedWidth || localY < 0 || localY >= this.cachedHeight) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (video.objCharacterMapping) {\n\t\t\ttileOffset = ((localY & 0x01F8) * this.cachedWidth) >> 6;\n\t\t} else {\n\t\t\ttileOffset = (localY & 0x01F8) << (2 - paletteShift);\n\t\t}\n\t\ttileRow = video.accessTile(this.TILE_OFFSET + (localX & 0x4) * paletteShift, this.tileBase + (tileOffset << paletteShift) + ((localX & 0x01F8) >> (3 - paletteShift)), (localY & 0x7) << paletteShift);\n\t\tthis.pushPixel(video.LAYER_OBJ, this, video, tileRow, localX & 0x7, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceOBJ.prototype.recalcSize = function() {\n\tswitch (this.shape) {\n\tcase 0:\n\t\t// Square\n\t\tthis.cachedHeight = this.cachedWidth = 8 << this.size;\n\t\tbreak;\n\tcase 1:\n\t\t// Horizontal\n\t\tswitch (this.size) {\n\t\tcase 0:\n\t\t\tthis.cachedHeight = 8;\n\t\t\tthis.cachedWidth = 16;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tthis.cachedHeight = 8;\n\t\t\tthis.cachedWidth = 32;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tthis.cachedHeight = 16;\n\t\t\tthis.cachedWidth = 32;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tthis.cachedHeight = 32;\n\t\t\tthis.cachedWidth = 64;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase 2:\n\t\t// Vertical\n\t\tswitch (this.size) {\n\t\tcase 0:\n\t\t\tthis.cachedHeight = 16;\n\t\t\tthis.cachedWidth = 8;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tthis.cachedHeight = 32;\n\t\t\tthis.cachedWidth = 8;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tthis.cachedHeight = 32;\n\t\t\tthis.cachedWidth = 16;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tthis.cachedHeight = 64;\n\t\t\tthis.cachedWidth = 32;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tdefault:\n\t\t// Bad!\n\t}\n};\n\nfunction GameBoyAdvanceOBJLayer(video, index) {\n\tthis.video = video;\n\tthis.bg = false;\n\tthis.index = video.LAYER_OBJ;\n\tthis.priority = index;\n\tthis.enabled = false;\n\tthis.objwin = 0;\n};\n\nGameBoyAdvanceOBJLayer.prototype.drawScanline = function(backing, layer, start, end) {\n\tvar y = this.video.vcount;\n\tvar wrappedY;\n\tvar mosaicY;\n\tvar obj;\n\tif (start >= end) {\n\t\treturn;\n\t}\n\tvar objs = this.video.oam.objs;\n\tfor (var i = 0; i < objs.length; ++i) {\n\t\tobj = objs[i];\n\t\tif (obj.disable) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ((obj.mode & this.video.OBJWIN_MASK) != this.objwin) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (!(obj.mode & this.video.OBJWIN_MASK) && this.priority != obj.priority) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (obj.y < this.video.VERTICAL_PIXELS) {\n\t\t\twrappedY = obj.y;\n\t\t} else {\n\t\t\twrappedY = obj.y - 256;\n\t\t}\n\t\tvar totalHeight;\n\t\tif (!obj.scalerot) {\n\t\t\ttotalHeight = obj.cachedHeight;\n\t\t} else {\n\t\t\ttotalHeight = obj.cachedHeight << obj.doublesize;\n\t\t}\n\t\tif (!obj.mosaic) {\n\t\t\tmosaicY = y;\n\t\t} else {\n\t\t\tmosaicY = y - y % this.video.objMosaicY;\n\t\t}\n\t\tif (wrappedY <= y && (wrappedY + totalHeight) > y) {\n\t\t\tobj.drawScanline(backing, mosaicY, wrappedY, start, end);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceOBJLayer.prototype.objComparator = function(a, b) {\n\treturn a.index - b.index;\n};\n\nwindow.GameBoyAdvanceSoftwareRenderer = function GameBoyAdvanceSoftwareRenderer() {\n\tthis.LAYER_BG0 = 0;\n\tthis.LAYER_BG1 = 1;\n\tthis.LAYER_BG2 = 2;\n\tthis.LAYER_BG3 = 3;\n\tthis.LAYER_OBJ = 4;\n\tthis.LAYER_BACKDROP = 5;\n\n\tthis.HORIZONTAL_PIXELS = 240;\n\tthis.VERTICAL_PIXELS = 160;\n\n\tthis.LAYER_MASK = 0x06;\n\tthis.BACKGROUND_MASK = 0x01;\n\tthis.TARGET2_MASK = 0x08;\n\tthis.TARGET1_MASK = 0x10;\n\tthis.OBJWIN_MASK = 0x20;\n\tthis.WRITTEN_MASK = 0x80;\n\n\tthis.PRIORITY_MASK = this.LAYER_MASK | this.BACKGROUND_MASK;\n\n\tthis.drawBackdrop = new (function(video) {\n\t\tthis.bg = true;\n\t\tthis.priority = -1;\n\t\tthis.index = video.LAYER_BACKDROP;\n\t\tthis.enabled = true;\n\n\t\tthis.drawScanline = function(backing, layer, start, end) {\n\t\t\t// TODO: interactions with blend modes and OBJWIN\n\t\t\tfor (var x = start; x < end; ++x) {\n\t\t\t\tif (!(backing.stencil[x] & video.WRITTEN_MASK)) {\n\t\t\t\t\tbacking.color[x] = video.palette.accessColor(this.index, 0);\n\t\t\t\t\tbacking.stencil[x] = video.WRITTEN_MASK;\n\t\t\t\t} else if (backing.stencil[x] & video.TARGET1_MASK) {\n\t\t\t\t\tbacking.color[x] = video.palette.mix(video.blendB, video.palette.accessColor(this.index, 0), video.blendA, backing.color[x]);\n\t\t\t\t\tbacking.stencil[x] = video.WRITTEN_MASK;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})(this);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.clear = function(mmu) {\n\tthis.palette = new GameBoyAdvancePalette();\n\tthis.vram = new GameBoyAdvanceVRAM(mmu.SIZE_VRAM);\n\tthis.oam = new GameBoyAdvanceOAM(mmu.SIZE_OAM);\n\tthis.oam.video = this;\n\tthis.objLayers = [\n\t\tnew GameBoyAdvanceOBJLayer(this, 0),\n\t\tnew GameBoyAdvanceOBJLayer(this, 1),\n\t\tnew GameBoyAdvanceOBJLayer(this, 2),\n\t\tnew GameBoyAdvanceOBJLayer(this, 3)\n\t];\n\tthis.objwinLayer = new GameBoyAdvanceOBJLayer(this, 4);\n\tthis.objwinLayer.objwin = this.OBJWIN_MASK;\n\n\t// DISPCNT\n\tthis.backgroundMode = 0;\n\tthis.displayFrameSelect = 0;\n\tthis.hblankIntervalFree = 0;\n\tthis.objCharacterMapping = 0;\n\tthis.forcedBlank = 1;\n\tthis.win0 = 0;\n\tthis.win1 = 0;\n\tthis.objwin = 0;\n\n\t// VCOUNT\n\tthis.vcount = -1;\n\n\t// WIN0H\n\tthis.win0Left = 0;\n\tthis.win0Right = 240;\n\n\t// WIN1H\n\tthis.win1Left = 0;\n\tthis.win1Right = 240;\n\n\t// WIN0V\n\tthis.win0Top = 0;\n\tthis.win0Bottom = 160;\n\n\t// WIN1V\n\tthis.win1Top = 0;\n\tthis.win1Bottom = 160;\n\n\t// WININ/WINOUT\n\tthis.windows = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.windows.push({\n\t\t\tenabled: [ false, false, false, false, false, true ],\n\t\t\tspecial: 0\n\t\t});\n\t};\n\n\t// BLDCNT\n\tthis.target1 = new Array(5);\n\tthis.target2 = new Array(5);\n\tthis.blendMode = 0;\n\n\t// BLDALPHA\n\tthis.blendA = 0;\n\tthis.blendB = 0;\n\n\t// BLDY\n\tthis.blendY = 0;\n\n\t// MOSAIC\n\tthis.bgMosaicX = 1;\n\tthis.bgMosaicY = 1;\n\tthis.objMosaicX = 1;\n\tthis.objMosaicY = 1;\n\n\tthis.lastHblank = 0;\n\tthis.nextHblank = this.HDRAW_LENGTH;\n\tthis.nextEvent = this.nextHblank;\n\n\tthis.nextHblankIRQ = 0;\n\tthis.nextVblankIRQ = 0;\n\tthis.nextVcounterIRQ = 0;\n\n\tthis.bg = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.bg.push({\n\t\t\tbg: true,\n\t\t\tindex: i,\n\t\t\tenabled: false,\n\t\t\tvideo: this,\n\t\t\tvram: this.vram,\n\t\t\tpriority: 0,\n\t\t\tcharBase: 0,\n\t\t\tmosaic: false,\n\t\t\tmultipalette: false,\n\t\t\tscreenBase: 0,\n\t\t\toverflow: 0,\n\t\t\tsize: 0,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\trefx: 0,\n\t\t\trefy: 0,\n\t\t\tdx: 1,\n\t\t\tdmx: 0,\n\t\t\tdy: 0,\n\t\t\tdmy: 1,\n\t\t\tsx: 0,\n\t\t\tsy: 0,\n\t\t\tpushPixel: GameBoyAdvanceSoftwareRenderer.pushPixel,\n\t\t\tdrawScanline: this.drawScanlineBGMode0\n\t\t});\n\t}\n\n\tthis.bgModes = [\n\t\tthis.drawScanlineBGMode0,\n\t\tthis.drawScanlineBGMode2, // Modes 1 and 2 are identical for layers 2 and 3\n\t\tthis.drawScanlineBGMode2,\n\t\tthis.drawScanlineBGMode3,\n\t\tthis.drawScanlineBGMode4,\n\t\tthis.drawScanlineBGMode5\n\t];\n\n\tthis.drawLayers = [\n\t\tthis.bg[0],\n\t\tthis.bg[1],\n\t\tthis.bg[2],\n\t\tthis.bg[3],\n\t\tthis.objLayers[0],\n\t\tthis.objLayers[1],\n\t\tthis.objLayers[2],\n\t\tthis.objLayers[3],\n\t\tthis.objwinLayer,\n\t\tthis.drawBackdrop\n\t];\n\n\tthis,objwinActive = false;\n\tthis.alphaEnabled = false;\n\n\tthis.scanline = {\n\t\tcolor: new Uint16Array(this.HORIZONTAL_PIXELS),\n\t\t// Stencil format:\n\t\t// Bits 0-1: Layer\n\t\t// Bit 2: Is background\n\t\t// Bit 3: Is Target 2\n\t\t// Bit 4: Is Target 1\n\t\t// Bit 5: Is OBJ Window\n\t\t// Bit 6: Reserved\n\t\t// Bit 7: Has been written\n\t\tstencil: new Uint8Array(this.HORIZONTAL_PIXELS)\n\t};\n\tthis.sharedColor = [ 0, 0, 0 ];\n\tthis.sharedMap = {\n\t\ttile: 0,\n\t\thflip: false,\n\t\tvflip: false,\n\t\tpalette: 0\n\t};\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.clearSubsets = function(mmu, regions) {\n\tif (regions & 0x04) {\n\t\tthis.palette.overwrite(new Uint16Array(mmu.SIZE_PALETTE >> 1));\n\t}\n\n\tif (regions & 0x08) {\n\t\tthis.vram.insert(0, new Uint16Array(mmu.SIZE_VRAM >> 1));\n\t}\n\n\tif (regions & 0x10) {\n\t\tthis.oam.overwrite(new Uint16Array(mmu.SIZE_OAM >> 1));\n\t\tthis.oam.video = this;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.freeze = function() {\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.defrost = function(frost) {\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.setBacking = function(backing) {\n\tthis.pixelData = backing;\n\n\t// Clear backing first\n\tfor (var offset = 0; offset < this.HORIZONTAL_PIXELS * this.VERTICAL_PIXELS * 4;) {\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeDisplayControl = function(value) {\n\tthis.backgroundMode = value & 0x0007;\n\tthis.displayFrameSelect = value & 0x0010;\n\tthis.hblankIntervalFree = value & 0x0020;\n\tthis.objCharacterMapping = value & 0x0040;\n\tthis.forcedBlank = value & 0x0080;\n\tthis.bg[0].enabled = value & 0x0100;\n\tthis.bg[1].enabled = value & 0x0200;\n\tthis.bg[2].enabled = value & 0x0400;\n\tthis.bg[3].enabled = value & 0x0800;\n\tthis.objLayers[0].enabled = value & 0x1000;\n\tthis.objLayers[1].enabled = value & 0x1000;\n\tthis.objLayers[2].enabled = value & 0x1000;\n\tthis.objLayers[3].enabled = value & 0x1000;\n\tthis.win0 = value & 0x2000;\n\tthis.win1 = value & 0x4000;\n\tthis.objwin = value & 0x8000;\n\tthis.objwinLayer.enabled = value & 0x1000 && value & 0x8000;\n\n\t// Total hack so we can store both things that would set it to 256-color mode in the same variable\n\tthis.bg[2].multipalette &= ~0x0001;\n\tthis.bg[3].multipalette &= ~0x0001;\n\tif (this.backgroundMode > 0) {\n\t\tthis.bg[2].multipalette |= 0x0001;\n\t}\n\tif (this.backgroundMode == 2) {\n\t\tthis.bg[3].multipalette |= 0x0001;\n\t}\n\t\n\tthis.resetLayers();\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundControl = function(bg, value) {\n\tvar bgData = this.bg[bg];\n\tbgData.priority = value & 0x0003;\n\tbgData.charBase = (value & 0x000C) << 12;\n\tbgData.mosaic = value & 0x0040;\n\tbgData.multipalette &= ~0x0080;\n\tif (bg < 2 || this.backgroundMode == 0) {\n\t\tbgData.multipalette |= value & 0x0080;\n\t}\n\tbgData.screenBase = (value & 0x1F00) << 3;\n\tbgData.overflow = value & 0x2000;\n\tbgData.size = (value & 0xC000) >> 14;\n\n\tthis.drawLayers.sort(this.layerComparator);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundHOffset = function(bg, value) {\n\tthis.bg[bg].x = value & 0x1FF;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundVOffset = function(bg, value) {\n\tthis.bg[bg].y = value & 0x1FF;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundRefX = function(bg, value) {\n\tthis.bg[bg].refx = (value << 4) / 0x1000;\n\tthis.bg[bg].sx = this.bg[bg].refx;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundRefY = function(bg, value) {\n\tthis.bg[bg].refy = (value << 4) / 0x1000;\n\tthis.bg[bg].sy = this.bg[bg].refy;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamA = function(bg, value) {\n\tthis.bg[bg].dx = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamB = function(bg, value) {\n\tthis.bg[bg].dmx = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamC = function(bg, value) {\n\tthis.bg[bg].dy = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamD = function(bg, value) {\n\tthis.bg[bg].dmy = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin0H = function(value) {\n\tthis.win0Left = (value & 0xFF00) >> 8;\n\tthis.win0Right = Math.min(this.HORIZONTAL_PIXELS, value & 0x00FF);\n\tif (this.win0Left > this.win0Right) {\n\t\tthis.win0Right = this.HORIZONTAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin1H = function(value) {\n\tthis.win1Left = (value & 0xFF00) >> 8;\n\tthis.win1Right = Math.min(this.HORIZONTAL_PIXELS, value & 0x00FF);\n\tif (this.win1Left > this.win1Right) {\n\t\tthis.win1Right = this.HORIZONTAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin0V = function(value) {\n\tthis.win0Top = (value & 0xFF00) >> 8;\n\tthis.win0Bottom = Math.min(this.VERTICAL_PIXELS, value & 0x00FF);\n\tif (this.win0Top > this.win0Bottom) {\n\t\tthis.win0Bottom = this.VERTICAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin1V = function(value) {\n\tthis.win1Top = (value & 0xFF00) >> 8;\n\tthis.win1Bottom = Math.min(this.VERTICAL_PIXELS, value & 0x00FF);\n\tif (this.win1Top > this.win1Bottom) {\n\t\tthis.win1Bottom = this.VERTICAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWindow = function(index, value) {\n\tvar window = this.windows[index];\n\twindow.enabled[0] = value & 0x01;\n\twindow.enabled[1] = value & 0x02;\n\twindow.enabled[2] = value & 0x04;\n\twindow.enabled[3] = value & 0x08;\n\twindow.enabled[4] = value & 0x10;\n\twindow.special = value & 0x20;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWinIn = function(value) {\n\tthis.writeWindow(0, value);\n\tthis.writeWindow(1, value >> 8);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWinOut = function(value) {\n\tthis.writeWindow(2, value);\n\tthis.writeWindow(3, value >> 8);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBlendControl = function(value) {\n\tthis.target1[0] = !!(value & 0x0001) * this.TARGET1_MASK;\n\tthis.target1[1] = !!(value & 0x0002) * this.TARGET1_MASK;\n\tthis.target1[2] = !!(value & 0x0004) * this.TARGET1_MASK;\n\tthis.target1[3] = !!(value & 0x0008) * this.TARGET1_MASK;\n\tthis.target1[4] = !!(value & 0x0010) * this.TARGET1_MASK;\n\tthis.target1[5] = !!(value & 0x0020) * this.TARGET1_MASK;\n\tthis.target2[0] = !!(value & 0x0100) * this.TARGET2_MASK;\n\tthis.target2[1] = !!(value & 0x0200) * this.TARGET2_MASK;\n\tthis.target2[2] = !!(value & 0x0400) * this.TARGET2_MASK;\n\tthis.target2[3] = !!(value & 0x0800) * this.TARGET2_MASK;\n\tthis.target2[4] = !!(value & 0x1000) * this.TARGET2_MASK;\n\tthis.target2[5] = !!(value & 0x2000) * this.TARGET2_MASK;\n\tthis.blendMode = (value & 0x00C0) >> 6;\n\n\tswitch (this.blendMode) {\n\tcase 1:\n\t\t// Alpha\n\t\t// Fall through\n\tcase 0:\n\t\t// Normal\n\t\tthis.palette.makeNormalPalettes();\n\t\tbreak;\n\tcase 2:\n\t\t// Brighter\n\t\tthis.palette.makeBrightPalettes(value & 0x3F);\n\t\tbreak;\n\tcase 3:\n\t\t// Darker\n\t\tthis.palette.makeDarkPalettes(value & 0x3F);\n\t\tbreak;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.setBlendEnabled = function(layer, enabled, override) {\n\tthis.alphaEnabled = enabled && override == 1;\n\tif (enabled) {\n\t\tswitch (override) {\n\t\tcase 1:\n\t\t\t// Alpha\n\t\t\t// Fall through\n\t\tcase 0:\n\t\t\t// Normal\n\t\t\tthis.palette.makeNormalPalette(layer);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\t// Brighter\n\t\tcase 3:\n\t\t\t// Darker\n\t\t\tthis.palette.makeSpecialPalette(layer);\n\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tthis.palette.makeNormalPalette(layer);\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBlendAlpha = function(value) {\n\tthis.blendA = (value & 0x001F) / 16;\n\tif (this.blendA > 1) {\n\t\tthis.blendA = 1;\n\t}\n\tthis.blendB = ((value & 0x1F00) >> 8) / 16;\n\tif (this.blendB > 1) {\n\t\tthis.blendB = 1;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBlendY = function(value) {\n\tthis.blendY = value;\n\tthis.palette.setBlendY(value >= 16 ? 1 : (value / 16));\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeMosaic = function(value) {\n\tthis.bgMosaicX = (value & 0xF) + 1;\n\tthis.bgMosaicY = ((value >> 4) & 0xF) + 1;\n\tthis.objMosaicX = ((value >> 8) & 0xF) + 1;\n\tthis.objMosaicY = ((value >> 12) & 0xF) + 1;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.resetLayers = function() {\n\tif (this.backgroundMode > 1) {\n\t\tthis.bg[0].enabled = false;\n\t\tthis.bg[1].enabled = false;\n\t}\n\tif (this.bg[2].enabled) {\n\t\tthis.bg[2].drawScanline = this.bgModes[this.backgroundMode];\n\t}\n\tif ((this.backgroundMode == 0 || this.backgroundMode == 2)) {\n\t\tif (this.bg[3].enabled) {\n\t\t\tthis.bg[3].drawScanline = this.bgModes[this.backgroundMode];\n\t\t}\n\t} else {\n\t\tthis.bg[3].enabled = false;\n\t}\n\tthis.drawLayers.sort(this.layerComparator);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.layerComparator = function(a, b) {\n\tvar diff = b.priority - a.priority;\n\tif (!diff) {\n\t\tif (a.bg && !b.bg) {\n\t\t\treturn -1;\n\t\t} else if (!a.bg && b.bg) {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn b.index - a.index;\n\t}\n\treturn diff;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.accessMapMode0 = function(base, size, x, yBase, out) {\n\tvar offset = base + ((x >> 2) & 0x3E) + yBase;\n\n\tif (size & 1) {\n\t\toffset += (x & 0x100) << 3;\n\t}\n\n\tvar mem = this.vram.loadU16(offset);\n\tout.tile = mem & 0x03FF;\n\tout.hflip = mem & 0x0400;\n\tout.vflip = mem & 0x0800;\n\tout.palette = (mem & 0xF000) >> 8 // This is shifted up 4 to make pushPixel faster\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.accessMapMode1 = function(base, size, x, yBase, out) {\n\tvar offset = base + (x >> 3) + yBase;\n\n\tout.tile = this.vram.loadU8(offset);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.accessTile = function(base, tile, y) {\n\tvar offset = base + (tile << 5);\n\toffset |= y << 2;\n\n\treturn this.vram.load32(offset);\n}\n\nGameBoyAdvanceSoftwareRenderer.pushPixel = function(layer, map, video, row, x, offset, backing, mask, raw) {\n\tvar index;\n\tif (!raw) {\n\t\tif (this.multipalette) {\n\t\t\tindex = (row >> (x << 3)) & 0xFF;\n\t\t} else {\n\t\t\tindex = (row >> (x << 2)) & 0xF;\n\t\t}\n\t\t// Index 0 is transparent\n\t\tif (!index) {\n\t\t\treturn;\n\t\t} else if (!this.multipalette) {\n\t\t\tindex |= map.palette;\n\t\t}\n\t}\n\n\tvar stencil = video.WRITTEN_MASK;\n\tvar oldStencil = backing.stencil[offset];\n\tvar blend = video.blendMode;\n\tif (video.objwinActive) {\n\t\tif (oldStencil & video.OBJWIN_MASK) {\n\t\t\tif (video.windows[3].enabled[layer]) {\n\t\t\t\tvideo.setBlendEnabled(layer, video.windows[3].special && video.target1[layer], blend);\n\t\t\t\tif (video.windows[3].special && video.alphaEnabled) {\n\t\t\t\t\tmask |= video.target1[layer];\n\t\t\t\t}\n\t\t\t\tstencil |= video.OBJWIN_MASK;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (video.windows[2].enabled[layer]) {\n\t\t\tvideo.setBlendEnabled(layer, video.windows[2].special && video.target1[layer], blend);\n\t\t\tif (video.windows[2].special && video.alphaEnabled) {\n\t\t\t\tmask |= video.target1[layer];\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif ((mask & video.TARGET1_MASK) && (oldStencil & video.TARGET2_MASK)) {\n\t\tvideo.setBlendEnabled(layer, true, 1);\n\t}\n\n\tvar pixel = raw ? row : video.palette.accessColor(layer, index);\n\n\tif (mask & video.TARGET1_MASK) {\n\t\tvideo.setBlendEnabled(layer, !!blend, blend);\n\t}\n\tvar highPriority = (mask & video.PRIORITY_MASK) < (oldStencil & video.PRIORITY_MASK);\n\t// Backgrounds can draw over each other, too.\n\tif ((mask & video.PRIORITY_MASK) == (oldStencil & video.PRIORITY_MASK)) {\n\t\thighPriority = mask & video.BACKGROUND_MASK;\n\t}\n\n\tif (!(oldStencil & video.WRITTEN_MASK)) {\n\t\t// Nothing here yet, just continue\n\t\tstencil |= mask;\n\t} else if (highPriority) {\n\t\t// We are higher priority\n\t\tif (mask & video.TARGET1_MASK && oldStencil & video.TARGET2_MASK) {\n\t\t\tpixel = video.palette.mix(video.blendA, pixel, video.blendB, backing.color[offset]);\n\t\t}\n\t\t// We just drew over something, so it doesn't make sense for us to be a TARGET1 anymore...\n\t\tstencil |= mask & ~video.TARGET1_MASK;\n\t} else if ((mask & video.PRIORITY_MASK) > (oldStencil & video.PRIORITY_MASK)) {\n\t\t// We're below another layer, but might be the blend target for it\n\t\tstencil = oldStencil & ~(video.TARGET1_MASK | video.TARGET2_MASK);\n\t\tif (mask & video.TARGET2_MASK && oldStencil & video.TARGET1_MASK) {\n\t\t\tpixel = video.palette.mix(video.blendB, pixel, video.blendA, backing.color[offset]);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t} else {\n\t\treturn;\n\t}\n\n\tif (mask & video.OBJWIN_MASK) {\n\t\t// We ARE the object window, don't draw pixels!\n\t\tbacking.stencil[offset] |= video.OBJWIN_MASK;\n\t\treturn;\n\t}\n\tbacking.color[offset] = pixel;\n\tbacking.stencil[offset] = stencil;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.identity = function(x) {\n\treturn x;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBlank = function(backing) {\n\tfor (var x = 0; x < this.HORIZONTAL_PIXELS; ++x) {\n\t\tbacking.color[x] = 0xFFFF;\n\t\tbacking.stencil[x] = 0;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.prepareScanline = function(backing) {\n\tfor (var x = 0; x < this.HORIZONTAL_PIXELS; ++x) {\n\t\tbacking.stencil[x] = this.target2[this.LAYER_BACKDROP];\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode0 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar xOff = bg.x;\n\tvar yOff = bg.y;\n\tvar localX;\n\tvar localXLo;\n\tvar localY = y + yOff;\n\tif (this.mosaic) {\n\t\tlocalY -= y % video.bgMosaicY;\n\t}\n\tvar localYLo = localY & 0x7;\n\tvar mosaicX;\n\tvar screenBase = bg.screenBase;\n\tvar charBase = bg.charBase;\n\tvar size = bg.size;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar paletteShift = bg.multipalette ? 1 : 0;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase = (localY << 3) & 0x7C0;\n\tif (size == 2) {\n\t\tyBase += (localY << 3) & 0x800;\n\t} else if (size == 3) {\n\t\tyBase += (localY << 4) & 0x1000;\n\t}\n\n\tvar xMask;\n\tif (size & 1) {\n\t\txMask = 0x1FF;\n\t} else {\n\t\txMask = 0xFF;\n\t}\n\n\tvideo.accessMapMode0(screenBase, size, (start + xOff) & xMask, yBase, map);\n\tvar tileRow = video.accessTile(charBase, map.tile << paletteShift, (!map.vflip ? localYLo : 7 - localYLo) << paletteShift);\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = (x + xOff) & xMask;\n\t\tmosaicX = this.mosaic ? offset % video.bgMosaicX : 0;\n\t\tlocalX -= mosaicX;\n\t\tlocalXLo = localX & 0x7;\n\t\tif (!paletteShift) {\n\t\t\tif (!localXLo || (this.mosaic && !mosaicX)) {\n\t\t\t\tvideo.accessMapMode0(screenBase, size, localX, yBase, map);\n\t\t\t\ttileRow = video.accessTile(charBase, map.tile, !map.vflip ? localYLo : 7 - localYLo);\n\t\t\t\tif (!tileRow && !localXLo) {\n\t\t\t\t\tx += 7;\n\t\t\t\t\toffset += 8;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!localXLo || (this.mosaic && !mosaicX)) {\n\t\t\t\tvideo.accessMapMode0(screenBase, size, localX, yBase, map);\n\t\t\t}\n\t\t\tif (!(localXLo & 0x3) || (this.mosaic && !mosaicX)) {\n\t\t\t\ttileRow = video.accessTile(charBase + (!!(localX & 0x4) == !map.hflip ? 4 : 0), map.tile << 1, (!map.vflip ? localYLo : 7 - localYLo) << 1);\n\t\t\t\tif (!tileRow && !(localXLo & 0x3)) {\n\t\t\t\t\tx += 3;\n\t\t\t\t\toffset += 4;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (map.hflip) {\n\t\t\tlocalXLo = 7 - localXLo;\n\t\t}\n\t\tbg.pushPixel(index, map, video, tileRow, localXLo, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode2 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar screenBase = bg.screenBase;\n\tvar charBase = bg.charBase;\n\tvar size = bg.size;\n\tvar sizeAdjusted = 128 << size;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tif (bg.overflow) {\n\t\t\tlocalX &= sizeAdjusted - 1;\n\t\t\tif (localX < 0) {\n\t\t\t\tlocalX += sizeAdjusted;\n\t\t\t}\n\t\t\tlocalY &= sizeAdjusted - 1;\n\t\t\tif (localY < 0) {\n\t\t\t\tlocalY += sizeAdjusted;\n\t\t\t}\n\t\t} else if (localX < 0 || localY < 0 || localX >= sizeAdjusted || localY >= sizeAdjusted) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tyBase = ((localY << 1) & 0x7F0) << size;\n\t\tvideo.accessMapMode1(screenBase, size, localX, yBase, map);\n\t\tcolor = this.vram.loadU8(charBase + (map.tile << 6) + ((localY & 0x7) << 3) + (localX & 0x7));\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode3 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tif (localX < 0 || localY < 0 || localX >= video.HORIZONTAL_PIXELS || localY >= video.VERTICAL_PIXELS) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tcolor = this.vram.loadU16(((localY * video.HORIZONTAL_PIXELS) + localX) << 1);\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, true);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode4 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar charBase = 0;\n\tif (video.displayFrameSelect) {\n\t\tcharBase += 0xA000;\n\t}\n\tvar size = bg.size;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = 0 | bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tyBase = (localY << 2) & 0x7E0;\n\t\tif (localX < 0 || localY < 0 || localX >= video.HORIZONTAL_PIXELS || localY >= video.VERTICAL_PIXELS) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tcolor = this.vram.loadU8(charBase + (localY * video.HORIZONTAL_PIXELS) + localX);\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode5 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar charBase = 0;\n\tif (video.displayFrameSelect) {\n\t\tcharBase += 0xA000;\n\t}\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tif (localX < 0 || localY < 0 || localX >= 160 || localY >= 128) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tcolor = this.vram.loadU16(charBase + ((localY * 160) + localX) << 1);\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, true);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanline = function(y) {\n\tvar backing = this.scanline;\n\tif (this.forcedBlank) {\n\t\tthis.drawScanlineBlank(backing);\n\t\treturn;\n\t}\n\tthis.prepareScanline(backing);\n\tvar layer;\n\tvar firstStart;\n\tvar firstEnd;\n\tvar lastStart;\n\tvar lastEnd;\n\tthis.vcount = y;\n\t// Draw lower priority first and then draw over them\n\tfor (var i = 0; i < this.drawLayers.length; ++i) {\n\t\tlayer = this.drawLayers[i];\n\t\tif (!layer.enabled) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.objwinActive = false;\n\t\tif (!(this.win0 || this.win1 || this.objwin)) {\n\t\t\tthis.setBlendEnabled(layer.index, this.target1[layer.index], this.blendMode);\n\t\t\tlayer.drawScanline(backing, layer, 0, this.HORIZONTAL_PIXELS);\n\t\t} else {\n\t\t\tfirstStart = 0;\n\t\t\tfirstEnd = this.HORIZONTAL_PIXELS;\n\t\t\tlastStart = 0;\n\t\t\tlastEnd = this.HORIZONTAL_PIXELS;\n\t\t\tif (this.win0 && y >= this.win0Top && y < this.win0Bottom) {\n\t\t\t\tif (this.windows[0].enabled[layer.index]) {\n\t\t\t\t\tthis.setBlendEnabled(layer.index, this.windows[0].special && this.target1[layer.index], this.blendMode);\n\t\t\t\t\tlayer.drawScanline(backing, layer, this.win0Left, this.win0Right);\n\t\t\t\t}\n\t\t\t\tfirstStart = Math.max(firstStart, this.win0Left);\n\t\t\t\tfirstEnd = Math.min(firstEnd, this.win0Left);\n\t\t\t\tlastStart = Math.max(lastStart, this.win0Right);\n\t\t\t\tlastEnd = Math.min(lastEnd, this.win0Right);\n\t\t\t}\n\t\t\tif (this.win1 && y >= this.win1Top && y < this.win1Bottom) {\n\t\t\t\tif (this.windows[1].enabled[layer.index]) {\n\t\t\t\t\tthis.setBlendEnabled(layer.index, this.windows[1].special && this.target1[layer.index], this.blendMode);\n\t\t\t\t\tif (!this.windows[0].enabled[layer.index] && (this.win1Left < firstStart || this.win1Right < lastStart)) {\n\t\t\t\t\t\t// We've been cut in two by window 0!\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, this.win1Left, firstStart);\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, lastEnd, this.win1Right);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, this.win1Left, this.win1Right);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfirstStart = Math.max(firstStart, this.win1Left);\n\t\t\t\tfirstEnd = Math.min(firstEnd, this.win1Left);\n\t\t\t\tlastStart = Math.max(lastStart, this.win1Right);\n\t\t\t\tlastEnd = Math.min(lastEnd, this.win1Right);\n\t\t\t}\n\t\t\t// Do last two\n\t\t\tif (this.windows[2].enabled[layer.index] || (this.objwin && this.windows[3].enabled[layer.index])) {\n\t\t\t\t// WINOUT/OBJWIN\n\t\t\t\tthis.objwinActive = this.objwin;\n\t\t\t\tthis.setBlendEnabled(layer.index, this.windows[2].special && this.target1[layer.index], this.blendMode); // Window 3 handled in pushPixel\n\t\t\t\tif (firstEnd > lastStart) {\n\t\t\t\t\tlayer.drawScanline(backing, layer, 0, this.HORIZONTAL_PIXELS);\n\t\t\t\t} else {\n\t\t\t\t\tif (firstEnd) {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, 0, firstEnd);\n\t\t\t\t\t}\n\t\t\t\t\tif (lastStart < this.HORIZONTAL_PIXELS) {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, lastStart, this.HORIZONTAL_PIXELS);\n\t\t\t\t\t}\n\t\t\t\t\tif (lastEnd < firstStart) {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, lastEnd, firstStart);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setBlendEnabled(this.LAYER_BACKDROP, this.target1[this.LAYER_BACKDROP] && this.windows[2].special, this.blendMode);\n\t\t}\n\t\tif (layer.bg) {\n\t\t\tlayer.sx += layer.dmx;\n\t\t\tlayer.sy += layer.dmy;\n\t\t}\n\t}\n\n\tthis.finishScanline(backing);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.finishScanline = function(backing) {\n\tvar color;\n\tvar bd = this.palette.accessColor(this.LAYER_BACKDROP, 0);\n\tvar xx = this.vcount * this.HORIZONTAL_PIXELS * 4;\n\tvar isTarget2 = this.target2[this.LAYER_BACKDROP];\n\tfor (var x = 0; x < this.HORIZONTAL_PIXELS; ++x) {\n\t\tif (backing.stencil[x] & this.WRITTEN_MASK) {\n\t\t\tcolor = backing.color[x];\n\t\t\tif (isTarget2 && backing.stencil[x] & this.TARGET1_MASK) {\n\t\t\t\tcolor = this.palette.mix(this.blendA, color, this.blendB, bd);\n\t\t\t}\n\t\t\tthis.palette.convert16To32(color, this.sharedColor);\n\t\t} else {\n\t\t\tthis.palette.convert16To32(bd, this.sharedColor);\n\t\t}\n\t\tthis.pixelData.data[xx++] = this.sharedColor[0];\n\t\tthis.pixelData.data[xx++] = this.sharedColor[1];\n\t\tthis.pixelData.data[xx++] = this.sharedColor[2];\n\t\txx++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.startDraw = function() {\n\t// Nothing to do\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.finishDraw = function(caller) {\n\tthis.bg[2].sx = this.bg[2].refx;\n\tthis.bg[2].sy = this.bg[2].refy;\n\tthis.bg[3].sx = this.bg[3].refx;\n\tthis.bg[3].sy = this.bg[3].refy;\n\tcaller.finishDraw(this.pixelData);\n};\n","window.GameBoyAdvanceInterruptHandler = function GameBoyAdvanceInterruptHandler() {\n\tthis.FREQUENCY = 0x1000000;\n\n\tthis.cpu = null;\n\tthis.enable = false;\n\n\tthis.IRQ_VBLANK = 0x0;\n\tthis.IRQ_HBLANK = 0x1;\n\tthis.IRQ_VCOUNTER = 0x2;\n\tthis.IRQ_TIMER0 = 0x3;\n\tthis.IRQ_TIMER1 = 0x4;\n\tthis.IRQ_TIMER2 = 0x5;\n\tthis.IRQ_TIMER3 = 0x6;\n\tthis.IRQ_SIO = 0x7;\n\tthis.IRQ_DMA0 = 0x8;\n\tthis.IRQ_DMA1 = 0x9;\n\tthis.IRQ_DMA2 = 0xA;\n\tthis.IRQ_DMA3 = 0xB;\n\tthis.IRQ_KEYPAD = 0xC;\n\tthis.IRQ_GAMEPAK = 0xD;\n\n\tthis.MASK_VBLANK = 0x0001;\n\tthis.MASK_HBLANK = 0x0002;\n\tthis.MASK_VCOUNTER = 0x0004;\n\tthis.MASK_TIMER0 = 0x0008;\n\tthis.MASK_TIMER1 = 0x0010;\n\tthis.MASK_TIMER2 = 0x0020;\n\tthis.MASK_TIMER3 = 0x0040;\n\tthis.MASK_SIO = 0x0080;\n\tthis.MASK_DMA0 = 0x0100;\n\tthis.MASK_DMA1 = 0x0200;\n\tthis.MASK_DMA2 = 0x0400;\n\tthis.MASK_DMA3 = 0x0800;\n\tthis.MASK_KEYPAD = 0x1000;\n\tthis.MASK_GAMEPAK = 0x2000;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.clear = function() {\n\tthis.enable = false;\n\tthis.enabledIRQs = 0;\n\tthis.interruptFlags = 0;\n\n\tthis.dma = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.dma.push({\n\t\t\tsource: 0,\n\t\t\tdest: 0,\n\t\t\tcount: 0,\n\t\t\tnextSource: 0,\n\t\t\tnextDest: 0,\n\t\t\tnextCount: 0,\n\t\t\tsrcControl: 0,\n\t\t\tdstControl: 0,\n\t\t\trepeat: false,\n\t\t\twidth: 0,\n\t\t\tdrq: false,\n\t\t\ttiming: 0,\n\t\t\tdoIrq: false,\n\t\t\tenable: false,\n\t\t\tnextIRQ: 0\n\t\t});\n\t}\n\n\tthis.timersEnabled = 0;\n\tthis.timers = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.timers.push({\n\t\t\treload: 0,\n\t\t\toldReload: 0,\n\t\t\tprescaleBits: 0,\n\t\t\tcountUp: false,\n\t\t\tdoIrq: false,\n\t\t\tenable: false,\n\t\t\tlastEvent: 0,\n\t\t\tnextEvent: 0,\n\t\t\toverflowInterval: 1\n\t\t});\n\t}\n\n\tthis.nextEvent = 0;\n\tthis.springIRQ = false;\n\tthis.resetSP();\n};\n\nGameBoyAdvanceInterruptHandler.prototype.freeze = function() {\n\treturn {\n\t\t'enable': this.enable,\n\t\t'enabledIRQs': this.enabledIRQs,\n\t\t'interruptFlags': this.interruptFlags,\n\t\t'dma': this.dma,\n\t\t'timers': this.timers,\n\t\t'nextEvent': this.nextEvent,\n\t\t'springIRQ': this.springIRQ\n\t};\n};\n\nGameBoyAdvanceInterruptHandler.prototype.defrost = function(frost) {\n\tthis.enable = frost.enable;\n\tthis.enabledIRQs = frost.enabledIRQs;\n\tthis.interruptFlags = frost.interruptFlags;\n\tthis.dma = frost.dma;\n\tthis.timers = frost.timers;\n\tthis.timersEnabled = 0;\n\tif (this.timers[0].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tif (this.timers[1].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tif (this.timers[2].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tif (this.timers[3].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tthis.nextEvent = frost.nextEvent;\n\tthis.springIRQ = frost.springIRQ;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.updateTimers = function() {\n\tif (this.nextEvent > this.cpu.cycles) {\n\t\treturn;\n\t}\n\n\tif (this.springIRQ) {\n\t\tthis.cpu.raiseIRQ();\n\t\tthis.springIRQ = false;\n\t}\n\n\tthis.video.updateTimers(this.cpu);\n\tthis.audio.updateTimers();\n\tif (this.timersEnabled) {\n\t\tvar timer = this.timers[0];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tthis.io.registers[this.io.TM0CNT_LO >> 1] = timer.reload;\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER0);\n\t\t\t\t}\n\n\t\t\t\tif (this.audio.enabled) {\n\t\t\t\t\tif (this.audio.enableChannelA && !this.audio.soundTimerA && this.audio.dmaA >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoA();\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (this.audio.enableChannelB && !this.audio.soundTimerB && this.audio.dmaB >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoB();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttimer = this.timers[1];\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\tif (++this.io.registers[this.io.TM1CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\t\ttimer.nextEvent = this.cpu.cycles;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttimer = this.timers[1];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tif (!timer.countUp || this.io.registers[this.io.TM1CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\tthis.io.registers[this.io.TM1CNT_LO >> 1] = timer.reload;\n\t\t\t\t}\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER1);\n\t\t\t\t}\n\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\ttimer.nextEvent = 0;\n\t\t\t\t}\n\n\t\t\t\tif (this.audio.enabled) {\n\t\t\t\t\tif (this.audio.enableChannelA && this.audio.soundTimerA && this.audio.dmaA >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoA();\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (this.audio.enableChannelB && this.audio.soundTimerB && this.audio.dmaB >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoB();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttimer = this.timers[2];\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\tif (++this.io.registers[this.io.TM2CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\t\ttimer.nextEvent = this.cpu.cycles;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttimer = this.timers[2];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tif (!timer.countUp || this.io.registers[this.io.TM2CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\tthis.io.registers[this.io.TM2CNT_LO >> 1] = timer.reload;\n\t\t\t\t}\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER2);\n\t\t\t\t}\n\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\ttimer.nextEvent = 0;\n\t\t\t\t}\n\n\t\t\t\ttimer = this.timers[3];\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\tif (++this.io.registers[this.io.TM3CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\t\ttimer.nextEvent = this.cpu.cycles;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttimer = this.timers[3];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tif (!timer.countUp || this.io.registers[this.io.TM3CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\tthis.io.registers[this.io.TM3CNT_LO >> 1] = timer.reload;\n\t\t\t\t}\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER3);\n\t\t\t\t}\n\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\ttimer.nextEvent = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tvar dma = this.dma[0];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA0);\n\t}\n\n\tdma = this.dma[1];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA1);\n\t}\n\n\tdma = this.dma[2];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA2);\n\t}\n\n\tdma = this.dma[3];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA3);\n\t}\n\n\tthis.pollNextEvent();\n}\n\nGameBoyAdvanceInterruptHandler.prototype.resetSP = function() {\n\tthis.cpu.switchMode(this.cpu.MODE_SUPERVISOR);\n\tthis.cpu.gprs[this.cpu.SP] = 0x3007FE0;\n\tthis.cpu.switchMode(this.cpu.MODE_IRQ);\n\tthis.cpu.gprs[this.cpu.SP] = 0x3007FA0;\n\tthis.cpu.switchMode(this.cpu.MODE_SYSTEM);\n\tthis.cpu.gprs[this.cpu.SP] = 0x3007F00;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.swi32 = function(opcode) {\n\tthis.swi(opcode >> 16);\n};\n\nGameBoyAdvanceInterruptHandler.prototype.swi = function(opcode) {\n\tif (this.core.mmu.bios.real) {\n\t\tthis.cpu.raiseTrap();\n\t\treturn;\n\t}\n\n\tswitch (opcode) {\n\tcase 0x00:\n\t\t// SoftReset\n\t\tvar mem = this.core.mmu.memory[this.core.mmu.REGION_WORKING_IRAM];\n\t\tvar flag = mem.loadU8(0x7FFA);\n\t\tfor (var i = 0x7E00; i < 0x8000; i += 4) {\n\t\t\tmem.store32(i, 0);\n\t\t}\n\t\tthis.resetSP();\n\t\tif (!flag) {\n\t\t\tthis.cpu.gprs[this.cpu.LR] = 0x08000000;\n\t\t} else {\n\t\t\tthis.cpu.gprs[this.cpu.LR] = 0x02000000;\n\t\t}\n\t\tthis.cpu.switchExecMode(this.cpu.MODE_ARM);\n\t\tthis.cpu.instruction.writesPC = true;\n\t\tthis.cpu.gprs[this.cpu.PC] = this.cpu.gprs[this.cpu.LR];\n\t\tbreak;\n\tcase 0x01:\n\t\t// RegisterRamReset\n\t\tvar regions = this.cpu.gprs[0];\n\t\tif (regions & 0x01) {\n\t\t\tthis.core.mmu.memory[this.core.mmu.REGION_WORKING_RAM] = new MemoryBlock(this.core.mmu.SIZE_WORKING_RAM, 9);\n\t\t}\n\t\tif (regions & 0x02) {\n\t\t\tfor (var i = 0; i < this.core.mmu.SIZE_WORKING_IRAM - 0x200; i += 4) {\n\t\t\t\tthis.core.mmu.memory[this.core.mmu.REGION_WORKING_IRAM].store32(i, 0);\n\t\t\t}\n\t\t}\n\t\tif (regions & 0x1C) {\n\t\t\tthis.video.renderPath.clearSubsets(this.core.mmu, regions);\n\t\t}\n\t\tif (regions & 0xE0) {\n\t\t\tthis.core.STUB('Unimplemented RegisterRamReset');\n\t\t}\n\t\tbreak;\n\tcase 0x02:\n\t\t// Halt\n\t\tthis.halt();\n\t\tbreak;\n\tcase 0x05:\n\t\t// VBlankIntrWait\n\t\tthis.cpu.gprs[0] = 1;\n\t\tthis.cpu.gprs[1] = 1;\n\t\t// Fall through:\n\tcase 0x04:\n\t\t// IntrWait\n\t\tif (!this.enable) {\n\t\t\tthis.io.store16(this.io.IME, 1);\n\t\t}\n\t\tif (!this.cpu.gprs[0] && this.interruptFlags & this.cpu.gprs[1]) {\n\t\t\treturn;\n\t\t}\n\t\tthis.dismissIRQs(0xFFFFFFFF);\n\t\tthis.cpu.raiseTrap();\n\t\tbreak;\n\tcase 0x06:\n\t\t// Div\n\t\tvar result = (this.cpu.gprs[0] | 0) / (this.cpu.gprs[1] | 0);\n\t\tvar mod = (this.cpu.gprs[0] | 0) % (this.cpu.gprs[1] | 0);\n\t\tthis.cpu.gprs[0] = result | 0;\n\t\tthis.cpu.gprs[1] = mod | 0;\n\t\tthis.cpu.gprs[3] = Math.abs(result | 0);\n\t\tbreak;\n\tcase 0x07:\n\t\t// DivArm\n\t\tvar result = (this.cpu.gprs[1] | 0) / (this.cpu.gprs[0] | 0);\n\t\tvar mod = (this.cpu.gprs[1] | 0) % (this.cpu.gprs[0] | 0);\n\t\tthis.cpu.gprs[0] = result | 0;\n\t\tthis.cpu.gprs[1] = mod | 0;\n\t\tthis.cpu.gprs[3] = Math.abs(result | 0);\n\t\tbreak;\n\tcase 0x08:\n\t\t// Sqrt\n\t\tvar root = Math.sqrt(this.cpu.gprs[0]);\n\t\tthis.cpu.gprs[0] = root | 0; // Coerce down to int\n\t\tbreak;\n\tcase 0x0A:\n\t\t// ArcTan2\n\t\tvar x = this.cpu.gprs[0] / 16384;\n\t\tvar y = this.cpu.gprs[1] / 16384;\n\t\tthis.cpu.gprs[0] = (Math.atan2(y, x) / (2 * Math.PI)) * 0x10000;\n\t\tbreak;\n\tcase 0x0B:\n\t\t// CpuSet\n\t\tvar source = this.cpu.gprs[0];\n\t\tvar dest = this.cpu.gprs[1];\n\t\tvar mode = this.cpu.gprs[2];\n\t\tvar count = mode & 0x000FFFFF;\n\t\tvar fill = mode & 0x01000000;\n\t\tvar wordsize = (mode & 0x04000000) ? 4 : 2;\n\t\tif (fill) {\n\t\t\tif (wordsize == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\tvar word = this.cpu.mmu.load32(source);\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsource &= 0xFFFFFFFE;\n\t\t\t\tdest &= 0xFFFFFFFE;\n\t\t\t\tvar word = this.cpu.mmu.load16(source);\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tthis.cpu.mmu.store16(dest + (i << 1), word);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (wordsize == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tvar word = this.cpu.mmu.load32(source + (i << 2));\n\t\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsource &= 0xFFFFFFFE;\n\t\t\t\tdest &= 0xFFFFFFFE;\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tvar word = this.cpu.mmu.load16(source + (i << 1));\n\t\t\t\t\tthis.cpu.mmu.store16(dest + (i << 1), word);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\tcase 0x0C:\n\t\t// FastCpuSet\n\t\tvar source = this.cpu.gprs[0] & 0xFFFFFFFC;\n\t\tvar dest = this.cpu.gprs[1] & 0xFFFFFFFC;\n\t\tvar mode = this.cpu.gprs[2];\n\t\tvar count = mode & 0x000FFFFF;\n\t\tcount = ((count + 7) >> 3) << 3;\n\t\tvar fill = mode & 0x01000000;\n\t\tif (fill) {\n\t\t\tvar word = this.cpu.mmu.load32(source);\n\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\tvar word = this.cpu.mmu.load32(source + (i << 2));\n\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t}\n\t\t}\n\t\treturn;\n\tcase 0x0E:\n\t\t// BgAffineSet\n\t\tvar i = this.cpu.gprs[2];\n\t\tvar ox, oy;\n\t\tvar cx, cy;\n\t\tvar sx, sy;\n\t\tvar theta;\n\t\tvar offset = this.cpu.gprs[0];\n\t\tvar destination = this.cpu.gprs[1];\n\t\tvar a, b, c, d;\n\t\tvar rx, ry;\n\t\twhile (i--) {\n\t\t\t// [ sx   0  0 ]   [ cos(theta)  -sin(theta)  0 ]   [ 1  0  cx - ox ]   [ A B rx ]\n\t\t\t// [  0  sy  0 ] * [ sin(theta)   cos(theta)  0 ] * [ 0  1  cy - oy ] = [ C D ry ]\n\t\t\t// [  0   0  1 ]   [     0            0       1 ]   [ 0  0     1    ]   [ 0 0  1 ]\n\t\t\tox = this.core.mmu.load32(offset) / 256;\n\t\t\toy = this.core.mmu.load32(offset + 4) / 256;\n\t\t\tcx = this.core.mmu.load16(offset + 8);\n\t\t\tcy = this.core.mmu.load16(offset + 10);\n\t\t\tsx = this.core.mmu.load16(offset + 12) / 256;\n\t\t\tsy = this.core.mmu.load16(offset + 14) / 256;\n\t\t\ttheta = (this.core.mmu.loadU16(offset + 16) >> 8) / 128 * Math.PI;\n\t\t\toffset += 20;\n\t\t\t// Rotation\n\t\t\ta = d = Math.cos(theta);\n\t\t\tb = c = Math.sin(theta);\n\t\t\t// Scale\n\t\t\ta *= sx;\n\t\t\tb *= -sx;\n\t\t\tc *= sy;\n\t\t\td *= sy;\n\t\t\t// Translate\n\t\t\trx = ox - (a * cx + b * cy);\n\t\t\try = oy - (c * cx + d * cy);\n\t\t\tthis.core.mmu.store16(destination, (a * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + 2, (b * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + 4, (c * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + 6, (d * 256) | 0);\n\t\t\tthis.core.mmu.store32(destination + 8, (rx * 256) | 0);\n\t\t\tthis.core.mmu.store32(destination + 12, (ry * 256) | 0);\n\t\t\tdestination += 16;\n\t\t}\n\t\tbreak;\n\tcase 0x0F:\n\t\t// ObjAffineSet\n\t\tvar i = this.cpu.gprs[2];\n\t\tvar sx, sy;\n\t\tvar theta;\n\t\tvar offset = this.cpu.gprs[0];\n\t\tvar destination = this.cpu.gprs[1]\n\t\tvar diff = this.cpu.gprs[3];\n\t\tvar a, b, c, d;\n\t\twhile (i--) {\n\t\t\t// [ sx   0 ]   [ cos(theta)  -sin(theta) ]   [ A B ]\n\t\t\t// [  0  sy ] * [ sin(theta)   cos(theta) ] = [ C D ]\n\t\t\tsx = this.core.mmu.load16(offset) / 256;\n\t\t\tsy = this.core.mmu.load16(offset + 2) / 256;\n\t\t\ttheta = (this.core.mmu.loadU16(offset + 4) >> 8) / 128 * Math.PI;\n\t\t\toffset += 6;\n\t\t\t// Rotation\n\t\t\ta = d = Math.cos(theta);\n\t\t\tb = c = Math.sin(theta);\n\t\t\t// Scale\n\t\t\ta *= sx;\n\t\t\tb *= -sx;\n\t\t\tc *= sy;\n\t\t\td *= sy;\n\t\t\tthis.core.mmu.store16(destination, (a * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + diff, (b * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + diff * 2, (c * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + diff * 3, (d * 256) | 0);\n\t\t\tdestination += diff * 4;\n\t\t}\n\t\tbreak;\n\tcase 0x11:\n\t\t// LZ77UnCompWram\n\t\tthis.lz77(this.cpu.gprs[0], this.cpu.gprs[1], 1);\n\t\tbreak;\n\tcase 0x12:\n\t\t// LZ77UnCompVram\n\t\tthis.lz77(this.cpu.gprs[0], this.cpu.gprs[1], 2);\n\t\tbreak;\n\tcase 0x13:\n\t\t// HuffUnComp\n\t\tthis.huffman(this.cpu.gprs[0], this.cpu.gprs[1]);\n\t\tbreak;\n\tcase 0x14:\n\t\t// RlUnCompWram\n\t\tthis.rl(this.cpu.gprs[0], this.cpu.gprs[1], 1);\n\t\tbreak;\n\tcase 0x15:\n\t\t// RlUnCompVram\n\t\tthis.rl(this.cpu.gprs[0], this.cpu.gprs[1], 2);\n\t\tbreak;\n\tcase 0x1F:\n\t\t// MidiKey2Freq\n\t\tvar key = this.cpu.mmu.load32(this.cpu.gprs[0] + 4);\n\t\tthis.cpu.gprs[0] = key / Math.pow(2, (180 - this.cpu.gprs[1] - this.cpu.gprs[2] / 256) / 12) >>> 0;\n\t\tbreak;\n\tdefault:\n\t\tthrow \"Unimplemented software interrupt: 0x\" + opcode.toString(16);\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.masterEnable = function(value) {\n\tthis.enable = value;\n\n\tif (this.enable && this.enabledIRQs & this.interruptFlags) {\n\t\tthis.cpu.raiseIRQ();\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.setInterruptsEnabled = function(value) {\n\tthis.enabledIRQs = value;\n\n\tif (this.enabledIRQs & this.MASK_SIO) {\n\t\tthis.core.STUB('Serial I/O interrupts not implemented');\n\t}\n\n\tif (this.enabledIRQs & this.MASK_KEYPAD) {\n\t\tthis.core.STUB('Keypad interrupts not implemented');\n\t}\n\n\tif (this.enable && this.enabledIRQs & this.interruptFlags) {\n\t\tthis.cpu.raiseIRQ();\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.pollNextEvent = function() {\n\tvar nextEvent = this.video.nextEvent;\n\tvar test;\n\n\tif (this.audio.enabled) {\n\t\ttest = this.audio.nextEvent;\n\t\tif (!nextEvent || test < nextEvent) {\n\t\t\tnextEvent = test;\n\t\t}\n\t}\n\n\tif (this.timersEnabled) {\n\t\tvar timer = this.timers[0];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\n\t\ttimer = this.timers[1];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\t\ttimer = this.timers[2];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\t\ttimer = this.timers[3];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\t}\n\n\tvar dma = this.dma[0];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tdma = this.dma[1];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tdma = this.dma[2];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tdma = this.dma[3];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tthis.core.ASSERT(nextEvent >= this.cpu.cycles, \"Next event is before present\");\n\tthis.nextEvent = nextEvent;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.waitForIRQ = function() {\n\tvar timer;\n\tvar irqPending = this.testIRQ() || this.video.hblankIRQ || this.video.vblankIRQ || this.video.vcounterIRQ;\n\tif (this.timersEnabled) {\n\t\ttimer = this.timers[0];\n\t\tirqPending = irqPending || timer.doIrq;\n\t\ttimer = this.timers[1];\n\t\tirqPending = irqPending || timer.doIrq;\n\t\ttimer = this.timers[2];\n\t\tirqPending = irqPending || timer.doIrq;\n\t\ttimer = this.timers[3];\n\t\tirqPending = irqPending || timer.doIrq;\n\t}\n\tif (!irqPending) {\n\t\treturn false;\n\t}\n\n\tfor (;;) {\n\t\tthis.pollNextEvent();\n\n\t\tif (!this.nextEvent) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tthis.cpu.cycles = this.nextEvent;\n\t\t\tthis.updateTimers();\n\t\t\tif (this.interruptFlags) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.testIRQ = function() {\n\tif (this.enable && this.enabledIRQs & this.interruptFlags) {\n\t\tthis.springIRQ = true;\n\t\tthis.nextEvent = this.cpu.cycles;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.raiseIRQ = function(irqType) {\n\tthis.interruptFlags |= 1 << irqType;\n\tthis.io.registers[this.io.IF >> 1] = this.interruptFlags;\n\n\tif (this.enable && (this.enabledIRQs & 1 << irqType)) {\n\t\tthis.cpu.raiseIRQ();\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dismissIRQs = function(irqMask) {\n\tthis.interruptFlags &= ~irqMask;\n\tthis.io.registers[this.io.IF >> 1] = this.interruptFlags;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaSetSourceAddress = function(dma, address) {\n\tthis.dma[dma].source = address & 0xFFFFFFFE;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaSetDestAddress = function(dma, address) {\n\tthis.dma[dma].dest = address & 0xFFFFFFFE;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaSetWordCount = function(dma, count) {\n\tthis.dma[dma].count = count ? count : (dma == 3 ? 0x10000 : 0x4000);\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaWriteControl = function(dma, control) {\n\tvar currentDma = this.dma[dma];\n\tvar wasEnabled = currentDma.enable;\n\tcurrentDma.dstControl = (control & 0x0060) >> 5;\n\tcurrentDma.srcControl = (control & 0x0180) >> 7;\n\tcurrentDma.repeat = !!(control & 0x0200);\n\tcurrentDma.width = (control & 0x0400) ? 4 : 2;\n\tcurrentDma.drq = !!(control & 0x0800);\n\tcurrentDma.timing = (control & 0x3000) >> 12;\n\tcurrentDma.doIrq = !!(control & 0x4000);\n\tcurrentDma.enable = !!(control & 0x8000);\n\tcurrentDma.nextIRQ = 0;\n\n\tif (currentDma.drq) {\n\t\tthis.core.WARN('DRQ not implemented');\n\t}\n\n\tif (!wasEnabled && currentDma.enable) {\n\t\tcurrentDma.nextSource = currentDma.source;\n\t\tcurrentDma.nextDest = currentDma.dest;\n\t\tcurrentDma.nextCount = currentDma.count;\n\t\tthis.cpu.mmu.scheduleDma(dma, currentDma);\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.timerSetReload = function(timer, reload) {\n\tthis.timers[timer].reload = reload & 0xFFFF;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.timerWriteControl = function(timer, control) {\n\tvar currentTimer = this.timers[timer];\n\tvar oldPrescale = currentTimer.prescaleBits;\n\tswitch (control & 0x0003) {\n\tcase 0x0000:\n\t\tcurrentTimer.prescaleBits = 0;\n\t\tbreak;\n\tcase 0x0001:\n\t\tcurrentTimer.prescaleBits = 6;\n\t\tbreak;\n\tcase 0x0002:\n\t\tcurrentTimer.prescaleBits = 8;\n\t\tbreak;\n\tcase 0x0003:\n\t\tcurrentTimer.prescaleBits = 10;\n\t\tbreak;\n\t}\n\tcurrentTimer.countUp = !!(control & 0x0004);\n\tcurrentTimer.doIrq = !!(control & 0x0040);\n\tcurrentTimer.overflowInterval = (0x10000 - currentTimer.reload) << currentTimer.prescaleBits;\n\tvar wasEnabled = currentTimer.enable;\n\tcurrentTimer.enable = !!(((control & 0x0080) >> 7) << timer);\n\tif (!wasEnabled && currentTimer.enable) {\n\t\tif (!currentTimer.countUp) {\n\t\t\tcurrentTimer.lastEvent = this.cpu.cycles;\n\t\t\tcurrentTimer.nextEvent = this.cpu.cycles + currentTimer.overflowInterval;\n\t\t} else {\n\t\t\tcurrentTimer.nextEvent = 0;\n\t\t}\n\t\tthis.io.registers[(this.io.TM0CNT_LO + (timer << 2)) >> 1] = currentTimer.reload;\n\t\tcurrentTimer.oldReload = currentTimer.reload;\n\t\t++this.timersEnabled;\n\t} else if (wasEnabled && !currentTimer.enable) {\n\t\tif (!currentTimer.countUp) {\n\t\t\tthis.io.registers[(this.io.TM0CNT_LO + (timer << 2)) >> 1] = currentTimer.oldReload + (this.cpu.cycles - currentTimer.lastEvent) >> oldPrescale;\n\t\t}\n\t\t--this.timersEnabled;\n\t} else if (currentTimer.prescaleBits != oldPrescale && !currentTimer.countUp) {\n\t\t// FIXME: this might be before present\n\t\tcurrentTimer.nextEvent = currentTimer.lastEvent + currentTimer.overflowInterval;\n\t}\n\n\t// We've changed the timers somehow...we need to reset the next event\n\tthis.pollNextEvent();\n};\n\nGameBoyAdvanceInterruptHandler.prototype.timerRead = function(timer) {\n\tvar currentTimer = this.timers[timer];\n\tif (currentTimer.enable && !currentTimer.countUp) {\n\t\treturn currentTimer.oldReload + (this.cpu.cycles - currentTimer.lastEvent) >> currentTimer.prescaleBits;\n\t} else {\n\t\treturn this.io.registers[(this.io.TM0CNT_LO + (timer << 2)) >> 1];\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.halt = function() {\n\tif (!this.enable) {\n\t\tthrow \"Requested HALT when interrupts were disabled!\";\n\t}\n\tif (!this.waitForIRQ()) {\n\t\tthrow \"Waiting on interrupt forever.\";\n\t}\n}\n\nGameBoyAdvanceInterruptHandler.prototype.lz77 = function(source, dest, unitsize) {\n\t// TODO: move to a different file\n\tvar remaining = (this.cpu.mmu.load32(source) & 0xFFFFFF00) >> 8;\n\t// We assume the signature byte (0x10) is correct\n\tvar blockheader;\n\tvar sPointer = source + 4;\n\tvar dPointer = dest;\n\tvar blocksRemaining = 0;\n\tvar block;\n\tvar disp;\n\tvar bytes;\n\tvar buffer = 0;\n\tvar loaded;\n\twhile (remaining > 0) {\n\t\tif (blocksRemaining) {\n\t\t\tif (blockheader & 0x80) {\n\t\t\t\t// Compressed\n\t\t\t\tblock = this.cpu.mmu.loadU8(sPointer) | (this.cpu.mmu.loadU8(sPointer + 1) << 8);\n\t\t\t\tsPointer += 2;\n\t\t\t\tdisp = dPointer - (((block & 0x000F) << 8) | ((block & 0xFF00) >> 8)) - 1;\n\t\t\t\tbytes = ((block & 0x00F0) >> 4) + 3;\n\t\t\t\twhile (bytes-- && remaining) {\n\t\t\t\t\tloaded = this.cpu.mmu.loadU8(disp++);\n\t\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\t\tbuffer |= loaded << 8;\n\t\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cpu.mmu.store8(dPointer, loaded);\n\t\t\t\t\t}\n\t\t\t\t\t--remaining;\n\t\t\t\t\t++dPointer;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Uncompressed\n\t\t\t\tloaded = this.cpu.mmu.loadU8(sPointer++);\n\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\tbuffer |= loaded << 8;\n\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cpu.mmu.store8(dPointer, loaded);\n\t\t\t\t}\n\t\t\t\t--remaining;\n\t\t\t\t++dPointer;\n\t\t\t}\n\t\t\tblockheader <<= 1;\n\t\t\t--blocksRemaining;\n\t\t} else {\n\t\t\tblockheader = this.cpu.mmu.loadU8(sPointer++);\n\t\t\tblocksRemaining = 8;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.huffman = function(source, dest) {\n\tsource = source & 0xFFFFFFFC;\n\tvar header = this.cpu.mmu.load32(source);\n\tvar remaining = header >> 8;\n\tvar bits = header & 0xF;\n\tif (32 % bits) {\n\t\tthrow 'Unimplemented unaligned Huffman';\n\t}\n\tvar padding = (4 - remaining) & 0x3;\n\tremaining &= 0xFFFFFFFC;\n\t// We assume the signature byte (0x20) is correct\n\tvar tree = [];\n\tvar treesize = (this.cpu.mmu.loadU8(source + 4) << 1) + 1;\n\tvar block;\n\tvar sPointer = source + 5 + treesize;\n\tvar dPointer = dest & 0xFFFFFFFC;\n\tvar i;\n\tfor (i = 0; i < treesize; ++i) {\n\t\ttree.push(this.cpu.mmu.loadU8(source + 5 + i));\n\t}\n\tvar node;\n\tvar offset = 0;\n\tvar bitsRemaining;\n\tvar readBits;\n\tvar bitsSeen = 0;\n\tnode = tree[0];\n\twhile (remaining > 0) {\n\t\tvar bitstream = this.cpu.mmu.load32(sPointer);\n\t\tsPointer += 4;\n\t\tfor (bitsRemaining = 32; bitsRemaining > 0; --bitsRemaining, bitstream <<= 1) {\n\t\t\tif (typeof (node) === 'number') {\n\t\t\t\t// Lazily construct tree\n\t\t\t\tvar next = (offset - 1 | 1) + ((node & 0x3F) << 1) + 2;\n\t\t\t\tnode = {\n\t\t\t\t\tl: next,\n\t\t\t\t\tr: next + 1,\n\t\t\t\t\tlTerm: node & 0x80,\n\t\t\t\t\trTerm: node & 0x40\n\t\t\t\t};\n\t\t\t\ttree[offset] = node;\n\t\t\t}\n\n\t\t\tif (bitstream & 0x80000000) {\n\t\t\t\t// Go right\n\t\t\t\tif (node.rTerm) {\n\t\t\t\t\treadBits = tree[node.r];\n\t\t\t\t} else {\n\t\t\t\t\toffset = node.r;\n\t\t\t\t\tnode = tree[node.r];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Go left\n\t\t\t\tif (node.lTerm) {\n\t\t\t\t\treadBits = tree[node.l];\n\t\t\t\t} else {\n\t\t\t\t\toffset = node.l;\n\t\t\t\t\tnode = tree[offset];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tblock |= (readBits & ((1 << bits) - 1)) << bitsSeen;\n\t\t\tbitsSeen += bits;\n\t\t\toffset = 0;\n\t\t\tnode = tree[0];\n\t\t\tif (bitsSeen == 32) {\n\t\t\t\tbitsSeen = 0;\n\t\t\t\tthis.cpu.mmu.store32(dPointer, block);\n\t\t\t\tdPointer += 4;\n\t\t\t\tremaining -= 4;\n\t\t\t\tblock = 0;\n\t\t\t}\n\t\t}\n\n\t}\n\tif (padding) {\n\t\tthis.cpu.mmu.store32(dPointer, block);\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.rl = function(source, dest, unitsize) {\n\tsource = source & 0xFFFFFFFC;\n\tvar remaining = (this.cpu.mmu.load32(source) & 0xFFFFFF00) >> 8;\n\tvar padding = (4 - remaining) & 0x3;\n\t// We assume the signature byte (0x30) is correct\n\tvar blockheader;\n\tvar block;\n\tvar sPointer = source + 4;\n\tvar dPointer = dest;\n\tvar buffer = 0;\n\twhile (remaining > 0) {\n\t\tblockheader = this.cpu.mmu.loadU8(sPointer++);\n\t\tif (blockheader & 0x80) {\n\t\t\t// Compressed\n\t\t\tblockheader &= 0x7F;\n\t\t\tblockheader += 3;\n\t\t\tblock = this.cpu.mmu.loadU8(sPointer++);\n\t\t\twhile (blockheader-- && remaining) {\n\t\t\t\t--remaining;\n\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\tbuffer |= block << 8;\n\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cpu.mmu.store8(dPointer, block);\n\t\t\t\t}\n\t\t\t\t++dPointer;\n\t\t\t}\n\t\t} else {\n\t\t\t// Uncompressed\n\t\t\tblockheader++;\n\t\t\twhile (blockheader-- && remaining) {\n\t\t\t\t--remaining;\n\t\t\t\tblock = this.cpu.mmu.loadU8(sPointer++);\n\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\tbuffer |= block << 8;\n\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cpu.mmu.store8(dPointer, block);\n\t\t\t\t}\n\t\t\t\t++dPointer;\n\t\t\t}\n\t\t}\n\t}\n\twhile (padding--) {\n\t\tthis.cpu.mmu.store8(dPointer++, 0);\n\t}\n};\n","window.GameBoyAdvanceKeypad = function GameBoyAdvanceKeypad() {\n\tthis.KEYCODE_LEFT = 37;\n\tthis.KEYCODE_UP = 38;\n\tthis.KEYCODE_RIGHT = 39;\n\tthis.KEYCODE_DOWN = 40;\n\tthis.KEYCODE_START = 13;\n\tthis.KEYCODE_SELECT = 220;\n\tthis.KEYCODE_A = 90;\n\tthis.KEYCODE_B = 88;\n\tthis.KEYCODE_L = 65;\n\tthis.KEYCODE_R = 83;\n\n\tthis.GAMEPAD_LEFT = 14;\n\tthis.GAMEPAD_UP = 12;\n\tthis.GAMEPAD_RIGHT = 15;\n\tthis.GAMEPAD_DOWN = 13;\n\tthis.GAMEPAD_START = 9;\n\tthis.GAMEPAD_SELECT = 8;\n\tthis.GAMEPAD_A = 1;\n\tthis.GAMEPAD_B = 0;\n\tthis.GAMEPAD_L = 4;\n\tthis.GAMEPAD_R = 5;\n\tthis.GAMEPAD_THRESHOLD = 0.2;\n\n\tthis.A = 0;\n\tthis.B = 1;\n\tthis.SELECT = 2;\n\tthis.START = 3;\n\tthis.RIGHT = 4;\n\tthis.LEFT = 5;\n\tthis.UP = 6;\n\tthis.DOWN = 7;\n\tthis.R = 8;\n\tthis.L = 9;\n\n\tthis.currentDown = 0x03FF;\n\tthis.eatInput = false;\n\n\tthis.gamepads = [];\n};\n\nGameBoyAdvanceKeypad.prototype.keyboardHandler = function(e) {\n\tvar toggle = 0;\n\tswitch (e.keyCode) {\n\tcase this.KEYCODE_START:\n\t\ttoggle = this.START;\n\t\tbreak;\n\tcase this.KEYCODE_SELECT:\n\t\ttoggle = this.SELECT;\n\t\tbreak;\n\tcase this.KEYCODE_A:\n\t\ttoggle = this.A;\n\t\tbreak;\n\tcase this.KEYCODE_B:\n\t\ttoggle = this.B;\n\t\tbreak;\n\tcase this.KEYCODE_L:\n\t\ttoggle = this.L;\n\t\tbreak;\n\tcase this.KEYCODE_R:\n\t\ttoggle = this.R;\n\t\tbreak;\n\tcase this.KEYCODE_UP:\n\t\ttoggle = this.UP;\n\t\tbreak;\n\tcase this.KEYCODE_RIGHT:\n\t\ttoggle = this.RIGHT;\n\t\tbreak;\n\tcase this.KEYCODE_DOWN:\n\t\ttoggle = this.DOWN;\n\t\tbreak;\n\tcase this.KEYCODE_LEFT:\n\t\ttoggle = this.LEFT;\n\t\tbreak;\n\tdefault:\n\t\treturn;\n\t}\n\n\ttoggle = 1 << toggle;\n\tif (e.type == \"keydown\") {\n\t\tthis.currentDown &= ~toggle;\n\t} else {\n\t\tthis.currentDown |= toggle;\n\t}\n\n\tif (this.eatInput) {\n\t\te.preventDefault();\n\t}\n};\n\nGameBoyAdvanceKeypad.prototype.gamepadHandler = function(gamepad) {\n\tvar value = 0;\n\tif (gamepad.buttons[this.GAMEPAD_LEFT] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.LEFT;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_UP] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.UP;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_RIGHT] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.RIGHT;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_DOWN] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.DOWN;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_START] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.START;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_SELECT] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.SELECT;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_A] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.A;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_B] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.B;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_L] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.L;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_R] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.R;\n\t}\n\n\tthis.currentDown = ~value & 0x3FF;\n};\n\nGameBoyAdvanceKeypad.prototype.gamepadConnectHandler = function(gamepad) {\n\tthis.gamepads.push(gamepad);\n};\n\nGameBoyAdvanceKeypad.prototype.gamepadDisconnectHandler = function(gamepad) {\n\tthis.gamepads = self.gamepads.filter(function(other) { return other != gamepad });\n};\n\nGameBoyAdvanceKeypad.prototype.pollGamepads = function() {\n\tvar navigatorList = [];\n\tif (navigator.webkitGetGamepads) {\n\t\tnavigatorList = navigator.webkitGetGamepads();\n\t} else if (navigator.getGamepads) {\n\t\tnavigatorList = navigator.getGamepads();\n\t}\n\n\t// Let's all give a shout out to Chrome for making us get the gamepads EVERY FRAME\n\tif (navigatorList.length) {\n\t\tthis.gamepads = [];\n\t}\n\tfor (var i = 0; i < navigatorList.length; ++i) {\n\t\tif (navigatorList[i]) {\n\t\t\tthis.gamepads.push(navigatorList[i]);\n\t\t}\n\t}\n\tif (this.gamepads.length > 0) {\n\t\tthis.gamepadHandler(this.gamepads[0]);\n\t}\n\n};\n\nGameBoyAdvanceKeypad.prototype.registerHandlers = function() {\n\twindow.addEventListener(\"keydown\", this.keyboardHandler.bind(this), true);\n\twindow.addEventListener(\"keyup\", this.keyboardHandler.bind(this), true);\n\n\twindow.addEventListener(\"gamepadconnected\", this.gamepadConnectHandler.bind(this), true);\n\twindow.addEventListener(\"mozgamepadconnected\", this.gamepadConnectHandler.bind(this), true);\n\twindow.addEventListener(\"webkitgamepadconnected\", this.gamepadConnectHandler.bind(this), true);\n\n\twindow.addEventListener(\"gamepaddisconnected\", this.gamepadDisconnectHandler.bind(this), true);\n\twindow.addEventListener(\"mozgamepaddisconnected\", this.gamepadDisconnectHandler.bind(this), true);\n\twindow.addEventListener(\"webkitgamepaddisconnected\", this.gamepadDisconnectHandler.bind(this), true);\n};\n","window.GameBoyAdvanceSIO = function GameBoyAdvanceSIO() {\n\tthis.SIO_NORMAL_8 = 0;\n\tthis.SIO_NORMAL_32 = 1;\n\tthis.SIO_MULTI = 2;\n\tthis.SIO_UART = 3;\n\tthis.SIO_GPIO = 8;\n\tthis.SIO_JOYBUS = 12;\n\n\tthis.BAUD = [ 9600, 38400, 57600, 115200 ];\n}\n\nGameBoyAdvanceSIO.prototype.clear = function() {\n\tthis.mode = this.SIO_GPIO;\n\tthis.sd = false;\n\n\tthis.irq = false;\n\tthis.multiplayer = {\n\t\tbaud: 0,\n\t\tsi: 0,\n\t\tid: 0,\n\t\terror: 0,\n\t\tbusy: 0,\n\n\t\tstates: [ 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF ]\n\t};\n\n\tthis.linkLayer = null;\n};\n\nGameBoyAdvanceSIO.prototype.setMode = function(mode) {\n\tif (mode & 0x8) {\n\t\tmode &= 0xC;\n\t} else {\n\t\tmode &= 0x3;\n\t}\n\tthis.mode = mode;\n\n\tthis.core.INFO('Setting SIO mode to ' + hex(mode, 1));\n};\n\nGameBoyAdvanceSIO.prototype.writeRCNT = function(value) {\n\tif (this.mode != this.SIO_GPIO) {\n\t\treturn;\n\t}\n\n\tthis.core.STUB('General purpose serial not supported');\n};\n\nGameBoyAdvanceSIO.prototype.writeSIOCNT = function(value) {\n\tswitch (this.mode) {\n\tcase this.SIO_NORMAL_8:\n\t\tthis.core.STUB('8-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_NORMAL_32:\n\t\tthis.core.STUB('32-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_MULTI:\n\t\tthis.multiplayer.baud = value & 0x0003;\n\t\tif (this.linkLayer) {\n\t\t\tthis.linkLayer.setBaud(this.BAUD[this.multiplayer.baud]);\n\t\t}\n\n\t\tif (!this.multiplayer.si) {\n\t\t\tthis.multiplayer.busy = value & 0x0080;\n\t\t\tif (this.linkLayer && this.multiplayer.busy) {\n\t\t\t\tthis.linkLayer.startMultiplayerTransfer();\n\t\t\t}\n\t\t}\n\t\tthis.irq = value & 0x4000;\n\t\tbreak;\n\tcase this.SIO_UART:\n\t\tthis.core.STUB('UART unsupported');\n\t\tbreak;\n\tcase this.SIO_GPIO:\n\t\t// This register isn't used in general-purpose mode\n\t\tbreak;\n\tcase this.SIO_JOYBUS:\n\t\tthis.core.STUB('JOY BUS unsupported');\n\t\tbreak;\n\t}\n};\n\nGameBoyAdvanceSIO.prototype.readSIOCNT = function() {\n\tvar value = (this.mode << 12) & 0xFFFF;\n\tswitch (this.mode) {\n\tcase this.SIO_NORMAL_8:\n\t\tthis.core.STUB('8-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_NORMAL_32:\n\t\tthis.core.STUB('32-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_MULTI:\n\t\tvalue |= this.multiplayer.baud;\n\t\tvalue |= this.multiplayer.si;\n\t\tvalue |= (!!this.sd) << 3;\n\t\tvalue |= this.multiplayer.id << 4;\n\t\tvalue |= this.multiplayer.error;\n\t\tvalue |= this.multiplayer.busy;\n\t\tvalue |= (!!this.multiplayer.irq) << 14;\n\t\tbreak;\n\tcase this.SIO_UART:\n\t\tthis.core.STUB('UART unsupported');\n\t\tbreak;\n\tcase this.SIO_GPIO:\n\t\t// This register isn't used in general-purpose mode\n\t\tbreak;\n\tcase this.SIO_JOYBUS:\n\t\tthis.core.STUB('JOY BUS unsupported');\n\t\tbreak;\n\t}\n\treturn value;\n};\n\nGameBoyAdvanceSIO.prototype.read = function(slot) {\n\tswitch (this.mode) {\n\tcase this.SIO_NORMAL_32:\n\t\tthis.core.STUB('32-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_MULTI:\n\t\treturn this.multiplayer.states[slot];\n\tcase this.SIO_UART:\n\t\tthis.core.STUB('UART unsupported');\n\t\tbreak;\n\tdefault:\n\t\tthis.core.WARN('Reading from transfer register in unsupported mode');\n\t\tbreak;\n\t}\n\treturn 0;\n};\n","window.GameBoyAdvanceGPIO = function GameBoyAdvanceGPIO(core, rom) {\n\tthis.core = core;\n\tthis.rom = rom;\n\n\tthis.readWrite = 0;\n\tthis.direction = 0;\n\n\tthis.device = new GameBoyAdvanceRTC(this); // TODO: Support more devices\n};\n\nGameBoyAdvanceGPIO.prototype.store16 = function(offset, value) {\n\tswitch (offset) {\n\tcase 0xC4:\n\t\tthis.device.setPins(value & 0xF);\n\t\tbreak;\n\tcase 0xC6:\n\t\tthis.direction = value & 0xF;\n\t\tthis.device.setDirection(this.direction);\n\t\tbreak;\n\tcase 0xC8:\n\t\tthis.readWrite = value & 1;\n\t\tbreak;\n\tdefault:\n\t\tthrow new Error('BUG: Bad offset passed to GPIO: ' + offset.toString(16));\n\t}\n\tif (this.readWrite) {\n\t\tvar old = this.rom.view.getUint16(offset, true);\n\t\told &= ~this.direction;\n\t\tthis.rom.view.setUint16(offset, old | (value & this.direction), true);\n\t}\n};\n\nGameBoyAdvanceGPIO.prototype.outputPins = function(nybble) {\n\tif (this.readWrite) {\n\t\tvar old = this.rom.view.getUint16(0xC4, true);\n\t\told &= this.direction;\n\t\tthis.rom.view.setUint16(0xC4, old | (nybble & ~this.direction & 0xF), true);\n\t}\n};\n\nfunction GameBoyAdvanceRTC(gpio) {\n\tthis.gpio = gpio;\n\n\t// PINOUT: SCK | SIO | CS | -\n\tthis.pins = 0;\n\tthis.direction = 0;\n\n\tthis.totalBytes = [\n\t\t0, // Force reset\n\t\t0, // Empty\n\t\t7, // Date/Time\n\t\t0, // Force IRQ\n\t\t1, // Control register\n\t\t0, // Empty\n\t\t3, // Time\n\t\t0 // Empty\n\t];\n\tthis.bytesRemaining = 0;\n\n\t// Transfer sequence:\n\t// == Initiate\n\t// > HI | - | LO | -\n\t// > HI | - | HI | -\n\t// == Transfer bit (x8)\n\t// > LO | x | HI | -\n\t// > HI | - | HI | -\n\t// < ?? | x | ?? | -\n\t// == Terminate\n\t// >  - | - | LO | -\n\tthis.transferStep = 0;\n\n\tthis.reading = 0;\n\tthis.bitsRead = 0;\n\tthis.bits = 0;\n\tthis.command = -1;\n\n\tthis.control = 0x40;\n\tthis.time = [\n\t\t0, // Year\n\t\t0, // Month\n\t\t0, // Day\n\t\t0, // Day of week\n\t\t0, // Hour\n\t\t0, // Minute\n\t\t0 // Second\n\t];\n};\n\nGameBoyAdvanceRTC.prototype.setPins = function(nybble) {\n\tswitch (this.transferStep) {\n\tcase 0:\n\t\tif ((nybble & 5) == 1) {\n\t\t\tthis.transferStep = 1;\n\t\t}\n\t\tbreak;\n\tcase 1:\n\t\tif (nybble & 4) {\n\t\t\tthis.transferStep = 2;\n\t\t}\n\t\tbreak;\n\tcase 2:\n\t\tif (!(nybble & 1)) {\n\t\t\tthis.bits &= ~(1 << this.bitsRead);\n\t\t\tthis.bits |= ((nybble & 2) >> 1) << this.bitsRead;\n\t\t} else {\n\t\t\tif (nybble & 4) {\n\t\t\t\t// SIO direction should always != this.read\n\t\t\t\tif ((this.direction & 2) && !this.read) {\n\t\t\t\t\t++this.bitsRead;\n\t\t\t\t\tif (this.bitsRead == 8) {\n\t\t\t\t\t\tthis.processByte();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.gpio.outputPins(5 | (this.sioOutputPin() << 1));\n\t\t\t\t\t++this.bitsRead;\n\t\t\t\t\tif (this.bitsRead == 8) {\n\t\t\t\t\t\t--this.bytesRemaining;\n\t\t\t\t\t\tif (this.bytesRemaining <= 0) {\n\t\t\t\t\t\t\tthis.command = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.bitsRead = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.bitsRead = 0;\n\t\t\t\tthis.bytesRemaining = 0;\n\t\t\t\tthis.command = -1;\n\t\t\t\tthis.transferStep = 0;\n\t\t\t}\n\t\t}\n\t\tbreak;\n\t}\n\n\tthis.pins = nybble & 7;\n};\n\nGameBoyAdvanceRTC.prototype.setDirection = function(direction) {\n\tthis.direction = direction;\n};\n\nGameBoyAdvanceRTC.prototype.processByte = function() {\n\t--this.bytesRemaining;\n\tswitch (this.command) {\n\tcase -1:\n\t\tif ((this.bits & 0x0F) == 0x06) {\n\t\t\tthis.command = (this.bits >> 4) & 7;\n\t\t\tthis.reading = this.bits & 0x80;\n\n\t\t\tthis.bytesRemaining = this.totalBytes[this.command];\n\t\t\tswitch (this.command) {\n\t\t\tcase 0:\n\t\t\t\tthis.control = 0;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\tcase 6:\n\t\t\t\tthis.updateClock();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gpio.core.WARN('Invalid RTC command byte: ' + this.bits.toString(16));\n\t\t}\n\t\tbreak;\n\tcase 4:\n\t\t// Control\n\t\tthis.control = this.bits & 0x40;\n\t\tbreak;\n\t}\t\n\tthis.bits = 0;\n\tthis.bitsRead = 0;\n\tif (!this.bytesRemaining) {\n\t\tthis.command = -1;\n\t}\n};\n\nGameBoyAdvanceRTC.prototype.sioOutputPin = function() {\n\tvar outputByte = 0;\n\tswitch (this.command) {\n\tcase 4:\n\t\toutputByte = this.control;\n\t\tbreak;\n\tcase 2:\n\tcase 6:\n\t\toutputByte = this.time[7 - this.bytesRemaining];\n\t\tbreak;\n\t}\n\tvar output = (outputByte >> this.bitsRead) & 1;\n\treturn output;\n};\n\nGameBoyAdvanceRTC.prototype.updateClock = function() {\n\tvar date = new Date();\n\tthis.time[0] = this.bcd(date.getFullYear());\n\tthis.time[1] = this.bcd(date.getMonth() + 1);\n\tthis.time[2] = this.bcd(date.getDate());\n\tthis.time[3] = date.getDay() - 1;\n\tif (this.time[3] < 0) {\n\t\tthis.time[3] = 6;\n\t}\n\tif (this.control & 0x40) {\n\t\t// 24 hour\n\t\tthis.time[4] = this.bcd(date.getHours());\n\t} else {\n\t\tthis.time[4] = this.bcd(date.getHours() % 2);\n\t\tif (date.getHours() >= 12) {\n\t\t\tthis.time[4] |= 0x80;\n\t\t}\n\t}\n\tthis.time[5] = this.bcd(date.getMinutes());\n\tthis.time[6] = this.bcd(date.getSeconds());\n};\n\nGameBoyAdvanceRTC.prototype.bcd = function(binary) {\n\tvar counter = binary % 10;\n\tbinary /= 10;\n\tcounter += (binary % 10) << 4;\n\treturn counter;\n};\n","function GameBoyAdvance() {\n\tthis.LOG_ERROR = 1;\n\tthis.LOG_WARN = 2;\n\tthis.LOG_STUB = 4;\n\tthis.LOG_INFO = 8;\n\tthis.LOG_DEBUG = 16;\n\n\tthis.SYS_ID = 'com.endrift.gbajs';\n\n\tthis.logLevel = this.LOG_ERROR | this.LOG_WARN;\n\n\tthis.rom = null;\n\n\tthis.cpu = new ARMCore();\n\tthis.mmu = new GameBoyAdvanceMMU()\n\tthis.irq = new GameBoyAdvanceInterruptHandler();\n\tthis.io = new GameBoyAdvanceIO();\n\tthis.audio = new GameBoyAdvanceAudio();\n\tthis.video = new GameBoyAdvanceVideo();\n\tthis.keypad = new GameBoyAdvanceKeypad();\n\tthis.sio = new GameBoyAdvanceSIO();\n\n\t// TODO: simplify this graph\n\tthis.cpu.mmu = this.mmu;\n\tthis.cpu.irq = this.irq;\n\n\tthis.mmu.cpu = this.cpu;\n\tthis.mmu.core = this;\n\n\tthis.irq.cpu = this.cpu;\n\tthis.irq.io = this.io;\n\tthis.irq.audio = this.audio;\n\tthis.irq.video = this.video;\n\tthis.irq.core = this;\n\n\tthis.io.cpu = this.cpu;\n\tthis.io.audio = this.audio;\n\tthis.io.video = this.video;\n\tthis.io.keypad = this.keypad;\n\tthis.io.sio = this.sio;\n\tthis.io.core = this;\n\n\tthis.audio.cpu = this.cpu;\n\tthis.audio.core = this;\n\n\tthis.video.cpu = this.cpu;\n\tthis.video.core = this;\n\n\tthis.keypad.core = this;\n\n\tthis.sio.core = this;\n\n\tthis.keypad.registerHandlers();\n\tthis.doStep = this.waitFrame;\n\tthis.paused = false;\n\n\tthis.seenFrame = false;\n\tthis.seenSave = false;\n\tthis.lastVblank = 0;\n\n\tthis.queue = null;\n\tthis.reportFPS = null;\n\tthis.throttle = 16; // This is rough, but the 2/3ms difference gives us a good overhead\n\n\tvar self = this;\n\twindow.queueFrame = function (f) {\n\t\tself.queue = window.setTimeout(f, self.throttle);\n\t};\n\n\twindow.URL = window.URL || window.webkitURL;\n\n\tthis.video.vblankCallback = function() {\n\t\tself.seenFrame = true;\n\t};\n};\n\nwindow.GameBoyAdvance = GameBoyAdvance\n\nGameBoyAdvance.prototype.setCanvas = function(canvas) {\n\tvar self = this;\n\tif (canvas.offsetWidth != 240 || canvas.offsetHeight != 160) {\n\t\tthis.indirectCanvas = document.createElement(\"canvas\");\n\t\tthis.indirectCanvas.setAttribute(\"height\", \"160\");\n\t\tthis.indirectCanvas.setAttribute(\"width\", \"240\");\n\t\tthis.targetCanvas = canvas;\n\t\tthis.setCanvasDirect(this.indirectCanvas);\n\t\tvar targetContext = canvas.getContext('2d');\n\t\tthis.video.drawCallback = function() {\n\t\t\ttargetContext.drawImage(self.indirectCanvas, 0, 0, canvas.offsetWidth, canvas.offsetHeight);\n\t\t}\n\t} else {\n\t\tthis.setCanvasDirect(canvas);\n\t\tvar self = this;\n\t}\n};\n\nGameBoyAdvance.prototype.setCanvasDirect = function(canvas) {\n\tthis.context = canvas.getContext('2d');\n\tthis.video.setBacking(this.context);\n};\n\nGameBoyAdvance.prototype.setBios = function(bios, real) {\n\tthis.mmu.loadBios(bios, real);\n};\n\nGameBoyAdvance.prototype.setRom = function(rom) {\n\tthis.reset();\n\n\tthis.rom = this.mmu.loadRom(rom, true);\n\tif (!this.rom) {\n\t\treturn false;\n\t}\n\tthis.retrieveSavedata();\n\treturn true;\n};\n\nGameBoyAdvance.prototype.hasRom = function() {\n\treturn !!this.rom;\n};\n\nGameBoyAdvance.prototype.loadRomFromFile = function(romBuffer, callback) {\n  this.setRom(romBuffer.buffer)\n\n  if (callback) {\n    callback(romBuffer.buffer)\n  }\n}\n\nGameBoyAdvance.prototype.reset = function() {\n\tthis.audio.pause(true);\n\n\tthis.mmu.clear();\n\tthis.io.clear();\n\tthis.audio.clear();\n\tthis.video.clear();\n\tthis.sio.clear();\n\n\tthis.mmu.mmap(this.mmu.REGION_IO, this.io);\n\tthis.mmu.mmap(this.mmu.REGION_PALETTE_RAM, this.video.renderPath.palette);\n\tthis.mmu.mmap(this.mmu.REGION_VRAM, this.video.renderPath.vram);\n\tthis.mmu.mmap(this.mmu.REGION_OAM, this.video.renderPath.oam);\n\n\tthis.cpu.resetCPU(0);\n};\n\nGameBoyAdvance.prototype.step = function() {\n\twhile (this.doStep()) {\n\t\tthis.cpu.step();\n\t}\n};\n\nGameBoyAdvance.prototype.waitFrame = function() {\n\tvar seen = this.seenFrame;\n\tthis.seenFrame = false;\n\treturn !seen;\n};\n\nGameBoyAdvance.prototype.pause = function() {\n\tthis.paused = true;\n\tthis.audio.pause(true);\n\tif (this.queue) {\n\t\tclearTimeout(this.queue);\n\t\tthis.queue = null;\n\t}\n};\n\nGameBoyAdvance.prototype.advanceFrame = function() {\n\tthis.step();\n\tif (this.seenSave) {\n\t\tif (!this.mmu.saveNeedsFlush()) {\n\t\t\tthis.storeSavedata();\n\t\t\tthis.seenSave = false;\n\t\t} else {\n\t\t\tthis.mmu.flushSave();\n\t\t}\n\t} else if (this.mmu.saveNeedsFlush()) {\n\t\tthis.seenSave = true;\n\t\tthis.mmu.flushSave();\n\t}\n};\n\nGameBoyAdvance.prototype.runStable = function() {\n\tif (this.interval) {\n\t\treturn; // Already running\n\t}\n\tvar self = this;\n\tvar timer = 0;\n\tvar frames = 0;\n\tvar runFunc;\n\tvar start = Date.now();\n\tthis.paused = false;\n\tthis.audio.pause(false);\n\n\tif (this.reportFPS) {\n\t\trunFunc = function() {\n\t\t\ttry {\n\t\t\t\ttimer += Date.now() - start;\n\t\t\t\tif (self.paused) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tqueueFrame(runFunc);\n\t\t\t\t}\n\t\t\t\tstart = Date.now();\n\t\t\t\tself.advanceFrame();\n\t\t\t\t++frames;\n\t\t\t\tif (frames == 60) {\n\t\t\t\t\tself.reportFPS((frames * 1000) / timer);\n\t\t\t\t\tframes = 0;\n\t\t\t\t\ttimer = 0;\n\t\t\t\t}\n\t\t\t} catch(exception) {\n\t\t\t\tself.ERROR(exception);\n\t\t\t\tif (exception.stack) {\n\t\t\t\t\tself.logStackTrace(exception.stack.split('\\n'));\n\t\t\t\t}\n\t\t\t\tthrow exception;\n\t\t\t}\n\t\t};\n\t} else {\n\t\trunFunc = function() {\n\t\t\ttry {\n\t\t\t\tif (self.paused) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tqueueFrame(runFunc);\n\t\t\t\t}\n\t\t\t\tself.advanceFrame();\n\t\t\t} catch(exception) {\n\t\t\t\tself.ERROR(exception);\n\t\t\t\tif (exception.stack) {\n\t\t\t\t\tself.logStackTrace(exception.stack.split('\\n'));\n\t\t\t\t}\n\t\t\t\tthrow exception;\n\t\t\t}\n\t\t};\n\t}\n\tqueueFrame(runFunc);\n};\n\nGameBoyAdvance.prototype.setSavedata = function(data) {\n\tthis.mmu.loadSavedata(data);\n};\n\nGameBoyAdvance.prototype.loadSavedataFromFile = function(saveFile) {\n\tvar reader = new FileReader();\n\tvar self = this;\n\treader.onload = function(e) { self.setSavedata(e.target.result); }\n\treader.readAsArrayBuffer(saveFile);\n};\n\nGameBoyAdvance.prototype.decodeSavedata = function(string) {\n\tthis.setSavedata(this.decodeBase64(string));\n};\n\nGameBoyAdvance.prototype.decodeBase64 = function(string) {\n\tvar length = (string.length * 3 / 4);\n\tif (string[string.length - 2] == '=') {\n\t\tlength -= 2;\n\t} else if (string[string.length - 1] == '=') {\n\t\tlength -= 1;\n\t}\n\tvar buffer = new ArrayBuffer(length);\n\tvar view = new Uint8Array(buffer);\n\tvar bits = string.match(/..../g);\n\tfor (var i = 0; i + 2 < length; i += 3) {\n\t\tvar s = atob(bits.shift());\n\t\tview[i] = s.charCodeAt(0);\n\t\tview[i + 1] = s.charCodeAt(1);\n\t\tview[i + 2] = s.charCodeAt(2);\n\t}\n\tif (i < length) {\n\t\tvar s = atob(bits.shift());\n\t\tview[i++] = s.charCodeAt(0);\n\t\tif (s.length > 1) {\n\t\t\tview[i++] = s.charCodeAt(1);\n\t\t}\n\t}\n\n\treturn buffer;\n};\n\nGameBoyAdvance.prototype.encodeBase64 = function(view) {\n\tvar data = [];\n\tvar b;\n\tvar wordstring = [];\n\tvar triplet;\n\tfor (var i = 0; i < view.byteLength; ++i) {\n\t\tb = view.getUint8(i, true);\n\t\twordstring.push(String.fromCharCode(b));\n\t\twhile (wordstring.length >= 3) {\n\t\t\ttriplet = wordstring.splice(0, 3);\n\t\t\tdata.push(btoa(triplet.join('')));\n\t\t}\n\t};\n\tif (wordstring.length) {\n\t\tdata.push(btoa(wordstring.join('')));\n\t}\n\treturn data.join('');\n};\n\nGameBoyAdvance.prototype.downloadSavedata = function() {\n\tvar sram = this.mmu.save;\n\tif (!sram) {\n\t\tthis.WARN(\"No save data available\");\n\t\treturn null;\n\t}\n\tif (window.URL) {\n\t\tvar url = window.URL.createObjectURL(new Blob([sram.buffer], { type: 'application/octet-stream' }));\n\t\twindow.open(url);\n\t} else {\n\t\tvar data = this.encodeBase64(sram.view);\n\t\twindow.open('data:application/octet-stream;base64,' + data, this.rom.code + '.sav');\n\t}\n};\n\n\nGameBoyAdvance.prototype.storeSavedata = function() {\n\tvar sram = this.mmu.save;\n\ttry {\n\t\tvar storage = window.localStorage;\n\t\tstorage[this.SYS_ID + '.' + this.mmu.cart.code] = this.encodeBase64(sram.view);\n\t} catch (e) {\n\t\tthis.WARN('Could not store savedata! ' + e);\n\t}\n};\n\nGameBoyAdvance.prototype.retrieveSavedata = function() {\n\ttry {\n\t\tvar storage = window.localStorage;\n\t\tvar data = storage[this.SYS_ID + '.' + this.mmu.cart.code];\n\t\tif (data) {\n\t\t\tthis.decodeSavedata(data);\n\t\t\treturn true;\n\t\t}\n\t} catch (e) {\n\t\tthis.WARN('Could not retrieve savedata! ' + e);\n\t}\n\treturn false;\n};\n\nGameBoyAdvance.prototype.freeze = function() {\n\treturn {\n\t\t'cpu': this.cpu.freeze(),\n\t\t'mmu': this.mmu.freeze(),\n\t\t'irq': this.irq.freeze(),\n\t\t'io': this.io.freeze(),\n\t\t'audio': this.audio.freeze(),\n\t\t'video': this.video.freeze()\n\t}\n};\n\nGameBoyAdvance.prototype.defrost = function(frost) {\n\tthis.cpu.defrost(frost.cpu);\n\tthis.mmu.defrost(frost.mmu);\n\tthis.audio.defrost(frost.audio);\n\tthis.video.defrost(frost.video);\n\tthis.irq.defrost(frost.irq);\n\tthis.io.defrost(frost.io);\n};\n\nGameBoyAdvance.prototype.log = function(level, message) {};\n\nGameBoyAdvance.prototype.setLogger = function(logger) {\n\tthis.log = logger;\n};\n\nGameBoyAdvance.prototype.logStackTrace = function(stack) {\n\tvar overflow = stack.length - 32;\n\tthis.ERROR('Stack trace follows:');\n\tif (overflow > 0) {\n\t\tthis.log(-1, '> (Too many frames)');\n\t}\n\tfor (var i = Math.max(overflow, 0); i < stack.length; ++i) {\n\t\tthis.log(-1, '> ' + stack[i]);\n\t}\n};\n\nGameBoyAdvance.prototype.ERROR = function(error) {\n\tif (this.logLevel & this.LOG_ERROR) {\n\t\tthis.log(this.LOG_ERROR, error);\n\t}\n};\n\nGameBoyAdvance.prototype.WARN = function(warn) {\n\tif (this.logLevel & this.LOG_WARN) {\n\t\tthis.log(this.LOG_WARN, warn);\n\t}\n};\n\nGameBoyAdvance.prototype.STUB = function(func) {\n\tif (this.logLevel & this.LOG_STUB) {\n\t\tthis.log(this.LOG_STUB, func);\n\t}\n};\n\nGameBoyAdvance.prototype.INFO = function(info) {\n\tif (this.logLevel & this.LOG_INFO) {\n\t\tthis.log(this.LOG_INFO, info);\n\t}\n};\n\nGameBoyAdvance.prototype.DEBUG = function(info) {\n\tif (this.logLevel & this.LOG_DEBUG) {\n\t\tthis.log(this.LOG_DEBUG, info);\n\t}\n};\n\nGameBoyAdvance.prototype.ASSERT_UNREACHED = function(err) {\n\tthrow new Error(\"Should be unreached: \" + err);\n};\n\nGameBoyAdvance.prototype.ASSERT = function(test, err) {\n\tif (!test) {\n\t\tthrow new Error(\"Assertion failed: \" + err);\n\t}\n};\n","'use strict'\n\nmodule.exports = function (base64Data) {\n  var isBrowser = typeof window !== 'undefined' && typeof window.atob === 'function'\n  var binary = isBrowser ? window.atob(base64Data) : Buffer.from(base64Data, 'base64').toString('binary')\n  var bytes = new Uint8Array(binary.length)\n\n  for (var i = 0; i < binary.length; ++i) {\n    bytes[i] = binary.charCodeAt(i)\n  }\n\n  return bytes.buffer\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","const fadeOut = (id, nextId, kill) => {\n  const e = document.getElementById(id)\n  const e2 = document.getElementById(nextId)\n  if (!e) {\n    return\n  }\n \n  const removeSelf = () => {\n    if (kill) {\n      e.parentElement.removeChild(e)\n    } else {\n      e.setAttribute('class', 'dead')\n      e.removeEventListener('webkitTransitionEnd', removeSelf)\n      e.removeEventListener('oTransitionEnd', removeSelf)\n      e.removeEventListener('transitionend', removeSelf)\n    }\n\n    if (e2) {\n      e2.setAttribute('class', 'hidden')\n      setTimeout(\n        () => e2.removeAttribute('class'),\n        0\n      )\n    }\n  }\n\n  e.addEventListener('webkitTransitionEnd', removeSelf, false)\n  e.addEventListener('oTransitionEnd', removeSelf, false)\n  e.addEventListener('transitionend', removeSelf, false)\n  e.setAttribute('class', 'hidden')\n}\n\nconst lcdFade = (context, target, callback) => {\n  let i = 0\n\n  const drawInterval = setInterval(() => {\n    i++\n\n    const pixelData = context.getImageData(0, 0, 240, 160)\n    for (let y = 0; y < 160; ++y) {\n      for (let x = 0; x < 240; ++x) {\n        const xDiff = Math.abs(x - 120)\n        const yDiff = Math.abs(y - 80) * 0.8\n        const xFactor = (120 - i - xDiff) / 120\n        const yFactor = (\n          (80 - i - ((y & 1) * 10) - yDiff + Math.pow(xDiff, 1 / 2)) / 80\n        )\n\n        pixelData.data[(x + y * 240) * 4 + 3] *= (\n          Math.pow(xFactor, 1 / 3) * Math.pow(yFactor, 1 / 2)\n        )\n      }\n    }\n    context.putImageData(pixelData, 0, 0)\n\n    target.clearRect(0, 0, 480, 320)\n    if (i > 40) {\n      clearInterval(drawInterval)\n    } else {\n      callback()\n    }\n  }, 50)\n}\n\nexport { lcdFade, fadeOut }","function hex(number, leading, usePrefix) {\n\tif (typeof(usePrefix) === 'undefined') {\n\t\tusePrefix = true;\n\t}\n\tif (typeof(leading) === 'undefined') {\n\t\tleading = 8;\n\t}\n\tvar string = (number >>> 0).toString(16).toUpperCase();\n\tleading -= string.length;\n\tif (leading < 0)\n\t\treturn string;\n\treturn (usePrefix ? '0x' : '') + new Array(leading + 1).join('0') + string;\n}\n\nconst Serializer = {\n\tTAG_INT: 1,\n\tTAG_STRING: 2,\n\tTAG_STRUCT: 3,\n\tTAG_BLOB: 4,\n\tTAG_BOOLEAN: 5,\n\tTYPE: 'application/octet-stream',\n\n\tpointer: function() {\n\t\tthis.index = 0;\n\t\tthis.top = 0;\n\t\tthis.stack = [];\n\t},\n\n\tpack: function(value) {\n\t\tvar object = new DataView(new ArrayBuffer(4));\n\t\tobject.setUint32(0, value, true);\n\t\treturn object.buffer;\n\t},\n\n\tpack8: function(value) {\n\t\tvar object = new DataView(new ArrayBuffer(1));\n\t\tobject.setUint8(0, value, true);\n\t\treturn object.buffer;\n\t},\n\n\tprefix: function(value) {\n\t\treturn new Blob([Serializer.pack(value.size || value.length || value.byteLength), value], { type: Serializer.TYPE });\n\t},\n\n\tserialize: function(stream) {\n\t\tvar parts = [];\n\t\tvar size = 4;\n\t\tfor (i in stream) {\n\t\t\tif (stream.hasOwnProperty(i)) {\n\t\t\t\tvar tag;\n\t\t\t\tvar head = Serializer.prefix(i);\n\t\t\t\tvar body;\n\t\t\t\tswitch (typeof(stream[i])) {\n\t\t\t\tcase 'number':\n\t\t\t\t\ttag = Serializer.TAG_INT;\n\t\t\t\t\tbody = Serializer.pack(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'string':\n\t\t\t\t\ttag = Serializer.TAG_STRING;\n\t\t\t\t\tbody = Serializer.prefix(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t\tif (stream[i].type == Serializer.TYPE) {\n\t\t\t\t\t\ttag = Serializer.TAG_BLOB;\n\t\t\t\t\t\tbody = stream[i];\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttag = Serializer.TAG_STRUCT;\n\t\t\t\t\t\tbody = Serializer.serialize(stream[i]);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'boolean':\n\t\t\t\t\ttag = Serializer.TAG_BOOLEAN;\n\t\t\t\t\tbody = Serializer.pack8(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tsize += 1 + head.size + (body.size || body.byteLength || body.length);\n\t\t\t\tparts.push(Serializer.pack8(tag));\n\t\t\t\tparts.push(head);\n\t\t\t\tparts.push(body);\n\t\t\t}\n\t\t}\n\t\tparts.unshift(Serializer.pack(size));\n\t\treturn new Blob(parts);\n\t},\n\n\tdeserialize: function(blob, callback) {\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(data) {\n\t\t\tcallback(Serializer.deserealizeStream(new DataView(data.target.result), new Serializer.pointer));\n\t\t}\n\t\treader.readAsArrayBuffer(blob);\n\t},\n\n\tdeserealizeStream: function(view, pointer) {\n\t\tpointer.push();\n\t\tvar object = {};\n\t\tvar remaining = view.getUint32(pointer.advance(4), true);\n\t\twhile (pointer.mark() < remaining) {\n\t\t\tvar tag = view.getUint8(pointer.advance(1));\n\t\t\tvar head = pointer.readString(view);\n\t\t\tvar body;\n\t\t\tswitch (tag) {\n\t\t\tcase Serializer.TAG_INT:\n\t\t\t\tbody = view.getUint32(pointer.advance(4), true);\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_STRING:\n\t\t\t\tbody = pointer.readString(view);\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_STRUCT:\n\t\t\t\tbody = Serializer.deserealizeStream(view, pointer);\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_BLOB:\n\t\t\t\tvar size = view.getUint32(pointer.advance(4), true);\n\t\t\t\tbody = view.buffer.slice(pointer.advance(size), pointer.advance(0));\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_BOOLEAN:\n\t\t\t\tbody = !!view.getUint8(pointer.advance(1));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tobject[head] = body;\n\t\t}\n\t\tif (pointer.mark() > remaining) {\n\t\t\tthrow \"Size of serialized data exceeded\";\n\t\t}\n\t\tpointer.pop();\n\t\treturn object;\n\t},\n\n\tserializePNG: function(blob, base, callback) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tvar context = canvas.getContext('2d');\n\t\tvar pixels = base.getContext('2d').getImageData(0, 0, base.width, base.height);\n\t\tvar transparent = 0;\n\t\tfor (var y = 0; y < base.height; ++y) {\n\t\t\tfor (var x = 0; x < base.width; ++x) {\n\t\t\t\tif (!pixels.data[(x + y * base.width) * 4 + 3]) {\n\t\t\t\t\t++transparent;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar bytesInCanvas = transparent * 3 + (base.width * base.height - transparent);\n\t\tfor (var multiplier = 1; (bytesInCanvas * multiplier * multiplier) < blob.size; ++multiplier);\n\t\tvar edges = bytesInCanvas * multiplier * multiplier - blob.size;\n\t\tvar padding = Math.ceil(edges / (base.width * multiplier));\n\t\tcanvas.setAttribute('width', base.width * multiplier);\n\t\tcanvas.setAttribute('height', base.height * multiplier + padding);\n\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(data) {\n\t\t\tvar view = new Uint8Array(data.target.result);\n\t\t\tvar pointer = 0;\n\t\t\tvar pixelPointer = 0;\n\t\t\tvar newPixels = context.createImageData(canvas.width, canvas.height + padding);\n\t\t\tfor (var y = 0; y < canvas.height; ++y) {\n\t\t\t\tfor (var x = 0; x < canvas.width; ++x) {\n\t\t\t\t\tvar oldY = (y / multiplier) | 0;\n\t\t\t\t\tvar oldX = (x / multiplier) | 0;\n\t\t\t\t\tif (oldY > base.height || !pixels.data[(oldX + oldY * base.width) * 4 + 3]) {\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar byte = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 0] | (byte & 7);\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 1] | ((byte >> 3) & 7);\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 2] | ((byte >> 6) & 7);\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontext.putImageData(newPixels, 0, 0);\n\t\t\tcallback(canvas.toDataURL('image/png'));\n\t\t}\n\t\treader.readAsArrayBuffer(blob);\n\t\treturn canvas;\n\t},\n\n\tdeserializePNG: function(blob, callback) {\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(data) {\n\t\t\tvar image = document.createElement('img');\n\t\t\timage.setAttribute('src', data.target.result);\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.setAttribute('height', image.height);\n\t\t\tcanvas.setAttribute('width', image.width);\n\t\t\tvar context = canvas.getContext('2d');\n\t\t\tcontext.drawImage(image, 0, 0);\n\t\t\tvar pixels = context.getImageData(0, 0, canvas.width, canvas.height);\n\t\t\tvar data = [];\n\t\t\tfor (var y = 0; y < canvas.height; ++y) {\n\t\t\t\tfor (var x = 0; x < canvas.width; ++x) {\n\t\t\t\t\tif (!pixels.data[(x + y * canvas.width) * 4 + 3]) {\n\t\t\t\t\t\tdata.push(pixels.data[(x + y * canvas.width) * 4 + 0]);\n\t\t\t\t\t\tdata.push(pixels.data[(x + y * canvas.width) * 4 + 1]);\n\t\t\t\t\t\tdata.push(pixels.data[(x + y * canvas.width) * 4 + 2]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar byte = 0;\n\t\t\t\t\t\tbyte |= pixels.data[(x + y * canvas.width) * 4 + 0] & 7;\n\t\t\t\t\t\tbyte |= (pixels.data[(x + y * canvas.width) * 4 + 1] & 7) << 3;\n\t\t\t\t\t\tbyte |= (pixels.data[(x + y * canvas.width) * 4 + 2] & 7) << 6;\n\t\t\t\t\t\tdata.push(byte);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnewBlob = new Blob(data.map(function (byte) {\n\t\t\t\tvar array = new Uint8Array(1);\n\t\t\t\tarray[0] = byte;\n\t\t\t\treturn array;\n\t\t\t}), { type: Serializer.TYPE});\n\t\t\tSerializer.deserialize(newBlob, callback);\n\t\t}\n\t\treader.readAsDataURL(blob);\n\t}\n};\n\nSerializer.pointer.prototype.advance = function(amount) {\n\tvar index = this.index;\n\tthis.index += amount;\n\treturn index;\n};\n\nSerializer.pointer.prototype.mark = function() {\n\treturn this.index - this.top;\n};\n\nSerializer.pointer.prototype.push = function() {\n\tthis.stack.push(this.top);\n\tthis.top = this.index;\n};\n\nSerializer.pointer.prototype.pop = function() {\n\tthis.top = this.stack.pop();\n};\n\nSerializer.pointer.prototype.readString = function(view) {\n\tvar length = view.getUint32(this.advance(4), true);\n\tvar bytes = [];\n\tfor (var i = 0; i < length; ++i) {\n\t\tbytes.push(String.fromCharCode(view.getUint8(this.advance(1))));\n\t}\n\treturn bytes.join('');\n};\n","import './mmu'\n\nfunction SRAMSavedata(size) {\n\tMemoryView.call(this, new ArrayBuffer(size), 0);\n\n\tthis.writePending = false;\n};\n\nSRAMSavedata.prototype = Object.create(MemoryView.prototype);\n\nSRAMSavedata.prototype.store8 = function(offset, value) {\n\tthis.view.setInt8(offset, value);\n\tthis.writePending = true;\n};\n\nSRAMSavedata.prototype.store16 = function(offset, value) {\n\tthis.view.setInt16(offset, value, true);\n\tthis.writePending = true;\n};\n\nSRAMSavedata.prototype.store32 = function(offset, value) {\n\tthis.view.setInt32(offset, value, true);\n\tthis.writePending = true;\n};\n\nfunction FlashSavedata(size) {\n\tMemoryView.call(this, new ArrayBuffer(size), 0);\n\n\tthis.COMMAND_WIPE = 0x10;\n\tthis.COMMAND_ERASE_SECTOR = 0x30;\n\tthis.COMMAND_ERASE = 0x80;\n\tthis.COMMAND_ID = 0x90;\n\tthis.COMMAND_WRITE = 0xA0;\n\tthis.COMMAND_SWITCH_BANK = 0xB0;\n\tthis.COMMAND_TERMINATE_ID = 0xF0;\n\n\tthis.ID_PANASONIC = 0x1B32;\n\tthis.ID_SANYO = 0x1362;\n\n\tthis.bank0 = new DataView(this.buffer, 0, 0x00010000);\n\tif (size > 0x00010000) {\n\t\tthis.id = this.ID_SANYO;\n\t\tthis.bank1 = new DataView(this.buffer, 0x00010000);\n\t} else {\n\t\tthis.id = this.ID_PANASONIC;\n\t\tthis.bank1 = null;\n\t}\n\tthis.bank = this.bank0;\n\n\tthis.idMode = false;\n\tthis.writePending = false;\n\n\tthis.first = 0;\n\tthis.second = 0;\n\tthis.command = 0;\n\tthis.pendingCommand = 0;\n};\n\nFlashSavedata.prototype = Object.create(MemoryView.prototype);\n\nFlashSavedata.prototype.load8 = function(offset) {\n\tif (this.idMode && offset < 2) {\n\t\treturn (this.id >> (offset << 3)) & 0xFF;\n\t} else if (offset < 0x10000) {\n\t\treturn this.bank.getInt8(offset);\n\t} else {\n\t\treturn 0;\n\t}\n};\n\nFlashSavedata.prototype.load16 = function(offset) {\n\treturn (this.load8(offset) & 0xFF) | (this.load8(offset + 1) << 8);\n};\n\nFlashSavedata.prototype.load32 = function(offset) {\n\treturn (this.load8(offset) & 0xFF) | (this.load8(offset + 1) << 8) | (this.load8(offset + 2) << 16) | (this.load8(offset + 3) << 24);\n};\n\nFlashSavedata.prototype.loadU8 = function(offset) {\n\treturn this.load8(offset) & 0xFF;\n};\n\nFlashSavedata.prototype.loadU16 = function(offset) {\n\treturn (this.loadU8(offset) & 0xFF) | (this.loadU8(offset + 1) << 8);\n};\n\nFlashSavedata.prototype.store8 = function(offset, value) {\n\tswitch (this.command) {\n\tcase 0:\n\t\tif (offset == 0x5555) {\n\t\t\tif (this.second == 0x55) {\n\t\t\t\tswitch (value) {\n\t\t\t\tcase this.COMMAND_ERASE:\n\t\t\t\t\tthis.pendingCommand = value;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.COMMAND_ID:\n\t\t\t\t\tthis.idMode = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.COMMAND_TERMINATE_ID:\n\t\t\t\t\tthis.idMode = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.command = value;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.second = 0;\n\t\t\t\tthis.first = 0;\n\t\t\t} else {\n\t\t\t\tthis.command = 0;\n\t\t\t\tthis.first = value;\n\t\t\t\tthis.idMode = false;\n\t\t\t}\n\t\t} else if (offset == 0x2AAA && this.first == 0xAA) {\n\t\t\tthis.first = 0;\n\t\t\tif (this.pendingCommand) {\n\t\t\t\tthis.command = this.pendingCommand;\n\t\t\t} else {\n\t\t\t\tthis.second = value;\n\t\t\t}\n\t\t}\n\t\tbreak;\n\tcase this.COMMAND_ERASE:\n\t\tswitch (value) {\n\t\tcase this.COMMAND_WIPE:\n\t\t\tif (offset == 0x5555) {\n\t\t\t\tfor (var i = 0; i < this.view.byteLength; i += 4) {\n\t\t\t\t\tthis.view.setInt32(i, -1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase this.COMMAND_ERASE_SECTOR:\n\t\t\tif ((offset & 0x0FFF) == 0) {\n\t\t\t\tfor (var i = offset; i < offset + 0x1000; i += 4) {\n\t\t\t\t\tthis.bank.setInt32(i, -1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tthis.pendingCommand = 0;\n\t\tthis.command = 0;\n\t\tbreak;\n\tcase this.COMMAND_WRITE:\n\t\tthis.bank.setInt8(offset, value);\n\t\tthis.command = 0;\n\n\t\tthis.writePending = true;\n\t\tbreak;\n\tcase this.COMMAND_SWITCH_BANK:\n\t\tif (this.bank1 && offset == 0) {\n\t\t\tif (value == 1) {\n\t\t\t\tthis.bank = this.bank1;\n\t\t\t} else {\n\t\t\t\tthis.bank = this.bank0;\n\t\t\t}\n\t\t}\n\t\tthis.command = 0;\n\t\tbreak;\n\t}\n};\n\nFlashSavedata.prototype.store16 = function(offset, value) {\n\tthrow new Error(\"Unaligned save to flash!\");\n};\n\nFlashSavedata.prototype.store32 = function(offset, value) {\n\tthrow new Error(\"Unaligned save to flash!\");\n};\n\nFlashSavedata.prototype.replaceData = function(memory) {\n\tvar bank = this.view === this.bank1;\n\tMemoryView.prototype.replaceData.call(this, memory, 0);\n\n\tthis.bank0 = new DataView(this.buffer, 0, 0x00010000);\n\tif (memory.byteLength > 0x00010000) {\n\t\tthis.bank1 = new DataView(this.buffer, 0x00010000);\n\t} else {\n\t\tthis.bank1 = null;\n\t}\n\tthis.bank = bank ? this.bank1 : this.bank0;\n};\n\nwindow.EEPROMSavedata = function EEPROMSavedata(size, mmu) {\n\tMemoryView.call(this, new ArrayBuffer(size), 0);\n\n\tthis.writeAddress = 0;\n\tthis.readBitsRemaining = 0;\n\tthis.readAddress = 0;\n\n\tthis.command = 0;\n\tthis.commandBitsRemaining = 0;\n\n\tthis.realSize = 0;\n\tthis.addressBits = 0;\n\tthis.writePending = false;\n\n\tthis.dma = mmu.core.irq.dma[3];\n\n\tthis.COMMAND_NULL = 0;\n\tthis.COMMAND_PENDING = 1;\n\tthis.COMMAND_WRITE = 2;\n\tthis.COMMAND_READ_PENDING = 3;\n\tthis.COMMAND_READ = 4;\n};\n\nEEPROMSavedata.prototype = Object.create(MemoryView.prototype);\n\nEEPROMSavedata.prototype.load8 = function(offset) {\n\tthrow new Error(\"Unsupported 8-bit access!\");\n};\n\nEEPROMSavedata.prototype.load16 = function(offset) {\n\treturn this.loadU16(offset);\n};\n\nEEPROMSavedata.prototype.loadU8 = function(offset) {\n\tthrow new Error(\"Unsupported 8-bit access!\");\n};\n\nEEPROMSavedata.prototype.loadU16 = function(offset) {\n\tif (this.command != this.COMMAND_READ || !this.dma.enable) {\n\t\treturn 1;\n\t}\n\t--this.readBitsRemaining;\n\tif (this.readBitsRemaining < 64) {\n\t\tvar step = 63 - this.readBitsRemaining;\n\t\tvar data = this.view.getUint8((this.readAddress + step) >> 3, false) >> (0x7 - (step & 0x7));\n\t\tif (!this.readBitsRemaining) {\n\t\t\tthis.command = this.COMMAND_NULL;\n\t\t}\n\t\treturn data & 0x1;\n\t}\n\treturn 0;\n};\n\nEEPROMSavedata.prototype.load32 = function(offset) {\n\tthrow new Error(\"Unsupported 32-bit access!\");\n};\n\nEEPROMSavedata.prototype.store8 = function(offset, value) {\n\tthrow new Error(\"Unsupported 8-bit access!\");\n};\n\nEEPROMSavedata.prototype.store16 = function(offset, value) {\n\tswitch (this.command) {\n\t// Read header\n\tcase this.COMMAND_NULL:\n\tdefault:\n\t\tthis.command = value & 0x1;\n\t\tbreak;\n\tcase this.COMMAND_PENDING:\n\t\tthis.command <<= 1;\n\t\tthis.command |= value & 0x1;\n\t\tif (this.command == this.COMMAND_WRITE) {\n\t\t\tif (!this.realSize) {\n\t\t\t\tvar bits = this.dma.count - 67;\n\t\t\t\tthis.realSize = 8 << bits;\n\t\t\t\tthis.addressBits = bits;\n\t\t\t}\n\t\t\tthis.commandBitsRemaining = this.addressBits + 64 + 1;\n\t\t\tthis.writeAddress = 0;\n\t\t} else {\n\t\t\tif (!this.realSize) {\n\t\t\t\tvar bits = this.dma.count - 3;\n\t\t\t\tthis.realSize = 8 << bits;\n\t\t\t\tthis.addressBits = bits;\n\t\t\t}\n\t\t\tthis.commandBitsRemaining = this.addressBits + 1;\n\t\t\tthis.readAddress = 0;\n\t\t}\n\t\tbreak;\n\t// Do commands\n\tcase this.COMMAND_WRITE:\n\t\t// Write\n\t\tif (--this.commandBitsRemaining > 64) {\n\t\t\tthis.writeAddress <<= 1;\n\t\t\tthis.writeAddress |= (value & 0x1) << 6;\n\t\t} else if (this.commandBitsRemaining <= 0) {\n\t\t\tthis.command = this.COMMAND_NULL;\n\t\t\tthis.writePending = true;\n\t\t} else {\n\t\t\tvar current = this.view.getUint8(this.writeAddress >> 3);\n\t\t\tcurrent &= ~(1 << (0x7 - (this.writeAddress & 0x7)));\n\t\t\tcurrent |= (value & 0x1) << (0x7 - (this.writeAddress & 0x7));\n\t\t\tthis.view.setUint8(this.writeAddress >> 3, current);\n\t\t\t++this.writeAddress;\n\t\t}\n\t\tbreak;\n\tcase this.COMMAND_READ_PENDING:\n\t\t// Read\n\t\tif (--this.commandBitsRemaining > 0) {\n\t\t\tthis.readAddress <<= 1;\n\t\t\tif (value & 0x1) {\n\t\t\t\tthis.readAddress |= 0x40;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.readBitsRemaining = 68;\n\t\t\tthis.command = this.COMMAND_READ;\n\t\t}\n\t\tbreak;\n\t}\n};\n\nEEPROMSavedata.prototype.store32 = function(offset, value) {\n\tthrow new Error(\"Unsupported 32-bit access!\");\n};\n\nEEPROMSavedata.prototype.replaceData = function(memory) {\n\tMemoryView.prototype.replaceData.call(this, memory, 0);\n};\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport sha1 from 'js-sha1'\nimport { fadeOut } from './fades'\nimport './util'\nimport './core'\nimport './arm'\nimport './thumb'\nimport './mmu'\nimport './io'\nimport './audio'\nimport './video'\nimport './video/proxy'\nimport './video/software'\nimport './irq'\nimport './keypad'\nimport './sio'\nimport './savedata'\nimport './gpio'\nimport './gba'\nimport biosBin from '../../assets/bios.bin'\n\nconst drawEmulator = (buffer) => {\n  var gba\n  var runCommands = []\n  var debug = null\n\n  try {\n    gba = new GameBoyAdvance();\n    gba.keypad.eatInput = true;\n\n    gba.setLogger(function(level, error) {\n      console.log(error);\n      gba.pause();\n      var screen = document.getElementById('screen');\n      if (screen.getAttribute('class') == 'dead') {\n        console.log('We appear to have crashed multiple times without reseting.');\n        return;\n      }\n      var crash = document.createElement('img');\n      crash.setAttribute('id', 'crash');\n      crash.setAttribute('src', '../../assets/crash.png');\n      screen.parentElement.insertBefore(crash, screen);\n      screen.setAttribute('class', 'dead');\n    });\n  } catch (exception) {\n    gba = null;\n  }\n\n  var canvas = document.getElementById('screen');\n  gba.setCanvas(canvas);\n\n  gba.logLevel = gba.LOG_ERROR;\n\n  gba.setBios(biosBin);\n\n  function run(file) {\n    gba.loadRomFromFile(file, function(result) {\n      if (result) {\n        for (var i = 0; i < runCommands.length; ++i) {\n          runCommands[i]();\n        }\n        runCommands = [];\n        fadeOut('preload', 'ingame');\n        fadeOut('instructions', null, true);\n        gba.runStable();\n      } else {\n        setTimeout(function() {\n          load.onclick = function() {\n            document.getElementById('loader').click();\n          }\n        }, 3000);\n      }\n    });\n  }\n\n  function uploadSavedataPending(file) {\n    runCommands.push(function() { gba.loadSavedataFromFile(file) });\n  }\n\n  function togglePause() {\n    if (gba.paused) {\n      if (debug && debug.gbaCon) {\n        debug.gbaCon.run();\n      } else {\n        gba.runStable();\n      }\n    } else {\n      if (debug && debug.gbaCon) {\n        debug.gbaCon.pause();\n      } else {\n        gba.pause();\n      }\n    }\n  }\n\n  function screenshot() {\n    var canvas = gba.indirectCanvas;\n    window.open(canvas.toDataURL('image/png'), 'screenshot');\n  }\n\n  function setPixelated(pixelated) {\n    var screen = document.getElementById('screen');\n    var context = screen.getContext('2d');\n    if (context.webkitImageSmoothingEnabled) {\n      context.webkitImageSmoothingEnabled = !pixelated;\n    } else if (context.mozImageSmoothingEnabled) {\n      context.mozImageSmoothingEnabled = !pixelated;\n    } else if (window.navigator.appName != 'Microsoft Internet Explorer') {\n        if (pixelated) {\n          screen.setAttribute('width', '240');\n          screen.setAttribute('height', '160');\n        } else {\n          screen.setAttribute('width', '480');\n          screen.setAttribute('height', '320');\n        }\n        if (window.navigator.appName == 'Opera') {\n        // Ugly hack! Ew!\n        if (pixelated) {\n          screen.style.marginTop = '0';\n          screen.style.marginBottom = '-325px';\n        } else {\n          delete screen.style;\n        }\n      }\n    }\n  }\n\n  function enableDebug() {\n    window.onmessage = function(message) {\n      if (message.origin != document.domain && (message.origin != 'file://' || document.domain)) {\n        console.log('Failed XSS');\n        return;\n      }\n      switch (message.data) {\n      case 'connect':\n        if (message.source == debug) {\n          debug.postMessage('connect', document.domain || '*');\n        }\n        break;\n      case 'connected':\n        break;\n      case 'disconnect':\n        if (message.source == debug) {\n          debug = null;\n        }\n      }\n    }\n    window.onunload = function() {\n      if (debug && debug.postMessage) {\n        debug.postMessage('disconnect', document.domain || '*');\n      }\n    }\n    if (!debug || !debug.postMessage) {\n      debug = window.open('debugger.html', 'debug');\n    } else {\n      debug.postMessage('connect', document.domain || '*');\n    }\n  }\n\n  document.addEventListener('webkitfullscreenchange', function() {\n    var canvas = document.getElementById('screen');\n    if (document.webkitIsFullScreen) {\n      canvas.setAttribute('height', document.body.offsetHeight);\n      canvas.setAttribute('width', document.body.offsetHeight / 2 * 3);\n      canvas.setAttribute('style', 'margin: 0');\n    } else {\n      canvas.setAttribute('height', 320);\n      canvas.setAttribute('width', 480);\n      canvas.removeAttribute('style');\n    }\n  }, false);\n\n  run(buffer)\n\n  return gba\n}\n\nexport default drawEmulator\n","import { lcdFade, fadeOut } from './fades'\n\nconst reset = gba => {\n  gba.pause()\n  gba.reset()\n\n  const crash = document.getElementById('crash')\n\n  if (crash) {\n    const context = gba.targetCanvas.getContext('2d')\n    context.clearRect(0, 0, 480, 320)\n    gba.video.drawCallback()\n    crash.parentElement.removeChild(crash)\n\n    var canvas = document.getElementById('screen')\n    canvas.removeAttribute('class')\n  } else {\n    lcdFade(\n      gba.context,\n      gba.targetCanvas.getContext('2d'),\n      gba.video.drawCallback\n    )\n  }\n  fadeOut('ingame', 'preload');\n}\n\nexport default reset\n","const setVolume = (gba, value) =>\n  gba.audio.masterVolume = Math.pow(2, value) - 1\n\nexport default setVolume\n","import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport sha1 from 'js-sha1'\nimport drawEmulator from '../emulator'\nimport reset from '../emulator/reset'\nimport setVolume from '../emulator/setVolume'\n\nconst ReactGbaJs = ({ romBufferMemory, volume }) => {\n  const [gba, setGba] = useState(null)\n\n  useEffect(() => {\n    if (gba !== null) {\n      reset(gba)\n    }\n\n    const newGbaInstance = drawEmulator(romBufferMemory)\n    setGba(newGbaInstance)\n  }, [sha1(romBufferMemory)])\n\n  useEffect(() => {\n    if (gba === null) {\n      return\n    }\n\n    setVolume(gba, volume)\n  }, [gba, volume])\n\n  return (\n    <canvas id=\"screen\" width=\"480\" height=\"320\" />\n  )\n}\n\nReactGbaJs.propTypes = {\n  romBufferMemory: PropTypes.object.isRequired,\n  volume: PropTypes.number.isRequired,\n}\n\nexport default ReactGbaJs\n","import ReactGbaJs from './react'\n\nexport default ReactGbaJs\n"],"sourceRoot":""}