{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/bios.bin","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/arraybuffer-loader/lib/to-array-buffer.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/js-sha1/src/sha1.js","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/prop-types/checkPropTypes.js","webpack:///./node_modules/prop-types/factoryWithTypeCheckers.js","webpack:///./node_modules/prop-types/index.js","webpack:///./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./node_modules/react-is/cjs/react-is.development.js","webpack:///./node_modules/react-is/index.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/emulator/arm.js","webpack:///./src/emulator/audio.js","webpack:///./src/emulator/core.js","webpack:///./src/emulator/fades.js","webpack:///./src/emulator/gba.js","webpack:///./src/emulator/gpio.js","webpack:///./src/emulator/index.js","webpack:///./src/emulator/io.js","webpack:///./src/emulator/irq.js","webpack:///./src/emulator/keypad.js","webpack:///./src/emulator/mmu.js","webpack:///./src/emulator/reset.js","webpack:///./src/emulator/savedata.js","webpack:///./src/emulator/setVolume.js","webpack:///./src/emulator/sio.js","webpack:///./src/emulator/thumb.js","webpack:///./src/emulator/util.js","webpack:///./src/emulator/video.js","webpack:///./src/emulator/video/proxy.js","webpack:///./src/emulator/video/software.js","webpack:///./src/index.js","webpack:///./src/react/index.js","webpack:///external \"react\""],"names":["ARMCoreArm","cpu","addressingMode23Immediate","rn","offset","condOp","gprs","address","addr","writesPC","PC","addressingMode23Register","rm","addressingMode2RegisterShifted","shiftOp","shifterOperand","writePC","prototype","constructAddressingMode1ASR","rs","cycles","shift","shiftVal","shifterCarryOut","cpsrC","constructAddressingMode1Immediate","immediate","constructAddressingMode1ImmediateRotate","rotate","constructAddressingMode1LSL","constructAddressingMode1LSR","constructAddressingMode1ROR","constructAddressingMode23Immediate","instruction","constructAddressingMode23Register","constructAddressingMode2RegisterShifted","constructAddressingMode4","constructAddressingMode4Writeback","overlap","writeInitial","mmu","store32","constructADC","rd","waitPrefetch32","constructADCS","d","hasSPSR","unpackCPSR","spsr","cpsrN","cpsrZ","cpsrV","constructADD","constructADDS","constructAND","constructANDS","constructB","constructBIC","constructBICS","constructBL","LR","constructBX","switchExecMode","constructCMN","aluOut","constructCMP","constructEOR","constructEORS","constructLDM","total","m","i","load32","waitMulti32","constructLDMS","mode","switchMode","MODE_SYSTEM","constructLDR","wait32","constructLDRB","loadU8","wait","constructLDRH","loadU16","constructLDRSB","load8","constructLDRSH","load16","constructMLA","waitMul","hi","lo","constructMLAS","constructMOV","constructMOVS","constructMRS","r","packCPSR","constructMSR","c","f","operand","mask","USER_MASK","PRIV_MASK","STATE_MASK","MODE_USER","cpsrI","cpsrF","constructMUL","constructMULS","constructMVN","constructMVNS","constructORR","constructORRS","constructRSB","constructRSBS","constructRSC","n","constructRSCS","constructSBC","constructSBCS","constructSMLAL","SHIFT_32","carry","Math","floor","constructSMLALS","constructSMULL","constructSMULLS","constructSTM","constructSTMS","constructSTR","constructSTRB","store8","constructSTRH","store16","constructSUB","constructSUBS","constructSWI","irq","swi32","constructSWP","constructSWPB","constructTEQ","constructTST","constructUMLAL","constructUMLALS","constructUMULL","constructUMULLS","window","GameBoyAdvanceAudio","AudioContext","webkitAudioContext","self","context","bufferSize","maxSamples","buffers","Float32Array","sampleMask","createScriptProcessor","jsAudio","createJavaScriptNode","onaudioprocess","e","audioProcess","masterEnable","masterVolume","SOUND_MAX","FIFO_MAX","PSG_MAX","clear","fifoA","fifoB","fifoASample","fifoBSample","enabled","disconnect","destination","enableChannel3","enableChannel4","enableChannelA","enableChannelB","enableRightChannelA","enableLeftChannelA","enableRightChannelB","enableLeftChannelB","playingChannel3","playingChannel4","volumeLeft","volumeRight","ratioChannelA","ratioChannelB","enabledLeft","enabledRight","dmaA","dmaB","soundTimerA","soundTimerB","soundRatio","soundBias","squareChannels","Array","playing","sample","duty","increment","step","initialVolume","volume","frequency","interval","sweepSteps","sweepIncrement","sweepInterval","doSweep","raise","lower","nextStep","timed","length","end","waveData","Uint8Array","channel3Dimension","channel3Bank","channel3Volume","channel3Interval","channel3Next","channel3Length","channel3Timed","channel3End","channel3Pointer","channel3Sample","cpuFrequency","core","FREQUENCY","channel4","lfsr","width","nextEvent","nextSample","outputPointer","samplePointer","backup","totalSamples","sampleRate","sampleInterval","resampleRatio","writeSquareChannelFC","writeChannel4FC","freeze","defrost","frost","pause","paused","connect","updateTimers","channel","Infinity","updateSquareChannel","channel3Write","next","updateEnvelope","ceil","writeEnable","value","pollNextEvent","writeSoundControlLo","masterVolumeLeft","masterVolumeRight","setSquareChannelEnabled","setChannel4Enabled","writeSoundControlHi","resetSquareChannel","enable","writeSquareChannelSweep","channelId","nextSweep","writeSquareChannelDLE","writeChannelLE","writeChannel3Lo","resetChannel3","writeChannel3Hi","writeChannel3X","writeWaveData","data","writeChannel4LE","resetChannel4","s","appendToFifoA","b","slice","push","appendToFifoB","sampleFifoA","dma","nextCount","serviceDma","sampleFifoB","scheduleFIFODma","number","info","dest","BASE_IO","io","FIFO_A_LO","dstControl","FIFO_B_LO","WARN","sampleLeft","sampleRight","max","min","audioProcessingEvent","left","outputBuffer","getChannelData","right","o","ARMCore","SP","MODE_ARM","MODE_THUMB","MODE_FIQ","MODE_IRQ","MODE_SUPERVISOR","MODE_ABORT","MODE_UNDEFINED","BANK_NONE","BANK_FIQ","BANK_IRQ","BANK_SUPERVISOR","BANK_ABORT","BANK_UNDEFINED","UNALLOC_MASK","WORD_SIZE_ARM","WORD_SIZE_THUMB","BASE_RESET","BASE_UNDEF","BASE_SWI","BASE_PABT","BASE_DABT","BASE_IRQ","BASE_FIQ","armCompiler","thumbCompiler","ARMCoreThumb","generateConds","Int32Array","resetCPU","startOffset","loadInstruction","loadInstructionArm","execMode","instructionWidth","bankedRegisters","bankedSPSRs","page","pageId","pageRegion","conditionPassed","invalid","pc","waitPrefetch","fixedJump","fetchPage","region","BASE_OFFSET","addressToPage","OFFSET_MASK","pageMask","memory","PAGE_MASK","accessPage","arm","compileArm","opcode","loadInstructionThumb","thumb","compileThumb","selectBank","newMode","newBank","oldBank","oldFiqBank","newFiqBank","testIRQ","raiseIRQ","cpsr","raiseTrap","badOp","func","toString","conds","barrelShiftImmediate","shiftType","op","shiftsRs","rotateImm","load","hiOffset","loOffset","h","w","shiftImmediate","user","u","p","link","constructLSL2","constructLSR2","constructASR2","constructROR","constructNEG","constructCMP2","h1","constructADD4","constructCMP3","constructMOV3","constructADD3","constructSUB3","constructADD1","constructMOV2","constructSUB1","constructLSL1","constructLSR1","constructASR1","constructMOV1","constructCMP1","constructADD2","constructSUB2","constructLDR3","constructSTR2","constructSTRH2","constructSTRB2","constructLDR2","constructLDRH2","constructLDRB2","constructLDRB1","constructLDR1","constructSTRB1","constructSTR1","constructPOP","constructPUSH","constructLDRH1","constructSTRH1","constructLDR4","constructSTR3","constructADD6","constructADD5","constructADD7","constructLDMIA","constructSTMIA","cond","constructB1","constructB2","constructBL1","constructBL2","fadeOut","id","nextId","kill","document","getElementById","e2","removeSelf","parentElement","removeChild","setAttribute","removeEventListener","setTimeout","removeAttribute","addEventListener","lcdFade","target","callback","drawInterval","setInterval","pixelData","getImageData","y","x","xDiff","abs","yDiff","xFactor","yFactor","pow","putImageData","clearRect","clearInterval","GameBoyAdvance","LOG_ERROR","LOG_WARN","LOG_STUB","LOG_INFO","LOG_DEBUG","SYS_ID","logLevel","rom","GameBoyAdvanceMMU","GameBoyAdvanceInterruptHandler","GameBoyAdvanceIO","audio","video","GameBoyAdvanceVideo","keypad","GameBoyAdvanceKeypad","sio","GameBoyAdvanceSIO","registerHandlers","doStep","waitFrame","seenFrame","seenSave","lastVblank","queue","reportFPS","throttle","queueFrame","URL","webkitURL","vblankCallback","setCanvas","canvas","offsetWidth","offsetHeight","indirectCanvas","createElement","targetCanvas","setCanvasDirect","targetContext","getContext","drawCallback","drawImage","setBacking","setBios","bios","real","loadBios","setRom","reset","loadRom","retrieveSavedata","hasRom","loadRomFromFile","romBuffer","buffer","mmap","REGION_IO","REGION_PALETTE_RAM","renderPath","palette","REGION_VRAM","vram","REGION_OAM","oam","seen","clearTimeout","advanceFrame","saveNeedsFlush","storeSavedata","flushSave","runStable","timer","frames","runFunc","start","Date","now","exception","ERROR","stack","logStackTrace","split","setSavedata","loadSavedata","loadSavedataFromFile","saveFile","reader","FileReader","onload","result","readAsArrayBuffer","decodeSavedata","string","decodeBase64","ArrayBuffer","view","bits","match","atob","charCodeAt","encodeBase64","wordstring","triplet","byteLength","getUint8","String","fromCharCode","splice","btoa","join","downloadSavedata","sram","save","url","createObjectURL","Blob","type","open","code","storage","localStorage","cart","log","level","message","setLogger","logger","overflow","error","warn","STUB","INFO","DEBUG","ASSERT_UNREACHED","err","Error","ASSERT","test","GameBoyAdvanceGPIO","readWrite","direction","device","GameBoyAdvanceRTC","setPins","setDirection","old","getUint16","setUint16","outputPins","nybble","gpio","pins","totalBytes","bytesRemaining","transferStep","reading","bitsRead","command","control","time","read","processByte","sioOutputPin","updateClock","outputByte","output","date","bcd","getFullYear","getMonth","getDate","getDay","getHours","getMinutes","getSeconds","binary","counter","drawEmulator","gba","runCommands","debug","eatInput","console","screen","getAttribute","crash","insertBefore","biosBin","run","file","onclick","click","uploadSavedataPending","togglePause","gbaCon","screenshot","toDataURL","setPixelated","pixelated","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","navigator","appName","style","marginTop","marginBottom","enableDebug","onmessage","origin","domain","source","postMessage","onunload","webkitIsFullScreen","body","DISPCNT","GREENSWP","DISPSTAT","VCOUNT","BG0CNT","BG1CNT","BG2CNT","BG3CNT","BG0HOFS","BG0VOFS","BG1HOFS","BG1VOFS","BG2HOFS","BG2VOFS","BG3HOFS","BG3VOFS","BG2PA","BG2PB","BG2PC","BG2PD","BG2X_LO","BG2X_HI","BG2Y_LO","BG2Y_HI","BG3PA","BG3PB","BG3PC","BG3PD","BG3X_LO","BG3X_HI","BG3Y_LO","BG3Y_HI","WIN0H","WIN1H","WIN0V","WIN1V","WININ","WINOUT","MOSAIC","BLDCNT","BLDALPHA","BLDY","SOUND1CNT_LO","SOUND1CNT_HI","SOUND1CNT_X","SOUND2CNT_LO","SOUND2CNT_HI","SOUND3CNT_LO","SOUND3CNT_HI","SOUND3CNT_X","SOUND4CNT_LO","SOUND4CNT_HI","SOUNDCNT_LO","SOUNDCNT_HI","SOUNDCNT_X","SOUNDBIAS","WAVE_RAM0_LO","WAVE_RAM0_HI","WAVE_RAM1_LO","WAVE_RAM1_HI","WAVE_RAM2_LO","WAVE_RAM2_HI","WAVE_RAM3_LO","WAVE_RAM3_HI","FIFO_A_HI","FIFO_B_HI","DMA0SAD_LO","DMA0SAD_HI","DMA0DAD_LO","DMA0DAD_HI","DMA0CNT_LO","DMA0CNT_HI","DMA1SAD_LO","DMA1SAD_HI","DMA1DAD_LO","DMA1DAD_HI","DMA1CNT_LO","DMA1CNT_HI","DMA2SAD_LO","DMA2SAD_HI","DMA2DAD_LO","DMA2DAD_HI","DMA2CNT_LO","DMA2CNT_HI","DMA3SAD_LO","DMA3SAD_HI","DMA3DAD_LO","DMA3DAD_HI","DMA3CNT_LO","DMA3CNT_HI","TM0CNT_LO","TM0CNT_HI","TM1CNT_LO","TM1CNT_HI","TM2CNT_LO","TM2CNT_HI","TM3CNT_LO","TM3CNT_HI","SIODATA32_LO","SIOMULTI0","SIODATA32_HI","SIOMULTI1","SIOMULTI2","SIOMULTI3","SIOCNT","SIOMLT_SEND","SIODATA8","RCNT","JOYCNT","JOY_RECV","JOY_TRANS","JOYSTAT","KEYINPUT","KEYCNT","IE","IF","WAITCNT","IME","POSTFLG","HALTCNT","DEFAULT_DISPCNT","DEFAULT_SOUNDBIAS","DEFAULT_BGPA","DEFAULT_BGPD","DEFAULT_RCNT","registers","Uint16Array","SIZE_IO","Serializer","prefix","odd","readDisplayStat","vcount","timerRead","readSIOCNT","pollGamepads","currentDown","badMemory","STUB_REG","halt","writeDisplayControl","DISPSTAT_MASK","writeDisplayStat","writeBackgroundControl","writeBackgroundHOffset","writeBackgroundVOffset","writeBackgroundRefX","writeBackgroundRefY","writeBackgroundParamA","writeBackgroundParamB","writeBackgroundParamC","writeBackgroundParamD","writeWin0H","writeWin1H","writeWin0V","writeWin1V","writeWinIn","writeWinOut","writeBlendControl","writeBlendAlpha","writeBlendY","writeMosaic","dmaSetWordCount","dmaWriteControl","timerSetReload","timerWriteControl","setMode","writeRCNT","writeSIOCNT","setInterruptsEnabled","dismissIRQs","adjustTimings","dmaSetSourceAddress","dmaSetDestAddress","invalidatePage","IRQ_VBLANK","IRQ_HBLANK","IRQ_VCOUNTER","IRQ_TIMER0","IRQ_TIMER1","IRQ_TIMER2","IRQ_TIMER3","IRQ_SIO","IRQ_DMA0","IRQ_DMA1","IRQ_DMA2","IRQ_DMA3","IRQ_KEYPAD","IRQ_GAMEPAK","MASK_VBLANK","MASK_HBLANK","MASK_VCOUNTER","MASK_TIMER0","MASK_TIMER1","MASK_TIMER2","MASK_TIMER3","MASK_SIO","MASK_DMA0","MASK_DMA1","MASK_DMA2","MASK_DMA3","MASK_KEYPAD","MASK_GAMEPAK","enabledIRQs","interruptFlags","count","nextSource","nextDest","srcControl","repeat","drq","timing","doIrq","nextIRQ","timersEnabled","timers","reload","oldReload","prescaleBits","countUp","lastEvent","overflowInterval","springIRQ","resetSP","swi","mem","REGION_WORKING_IRAM","flag","regions","REGION_WORKING_RAM","MemoryBlock","SIZE_WORKING_RAM","SIZE_WORKING_IRAM","clearSubsets","mod","root","sqrt","atan2","PI","fill","wordsize","word","ox","oy","cx","cy","sx","sy","theta","a","rx","ry","cos","sin","diff","lz77","huffman","rl","key","waitForIRQ","irqPending","hblankIRQ","vblankIRQ","vcounterIRQ","irqType","irqMask","currentDma","wasEnabled","scheduleDma","currentTimer","oldPrescale","unitsize","remaining","blockheader","sPointer","dPointer","blocksRemaining","block","disp","bytes","loaded","header","padding","tree","treesize","node","bitsRemaining","readBits","bitsSeen","bitstream","l","lTerm","rTerm","KEYCODE_LEFT","KEYCODE_UP","KEYCODE_RIGHT","KEYCODE_DOWN","KEYCODE_START","KEYCODE_SELECT","KEYCODE_A","KEYCODE_B","KEYCODE_L","KEYCODE_R","GAMEPAD_LEFT","GAMEPAD_UP","GAMEPAD_RIGHT","GAMEPAD_DOWN","GAMEPAD_START","GAMEPAD_SELECT","GAMEPAD_A","GAMEPAD_B","GAMEPAD_L","GAMEPAD_R","GAMEPAD_THRESHOLD","A","B","SELECT","START","RIGHT","LEFT","UP","DOWN","R","L","gamepads","keyboardHandler","toggle","keyCode","preventDefault","gamepadHandler","gamepad","buttons","gamepadConnectHandler","gamepadDisconnectHandler","filter","other","navigatorList","webkitGetGamepads","getGamepads","bind","MemoryView","DataView","resetMask","mask8","mask16","mask32","getInt8","getInt16","getInt32","setInt8","setInt16","setInt32","replaceData","icache","size","cacheBits","call","ICACHE_PAGE_BITS","Object","create","ROMView","allocGPIO","BIOSView","BadMemory","halfword","REGION_BIOS","REGION_CART0","REGION_CART1","REGION_CART2","REGION_CART_SRAM","BASE_BIOS","BASE_WORKING_RAM","BASE_WORKING_IRAM","BASE_PALETTE_RAM","BASE_VRAM","BASE_OAM","BASE_CART0","BASE_CART1","BASE_CART2","BASE_CART_SRAM","BASE_MASK","SIZE_BIOS","SIZE_PALETTE_RAM","SIZE_VRAM","SIZE_OAM","SIZE_CART0","SIZE_CART1","SIZE_CART2","SIZE_CART_SRAM","SIZE_CART_FLASH512","SIZE_CART_FLASH1M","SIZE_CART_EEPROM","DMA_TIMING_NOW","DMA_TIMING_VBLANK","DMA_TIMING_HBLANK","DMA_TIMING_CUSTOM","DMA_INCREMENT","DMA_DECREMENT","DMA_FIXED","DMA_INCREMENT_RELOAD","DMA_OFFSET","WAITSTATES","WAITSTATES_32","WAITSTATES_SEQ","WAITSTATES_SEQ_32","NULLWAIT","ROM_WS","ROM_WS_SEQ","object","waitstates","waitstatesSeq","waitstates32","waitstatesSeq32","waitstatesPrefetch","waitstatesPrefetch32","DMA_REGISTER","ram","iram","process","title","maker","saveType","name","state","terminal","FlashSavedata","SRAMSavedata","EEPROMSavedata","maskedOffset","waitSeq","waitSeq32","seq","scheduleVCaptureDma","runHblankDmas","runVblankDmas","sourceOffset","destOffset","wordsRemaining","sourceRegion","destRegion","sourceBlock","destBlock","sourceView","destView","sourceMask","destMask","endPage","ws0","ws0seq","ws1","ws1seq","ws2","ws2seq","prefetch","writePending","COMMAND_WIPE","COMMAND_ERASE_SECTOR","COMMAND_ERASE","COMMAND_ID","COMMAND_WRITE","COMMAND_SWITCH_BANK","COMMAND_TERMINATE_ID","ID_PANASONIC","ID_SANYO","bank0","bank1","bank","idMode","first","second","pendingCommand","writeAddress","readBitsRemaining","readAddress","commandBitsRemaining","realSize","addressBits","COMMAND_NULL","COMMAND_PENDING","COMMAND_READ_PENDING","COMMAND_READ","current","setUint8","setVolume","SIO_NORMAL_8","SIO_NORMAL_32","SIO_MULTI","SIO_UART","SIO_GPIO","SIO_JOYBUS","BAUD","sd","multiplayer","baud","si","busy","states","linkLayer","hex","setBaud","startMultiplayerTransfer","slot","oldD","oldDn","dn","mn","misalign","an","r4","leading","usePrefix","toUpperCase","TAG_INT","TAG_STRING","TAG_STRUCT","TAG_BLOB","TAG_BOOLEAN","TYPE","pointer","index","top","pack","setUint32","pack8","serialize","stream","parts","hasOwnProperty","tag","head","unshift","deserialize","blob","deserealizeStream","getUint32","advance","mark","readString","pop","serializePNG","base","pixels","height","transparent","bytesInCanvas","multiplier","edges","pixelPointer","newPixels","createImageData","oldY","oldX","byte","deserializePNG","image","newBlob","map","array","readAsDataURL","amount","GameBoyAdvanceSoftwareRenderer","CYCLES_PER_PIXEL","HORIZONTAL_PIXELS","HBLANK_PIXELS","HDRAW_LENGTH","HBLANK_LENGTH","HORIZONTAL_LENGTH","VERTICAL_PIXELS","VBLANK_PIXELS","VERTICAL_TOTAL_PIXELS","TOTAL_LENGTH","inHblank","inVblank","vcounter","vcountSetting","lastHblank","nextHblank","nextHblankIRQ","nextVblankIRQ","nextVcounterIRQ","backing","finishDraw","startDraw","drawScanline","MemoryProxy","owner","blockSize","blocks","combine","combined","set","replace","memoryDirtied","GameBoyAdvanceRenderProxy","worker","Worker","currentFrame","delay","skipFrame","dirty","handlers","finish","caller","scanlineQueue","bg","BGCNT","BGHOFS","BGVOFS","BGX","BGY","BGPA","BGPB","BGPC","BGPD","scanlines","frame","MemoryAligned16","insert","GameBoyAdvanceVRAM","GameBoyAdvanceOAM","objs","GameBoyAdvanceOBJ","scalerot","overwrite","obj","layer","priority","disable","wasScalerot","scalerotOam","scalerotParam","doublesize","hflip","vflip","mosaic","multipalette","shape","recalcSize","drawScanlineAffine","drawScanlineNormal","tileBase","GameBoyAdvancePalette","colors","adjustedColors","passthroughColors","blendY","adjustColor","convert16To32","input","g","mix","aWeight","aColor","bWeight","bColor","ar","ag","ab","br","bb","makeDarkPalettes","layers","adjustColorDark","resetPalettes","resetPaletteLayers","makeBrightPalettes","adjustColorBright","makeNormalPalettes","makeSpecialPalette","makeNormalPalette","outPalette","inPalette","accessColor","color","setBlendY","TILE_OFFSET","pushPixel","cachedWidth","cachedHeight","yOff","underflow","target2","LAYER_OBJ","TARGET1_MASK","blendMode","alphaEnabled","target1","totalWidth","localX","localY","localYLo","mosaicX","tileOffset","paletteShift","objCharacterMapping","objMosaicX","tileRow","accessTile","totalHeight","drawWidth","objMosaicY","GameBoyAdvanceOBJLayer","objwin","wrappedY","mosaicY","OBJWIN_MASK","objComparator","LAYER_BG0","LAYER_BG1","LAYER_BG2","LAYER_BG3","LAYER_BACKDROP","LAYER_MASK","BACKGROUND_MASK","TARGET2_MASK","WRITTEN_MASK","PRIORITY_MASK","drawBackdrop","stencil","blendB","blendA","objLayers","objwinLayer","backgroundMode","displayFrameSelect","hblankIntervalFree","forcedBlank","win0","win1","win0Left","win0Right","win1Left","win1Right","win0Top","win0Bottom","win1Top","win1Bottom","windows","special","bgMosaicX","bgMosaicY","charBase","screenBase","refx","refy","dx","dmx","dy","dmy","drawScanlineBGMode0","bgModes","drawScanlineBGMode2","drawScanlineBGMode3","drawScanlineBGMode4","drawScanlineBGMode5","drawLayers","objwinActive","scanline","sharedColor","sharedMap","tile","SIZE_PALETTE","resetLayers","bgData","sort","layerComparator","writeWindow","setBlendEnabled","override","accessMapMode0","yBase","out","accessMapMode1","row","raw","oldStencil","blend","pixel","highPriority","identity","drawScanlineBlank","prepareScanline","xOff","localXLo","xMask","sizeAdjusted","firstStart","firstEnd","lastStart","lastEnd","finishScanline","bd","xx","isTarget2","ReactGbaJs","romBufferMemory","useState","setGba","useEffect","newGbaInstance","sha1","propTypes","PropTypes","isRequired"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA,iBAAiB,mBAAO,CAAC,2HAA2D,6S;;;;;;;;;;;ACApF;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA,uC;;;;;;;;;;;AC9BA;AACA;AACA;;AAEA,kC;;;;;;;;;;;ACJA,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C,2BAA2B,mBAAO,CAAC,6FAAwB;;AAE3D,sBAAsB,mBAAO,CAAC,mFAAmB;;AAEjD;AACA;AACA;;AAEA,gC;;;;;;;;;;;ACVA,wBAAwB,2EAA2E,oCAAoC,mBAAmB,GAAG,EAAE,OAAO,oCAAoC,8HAA8H,GAAG,EAAE,sBAAsB;;AAEnW;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yB;;;;;;;;;;;;AChBA,8CAAY;;AAEZ;AACA;AACA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;;;;;;;;;;;;;;ACZY;;AAEZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,UAAU;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,aAAa,mBAAO,CAAC,oDAAW;AAChC,cAAc,mBAAO,CAAC,gDAAS;AAC/B,cAAc,mBAAO,CAAC,gDAAS;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,mDAAmD;AACxE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,QAAQ;AAChC;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC5vDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;;;;;;;;;;;ACpFA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;ACJA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAA4B,IAAI,gGAAU;AACtD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA,OAAO;AACP,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS,QAAQ;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS,QAAQ;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS,QAAQ;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM,mCAAO;AACb;AACA,OAAO;AAAA,oGAAC;AACR;AACA;AACA,CAAC;;;;;;;;;;;;;;AClXD;AACA;AACA;AACA;AACA;;AAEa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACzFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;;ACvLtC;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA,IAAI,IAAqC;AACzC,6BAA6B,mBAAO,CAAC,yFAA4B;AACjE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;;AAEA;;;;;;;;;;;;;ACrGA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,cAAc,mBAAO,CAAC,kDAAU;AAChC,aAAa,mBAAO,CAAC,4DAAe;;AAEpC,2BAA2B,mBAAO,CAAC,yFAA4B;AAC/D,qBAAqB,mBAAO,CAAC,qEAAkB;;AAE/C;AACA;;AAEA,IAAI,IAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,6BAA6B;AAC7B,QAAQ;AACR;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,4BAA4B;AAC5B,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU,KAAqC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,IAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM,KAAqC,4FAA4F,SAAM;AAC7I;AACA;;AAEA,mBAAmB,gCAAgC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AC9kBA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,IAAqC;AACzC,gBAAgB,mBAAO,CAAC,kDAAU;;AAElC;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,uFAA2B;AACtD,CAAC,MAAM,EAIN;;;;;;;;;;;;;AClBD;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;;;AAIb,IAAI,IAAqC;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;;AAEhD;AACA;AACA;AACA,iDAAiD;;AAEjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,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","file":"react-gbajs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","module.exports = require(\"../node_modules/arraybuffer-loader/lib/to-array-buffer.js\")(\"BgAA6v7//+oFAADq/v//6v7//+oAAKDhDAAA6v7//+oC86DjAABd4wHToAMg0E0CAEAt6QIAXuUEAFDjCQAACwUAUOMHAAALAEC96A7wsOEPUC3pAQOg4wDgj+IE8BDlD1C96ATwXuIQQC3pBNBN4rAQzeEBQ6DjAkyE4rAA1OGyAM3hsBDd4QEAgOGwAMThAUOg4x8AoOMA8CnhAACg4wEDxOXTAKDjAPAp4bgAVOGwEN3hABAR4AAQIRC4EEQR8///CgFDoOMCTITisgDd4bAAxOEE0I3iEIC96A==\")","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","'use strict'\n\nmodule.exports = function (base64Data) {\n  var isBrowser = typeof window !== 'undefined' && typeof window.atob === 'function'\n  var binary = isBrowser ? window.atob(base64Data) : Buffer.from(base64Data, 'base64').toString('binary')\n  var bytes = new Uint8Array(binary.length)\n\n  for (var i = 0; i < binary.length; ++i) {\n    bytes[i] = binary.charCodeAt(i)\n  }\n\n  return bytes.buffer\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function() {\n  'use strict';\n\n  var root = typeof window === 'object' ? window : {};\n  var NODE_JS = !root.JS_SHA1_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  }\n  var COMMON_JS = !root.JS_SHA1_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  var createOutputMethod = function (outputType) {\n    return function (message) {\n      return new Sha1(true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function () {\n    var method = createOutputMethod('hex');\n    if (NODE_JS) {\n      method = nodeWrap(method);\n    }\n    method.create = function () {\n      return new Sha1();\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash('sha1').update(message, 'utf8').digest('hex');\n      } else if (message.constructor === ArrayBuffer) {\n        message = new Uint8Array(message);\n      } else if (message.length === undefined) {\n        return method(message);\n      }\n      return crypto.createHash('sha1').update(new Buffer(message)).digest('hex');\n    };\n    return nodeMethod;\n  };\n\n  function Sha1(sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    this.h0 = 0x67452301;\n    this.h1 = 0xEFCDAB89;\n    this.h2 = 0x98BADCFE;\n    this.h3 = 0x10325476;\n    this.h4 = 0xC3D2E1F0;\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n  }\n\n  Sha1.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString = typeof(message) !== 'string';\n    if (notString && message.constructor === root.ArrayBuffer) {\n      message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if(notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha1.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha1.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n\n    for(j = 16; j < 80; ++j) {\n      t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n      blocks[j] =  (t << 1) | (t >>> 31);\n    }\n\n    for(j = 0; j < 20; j += 5) {\n      f = (b & c) | ((~b) & d);\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e + 1518500249 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = (a & b) | ((~a) & c);\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = (e & a) | ((~e) & b);\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = (d & e) | ((~d) & a);\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = (c & d) | ((~c) & e);\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    for(; j < 40; j += 5) {\n      f = b ^ c ^ d;\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e + 1859775393 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = a ^ b ^ c;\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = e ^ a ^ b;\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = d ^ e ^ a;\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = c ^ d ^ e;\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    for(; j < 60; j += 5) {\n      f = (b & c) | (b & d) | (c & d);\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e - 1894007588 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = (a & b) | (a & c) | (b & c);\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = (e & a) | (e & b) | (a & b);\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = (d & e) | (d & a) | (e & a);\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = (c & d) | (c & e) | (d & e);\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    for(; j < 80; j += 5) {\n      f = b ^ c ^ d;\n      t = (a << 5) | (a >>> 27);\n      e = t + f + e - 899497514 + blocks[j] << 0;\n      b = (b << 30) | (b >>> 2);\n\n      f = a ^ b ^ c;\n      t = (e << 5) | (e >>> 27);\n      d = t + f + d - 899497514 + blocks[j + 1] << 0;\n      a = (a << 30) | (a >>> 2);\n\n      f = e ^ a ^ b;\n      t = (d << 5) | (d >>> 27);\n      c = t + f + c - 899497514 + blocks[j + 2] << 0;\n      e = (e << 30) | (e >>> 2);\n\n      f = d ^ e ^ a;\n      t = (c << 5) | (c >>> 27);\n      b = t + f + b - 899497514 + blocks[j + 3] << 0;\n      d = (d << 30) | (d >>> 2);\n\n      f = c ^ d ^ e;\n      t = (b << 5) | (b >>> 27);\n      a = t + f + a - 899497514 + blocks[j + 4] << 0;\n      c = (c << 30) | (c >>> 2);\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n  };\n\n  Sha1.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n\n    return HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n           HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n           HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n           HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n           HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n           HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n           HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n           HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n           HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n           HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n           HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n           HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n           HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n           HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n           HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n           HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n           HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n           HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n           HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n           HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F];\n  };\n\n  Sha1.prototype.toString = Sha1.prototype.hex;\n\n  Sha1.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n\n    return [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF\n    ];\n  };\n\n  Sha1.prototype.array = Sha1.prototype.digest;\n\n  Sha1.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n  };\n\n  var exports = createMethod();\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha1 = exports;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","ARMCoreArm = function (cpu) {\n\tthis.cpu = cpu;\n\n\tthis.addressingMode23Immediate = [\n\t\t// 000x0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] -= offset;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 000xW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// 00Ux0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] += offset;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 00UxW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// 0P0x0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\treturn addr = gprs[rn] - offset;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 0P0xW\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] - offset;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\n\t\t// 0PUx0\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\treturn addr = gprs[rn] + offset;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// 0PUxW\n\t\tfunction(rn, offset, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] + offset;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\t];\n\n\tthis.addressingMode23Register = [\n\t\t// I00x0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] -= gprs[rm];\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// I00xW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// I0Ux0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] += gprs[rm];\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// I0UxW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IP0x0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\treturn gprs[rn] - gprs[rm];\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IP0xW\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] - gprs[rm];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IPUx0\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] + gprs[rm];\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IPUxW\n\t\tfunction(rn, rm, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn] + gprs[rm];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull\n\t];\n\n\tthis.addressingMode2RegisterShifted = [\n\t\t// I00x0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tshiftOp();\n\t\t\t\t\tgprs[rn] -= cpu.shifterOperand;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\t// I00xW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// I0Ux0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tvar addr = gprs[rn];\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tshiftOp();\n\t\t\t\t\tgprs[rn] += cpu.shifterOperand;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\t\t// I0UxW\n\t\tnull,\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IP0x0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\treturn gprs[rn] - cpu.shifterOperand;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IP0xW\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\tvar addr = gprs[rn] - cpu.shifterOperand;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writesPC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\n\t\t// IPUx0\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\treturn gprs[rn] + cpu.shifterOperand;\n\t\t\t};\n\t\t\taddress.writesPC = false;\n\t\t\treturn address;\n\t\t},\n\n\t\t// IPUxW\n\t\tfunction(rn, shiftOp, condOp) {\n\t\t\tvar gprs = cpu.gprs;\n\t\t\tvar address = function() {\n\t\t\t\tshiftOp();\n\t\t\t\tvar addr = gprs[rn] + cpu.shifterOperand;\n\t\t\t\tif (!condOp || condOp()) {\n\t\t\t\t\tgprs[rn] = addr;\n\t\t\t\t}\n\t\t\t\treturn addr;\n\t\t\t};\n\t\t\taddress.writePC = rn == cpu.PC;\n\t\t\treturn address;\n\t\t},\n\n\t\tnull,\n\t\tnull,\n\t];\n}\n\nARMCoreArm.prototype.constructAddressingMode1ASR = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (shift < 32) {\n\t\t\tcpu.shifterOperand = shiftVal >> shift;\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (shift - 1));\n\t\t} else if (gprs[rm] >> 31) {\n\t\t\tcpu.shifterOperand = 0xFFFFFFFF;\n\t\t\tcpu.shifterCarryOut = 0x80000000;\n\t\t} else {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = 0;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1Immediate = function(immediate) {\n\tvar cpu = this.cpu;\n\treturn function() {\n\t\tcpu.shifterOperand = immediate;\n\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1ImmediateRotate = function(immediate, rotate) {\n\tvar cpu = this.cpu;\n\treturn function() {\n\t\tcpu.shifterOperand = (immediate >>> rotate) | (immediate << (32 - rotate));\n\t\tcpu.shifterCarryOut = cpu.shifterOperand >> 31;\n\t}\n};\n\nARMCoreArm.prototype.constructAddressingMode1LSL = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (shift < 32) {\n\t\t\tcpu.shifterOperand = shiftVal << shift;\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (32 - shift));\n\t\t} else if (shift == 32) {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = shiftVal & 1;\n\t\t} else {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = 0;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1LSR = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (shift < 32) {\n\t\t\tcpu.shifterOperand = shiftVal >>> shift;\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (shift - 1));\n\t\t} else if (shift == 32) {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = shiftVal >> 31;\n\t\t} else {\n\t\t\tcpu.shifterOperand = 0;\n\t\t\tcpu.shifterCarryOut = 0;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode1ROR = function(rs, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\t++cpu.cycles;\n\t\tvar shift = gprs[rs];\n\t\tif (rs == cpu.PC) {\n\t\t\tshift += 4;\n\t\t}\n\t\tshift &= 0xFF;\n\t\tvar shiftVal =  gprs[rm];\n\t\tif (rm == cpu.PC) {\n\t\t\tshiftVal += 4;\n\t\t}\n\t\tvar rotate = shift & 0x1F;\n\t\tif (shift == 0) {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t} else if (rotate) {\n\t\t\tcpu.shifterOperand = (gprs[rm] >>> rotate) | (gprs[rm] << (32 - rotate));\n\t\t\tcpu.shifterCarryOut = shiftVal & (1 << (rotate - 1));\n\t\t} else {\n\t\t\tcpu.shifterOperand = shiftVal;\n\t\t\tcpu.shifterCarryOut = shiftVal >> 31;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructAddressingMode23Immediate = function(instruction, immediate, condOp) {\n\tvar rn = (instruction & 0x000F0000) >> 16;\n\treturn this.addressingMode23Immediate[(instruction & 0x01A00000) >> 21](rn, immediate, condOp);\n};\n\nARMCoreArm.prototype.constructAddressingMode23Register = function(instruction, rm, condOp) {\n\tvar rn = (instruction & 0x000F0000) >> 16;\n\treturn this.addressingMode23Register[(instruction & 0x01A00000) >> 21](rn, rm, condOp);\n};\n\nARMCoreArm.prototype.constructAddressingMode2RegisterShifted = function(instruction, shiftOp, condOp) {\n\tvar rn = (instruction & 0x000F0000) >> 16;\n\treturn this.addressingMode2RegisterShifted[(instruction & 0x01A00000) >> 21](rn, shiftOp, condOp);\n};\n\nARMCoreArm.prototype.constructAddressingMode4 = function(immediate, rn) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar addr = gprs[rn] + immediate;\n\t\treturn addr;\n\t}\n};\n\nARMCoreArm.prototype.constructAddressingMode4Writeback = function(immediate, offset, rn, overlap) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function(writeInitial) {\n\t\tvar addr = gprs[rn] + immediate;\n\t\tif (writeInitial && overlap) {\n\t\t\tcpu.mmu.store32(gprs[rn] + immediate - 4, gprs[rn]);\n\t\t}\n\t\tgprs[rn] += offset;\n\t\treturn addr;\n\t}\n};\n\nARMCoreArm.prototype.constructADC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !!cpu.cpsrC;\n\t\tgprs[rd] = (gprs[rn] >>> 0) + shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructADCS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !!cpu.cpsrC;\n\t\tvar d = (gprs[rn] >>> 0) + shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) == (shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31) &&\n\t\t\t\t\t\t(shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructADD = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = (gprs[rn] >>> 0) + (cpu.shifterOperand >>> 0);\n\t};\n};\n\nARMCoreArm.prototype.constructADDS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar d = (gprs[rn] >>> 0) + (cpu.shifterOperand >>> 0);\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) == (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31) &&\n\t\t\t\t\t\t(cpu.shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructAND = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructANDS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructB = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tgprs[cpu.PC] += immediate;\n\t};\n};\n\nARMCoreArm.prototype.constructBIC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & ~cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructBICS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] & ~cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructBL = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tgprs[cpu.LR] = gprs[cpu.PC] - 4;\n\t\tgprs[cpu.PC] += immediate;\n\t};\n};\n\nARMCoreArm.prototype.constructBX = function(rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tcpu.switchExecMode(gprs[rm] & 0x00000001);\n\t\tgprs[cpu.PC] = gprs[rm] & 0xFFFFFFFE;\n\t};\n};\n\nARMCoreArm.prototype.constructCMN = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = (gprs[rn] >>> 0) + (cpu.shifterOperand >>> 0);\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = aluOut > 0xFFFFFFFF;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) == (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t(gprs[rn] >> 31) != (aluOut >> 31) &&\n\t\t\t\t\t(cpu.shifterOperand >> 31) != (aluOut >> 31);\n\t};\n};\n\nARMCoreArm.prototype.constructCMP = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = gprs[rn] - cpu.shifterOperand;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (cpu.shifterOperand >>> 0);\n\t\tcpu.cpsrV = (gprs[rn] >> 31) != (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t(gprs[rn] >> 31) != (aluOut >> 31);\n\t};\n};\n\nARMCoreArm.prototype.constructEOR = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] ^ cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructEORS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] ^ cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructLDM = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address(false);\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tgprs[i] = mmu.load32(addr & 0xFFFFFFFC);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tmmu.waitMulti32(addr, total);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDMS = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address(false);\n\t\tvar total = 0;\n\t\tvar mode = cpu.mode;\n\t\tcpu.switchMode(cpu.MODE_SYSTEM);\n\t\tvar m, i;\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tgprs[i] = mmu.load32(addr & 0xFFFFFFFC);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.switchMode(mode);\n\t\tmmu.waitMulti32(addr, total);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDR = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.load32(addr);\n\t\tcpu.mmu.wait32(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRB = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.loadU8(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRH = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.loadU16(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRSB = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.load8(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructLDRSH = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tgprs[rd] = cpu.mmu.load16(addr);\n\t\tcpu.mmu.wait(addr);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreArm.prototype.constructMLA = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(rs);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tgprs[rd] = (hi + lo + gprs[rn]) & 0xFFFFFFFF;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs] + gprs[rn];\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMLAS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(rs);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) & 0xFFFFFFFF;\n\t\t\tgprs[rd] = (hi + lo + gprs[rn]) & 0xFFFFFFFF;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs] + gprs[rn];\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreArm.prototype.constructMOV = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructMOVS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMRS = function(rd, r, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tif (r) {\n\t\t\tgprs[rd] = cpu.spsr;\n\t\t} else {\n\t\t\tgprs[rd] = cpu.packCPSR();\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMSR = function(rm, r, instruction, immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar c = instruction & 0x00010000;\n\t//var x = instruction & 0x00020000;\n\t//var s = instruction & 0x00040000;\n\tvar f = instruction & 0x00080000;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tvar operand;\n\t\tif (instruction & 0x02000000) {\n\t\t\toperand = immediate;\n\t\t} else {\n\t\t\toperand = gprs[rm];\n\t\t}\n\t\tvar mask = (c ? 0x000000FF : 0x00000000) |\n\t\t\t\t   //(x ? 0x0000FF00 : 0x00000000) | // Irrelevant on ARMv4T\n\t\t\t\t   //(s ? 0x00FF0000 : 0x00000000) | // Irrelevant on ARMv4T\n\t\t\t\t   (f ? 0xFF000000 : 0x00000000);\n\n\t\tif (r) {\n\t\t\tmask &= cpu.USER_MASK | cpu.PRIV_MASK | cpu.STATE_MASK;\n\t\t\tcpu.spsr = (cpu.spsr & ~mask) | (operand & mask);\n\t\t} else {\n\t\t\tif (mask & cpu.USER_MASK) {\n\t\t\t\tcpu.cpsrN = operand >> 31;\n\t\t\t\tcpu.cpsrZ = operand & 0x40000000;\n\t\t\t\tcpu.cpsrC = operand & 0x20000000;\n\t\t\t\tcpu.cpsrV = operand & 0x10000000;\n\t\t\t}\n\t\t\tif (cpu.mode != cpu.MODE_USER && (mask & cpu.PRIV_MASK)) {\n\t\t\t\tcpu.switchMode((operand & 0x0000000F) | 0x00000010);\n\t\t\t\tcpu.cpsrI = operand & 0x00000080;\n\t\t\t\tcpu.cpsrF = operand & 0x00000040;\n\t\t\t}\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMUL = function(rd, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) | 0;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) | 0;\n\t\t\tgprs[rd] = hi + lo;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs];\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructMULS = function(rd, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rs] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rm] & 0xFFFF0000) * gprs[rs]) | 0;\n\t\t\tvar lo = ((gprs[rm] & 0x0000FFFF) * gprs[rs]) | 0;\n\t\t\tgprs[rd] = hi + lo;\n\t\t} else {\n\t\t\tgprs[rd] = gprs[rm] * gprs[rs];\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreArm.prototype.constructMVN = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = ~cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructMVNS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = ~cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructORR = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] | cpu.shifterOperand;\n\t}\n};\n\nARMCoreArm.prototype.constructORRS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] | cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t\t}\n\t};\n};\n\nARMCoreArm.prototype.constructRSB = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = cpu.shifterOperand - gprs[rn];\n\t};\n};\n\nARMCoreArm.prototype.constructRSBS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar d = cpu.shifterOperand - gprs[rn];\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (cpu.shifterOperand >>> 0) >= (gprs[rn] >>> 0);\n\t\t\tcpu.cpsrV = (cpu.shifterOperand >> 31) != (gprs[rn] >> 31) &&\n\t\t\t\t\t\t(cpu.shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructRSC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar n = (gprs[rn] >>> 0) + !cpu.cpsrC;\n\t\tgprs[rd] = (cpu.shifterOperand >>> 0) - n;\n\t};\n};\n\nARMCoreArm.prototype.constructRSCS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar n = (gprs[rn] >>> 0) + !cpu.cpsrC;\n\t\tvar d = (cpu.shifterOperand >>> 0) - n;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (cpu.shifterOperand >>> 0) >= (d >>> 0);\n\t\t\tcpu.cpsrV = (cpu.shifterOperand >> 31) != (n >> 31) &&\n\t\t\t\t\t\t(cpu.shifterOperand >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructSBC = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !cpu.cpsrC;\n\t\tgprs[rd] = (gprs[rn] >>> 0) - shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructSBCS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar shifterOperand = (cpu.shifterOperand >>> 0) + !cpu.cpsrC;\n\t\tvar d = (gprs[rn] >>> 0) - shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (d >>> 0);\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) != (shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructSMLAL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = (gprs[rm] & 0xFFFF0000) * gprs[rs];\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * gprs[rs];\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += Math.floor(carry * SHIFT_32);\n\t};\n};\n\nARMCoreArm.prototype.constructSMLALS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = (gprs[rm] & 0xFFFF0000) * gprs[rs];\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * gprs[rs];\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += Math.floor(carry * SHIFT_32);\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n\nARMCoreArm.prototype.constructSMULL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >> 0) * (gprs[rs] >> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >> 0) * (gprs[rs] >> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = Math.floor(hi * SHIFT_32 + lo * SHIFT_32);\n\t};\n};\n\nARMCoreArm.prototype.constructSMULLS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >> 0) * (gprs[rs] >> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >> 0) * (gprs[rs] >> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = Math.floor(hi * SHIFT_32 + lo * SHIFT_32);\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n\nARMCoreArm.prototype.constructSTM = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tmmu.wait32(gprs[cpu.PC]);\n\t\tvar addr = address(true);\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tmmu.store32(addr, gprs[i]);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tmmu.waitMulti32(addr, total);\n\t};\n};\n\nARMCoreArm.prototype.constructSTMS = function(rs, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\tvar mmu = cpu.mmu;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tmmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tmmu.wait32(gprs[cpu.PC]);\n\t\tvar mode = cpu.mode;\n\t\tvar addr = address(true);\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tcpu.switchMode(cpu.MODE_SYSTEM);\n\t\tfor (m = rs, i = 0; m; m >>= 1, ++i) {\n\t\t\tif (m & 1) {\n\t\t\t\tmmu.store32(addr, gprs[i]);\n\t\t\t\taddr += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.switchMode(mode);\n\t\tmmu.waitMulti32(addr, total);\n\t};\n};\n\nARMCoreArm.prototype.constructSTR = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tcpu.mmu.store32(addr, gprs[rd]);\n\t\tcpu.mmu.wait32(addr);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSTRB = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tcpu.mmu.store8(addr, gprs[rd]);\n\t\tcpu.mmu.wait(addr);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSTRH = function(rd, address, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tvar addr = address();\n\t\tcpu.mmu.store16(addr, gprs[rd]);\n\t\tcpu.mmu.wait(addr);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSUB = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tgprs[rd] = gprs[rn] - cpu.shifterOperand;\n\t};\n};\n\nARMCoreArm.prototype.constructSUBS = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar d = gprs[rn] - cpu.shifterOperand;\n\t\tif (rd == cpu.PC && cpu.hasSPSR()) {\n\t\t\tcpu.unpackCPSR(cpu.spsr);\n\t\t} else {\n\t\t\tcpu.cpsrN = d >> 31;\n\t\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (cpu.shifterOperand >>> 0);\n\t\t\tcpu.cpsrV = (gprs[rn] >> 31) != (cpu.shifterOperand >> 31) &&\n\t\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31);\n\t\t}\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreArm.prototype.constructSWI = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tif (condOp && !condOp()) {\n\t\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\t\treturn;\n\t\t}\n\t\tcpu.irq.swi32(immediate);\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t};\n};\n\nARMCoreArm.prototype.constructSWP = function(rd, rn, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.wait32(gprs[rn]);\n\t\tcpu.mmu.wait32(gprs[rn]);\n\t\tvar d = cpu.mmu.load32(gprs[rn]);\n\t\tcpu.mmu.store32(gprs[rn], gprs[rm]);\n\t\tgprs[rd] = d;\n\t\t++cpu.cycles;\n\t}\n};\n\nARMCoreArm.prototype.constructSWPB = function(rd, rn, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.mmu.wait(gprs[rn]);\n\t\tcpu.mmu.wait(gprs[rn]);\n\t\tvar d = cpu.mmu.load8(gprs[rn]);\n\t\tcpu.mmu.store8(gprs[rn], gprs[rm]);\n\t\tgprs[rd] = d;\n\t\t++cpu.cycles;\n\t}\n};\n\nARMCoreArm.prototype.constructTEQ = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = gprs[rn] ^ cpu.shifterOperand;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t};\n};\n\nARMCoreArm.prototype.constructTST = function(rd, rn, shiftOp, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tshiftOp();\n\t\tvar aluOut = gprs[rn] & cpu.shifterOperand;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = cpu.shifterCarryOut;\n\t};\n};\n\nARMCoreArm.prototype.constructUMLAL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * (gprs[rs] >>> 0);\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += carry * SHIFT_32;\n\t};\n};\n\nARMCoreArm.prototype.constructUMLALS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\tcpu.cycles += 2;\n\t\tcpu.mmu.waitMul(rs);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = (gprs[rm] & 0x0000FFFF) * (gprs[rs] >>> 0);\n\t\tvar carry = (gprs[rn] >>> 0) + hi + lo;\n\t\tgprs[rn] = carry;\n\t\tgprs[rd] += carry * SHIFT_32;\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n\nARMCoreArm.prototype.constructUMULL = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >>> 0) * (gprs[rs] >>> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = (hi * SHIFT_32 + lo * SHIFT_32) >>> 0;\n\t};\n};\n\nARMCoreArm.prototype.constructUMULLS = function(rd, rn, rs, rm, condOp) {\n\tvar cpu = this.cpu;\n\tvar SHIFT_32 = 1/0x100000000;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch32(gprs[cpu.PC]);\n\t\tif (condOp && !condOp()) {\n\t\t\treturn;\n\t\t}\n\t\t++cpu.cycles;\n\t\tcpu.mmu.waitMul(gprs[rs]);\n\t\tvar hi = ((gprs[rm] & 0xFFFF0000) >>> 0) * (gprs[rs] >>> 0);\n\t\tvar lo = ((gprs[rm] & 0x0000FFFF) >>> 0) * (gprs[rs] >>> 0);\n\t\tgprs[rn] = ((hi & 0xFFFFFFFF) + (lo & 0xFFFFFFFF)) & 0xFFFFFFFF;\n\t\tgprs[rd] = (hi * SHIFT_32 + lo * SHIFT_32) >>> 0;\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !((gprs[rd] & 0xFFFFFFFF) || (gprs[rn] & 0xFFFFFFFF));\n\t};\n};\n","window.GameBoyAdvanceAudio = function GameBoyAdvanceAudio() {\n\twindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\tif (window.AudioContext) {\n\t\tvar self = this;\n\t\tthis.context = new AudioContext();\n\t\tthis.bufferSize = 0;\n\t\tthis.bufferSize = 4096;\n\t\tthis.maxSamples = this.bufferSize << 2;\n\t\tthis.buffers = [new Float32Array(this.maxSamples), new Float32Array(this.maxSamples)];\n\t\tthis.sampleMask = this.maxSamples - 1;\n\t\tif (this.context.createScriptProcessor) {\n\t\t\tthis.jsAudio = this.context.createScriptProcessor(this.bufferSize);\n\t\t} else {\n\t\t\tthis.jsAudio = this.context.createJavaScriptNode(this.bufferSize);\n\t\t}\n\t\tthis.jsAudio.onaudioprocess = function(e) { self.audioProcess(e) };\n\t} else {\n\t\tthis.context = null;\n\t}\n\n\tthis.masterEnable = true;\n\tthis.masterVolume = 1.0;\n\n\tthis.SOUND_MAX = 0x400;\n\tthis.FIFO_MAX = 0x200;\n\tthis.PSG_MAX = 0x080;\n};\n\nGameBoyAdvanceAudio.prototype.clear = function() {\n\tthis.fifoA = [];\n\tthis.fifoB = [];\n\tthis.fifoASample = 0;\n\tthis.fifoBSample = 0;\n\n\tthis.enabled = false;\n\tif (this.context) {\n\t\ttry {\n\t\t\tthis.jsAudio.disconnect(this.context.destination);\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\tthis.enableChannel3 = false;\n\tthis.enableChannel4 = false;\n\tthis.enableChannelA = false;\n\tthis.enableChannelB = false;\n\tthis.enableRightChannelA = false;\n\tthis.enableLeftChannelA = false;\n\tthis.enableRightChannelB = false;\n\tthis.enableLeftChannelB = false;\n\n\tthis.playingChannel3 = false;\n\tthis.playingChannel4 = false;\n\n\tthis.volumeLeft = 0;\n\tthis.volumeRight = 0;\n\tthis.ratioChannelA = 1;\n\tthis.ratioChannelB = 1;\n\tthis.enabledLeft = 0;\n\tthis.enabledRight = 0;\n\n\tthis.dmaA = -1;\n\tthis.dmaB = -1;\n\tthis.soundTimerA = 0;\n\tthis.soundTimerB = 0;\n\n\tthis.soundRatio = 1;\n\tthis.soundBias = 0x200;\n\n\tthis.squareChannels = new Array();\n\tfor (var i = 0; i < 2; ++i) {\n\t\tthis.squareChannels[i] = {\n\t\t\tenabled: false,\n\t\t\tplaying: false,\n\t\t\tsample: 0,\n\t\t\tduty: 0.5,\n\t\t\tincrement: 0,\n\t\t\tstep: 0,\n\t\t\tinitialVolume: 0,\n\t\t\tvolume: 0,\n\t\t\tfrequency: 0,\n\t\t\tinterval: 0,\n\t\t\tsweepSteps: 0,\n\t\t\tsweepIncrement: 0,\n\t\t\tsweepInterval: 0,\n\t\t\tdoSweep: false,\n\t\t\traise: 0,\n\t\t\tlower: 0,\n\t\t\tnextStep: 0,\n\t\t\ttimed: false,\n\t\t\tlength: 0,\n\t\t\tend: 0\n\t\t}\n\t}\n\n\tthis.waveData = new Uint8Array(32);\n\tthis.channel3Dimension = 0;\n\tthis.channel3Bank = 0;\n\tthis.channel3Volume = 0;\n\tthis.channel3Interval = 0;\n\tthis.channel3Next = 0;\n\tthis.channel3Length = 0;\n\tthis.channel3Timed = false;\n\tthis.channel3End = 0;\n\tthis.channel3Pointer =0;\n\tthis.channel3Sample = 0;\n\n\tthis.cpuFrequency = this.core.irq.FREQUENCY;\n\n\tthis.channel4 = {\n\t\tsample: 0,\n\t\tlfsr: 0,\n\t\twidth: 15,\n\t\tinterval: this.cpuFrequency / 524288,\n\t\tincrement: 0,\n\t\tstep: 0,\n\t\tinitialVolume: 0,\n\t\tvolume: 0,\n\t\tnextStep: 0,\n\t\ttimed: false,\n\t\tlength: 0,\n\t\tend: 0\n\t};\n\n\tthis.nextEvent = 0;\n\n\tthis.nextSample = 0;\n\tthis.outputPointer = 0;\n\tthis.samplePointer = 0;\n\n\tthis.backup = 0;\n\tthis.totalSamples = 0;\n\n\tthis.sampleRate = 32768;\n\tthis.sampleInterval = this.cpuFrequency / this.sampleRate;\n\tthis.resampleRatio = 1;\n\tif (this.context) {\n\t\tthis.resampleRatio = this.sampleRate / this.context.sampleRate;\n\t}\n\n\tthis.writeSquareChannelFC(0, 0);\n\tthis.writeSquareChannelFC(1, 0);\n\tthis.writeChannel4FC(0);\n};\n\nGameBoyAdvanceAudio.prototype.freeze = function() {\n\treturn {\n\t\tnextSample: this.nextSample\n\t};\n};\n\nGameBoyAdvanceAudio.prototype.defrost = function(frost) {\n\tthis.nextSample = frost.nextSample;\n};\n\nGameBoyAdvanceAudio.prototype.pause = function(paused) {\n\tif (this.context) {\n\t\tif (paused) {\n\t\t\ttry {\n\t\t\t\tthis.jsAudio.disconnect(this.context.destination);\n\t\t\t} catch (e) {\n\t\t\t\t// Sigh\n\t\t\t}\n\t\t} else if (this.enabled) {\n\t\t\tthis.jsAudio.connect(this.context.destination);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.updateTimers = function() {\n\tvar cycles = this.cpu.cycles;\n\tif (!this.enabled || (cycles < this.nextEvent && cycles < this.nextSample)) {\n\t\treturn;\n\t}\n\n\tif (cycles >= this.nextEvent) {\n\t\tvar channel = this.squareChannels[0];\n\t\tthis.nextEvent = Infinity;\n\t\tif (channel.playing) {\n\t\t\tthis.updateSquareChannel(channel, cycles);\n\t\t}\n\n\t\tchannel = this.squareChannels[1];\n\t\tif (channel.playing) {\n\t\t\tthis.updateSquareChannel(channel, cycles);\n\t\t}\n\n\t\tif (this.enableChannel3 && this.playingChannel3) {\n\t\t\tif (cycles >= this.channel3Next) {\n\t\t\t\tif (this.channel3Write) {\n\t\t\t\t\tvar sample = this.waveData[this.channel3Pointer >> 1];\n\t\t\t\t\tthis.channel3Sample = (((sample >> ((this.channel3Pointer & 1) << 2)) & 0xF) - 0x8) / 8;\n\t\t\t\t\tthis.channel3Pointer = (this.channel3Pointer + 1);\n\t\t\t\t\tif (this.channel3Dimension && this.channel3Pointer >= 64) {\n\t\t\t\t\t\tthis.channel3Pointer -= 64;\n\t\t\t\t\t} else if (!this.channel3Bank && this.channel3Pointer >= 32) {\n\t\t\t\t\t\tthis.channel3Pointer -= 32;\n\t\t\t\t\t} else if (this.channel3Pointer >= 64) {\n\t\t\t\t\t\tthis.channel3Pointer -= 32;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.channel3Next += this.channel3Interval;\n\t\t\t\tif (this.channel3Interval && this.nextEvent > this.channel3Next) {\n\t\t\t\t\tthis.nextEvent = this.channel3Next;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.channel3Timed && cycles >= this.channel3End) {\n\t\t\t\tthis.playingChannel3 = false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.enableChannel4 && this.playingChannel4) {\n\t\t\tif (this.channel4.timed && cycles >= this.channel4.end) {\n\t\t\t\tthis.playingChannel4 = false;\n\t\t\t} else {\n\t\t\t\tif (cycles >= this.channel4.next) {\n\t\t\t\t\tthis.channel4.lfsr >>= 1;\n\t\t\t\t\tvar sample = this.channel4.lfsr & 1;\n\t\t\t\t\tthis.channel4.lfsr |= (((this.channel4.lfsr >> 1) & 1) ^ sample) << (this.channel4.width - 1);\n\t\t\t\t\tthis.channel4.next += this.channel4.interval;\n\t\t\t\t\tthis.channel4.sample = (sample - 0.5) * 2 * this.channel4.volume;\n\t\t\t\t}\n\t\t\t\tthis.updateEnvelope(this.channel4, cycles);\n\t\t\t\tif (this.nextEvent > this.channel4.next) {\n\t\t\t\t\tthis.nextEvent = this.channel4.next;\n\t\t\t\t}\n\t\t\t\tif (this.channel4.timed && this.nextEvent > this.channel4.end) {\n\t\t\t\t\tthis.nextEvent = this.channel4.end;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (cycles >= this.nextSample) {\n\t\tthis.sample();\n\t\tthis.nextSample += this.sampleInterval;\n\t}\n\n\tthis.nextEvent = Math.ceil(this.nextEvent);\n\tif ((this.nextEvent < cycles) || (this.nextSample < cycles)) {\n\t\t// STM instructions may take a long time\n\t\tthis.updateTimers();\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeEnable = function(value) {\n\tthis.enabled = !!value;\n\tthis.nextEvent = this.cpu.cycles;\n\tthis.nextSample = this.nextEvent;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n\tif (this.context) {\n\t\tif (value) {\n\t\t\tthis.jsAudio.connect(this.context.destination);\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tthis.jsAudio.disconnect(this.context.destination);\n\t\t\t} catch (e) {\n\t\t\t}\n\t\t}\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeSoundControlLo = function(value) {\n\tthis.masterVolumeLeft = value & 0x7;\n\tthis.masterVolumeRight = (value >> 4) & 0x7;\n\tthis.enabledLeft = (value >> 8) & 0xF;\n\tthis.enabledRight = (value >> 12) & 0xF;\n\n\tthis.setSquareChannelEnabled(this.squareChannels[0], (this.enabledLeft | this.enabledRight) & 0x1);\n\tthis.setSquareChannelEnabled(this.squareChannels[1], (this.enabledLeft | this.enabledRight) & 0x2);\n\tthis.enableChannel3 = (this.enabledLeft | this.enabledRight) & 0x4;\n\tthis.setChannel4Enabled((this.enabledLeft | this.enabledRight) & 0x8);\n\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.writeSoundControlHi = function(value) {\n\tswitch (value & 0x0003) {\n\tcase 0:\n\t\tthis.soundRatio = 0.25;\n\t\tbreak;\n\tcase 1:\n\t\tthis.soundRatio = 0.50;\n\t\tbreak;\n\tcase 2:\n\t\tthis.soundRatio = 1;\n\t\tbreak;\n\t}\n\tthis.ratioChannelA = (((value & 0x0004) >> 2) + 1) * 0.5;\n\tthis.ratioChannelB = (((value & 0x0008) >> 3) + 1) * 0.5;\n\n\tthis.enableRightChannelA = value & 0x0100;\n\tthis.enableLeftChannelA = value & 0x0200;\n\tthis.enableChannelA  = value & 0x0300;\n\tthis.soundTimerA = value & 0x0400;\n\tif (value & 0x0800) {\n\t\tthis.fifoA = [];\n\t}\n\tthis.enableRightChannelB = value & 0x1000;\n\tthis.enableLeftChannelB = value & 0x2000;\n\tthis.enableChannelB  = value & 0x3000;\n\tthis.soundTimerB = value & 0x4000;\n\tif (value & 0x8000) {\n\t\tthis.fifoB = [];\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.resetSquareChannel = function(channel) {\n\tif (channel.step) {\n\t\tchannel.nextStep = this.cpu.cycles + channel.step;\n\t}\n\tif (channel.enabled && !channel.playing) {\n\t\tchannel.raise = this.cpu.cycles;\n\t\tchannel.lower = channel.raise + channel.duty * channel.interval;\n\t\tchannel.end = this.cpu.cycles + channel.length;\n\t\tthis.nextEvent = this.cpu.cycles;\n\t}\n\tchannel.playing = channel.enabled;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.setSquareChannelEnabled = function(channel, enable) {\n\tif (!(channel.enabled && channel.playing) && enable) {\n\t\tchannel.enabled = !!enable;\n\t\tthis.updateTimers();\n\t\tthis.core.irq.pollNextEvent();\n\t} else {\n\t\tchannel.enabled = !!enable;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeSquareChannelSweep = function(channelId, value) {\n\tvar channel = this.squareChannels[channelId];\n\tchannel.sweepSteps = value & 0x07;\n\tchannel.sweepIncrement = (value & 0x08) ? -1 : 1;\n\tchannel.sweepInterval = ((value >> 4) & 0x7) * this.cpuFrequency / 128;\n\tchannel.doSweep = !!channel.sweepInterval;\n\tchannel.nextSweep = this.cpu.cycles + channel.sweepInterval;\n\tthis.resetSquareChannel(channel);\n};\n\nGameBoyAdvanceAudio.prototype.writeSquareChannelDLE = function(channelId, value) {\n\tvar channel = this.squareChannels[channelId];\n\tvar duty = (value >> 6) & 0x3;\n\tswitch (duty) {\n\tcase 0:\n\t\tchannel.duty = 0.125;\n\t\tbreak;\n\tcase 1:\n\t\tchannel.duty = 0.25;\n\t\tbreak;\n\tcase 2:\n\t\tchannel.duty = 0.5;\n\t\tbreak;\n\tcase 3:\n\t\tchannel.duty = 0.75;\n\t\tbreak;\n\t}\n\tthis.writeChannelLE(channel, value);\n\tthis.resetSquareChannel(channel);\n};\n\nGameBoyAdvanceAudio.prototype.writeSquareChannelFC = function(channelId, value) {\n\tvar channel = this.squareChannels[channelId];\n\tvar frequency = value & 2047;\n\tchannel.frequency = frequency;\n\tchannel.interval = this.cpuFrequency * (2048 - frequency) / 131072;\n\tchannel.timed = !!(value & 0x4000);\n\n\tif (value & 0x8000) {\n\t\tthis.resetSquareChannel(channel);\n\t\tchannel.volume = channel.initialVolume;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.updateSquareChannel = function(channel, cycles) {\n\tif (channel.timed && cycles >= channel.end) {\n\t\tchannel.playing = false;\n\t\treturn;\n\t}\n\n\tif (channel.doSweep && cycles >= channel.nextSweep) {\n\t\tchannel.frequency += channel.sweepIncrement * (channel.frequency >> channel.sweepSteps);\n\t\tif (channel.frequency < 0) {\n\t\t\tchannel.frequency = 0;\n\t\t} else if (channel.frequency > 2047) {\n\t\t\tchannel.frequency = 2047;\n\t\t\tchannel.playing = false;\n\t\t\treturn;\n\t\t}\n\t\tchannel.interval = this.cpuFrequency * (2048 - channel.frequency) / 131072;\n\t\tchannel.nextSweep += channel.sweepInterval;\n\t}\n\n\tif (cycles >= channel.raise) {\n\t\tchannel.sample = channel.volume;\n\t\tchannel.lower = channel.raise + channel.duty * channel.interval;\n\t\tchannel.raise += channel.interval;\n\t} else if (cycles >= channel.lower) {\n\t\tchannel.sample = -channel.volume;\n\t\tchannel.lower += channel.interval;\n\t}\n\n\tthis.updateEnvelope(channel, cycles);\n\n\tif (this.nextEvent > channel.raise) {\n\t\tthis.nextEvent = channel.raise;\n\t}\n\tif (this.nextEvent > channel.lower) {\n\t\tthis.nextEvent = channel.lower;\n\t}\n\tif (channel.timed && this.nextEvent > channel.end) {\n\t\tthis.nextEvent = channel.end;\n\t}\n\tif (channel.doSweep && this.nextEvent > channel.nextSweep) {\n\t\tthis.nextEvent = channel.nextSweep;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel3Lo = function(value) {\n\tthis.channel3Dimension = value & 0x20;\n\tthis.channel3Bank = value & 0x40;\n\tvar enable = value & 0x80;\n\tif (!this.channel3Write && enable) {\n\t\tthis.channel3Write = enable;\n\t\tthis.resetChannel3();\n\t} else {\n\t\tthis.channel3Write = enable;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel3Hi = function(value) {\n\tthis.channel3Length = this.cpuFrequency * (0x100 - (value & 0xFF)) / 256;\n\tvar volume = (value >> 13) & 0x7;\n\tswitch (volume) {\n\tcase 0:\n\t\tthis.channel3Volume = 0;\n\t\tbreak;\n\tcase 1:\n\t\tthis.channel3Volume = 1;\n\t\tbreak;\n\tcase 2:\n\t\tthis.channel3Volume = 0.5;\n\t\tbreak;\n\tcase 3:\n\t\tthis.channel3Volume = 0.25;\n\t\tbreak;\n\tdefault:\n\t\tthis.channel3Volume = 0.75;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel3X = function(value) {\n\tthis.channel3Interval = this.cpuFrequency * (2048 - (value & 0x7FF)) / 2097152;\n\tthis.channel3Timed = !!(value & 0x4000);\n\tif (this.channel3Write) {\n\t\tthis.resetChannel3();\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.resetChannel3 = function() {\n\tthis.channel3Next = this.cpu.cycles;\n\tthis.nextEvent = this.channel3Next;\n\tthis.channel3End = this.cpu.cycles + this.channel3Length;\n\tthis.playingChannel3 = this.channel3Write;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.writeWaveData = function(offset, data, width) {\n\tif (!this.channel3Bank) {\n\t\toffset += 16;\n\t}\n\tif (width == 2) {\n\t\tthis.waveData[offset] = data & 0xFF;\n\t\tdata >>= 8;\n\t\t++offset;\n\t}\n\tthis.waveData[offset] = data & 0xFF;\n};\n\nGameBoyAdvanceAudio.prototype.setChannel4Enabled = function(enable) {\n\tif (!this.enableChannel4 && enable) {\n\t\tthis.channel4.next = this.cpu.cycles;\n\t\tthis.channel4.end = this.cpu.cycles + this.channel4.length;\n\t\tthis.enableChannel4 = true;\n\t\tthis.playingChannel4 = true;\n\t\tthis.nextEvent = this.cpu.cycles;\n\t\tthis.updateEnvelope(this.channel4);\n\t\tthis.updateTimers();\n\t\tthis.core.irq.pollNextEvent();\n\t} else {\n\t\tthis.enableChannel4 = enable;\n\t}\n}\n\nGameBoyAdvanceAudio.prototype.writeChannel4LE = function(value) {\n\tthis.writeChannelLE(this.channel4, value);\n\tthis.resetChannel4();\n};\n\nGameBoyAdvanceAudio.prototype.writeChannel4FC = function(value) {\n\tthis.channel4.timed = !!(value & 0x4000);\n\n\tvar r = value & 0x7;\n\tif (!r) {\n\t\tr = 0.5;\n\t}\n\tvar s = (value >> 4) & 0xF;\n\tvar interval = this.cpuFrequency * (r * (2 << s)) / 524288;\n\tif (interval != this.channel4.interval) {\n\t\tthis.channel4.interval = interval;\n\t\tthis.resetChannel4();\n\t}\n\n\tvar width = (value & 0x8) ? 7 : 15;\n\tif (width != this.channel4.width) {\n\t\tthis.channel4.width = width;\n\t\tthis.resetChannel4();\n\t}\n\n\tif (value & 0x8000) {\n\t\tthis.resetChannel4();\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.resetChannel4 = function() {\n\tif (this.channel4.width == 15) {\n\t\tthis.channel4.lfsr = 0x4000;\n\t} else {\n\t\tthis.channel4.lfsr = 0x40;\n\t}\n\tthis.channel4.volume = this.channel4.initialVolume;\n\tif (this.channel4.step) {\n\t\tthis.channel4.nextStep = this.cpu.cycles + this.channel4.step;\n\t}\n\tthis.channel4.end = this.cpu.cycles + this.channel4.length;\n\tthis.channel4.next = this.cpu.cycles;\n\tthis.nextEvent = this.channel4.next;\n\n\tthis.playingChannel4 = this.enableChannel4;\n\tthis.updateTimers();\n\tthis.core.irq.pollNextEvent();\n};\n\nGameBoyAdvanceAudio.prototype.writeChannelLE = function(channel, value) {\n\tchannel.length = this.cpuFrequency * ((0x40 - (value & 0x3F)) / 256);\n\n\tif (value & 0x0800) {\n\t\tchannel.increment = 1 / 16;\n\t} else {\n\t\tchannel.increment = -1 / 16;\n\t}\n\tchannel.initialVolume = ((value >> 12) & 0xF) / 16;\n\n\tchannel.step = this.cpuFrequency * (((value >> 8) & 0x7) / 64);\n};\n\nGameBoyAdvanceAudio.prototype.updateEnvelope = function(channel, cycles) {\n\tif (channel.step) {\n\t\tif (cycles >= channel.nextStep) {\n\t\t\tchannel.volume += channel.increment;\n\t\t\tif (channel.volume > 1) {\n\t\t\t\tchannel.volume = 1;\n\t\t\t} else if (channel.volume < 0) {\n\t\t\t\tchannel.volume = 0;\n\t\t\t}\n\t\t\tchannel.nextStep += channel.step;\n\t\t}\n\n\t\tif (this.nextEvent > channel.nextStep) {\n\t\t\tthis.nextEvent = channel.nextStep;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.appendToFifoA = function(value) {\n\tvar b;\n\tif (this.fifoA.length > 28) {\n\t\tthis.fifoA = this.fifoA.slice(-28);\n\t}\n\tfor (var i = 0; i < 4; ++i) {\n\t\tb = (value & 0xFF) << 24;\n\t\tvalue >>= 8;\n\t\tthis.fifoA.push(b / 0x80000000);\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.appendToFifoB = function(value) {\n\tvar b;\n\tif (this.fifoB.length > 28) {\n\t\tthis.fifoB = this.fifoB.slice(-28);\n\t}\n\tfor (var i = 0; i < 4; ++i) {\n\t\tb = (value & 0xFF) << 24;\n\t\tvalue >>= 8;\n\t\tthis.fifoB.push(b / 0x80000000);\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.sampleFifoA = function() {\n\tif (this.fifoA.length <= 16) {\n\t\tvar dma = this.core.irq.dma[this.dmaA];\n\t\tdma.nextCount = 4;\n\t\tthis.core.mmu.serviceDma(this.dmaA, dma);\n\t}\n\tthis.fifoASample = this.fifoA.shift();\n};\n\nGameBoyAdvanceAudio.prototype.sampleFifoB = function() {\n\tif (this.fifoB.length <= 16) {\n\t\tvar dma = this.core.irq.dma[this.dmaB];\n\t\tdma.nextCount = 4;\n\t\tthis.core.mmu.serviceDma(this.dmaB, dma);\n\t}\n\tthis.fifoBSample = this.fifoB.shift();\n};\n\nGameBoyAdvanceAudio.prototype.scheduleFIFODma = function(number, info) {\n\tswitch (info.dest) {\n\tcase this.cpu.mmu.BASE_IO | this.cpu.irq.io.FIFO_A_LO:\n\t\t// FIXME: is this needed or a hack?\n\t\tinfo.dstControl = 2;\n\t\tthis.dmaA = number;\n\t\tbreak;\n\tcase this.cpu.mmu.BASE_IO | this.cpu.irq.io.FIFO_B_LO:\n\t\tinfo.dstControl = 2;\n\t\tthis.dmaB = number;\n\t\tbreak;\n\tdefault:\n\t\tthis.core.WARN('Tried to schedule FIFO DMA for non-FIFO destination');\n\t\tbreak;\n\t}\n};\n\nGameBoyAdvanceAudio.prototype.sample = function() {\n\tvar sampleLeft = 0;\n\tvar sampleRight = 0;\n\tvar sample;\n\tvar channel;\n\n\tchannel = this.squareChannels[0];\n\tif (channel.playing) {\n\t\tsample = channel.sample * this.soundRatio * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x1) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x1) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tchannel = this.squareChannels[1];\n\tif (channel.playing) {\n\t\tsample = channel.sample * this.soundRatio * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x2) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x2) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.playingChannel3) {\n\t\tsample = this.channel3Sample * this.soundRatio * this.channel3Volume * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x4) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x4) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.playingChannel4) {\n\t\tsample = this.channel4.sample * this.soundRatio * this.PSG_MAX;\n\t\tif (this.enabledLeft & 0x8) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enabledRight & 0x8) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.enableChannelA) {\n\t\tsample = this.fifoASample * this.FIFO_MAX * this.ratioChannelA;\n\t\tif (this.enableLeftChannelA) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enableRightChannelA) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tif (this.enableChannelB) {\n\t\tsample = this.fifoBSample * this.FIFO_MAX * this.ratioChannelB;\n\t\tif (this.enableLeftChannelB) {\n\t\t\tsampleLeft += sample;\n\t\t}\n\t\tif (this.enableRightChannelB) {\n\t\t\tsampleRight += sample;\n\t\t}\n\t}\n\n\tvar samplePointer = this.samplePointer;\n\tsampleLeft *= this.masterVolume / this.SOUND_MAX;\n\tsampleLeft = Math.max(Math.min(sampleLeft, 1), -1);\n\tsampleRight *= this.masterVolume / this.SOUND_MAX;\n\tsampleRight = Math.max(Math.min(sampleRight, 1), -1);\n\tif (this.buffers) {\n\t\tthis.buffers[0][samplePointer] = sampleLeft;\n\t\tthis.buffers[1][samplePointer] = sampleRight;\n\t}\n\tthis.samplePointer = (samplePointer + 1) & this.sampleMask;\n};\n\nGameBoyAdvanceAudio.prototype.audioProcess = function(audioProcessingEvent) {\n\tvar left = audioProcessingEvent.outputBuffer.getChannelData(0);\n\tvar right = audioProcessingEvent.outputBuffer.getChannelData(1);\n\tif (this.masterEnable) {\n\t\tvar i;\n\t\tvar o = this.outputPointer;\n\t\tfor (i = 0; i < this.bufferSize; ++i, o += this.resampleRatio) {\n\t\t\tif (o >= this.maxSamples) {\n\t\t\t\to -= this.maxSamples;\n\t\t\t}\n\t\t\tif ((o | 0) == this.samplePointer) {\n\t\t\t\t++this.backup;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tleft[i] = this.buffers[0][o | 0];\n\t\t\tright[i] = this.buffers[1][o | 0];\n\t\t}\n\t\tfor (; i < this.bufferSize; ++i) {\n\t\t\tleft[i] = 0;\n\t\t\tright[i] = 0;\n\t\t}\n\t\tthis.outputPointer = o;\n\t\t++this.totalSamples;\n\t} else {\n\t\tfor (i = 0; i < this.bufferSize; ++i) {\n\t\t\tleft[i] = 0;\n\t\t\tright[i] = 0;\n\t\t}\n\t}\n};\n","window.ARMCore = function ARMCore() {\n\tthis.SP = 13;\n\tthis.LR = 14;\n\tthis.PC = 15;\n\n\tthis.MODE_ARM = 0;\n\tthis.MODE_THUMB = 1;\n\n\tthis.MODE_USER = 0x10;\n\tthis.MODE_FIQ = 0x11;\n\tthis.MODE_IRQ = 0x12;\n\tthis.MODE_SUPERVISOR = 0x13;\n\tthis.MODE_ABORT = 0x17;\n\tthis.MODE_UNDEFINED = 0x1B;\n\tthis.MODE_SYSTEM = 0x1F;\n\n\tthis.BANK_NONE = 0\n\tthis.BANK_FIQ = 1;\n\tthis.BANK_IRQ = 2;\n\tthis.BANK_SUPERVISOR = 3;\n\tthis.BANK_ABORT = 4;\n\tthis.BANK_UNDEFINED = 5;\n\n\tthis.UNALLOC_MASK = 0x0FFFFF00;\n\tthis.USER_MASK = 0xF0000000;\n\tthis.PRIV_MASK = 0x000000CF; // This is out of spec, but it seems to be what's done in other implementations\n\tthis.STATE_MASK = 0x00000020;\n\n\tthis.WORD_SIZE_ARM = 4;\n\tthis.WORD_SIZE_THUMB = 2;\n\n\tthis.BASE_RESET = 0x00000000;\n\tthis.BASE_UNDEF = 0x00000004;\n\tthis.BASE_SWI = 0x00000008;\n\tthis.BASE_PABT = 0x0000000C;\n\tthis.BASE_DABT = 0x00000010;\n\tthis.BASE_IRQ = 0x00000018;\n\tthis.BASE_FIQ = 0x0000001C;\n\n\tthis.armCompiler = new ARMCoreArm(this);\n\tthis.thumbCompiler = new ARMCoreThumb(this);\n\tthis.generateConds();\n\n\tthis.gprs = new Int32Array(16);\n};\n\nARMCore.prototype.resetCPU = function(startOffset) {\n\tfor (var i = 0; i < this.PC; ++i) {\n\t\tthis.gprs[i] = 0;\n\t}\n\tthis.gprs[this.PC] = startOffset + this.WORD_SIZE_ARM;\n\n\tthis.loadInstruction = this.loadInstructionArm;\n\tthis.execMode = this.MODE_ARM;\n\tthis.instructionWidth = this.WORD_SIZE_ARM;\n\n\tthis.mode = this.MODE_SYSTEM;\n\n\tthis.cpsrI = false;\n\tthis.cpsrF = false;\n\n\tthis.cpsrV = false;\n\tthis.cpsrC = false;\n\tthis.cpsrZ = false;\n\tthis.cpsrN = false;\n\n\tthis.bankedRegisters = [\n\t\tnew Int32Array(7),\n\t\tnew Int32Array(7),\n\t\tnew Int32Array(2),\n\t\tnew Int32Array(2),\n\t\tnew Int32Array(2),\n\t\tnew Int32Array(2)\n\t];\n\tthis.spsr = 0;\n\tthis.bankedSPSRs = new Int32Array(6);\n\n\tthis.cycles = 0;\n\n\tthis.shifterOperand = 0;\n\tthis.shifterCarryOut = 0;\n\n\tthis.page = null;\n\tthis.pageId = 0;\n\tthis.pageRegion = -1;\n\n\tthis.instruction = null;\n\n\tthis.irq.clear();\n\n\tvar gprs = this.gprs;\n\tvar mmu = this.mmu;\n\tthis.step = function() {\n\t\tvar instruction = this.instruction || (this.instruction = this.loadInstruction(gprs[this.PC] - this.instructionWidth));\n\t\tgprs[this.PC] += this.instructionWidth;\n\t\tthis.conditionPassed = true;\n\t\tinstruction();\n\n\t\tif (!instruction.writesPC) {\n\t\t\tif (this.instruction != null) { // We might have gotten an interrupt from the instruction\n\t\t\t\tif (instruction.next == null || instruction.next.page.invalid) {\n\t\t\t\t\tinstruction.next = this.loadInstruction(gprs[this.PC] - this.instructionWidth);\n\t\t\t\t}\n\t\t\t\tthis.instruction = instruction.next;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.conditionPassed) {\n\t\t\t\tvar pc = gprs[this.PC] &= 0xFFFFFFFE;\n\t\t\t\tif (this.execMode == this.MODE_ARM) {\n\t\t\t\t\tmmu.wait32(pc);\n\t\t\t\t\tmmu.waitPrefetch32(pc);\n\t\t\t\t} else {\n\t\t\t\t\tmmu.wait(pc);\n\t\t\t\t\tmmu.waitPrefetch(pc);\n\t\t\t\t}\n\t\t\t\tgprs[this.PC] += this.instructionWidth;\n\t\t\t\tif (!instruction.fixedJump) {\n\t\t\t\t\tthis.instruction = null;\n\t\t\t\t} else if  (this.instruction != null) {\n\t\t\t\t\tif (instruction.next == null || instruction.next.page.invalid) {\n\t\t\t\t\t\tinstruction.next = this.loadInstruction(gprs[this.PC] - this.instructionWidth);\n\t\t\t\t\t}\n\t\t\t\t\tthis.instruction = instruction.next;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.instruction = null;\n\t\t\t}\n\t\t}\n\t\tthis.irq.updateTimers();\n\t};\n};\n\nARMCore.prototype.freeze = function() {\n\treturn {\n\t\t'gprs': [\n\t\t\tthis.gprs[0],\n\t\t\tthis.gprs[1],\n\t\t\tthis.gprs[2],\n\t\t\tthis.gprs[3],\n\t\t\tthis.gprs[4],\n\t\t\tthis.gprs[5],\n\t\t\tthis.gprs[6],\n\t\t\tthis.gprs[7],\n\t\t\tthis.gprs[8],\n\t\t\tthis.gprs[9],\n\t\t\tthis.gprs[10],\n\t\t\tthis.gprs[11],\n\t\t\tthis.gprs[12],\n\t\t\tthis.gprs[13],\n\t\t\tthis.gprs[14],\n\t\t\tthis.gprs[15],\n\t\t],\n\t\t'mode': this.mode,\n\t\t'cpsrI': this.cpsrI,\n\t\t'cpsrF': this.cpsrF,\n\t\t'cpsrV': this.cpsrV,\n\t\t'cpsrC': this.cpsrC,\n\t\t'cpsrZ': this.cpsrZ,\n\t\t'cpsrN': this.cpsrN,\n\t\t'bankedRegisters': [\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[0][0],\n\t\t\t\tthis.bankedRegisters[0][1],\n\t\t\t\tthis.bankedRegisters[0][2],\n\t\t\t\tthis.bankedRegisters[0][3],\n\t\t\t\tthis.bankedRegisters[0][4],\n\t\t\t\tthis.bankedRegisters[0][5],\n\t\t\t\tthis.bankedRegisters[0][6]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[1][0],\n\t\t\t\tthis.bankedRegisters[1][1],\n\t\t\t\tthis.bankedRegisters[1][2],\n\t\t\t\tthis.bankedRegisters[1][3],\n\t\t\t\tthis.bankedRegisters[1][4],\n\t\t\t\tthis.bankedRegisters[1][5],\n\t\t\t\tthis.bankedRegisters[1][6]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[2][0],\n\t\t\t\tthis.bankedRegisters[2][1]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[3][0],\n\t\t\t\tthis.bankedRegisters[3][1]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[4][0],\n\t\t\t\tthis.bankedRegisters[4][1]\n\t\t\t],\n\t\t\t[\n\t\t\t\tthis.bankedRegisters[5][0],\n\t\t\t\tthis.bankedRegisters[5][1]\n\t\t\t]\n\t\t],\n\t\t'spsr': this.spsr,\n\t\t'bankedSPSRs': [\n\t\t\tthis.bankedSPSRs[0],\n\t\t\tthis.bankedSPSRs[1],\n\t\t\tthis.bankedSPSRs[2],\n\t\t\tthis.bankedSPSRs[3],\n\t\t\tthis.bankedSPSRs[4],\n\t\t\tthis.bankedSPSRs[5]\n\t\t],\n\t\t'cycles': this.cycles\n\t};\n};\n\nARMCore.prototype.defrost = function(frost) {\n\tthis.instruction = null;\n\n\tthis.page = null;\n\tthis.pageId = 0;\n\tthis.pageRegion = -1;\n\n\tthis.gprs[0] = frost.gprs[0];\n\tthis.gprs[1] = frost.gprs[1];\n\tthis.gprs[2] = frost.gprs[2];\n\tthis.gprs[3] = frost.gprs[3];\n\tthis.gprs[4] = frost.gprs[4];\n\tthis.gprs[5] = frost.gprs[5];\n\tthis.gprs[6] = frost.gprs[6];\n\tthis.gprs[7] = frost.gprs[7];\n\tthis.gprs[8] = frost.gprs[8];\n\tthis.gprs[9] = frost.gprs[9];\n\tthis.gprs[10] = frost.gprs[10];\n\tthis.gprs[11] = frost.gprs[11];\n\tthis.gprs[12] = frost.gprs[12];\n\tthis.gprs[13] = frost.gprs[13];\n\tthis.gprs[14] = frost.gprs[14];\n\tthis.gprs[15] = frost.gprs[15];\n\n\tthis.mode = frost.mode;\n\tthis.cpsrI = frost.cpsrI;\n\tthis.cpsrF = frost.cpsrF;\n\tthis.cpsrV = frost.cpsrV;\n\tthis.cpsrC = frost.cpsrC;\n\tthis.cpsrZ = frost.cpsrZ;\n\tthis.cpsrN = frost.cpsrN;\n\n\tthis.bankedRegisters[0][0] = frost.bankedRegisters[0][0];\n\tthis.bankedRegisters[0][1] = frost.bankedRegisters[0][1];\n\tthis.bankedRegisters[0][2] = frost.bankedRegisters[0][2];\n\tthis.bankedRegisters[0][3] = frost.bankedRegisters[0][3];\n\tthis.bankedRegisters[0][4] = frost.bankedRegisters[0][4];\n\tthis.bankedRegisters[0][5] = frost.bankedRegisters[0][5];\n\tthis.bankedRegisters[0][6] = frost.bankedRegisters[0][6];\n\n\tthis.bankedRegisters[1][0] = frost.bankedRegisters[1][0];\n\tthis.bankedRegisters[1][1] = frost.bankedRegisters[1][1];\n\tthis.bankedRegisters[1][2] = frost.bankedRegisters[1][2];\n\tthis.bankedRegisters[1][3] = frost.bankedRegisters[1][3];\n\tthis.bankedRegisters[1][4] = frost.bankedRegisters[1][4];\n\tthis.bankedRegisters[1][5] = frost.bankedRegisters[1][5];\n\tthis.bankedRegisters[1][6] = frost.bankedRegisters[1][6];\n\n\tthis.bankedRegisters[2][0] = frost.bankedRegisters[2][0];\n\tthis.bankedRegisters[2][1] = frost.bankedRegisters[2][1];\n\n\tthis.bankedRegisters[3][0] = frost.bankedRegisters[3][0];\n\tthis.bankedRegisters[3][1] = frost.bankedRegisters[3][1];\n\n\tthis.bankedRegisters[4][0] = frost.bankedRegisters[4][0];\n\tthis.bankedRegisters[4][1] = frost.bankedRegisters[4][1];\n\n\tthis.bankedRegisters[5][0] = frost.bankedRegisters[5][0];\n\tthis.bankedRegisters[5][1] = frost.bankedRegisters[5][1];\n\n\tthis.spsr = frost.spsr;\n\tthis.bankedSPSRs[0] = frost.bankedSPSRs[0];\n\tthis.bankedSPSRs[1] = frost.bankedSPSRs[1];\n\tthis.bankedSPSRs[2] = frost.bankedSPSRs[2];\n\tthis.bankedSPSRs[3] = frost.bankedSPSRs[3];\n\tthis.bankedSPSRs[4] = frost.bankedSPSRs[4];\n\tthis.bankedSPSRs[5] = frost.bankedSPSRs[5];\n\n\tthis.cycles = frost.cycles;\n};\n\nARMCore.prototype.fetchPage = function(address) {\n\tvar region = address >> this.mmu.BASE_OFFSET;\n\tvar pageId = this.mmu.addressToPage(region, address & this.mmu.OFFSET_MASK);\n\tif (region == this.pageRegion) {\n\t\tif (pageId == this.pageId && !this.page.invalid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.pageId = pageId;\n\t} else {\n\t\tthis.pageMask = this.mmu.memory[region].PAGE_MASK;\n\t\tthis.pageRegion = region;\n\t\tthis.pageId = pageId;\n\t}\n\n\tthis.page = this.mmu.accessPage(region, pageId);\n};\n\nARMCore.prototype.loadInstructionArm = function(address) {\n\tvar next = null;\n\tthis.fetchPage(address);\n\tvar offset = (address & this.pageMask) >> 2;\n\tnext = this.page.arm[offset];\n\tif (next) {\n\t\treturn next;\n\t}\n\tvar instruction = this.mmu.load32(address) >>> 0;\n\tnext = this.compileArm(instruction);\n\tnext.next = null;\n\tnext.page = this.page;\n\tnext.address = address;\n\tnext.opcode = instruction;\n\tthis.page.arm[offset] = next;\n\treturn next;\n};\n\nARMCore.prototype.loadInstructionThumb = function(address) {\n\tvar next = null;\n\tthis.fetchPage(address);\n\tvar offset = (address & this.pageMask) >> 1;\n\tnext = this.page.thumb[offset];\n\tif (next) {\n\t\treturn next;\n\t}\n\tvar instruction = this.mmu.load16(address);\n\tnext = this.compileThumb(instruction);\n\tnext.next = null;\n\tnext.page = this.page;\n\tnext.address = address;\n\tnext.opcode = instruction;\n\tthis.page.thumb[offset] = next;\n\treturn next;\n};\n\nARMCore.prototype.selectBank = function(mode) {\n\tswitch (mode) {\n\tcase this.MODE_USER:\n\tcase this.MODE_SYSTEM:\n\t\t// No banked registers\n\t\treturn this.BANK_NONE;\n\tcase this.MODE_FIQ:\n\t\treturn this.BANK_FIQ;\n\tcase this.MODE_IRQ:\n\t\treturn this.BANK_IRQ;\n\tcase this.MODE_SUPERVISOR:\n\t\treturn this.BANK_SUPERVISOR;\n\tcase this.MODE_ABORT:\n\t\treturn this.BANK_ABORT;\n\tcase this.MODE_UNDEFINED:\n\t\treturn this.BANK_UNDEFINED;\n\tdefault:\n\t\tthrow \"Invalid user mode passed to selectBank\";\n\t}\n};\n\nARMCore.prototype.switchExecMode = function(newMode) {\n\tif (this.execMode != newMode) {\n\t\tthis.execMode = newMode;\n\t\tif (newMode == this.MODE_ARM) {\n\t\t\tthis.instructionWidth = this.WORD_SIZE_ARM;\n\t\t\tthis.loadInstruction = this.loadInstructionArm;\n\t\t} else {\n\t\t\tthis.instructionWidth = this.WORD_SIZE_THUMB;\n\t\t\tthis.loadInstruction = this.loadInstructionThumb;\n\t\t}\n\t}\n\t\n};\n\nARMCore.prototype.switchMode = function(newMode) {\n\tif (newMode == this.mode) {\n\t\t// Not switching modes after all\n\t\treturn;\n\t}\n\tif (newMode != this.MODE_USER || newMode != this.MODE_SYSTEM) {\n\t\t// Switch banked registers\n\t\tvar newBank = this.selectBank(newMode);\n\t\tvar oldBank = this.selectBank(this.mode);\n\t\tif (newBank != oldBank) {\n\t\t\t// TODO: support FIQ\n\t\t\tif (newMode == this.MODE_FIQ || this.mode == this.MODE_FIQ) {\n\t\t\t\tvar oldFiqBank = (oldBank == this.BANK_FIQ) + 0;\n\t\t\t\tvar newFiqBank = (newBank == this.BANK_FIQ) + 0;\n\t\t\t\tthis.bankedRegisters[oldFiqBank][2] = this.gprs[8];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][3] = this.gprs[9];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][4] = this.gprs[10];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][5] = this.gprs[11];\n\t\t\t\tthis.bankedRegisters[oldFiqBank][6] = this.gprs[12];\n\t\t\t\tthis.gprs[8] = this.bankedRegisters[newFiqBank][2];\n\t\t\t\tthis.gprs[9] = this.bankedRegisters[newFiqBank][3];\n\t\t\t\tthis.gprs[10] = this.bankedRegisters[newFiqBank][4];\n\t\t\t\tthis.gprs[11] = this.bankedRegisters[newFiqBank][5];\n\t\t\t\tthis.gprs[12] = this.bankedRegisters[newFiqBank][6];\n\t\t\t}\n\t\t\tthis.bankedRegisters[oldBank][0] = this.gprs[this.SP];\n\t\t\tthis.bankedRegisters[oldBank][1] = this.gprs[this.LR];\n\t\t\tthis.gprs[this.SP] = this.bankedRegisters[newBank][0];\n\t\t\tthis.gprs[this.LR] = this.bankedRegisters[newBank][1];\n\n\t\t\tthis.bankedSPSRs[oldBank] = this.spsr;\n\t\t\tthis.spsr = this.bankedSPSRs[newBank];\n\t\t}\n\t}\n\tthis.mode = newMode;\n};\n\nARMCore.prototype.packCPSR = function() {\n\treturn this.mode | (!!this.execMode << 5) | (!!this.cpsrF << 6) | (!!this.cpsrI << 7) |\n\t       (!!this.cpsrN << 31) | (!!this.cpsrZ << 30) | (!!this.cpsrC << 29) | (!!this.cpsrV << 28);\n};\n\nARMCore.prototype.unpackCPSR = function(spsr) {\n\tthis.switchMode(spsr & 0x0000001F);\n\tthis.switchExecMode(!!(spsr & 0x00000020));\n\tthis.cpsrF = spsr & 0x00000040;\n\tthis.cpsrI = spsr & 0x00000080;\n\tthis.cpsrN = spsr & 0x80000000;\n\tthis.cpsrZ = spsr & 0x40000000;\n\tthis.cpsrC = spsr & 0x20000000;\n\tthis.cpsrV = spsr & 0x10000000;\n\n\tthis.irq.testIRQ();\n};\n\nARMCore.prototype.hasSPSR = function() {\n\treturn this.mode != this.MODE_SYSTEM && this.mode != this.MODE_USER;\n};\n\nARMCore.prototype.raiseIRQ = function() {\n\tif (this.cpsrI) {\n\t\treturn;\n\t}\n\tvar cpsr = this.packCPSR();\n\tvar instructionWidth = this.instructionWidth;\n\tthis.switchMode(this.MODE_IRQ);\n\tthis.spsr = cpsr;\n\tthis.gprs[this.LR] = this.gprs[this.PC] - instructionWidth + 4;\n\tthis.gprs[this.PC] = this.BASE_IRQ + this.WORD_SIZE_ARM;\n\tthis.instruction = null;\n\tthis.switchExecMode(this.MODE_ARM);\n\tthis.cpsrI = true;\n};\n\nARMCore.prototype.raiseTrap = function() {\n\tvar cpsr = this.packCPSR();\n\tvar instructionWidth = this.instructionWidth;\n\tthis.switchMode(this.MODE_SUPERVISOR);\n\tthis.spsr = cpsr;\n\tthis.gprs[this.LR] = this.gprs[this.PC] - instructionWidth;\n\tthis.gprs[this.PC] = this.BASE_SWI + this.WORD_SIZE_ARM;\n\tthis.instruction = null;\n\tthis.switchExecMode(this.MODE_ARM);\n\tthis.cpsrI = true;\n};\n\nARMCore.prototype.badOp = function(instruction) {\n\tvar func = function() {\n\t\tthrow \"Illegal instruction: 0x\" + instruction.toString(16);\n\t};\n\tfunc.writesPC = true;\n\tfunc.fixedJump = false;\n\treturn func;\n};\n\nARMCore.prototype.generateConds = function() {\n\tvar cpu = this;\n\tthis.conds = [\n\t\t// EQ\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrZ;\n\t\t},\n\t\t// NE\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrZ;\n\t\t},\n\t\t// CS\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrC;\n\t\t},\n\t\t// CC\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrC;\n\t\t},\n\t\t// MI\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrN;\n\t\t},\n\t\t// PL\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrN;\n\t\t},\n\t\t// VS\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrV;\n\t\t},\n\t\t// VC\n\t\tfunction() {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrV;\n\t\t},\n\t\t// HI\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrC && !cpu.cpsrZ;\n\t\t},\n\t\t// LS\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrC || cpu.cpsrZ;\n\t\t},\n\t\t// GE\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrN == !cpu.cpsrV;\n\t\t},\n\t\t// LT\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrN != !cpu.cpsrV;\n\t\t},\n\t\t// GT\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = !cpu.cpsrZ && !cpu.cpsrN == !cpu.cpsrV;\n\t\t},\n\t\t// LE\n\t\tfunction () {\n\t\t\treturn cpu.conditionPassed = cpu.cpsrZ || !cpu.cpsrN != !cpu.cpsrV;\n\t\t},\n\t\t// AL\n\t\tnull,\n\t\tnull\n\t]\n}\n\nARMCore.prototype.barrelShiftImmediate = function(shiftType, immediate, rm) {\n\tvar cpu = this;\n\tvar gprs = this.gprs;\n\tvar shiftOp = this.badOp;\n\tswitch (shiftType) {\n\tcase 0x00000000:\n\t\t// LSL\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm] << immediate;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (32 - immediate));\n\t\t\t};\n\t\t} else {\n\t\t\t// This boils down to no shift\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm];\n\t\t\t\tcpu.shifterCarryOut = cpu.cpsrC;\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 0x00000020:\n\t\t// LSR\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm] >>> immediate;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (immediate - 1));\n\t\t\t};\n\t\t} else {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = 0;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & 0x80000000;\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 0x00000040:\n\t\t// ASR\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = gprs[rm] >> immediate;\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (immediate - 1));\n\t\t\t};\n\t\t} else {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & 0x80000000;\n\t\t\t\tif (cpu.shifterCarryOut) {\n\t\t\t\t\tcpu.shifterOperand = 0xFFFFFFFF;\n\t\t\t\t} else {\n\t\t\t\t\tcpu.shifterOperand = 0;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 0x00000060:\n\t\t// ROR\n\t\tif (immediate) {\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = (gprs[rm] >>> immediate) | (gprs[rm] << (32 - immediate));\n\t\t\t\tcpu.shifterCarryOut = gprs[rm] & (1 << (immediate - 1));\n\t\t\t};\n\t\t} else {\n\t\t\t// RRX\n\t\t\tshiftOp = function() {\n\t\t\t\tcpu.shifterOperand = (!!cpu.cpsrC << 31) | (gprs[rm] >>> 1);\n\t\t\t\tcpu.shifterCarryOut =  gprs[rm] & 0x00000001;\n\t\t\t};\n\t\t}\n\t\tbreak;\n\t}\n\treturn shiftOp;\n}\n\nARMCore.prototype.compileArm = function(instruction) {\n\tvar op = this.badOp(instruction);\n\tvar i = instruction & 0x0E000000;\n\tvar cpu = this;\n\tvar gprs = this.gprs;\n\n\tvar condOp = this.conds[(instruction & 0xF0000000) >>> 28];\n\tif ((instruction & 0x0FFFFFF0) == 0x012FFF10) {\n\t\t// BX\n\t\tvar rm = instruction & 0xF;\n\t\top = this.armCompiler.constructBX(rm, condOp);\n\t\top.writesPC = true;\n\t\top.fixedJump = false;\n\t} else if (!(instruction & 0x0C000000) && (i == 0x02000000 || (instruction & 0x00000090) != 0x00000090)) {\n\t\tvar opcode = instruction & 0x01E00000;\n\t\tvar s = instruction & 0x00100000;\n\t\tvar shiftsRs = false;\n\t\tif ((opcode & 0x01800000) == 0x01000000 && !s) {\n\t\t\tvar r = instruction & 0x00400000;\n\t\t\tif ((instruction & 0x00B0F000) == 0x0020F000) {\n\t\t\t\t// MSR\n\t\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\t\tvar immediate = instruction & 0x000000FF;\n\t\t\t\tvar rotateImm = (instruction & 0x00000F00) >> 7;\n\t\t\t\timmediate = (immediate >>> rotateImm) | (immediate << (32 - rotateImm));\n\t\t\t\top = this.armCompiler.constructMSR(rm, r, instruction, immediate, condOp);\n\t\t\t\top.writesPC = false;\n\t\t\t} else if ((instruction & 0x00BF0000) == 0x000F0000) {\n\t\t\t\t// MRS\n\t\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\t\t\t\top = this.armCompiler.constructMRS(rd, r, condOp);\n\t\t\t\top.writesPC = rd == this.PC;\n\t\t\t}\n\t\t} else {\n\t\t\t// Data processing/FSR transfer\n\t\t\tvar rn = (instruction & 0x000F0000) >> 16;\n\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\n\t\t\t// Parse shifter operand\n\t\t\tvar shiftType = instruction & 0x00000060;\n\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\tvar shiftOp = function() {\n\t\t\t\tthrow 'BUG: invalid barrel shifter';\n\t\t\t};\n\t\t\tif (instruction & 0x02000000) {\n\t\t\t\tvar immediate = instruction & 0x000000FF;\n\t\t\t\tvar rotate = (instruction & 0x00000F00) >> 7;\n\t\t\t\tif (!rotate) {\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1Immediate(immediate);\n\t\t\t\t} else {\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1ImmediateRotate(immediate, rotate);\n\t\t\t\t}\n\t\t\t} else if (instruction & 0x00000010) {\n\t\t\t\tvar rs = (instruction & 0x00000F00) >> 8;\n\t\t\t\tshiftsRs = true;\n\t\t\t\tswitch (shiftType) {\n\t\t\t\tcase 0x00000000:\n\t\t\t\t\t// LSL\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1LSL(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00000020:\n\t\t\t\t\t// LSR\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1LSR(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00000040:\n\t\t\t\t\t// ASR\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1ASR(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00000060:\n\t\t\t\t\t// ROR\n\t\t\t\t\tshiftOp = this.armCompiler.constructAddressingMode1ROR(rs, rm);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar immediate = (instruction & 0x00000F80) >> 7;\n\t\t\t\tshiftOp = this.barrelShiftImmediate(shiftType, immediate, rm);\n\t\t\t}\n\n\t\t\tswitch (opcode) {\n\t\t\tcase 0x00000000:\n\t\t\t\t// AND\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructANDS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructAND(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00200000:\n\t\t\t\t// EOR\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructEORS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructEOR(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00400000:\n\t\t\t\t// SUB\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructSUBS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructSUB(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00600000:\n\t\t\t\t// RSB\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructRSBS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructRSB(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00800000:\n\t\t\t\t// ADD\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructADDS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructADD(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00A00000:\n\t\t\t\t// ADC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructADCS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructADC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00C00000:\n\t\t\t\t// SBC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructSBCS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructSBC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x00E00000:\n\t\t\t\t// RSC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructRSCS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructRSC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01000000:\n\t\t\t\t// TST\n\t\t\t\top = this.armCompiler.constructTST(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01200000:\n\t\t\t\t// TEQ\n\t\t\t\top = this.armCompiler.constructTEQ(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01400000:\n\t\t\t\t// CMP\n\t\t\t\top = this.armCompiler.constructCMP(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01600000:\n\t\t\t\t// CMN\n\t\t\t\top = this.armCompiler.constructCMN(rd, rn, shiftOp, condOp);\n\t\t\t\tbreak;\n\t\t\tcase 0x01800000:\n\t\t\t\t// ORR\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructORRS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructORR(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01A00000:\n\t\t\t\t// MOV\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructMOVS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructMOV(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01C00000:\n\t\t\t\t// BIC\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructBICS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructBIC(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 0x01E00000:\n\t\t\t\t// MVN\n\t\t\t\tif (s) {\n\t\t\t\t\top = this.armCompiler.constructMVNS(rd, rn, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructMVN(rd, rn, shiftOp, condOp);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\top.writesPC = rd == this.PC;\n\t\t}\n\t} else if ((instruction & 0x0FB00FF0) == 0x01000090) {\n\t\t// Single data swap\n\t\tvar rm = instruction & 0x0000000F;\n\t\tvar rd = (instruction >> 12) & 0x0000000F;\n\t\tvar rn = (instruction >> 16) & 0x0000000F;\n\t\tif (instruction & 0x00400000) {\n\t\t\top = this.armCompiler.constructSWPB(rd, rn, rm, condOp);\n\t\t} else {\n\t\t\top = this.armCompiler.constructSWP(rd, rn, rm, condOp);\n\t\t}\n\t\top.writesPC = rd == this.PC;\n\t} else {\n\t\tswitch (i) {\n\t\tcase 0x00000000:\n\t\t\tif ((instruction & 0x010000F0) == 0x00000090) {\n\t\t\t\t// Multiplies\n\t\t\t\tvar rd = (instruction & 0x000F0000) >> 16;\n\t\t\t\tvar rn = (instruction & 0x0000F000) >> 12;\n\t\t\t\tvar rs = (instruction & 0x00000F00) >> 8;\n\t\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\t\tswitch (instruction & 0x00F00000) {\n\t\t\t\tcase 0x00000000:\n\t\t\t\t\t// MUL\n\t\t\t\t\top = this.armCompiler.constructMUL(rd, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00100000:\n\t\t\t\t\t// MULS\n\t\t\t\t\top = this.armCompiler.constructMULS(rd, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00200000:\n\t\t\t\t\t// MLA\n\t\t\t\t\top = this.armCompiler.constructMLA(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak\n\t\t\t\tcase 0x00300000:\n\t\t\t\t\t// MLAS\n\t\t\t\t\top = this.armCompiler.constructMLAS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00800000:\n\t\t\t\t\t// UMULL\n\t\t\t\t\top = this.armCompiler.constructUMULL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00900000:\n\t\t\t\t\t// UMULLS\n\t\t\t\t\top = this.armCompiler.constructUMULLS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00A00000:\n\t\t\t\t\t// UMLAL\n\t\t\t\t\top = this.armCompiler.constructUMLAL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00B00000:\n\t\t\t\t\t// UMLALS\n\t\t\t\t\top = this.armCompiler.constructUMLALS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00C00000:\n\t\t\t\t\t// SMULL\n\t\t\t\t\top = this.armCompiler.constructSMULL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00D00000:\n\t\t\t\t\t// SMULLS\n\t\t\t\t\top = this.armCompiler.constructSMULLS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00E00000:\n\t\t\t\t\t// SMLAL\n\t\t\t\t\top = this.armCompiler.constructSMLAL(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x00F00000:\n\t\t\t\t\t// SMLALS\n\t\t\t\t\top = this.armCompiler.constructSMLALS(rd, rn, rs, rm, condOp);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\top.writesPC = rd == this.PC;\n\t\t\t} else {\n\t\t\t\t// Halfword and signed byte data transfer\n\t\t\t\tvar load = instruction & 0x00100000;\n\t\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\t\t\t\tvar hiOffset = (instruction & 0x00000F00) >> 4;\n\t\t\t\tvar loOffset = rm = instruction & 0x0000000F;\n\t\t\t\tvar h = instruction & 0x00000020;\n\t\t\t\tvar s = instruction & 0x00000040;\n\t\t\t\tvar w = instruction & 0x00200000;\n\t\t\t\tvar i = instruction & 0x00400000;\n\n\t\t\t\tvar address;\n\t\t\t\tif (i) {\n\t\t\t\t\tvar immediate = loOffset | hiOffset;\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode23Immediate(instruction, immediate, condOp);\n\t\t\t\t} else {\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode23Register(instruction, rm, condOp);\n\t\t\t\t}\n\t\t\t\taddress.writesPC = !!w && rn == this.PC;\n\n\t\t\t\tif ((instruction & 0x00000090) == 0x00000090) {\n\t\t\t\t\tif (load) {\n\t\t\t\t\t\t// Load [signed] halfword/byte\n\t\t\t\t\t\tif (h) {\n\t\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\t\t// LDRSH\n\t\t\t\t\t\t\t\top = this.armCompiler.constructLDRSH(rd, address, condOp);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// LDRH\n\t\t\t\t\t\t\t\top = this.armCompiler.constructLDRH(rd, address, condOp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\t\t// LDRSB\n\t\t\t\t\t\t\t\top = this.armCompiler.constructLDRSB(rd, address, condOp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (!s && h) {\n\t\t\t\t\t\t// STRH\n\t\t\t\t\t\top = this.armCompiler.constructSTRH(rd, address, condOp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\top.writesPC = rd == this.PC || address.writesPC;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x04000000:\n\t\tcase 0x06000000:\n\t\t\t// LDR/STR\n\t\t\tvar rd = (instruction & 0x0000F000) >> 12;\n\t\t\tvar load = instruction & 0x00100000;\n\t\t\tvar b = instruction & 0x00400000;\n\t\t\tvar i = instruction & 0x02000000;\n\n\t\t\tvar address = function() {\n\t\t\t\tthrow \"Unimplemented memory access: 0x\" + instruction.toString(16);\n\t\t\t};\n\t\t\tif (~instruction & 0x01000000) {\n\t\t\t\t// Clear the W bit if the P bit is clear--we don't support memory translation, so these turn into regular accesses\n\t\t\t\tinstruction &= 0xFFDFFFFF;\n\t\t\t}\n\t\t\tif (i) {\n\t\t\t\t// Register offset\n\t\t\t\tvar rm = instruction & 0x0000000F;\n\t\t\t\tvar shiftType = instruction & 0x00000060;\n\t\t\t\tvar shiftImmediate = (instruction & 0x00000F80) >> 7;\n\t\t\t\t\n\t\t\t\tif (shiftType || shiftImmediate) {\n\t\t\t\t\tvar shiftOp = this.barrelShiftImmediate(shiftType, shiftImmediate, rm);\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode2RegisterShifted(instruction, shiftOp, condOp);\n\t\t\t\t} else {\n\t\t\t\t\taddress = this.armCompiler.constructAddressingMode23Register(instruction, rm, condOp);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Immediate\n\t\t\t\tvar offset = instruction & 0x00000FFF;\n\t\t\t\taddress = this.armCompiler.constructAddressingMode23Immediate(instruction, offset, condOp);\n\t\t\t}\n\t\t\tif (load) {\n\t\t\t\tif (b) {\n\t\t\t\t\t// LDRB\n\t\t\t\t\top = this.armCompiler.constructLDRB(rd, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\t// LDR\n\t\t\t\t\top = this.armCompiler.constructLDR(rd, address, condOp);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (b) {\n\t\t\t\t\t// STRB\n\t\t\t\t\top = this.armCompiler.constructSTRB(rd, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\t// STR\n\t\t\t\t\top = this.armCompiler.constructSTR(rd, address, condOp);\n\t\t\t\t}\n\t\t\t}\n\t\t\top.writesPC = rd == this.PC || address.writesPC;\n\t\t\tbreak;\n\t\tcase 0x08000000:\n\t\t\t// Block data transfer\n\t\t\tvar load = instruction & 0x00100000;\n\t\t\tvar w = instruction & 0x00200000;\n\t\t\tvar user = instruction & 0x00400000;\n\t\t\tvar u = instruction & 0x00800000;\n\t\t\tvar p = instruction & 0x01000000;\n\t\t\tvar rs = instruction & 0x0000FFFF;\n\t\t\tvar rn = (instruction & 0x000F0000) >> 16;\n\n\t\t\tvar address;\n\t\t\tvar immediate = 0;\n\t\t\tvar offset = 0;\n\t\t\tvar overlap = false;\n\t\t\tif (u) {\n\t\t\t\tif (p) {\n\t\t\t\t\timmediate = 4;\n\t\t\t\t}\n\t\t\t\tfor (var m = 0x01, i = 0; i < 16; m <<= 1, ++i) {\n\t\t\t\t\tif (rs & m) {\n\t\t\t\t\t\tif (w && i == rn && !offset) {\n\t\t\t\t\t\t\trs &= ~m;\n\t\t\t\t\t\t\timmediate += 4;\n\t\t\t\t\t\t\toverlap = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset += 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!p) {\n\t\t\t\t\timmediate = 4;\n\t\t\t\t}\n\t\t\t\tfor (var m = 0x01, i = 0; i < 16; m <<= 1, ++i) {\n\t\t\t\t\tif (rs & m) {\n\t\t\t\t\t\tif (w && i == rn && !offset) {\n\t\t\t\t\t\t\trs &= ~m;\n\t\t\t\t\t\t\timmediate += 4;\n\t\t\t\t\t\t\toverlap = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\timmediate -= 4;\n\t\t\t\t\t\toffset -= 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (w) {\n\t\t\t\taddress = this.armCompiler.constructAddressingMode4Writeback(immediate, offset, rn, overlap);\n\t\t\t} else {\n\t\t\t\taddress = this.armCompiler.constructAddressingMode4(immediate, rn);\n\t\t\t}\n\t\t\tif (load) {\n\t\t\t\t// LDM\n\t\t\t\tif (user) {\n\t\t\t\t\top = this.armCompiler.constructLDMS(rs, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructLDM(rs, address, condOp);\n\t\t\t\t}\n\t\t\t\top.writesPC = !!(rs & (1 << 15));\n\t\t\t} else {\n\t\t\t\t// STM\n\t\t\t\tif (user) {\n\t\t\t\t\top = this.armCompiler.constructSTMS(rs, address, condOp);\n\t\t\t\t} else {\n\t\t\t\t\top = this.armCompiler.constructSTM(rs, address, condOp);\n\t\t\t\t}\n\t\t\t\top.writesPC = false;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x0A000000:\n\t\t\t// Branch\n\t\t\tvar immediate = instruction & 0x00FFFFFF;\n\t\t\tif (immediate & 0x00800000) {\n\t\t\t\timmediate |= 0xFF000000;\n\t\t\t}\n\t\t\timmediate <<= 2;\n\t\t\tvar link = instruction & 0x01000000;\n\t\t\tif (link) {\n\t\t\t\top = this.armCompiler.constructBL(immediate, condOp);\n\t\t\t} else {\n\t\t\t\top = this.armCompiler.constructB(immediate, condOp);\n\t\t\t}\n\t\t\top.writesPC = true;\n\t\t\top.fixedJump = true;\n\t\t\tbreak;\n\t\tcase 0x0C000000:\n\t\t\t// Coprocessor data transfer\n\t\t\tbreak;\n\t\tcase 0x0E000000:\n\t\t\t// Coprocessor data operation/SWI\n\t\t\tif ((instruction & 0x0F000000) == 0x0F000000) {\n\t\t\t\t// SWI\n\t\t\t\tvar immediate = (instruction & 0x00FFFFFF);\n\t\t\t\top = this.armCompiler.constructSWI(immediate, condOp);\n\t\t\t\top.writesPC = false;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow 'Bad opcode: 0x' + instruction.toString(16);\n\t\t}\n\t}\n\n\top.execMode = this.MODE_ARM;\n\top.fixedJump = op.fixedJump || false;\n\treturn op;\n};\n\nARMCore.prototype.compileThumb = function(instruction) {\n\tvar op = this.badOp(instruction & 0xFFFF);\n\tvar cpu = this;\n\tvar gprs = this.gprs;\n\tif ((instruction & 0xFC00) == 0x4000) {\n\t\t// Data-processing register\n\t\tvar rm = (instruction & 0x0038) >> 3;\n\t\tvar rd = instruction & 0x0007;\n\t\tswitch (instruction & 0x03C0) {\n\t\tcase 0x0000:\n\t\t\t// AND\n\t\t\top = this.thumbCompiler.constructAND(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0040:\n\t\t\t// EOR\n\t\t\top = this.thumbCompiler.constructEOR(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0080:\n\t\t\t// LSL(2)\n\t\t\top = this.thumbCompiler.constructLSL2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x00C0:\n\t\t\t// LSR(2)\n\t\t\top = this.thumbCompiler.constructLSR2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0100:\n\t\t\t// ASR(2)\n\t\t\top = this.thumbCompiler.constructASR2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0140:\n\t\t\t// ADC\n\t\t\top = this.thumbCompiler.constructADC(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0180:\n\t\t\t// SBC\n\t\t\top = this.thumbCompiler.constructSBC(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x01C0:\n\t\t\t// ROR\n\t\t\top = this.thumbCompiler.constructROR(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// TST\n\t\t\top = this.thumbCompiler.constructTST(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0240:\n\t\t\t// NEG\n\t\t\top = this.thumbCompiler.constructNEG(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0280:\n\t\t\t// CMP(2)\n\t\t\top = this.thumbCompiler.constructCMP2(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x02C0:\n\t\t\t// CMN\n\t\t\top = this.thumbCompiler.constructCMN(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0300:\n\t\t\t// ORR\n\t\t\top = this.thumbCompiler.constructORR(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0340:\n\t\t\t// MUL\n\t\t\top = this.thumbCompiler.constructMUL(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x0380:\n\t\t\t// BIC\n\t\t\top = this.thumbCompiler.constructBIC(rd, rm);\n\t\t\tbreak;\n\t\tcase 0x03C0:\n\t\t\t// MVN\n\t\t\top = this.thumbCompiler.constructMVN(rd, rm);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xFC00) == 0x4400) {\n\t\t// Special data processing / branch/exchange instruction set\n\t\tvar rm = (instruction & 0x0078) >> 3;\n\t\tvar rn = instruction & 0x0007;\n\t\tvar h1 = instruction & 0x0080;\n\t\tvar rd = rn | (h1 >> 4);\n\t\tswitch (instruction & 0x0300) {\n\t\tcase 0x0000:\n\t\t\t// ADD(4)\n\t\t\top = this.thumbCompiler.constructADD4(rd, rm)\n\t\t\top.writesPC = rd == this.PC;\n\t\t\tbreak;\n\t\tcase 0x0100:\n\t\t\t// CMP(3)\n\t\t\top = this.thumbCompiler.constructCMP3(rd, rm);\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// MOV(3)\n\t\t\top = this.thumbCompiler.constructMOV3(rd, rm);\n\t\t\top.writesPC = rd == this.PC;\n\t\t\tbreak;\n\t\tcase 0x0300:\n\t\t\t// BX\n\t\t\top = this.thumbCompiler.constructBX(rd, rm);\n\t\t\top.writesPC = true;\n\t\t\top.fixedJump = false;\n\t\t\tbreak;\n\t\t}\n\t} else if ((instruction & 0xF800) == 0x1800) {\n\t\t// Add/subtract\n\t\tvar rm = (instruction & 0x01C0) >> 6;\n\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\tvar rd = instruction & 0x0007;\n\t\tswitch (instruction & 0x0600) {\n\t\tcase 0x0000:\n\t\t\t// ADD(3)\n\t\t\top = this.thumbCompiler.constructADD3(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// SUB(3)\n\t\t\top = this.thumbCompiler.constructSUB3(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0400:\n\t\t\tvar immediate = (instruction & 0x01C0) >> 6;\n\t\t\tif (immediate) {\n\t\t\t\t// ADD(1)\n\t\t\t\top = this.thumbCompiler.constructADD1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// MOV(2)\n\t\t\t\top = this.thumbCompiler.constructMOV2(rd, rn, rm);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x0600:\n\t\t\t// SUB(1)\n\t\t\tvar immediate = (instruction & 0x01C0) >> 6;\n\t\t\top = this.thumbCompiler.constructSUB1(rd, rn, immediate);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if (!(instruction & 0xE000)) {\n\t\t// Shift by immediate\n\t\tvar rd = instruction & 0x0007;\n\t\tvar rm = (instruction & 0x0038) >> 3;\n\t\tvar immediate = (instruction & 0x07C0) >> 6;\n\t\tswitch (instruction & 0x1800) {\n\t\tcase 0x0000:\n\t\t\t// LSL(1)\n\t\t\top = this.thumbCompiler.constructLSL1(rd, rm, immediate);\n\t\t\tbreak;\n\t\tcase 0x0800:\n\t\t\t// LSR(1)\n\t\t\top = this.thumbCompiler.constructLSR1(rd, rm, immediate);\n\t\t\tbreak;\n\t\tcase 0x1000:\n\t\t\t// ASR(1)\n\t\t\top = this.thumbCompiler.constructASR1(rd, rm, immediate);\n\t\t\tbreak;\n\t\tcase 0x1800:\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xE000) == 0x2000) {\n\t\t// Add/subtract/compare/move immediate\n\t\tvar immediate = instruction & 0x00FF;\n\t\tvar rn = (instruction & 0x0700) >> 8;\n\t\tswitch (instruction & 0x1800) {\n\t\tcase 0x0000:\n\t\t\t// MOV(1)\n\t\t\top = this.thumbCompiler.constructMOV1(rn, immediate);\n\t\t\tbreak;\n\t\tcase 0x0800:\n\t\t\t// CMP(1)\n\t\t\top = this.thumbCompiler.constructCMP1(rn, immediate);\n\t\t\tbreak;\n\t\tcase 0x1000:\n\t\t\t// ADD(2)\n\t\t\top = this.thumbCompiler.constructADD2(rn, immediate);\n\t\t\tbreak;\n\t\tcase 0x1800:\n\t\t\t// SUB(2)\n\t\t\top = this.thumbCompiler.constructSUB2(rn, immediate);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xF800) == 0x4800) {\n\t\t// LDR(3)\n\t\tvar rd = (instruction & 0x0700) >> 8;\n\t\tvar immediate = (instruction & 0x00FF) << 2;\n\t\top = this.thumbCompiler.constructLDR3(rd, immediate);\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xF000) == 0x5000) {\n\t\t// Load and store with relative offset\n\t\tvar rd = instruction & 0x0007;\n\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\tvar rm = (instruction & 0x01C0) >> 6;\n\t\tvar opcode = instruction & 0x0E00;\n\t\tswitch (opcode) {\n\t\tcase 0x0000:\n\t\t\t// STR(2)\n\t\t\top = this.thumbCompiler.constructSTR2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0200:\n\t\t\t// STRH(2)\n\t\t\top = this.thumbCompiler.constructSTRH2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0400:\n\t\t\t// STRB(2)\n\t\t\top = this.thumbCompiler.constructSTRB2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0600:\n\t\t\t// LDRSB\n\t\t\top = this.thumbCompiler.constructLDRSB(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0800:\n\t\t\t// LDR(2)\n\t\t\top = this.thumbCompiler.constructLDR2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0A00:\n\t\t\t// LDRH(2)\n\t\t\top = this.thumbCompiler.constructLDRH2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0C00:\n\t\t\t// LDRB(2)\n\t\t\top = this.thumbCompiler.constructLDRB2(rd, rn, rm);\n\t\t\tbreak;\n\t\tcase 0x0E00:\n\t\t\t// LDRSH\n\t\t\top = this.thumbCompiler.constructLDRSH(rd, rn, rm);\n\t\t\tbreak;\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xE000) == 0x6000) {\n\t\t// Load and store with immediate offset\n\t\tvar rd = instruction & 0x0007;\n\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\tvar immediate = (instruction & 0x07C0) >> 4;\n\t\tvar b = instruction & 0x1000;\n\t\tif (b) {\n\t\t\timmediate >>= 2;\n\t\t}\n\t\tvar load = instruction & 0x0800;\n\t\tif (load) {\n\t\t\tif (b) {\n\t\t\t\t// LDRB(1)\n\t\t\t\top = this.thumbCompiler.constructLDRB1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// LDR(1)\n\t\t\t\top = this.thumbCompiler.constructLDR1(rd, rn, immediate);\n\t\t\t}\n\t\t} else {\n\t\t\tif (b) {\n\t\t\t\t// STRB(1)\n\t\t\t\top = this.thumbCompiler.constructSTRB1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// STR(1)\n\t\t\t\top = this.thumbCompiler.constructSTR1(rd, rn, immediate);\n\t\t\t}\n\t\t}\n\t\top.writesPC = false;\n\t} else if ((instruction & 0xF600) == 0xB400) {\n\t\t// Push and pop registers\n\t\tvar r = !!(instruction & 0x0100);\n\t\tvar rs = instruction & 0x00FF;\n\t\tif (instruction & 0x0800) {\n\t\t\t// POP\n\t\t\top = this.thumbCompiler.constructPOP(rs, r);\n\t\t\top.writesPC = r;\n\t\t\top.fixedJump = false;\n\t\t} else {\n\t\t\t// PUSH\n\t\t\top = this.thumbCompiler.constructPUSH(rs, r);\n\t\t\top.writesPC = false;\n\t\t}\n\t} else if (instruction & 0x8000) {\n\t\tswitch (instruction & 0x7000) {\n\t\tcase 0x0000:\n\t\t\t// Load and store halfword\n\t\t\tvar rd = instruction & 0x0007;\n\t\t\tvar rn = (instruction & 0x0038) >> 3;\n\t\t\tvar immediate = (instruction & 0x07C0) >> 5;\n\t\t\tif (instruction & 0x0800) {\n\t\t\t\t// LDRH(1)\n\t\t\t\top = this.thumbCompiler.constructLDRH1(rd, rn, immediate);\n\t\t\t} else {\n\t\t\t\t// STRH(1)\n\t\t\t\top = this.thumbCompiler.constructSTRH1(rd, rn, immediate);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x1000:\n\t\t\t// SP-relative load and store\n\t\t\tvar rd = (instruction & 0x0700) >> 8;\n\t\t\tvar immediate = (instruction & 0x00FF) << 2;\n\t\t\tvar load = instruction & 0x0800;\n\t\t\tif (load) {\n\t\t\t\t// LDR(4)\n\t\t\t\top = this.thumbCompiler.constructLDR4(rd, immediate);\n\t\t\t} else {\n\t\t\t\t// STR(3)\n\t\t\t\top = this.thumbCompiler.constructSTR3(rd, immediate);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x2000:\n\t\t\t// Load address\n\t\t\tvar rd = (instruction & 0x0700) >> 8;\n\t\t\tvar immediate = (instruction & 0x00FF) << 2;\n\t\t\tif (instruction & 0x0800) {\n\t\t\t\t// ADD(6)\n\t\t\t\top = this.thumbCompiler.constructADD6(rd, immediate);\n\t\t\t} else {\n\t\t\t\t// ADD(5)\n\t\t\t\top = this.thumbCompiler.constructADD5(rd, immediate);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x3000:\n\t\t\t// Miscellaneous\n\t\t\tif (!(instruction & 0x0F00)) {\n\t\t\t\t// Adjust stack pointer\n\t\t\t\t// ADD(7)/SUB(4)\n\t\t\t\tvar b = instruction & 0x0080;\n\t\t\t\tvar immediate = (instruction & 0x7F) << 2;\n\t\t\t\tif (b) {\n\t\t\t\t\timmediate = -immediate;\n\t\t\t\t}\n\t\t\t\top = this.thumbCompiler.constructADD7(immediate)\n\t\t\t\top.writesPC = false;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x4000:\n\t\t\t// Multiple load and store\n\t\t\tvar rn = (instruction & 0x0700) >> 8;\n\t\t\tvar rs = instruction & 0x00FF;\n\t\t\tif (instruction & 0x0800) {\n\t\t\t\t// LDMIA\n\t\t\t\top = this.thumbCompiler.constructLDMIA(rn, rs);\n\t\t\t} else {\n\t\t\t\t// STMIA\n\t\t\t\top = this.thumbCompiler.constructSTMIA(rn, rs);\n\t\t\t}\n\t\t\top.writesPC = false;\n\t\t\tbreak;\n\t\tcase 0x5000:\n\t\t\t// Conditional branch\n\t\t\tvar cond = (instruction & 0x0F00) >> 8;\n\t\t\tvar immediate = (instruction & 0x00FF);\n\t\t\tif (cond == 0xF) {\n\t\t\t\t// SWI\n\t\t\t\top = this.thumbCompiler.constructSWI(immediate);\n\t\t\t\top.writesPC = false;\n\t\t\t} else {\n\t\t\t\t// B(1)\n\t\t\t\tif (instruction & 0x0080) {\n\t\t\t\t\timmediate |= 0xFFFFFF00;\n\t\t\t\t}\n\t\t\t\timmediate <<= 1;\n\t\t\t\tvar condOp = this.conds[cond];\n\t\t\t\top = this.thumbCompiler.constructB1(immediate, condOp);\n\t\t\t\top.writesPC = true;\n\t\t\t\top.fixedJump = true;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 0x6000:\n\t\tcase 0x7000:\n\t\t\t// BL(X)\n\t\t\tvar immediate = instruction & 0x07FF;\n\t\t\tvar h = instruction & 0x1800;\n\t\t\tswitch (h) {\n\t\t\tcase 0x0000:\n\t\t\t\t// B(2)\n\t\t\t\tif (immediate & 0x0400) {\n\t\t\t\t\timmediate |= 0xFFFFF800;\n\t\t\t\t}\n\t\t\t\timmediate <<= 1;\n\t\t\t\top = this.thumbCompiler.constructB2(immediate);\n\t\t\t\top.writesPC = true;\n\t\t\t\top.fixedJump = true;\n\t\t\t\tbreak;\n\t\t\tcase 0x0800:\n\t\t\t\t// BLX (ARMv5T)\n\t\t\t\t/*op = function() {\n\t\t\t\t\tvar pc = gprs[cpu.PC];\n\t\t\t\t\tgprs[cpu.PC] = (gprs[cpu.LR] + (immediate << 1)) & 0xFFFFFFFC;\n\t\t\t\t\tgprs[cpu.LR] = pc - 1;\n\t\t\t\t\tcpu.switchExecMode(cpu.MODE_ARM);\n\t\t\t\t}*/\n\t\t\t\tbreak;\n\t\t\tcase 0x1000:\n\t\t\t\t// BL(1)\n\t\t\t\tif (immediate & 0x0400) {\n\t\t\t\t\timmediate |= 0xFFFFFC00;\n\t\t\t\t}\n\t\t\t\timmediate <<= 12;\n\t\t\t\top = this.thumbCompiler.constructBL1(immediate);\n\t\t\t\top.writesPC = false;\n\t\t\t\tbreak;\n\t\t\tcase 0x1800:\n\t\t\t\t// BL(2)\n\t\t\t\top = this.thumbCompiler.constructBL2(immediate);\n\t\t\t\top.writesPC = true;\n\t\t\t\top.fixedJump = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.WARN(\"Undefined instruction: 0x\" + instruction.toString(16));\n\t\t}\n\t} else {\n\t\tthrow 'Bad opcode: 0x' + instruction.toString(16);\n\t}\n\n\top.execMode = this.MODE_THUMB;\n\top.fixedJump = op.fixedJump || false;\n\treturn op;\n};\n","const fadeOut = (id, nextId, kill) => {\n  const e = document.getElementById(id)\n  const e2 = document.getElementById(nextId)\n  if (!e) {\n    return\n  }\n \n  const removeSelf = () => {\n    if (kill) {\n      e.parentElement.removeChild(e)\n    } else {\n      e.setAttribute('class', 'dead')\n      e.removeEventListener('webkitTransitionEnd', removeSelf)\n      e.removeEventListener('oTransitionEnd', removeSelf)\n      e.removeEventListener('transitionend', removeSelf)\n    }\n\n    if (e2) {\n      e2.setAttribute('class', 'hidden')\n      setTimeout(\n        () => e2.removeAttribute('class'),\n        0\n      )\n    }\n  }\n\n  e.addEventListener('webkitTransitionEnd', removeSelf, false)\n  e.addEventListener('oTransitionEnd', removeSelf, false)\n  e.addEventListener('transitionend', removeSelf, false)\n  e.setAttribute('class', 'hidden')\n}\n\nconst lcdFade = (context, target, callback) => {\n  let i = 0\n\n  const drawInterval = setInterval(() => {\n    i++\n\n    const pixelData = context.getImageData(0, 0, 240, 160)\n    for (let y = 0; y < 160; ++y) {\n      for (let x = 0; x < 240; ++x) {\n        const xDiff = Math.abs(x - 120)\n        const yDiff = Math.abs(y - 80) * 0.8\n        const xFactor = (120 - i - xDiff) / 120\n        const yFactor = (\n          (80 - i - ((y & 1) * 10) - yDiff + Math.pow(xDiff, 1 / 2)) / 80\n        )\n\n        pixelData.data[(x + y * 240) * 4 + 3] *= (\n          Math.pow(xFactor, 1 / 3) * Math.pow(yFactor, 1 / 2)\n        )\n      }\n    }\n    context.putImageData(pixelData, 0, 0)\n\n    target.clearRect(0, 0, 480, 320)\n    if (i > 40) {\n      clearInterval(drawInterval)\n    } else {\n      callback()\n    }\n  }, 50)\n}\n\nexport { lcdFade, fadeOut }","function GameBoyAdvance() {\n\tthis.LOG_ERROR = 1;\n\tthis.LOG_WARN = 2;\n\tthis.LOG_STUB = 4;\n\tthis.LOG_INFO = 8;\n\tthis.LOG_DEBUG = 16;\n\n\tthis.SYS_ID = 'com.endrift.gbajs';\n\n\tthis.logLevel = this.LOG_ERROR | this.LOG_WARN;\n\n\tthis.rom = null;\n\n\tthis.cpu = new ARMCore();\n\tthis.mmu = new GameBoyAdvanceMMU()\n\tthis.irq = new GameBoyAdvanceInterruptHandler();\n\tthis.io = new GameBoyAdvanceIO();\n\tthis.audio = new GameBoyAdvanceAudio();\n\tthis.video = new GameBoyAdvanceVideo();\n\tthis.keypad = new GameBoyAdvanceKeypad();\n\tthis.sio = new GameBoyAdvanceSIO();\n\n\t// TODO: simplify this graph\n\tthis.cpu.mmu = this.mmu;\n\tthis.cpu.irq = this.irq;\n\n\tthis.mmu.cpu = this.cpu;\n\tthis.mmu.core = this;\n\n\tthis.irq.cpu = this.cpu;\n\tthis.irq.io = this.io;\n\tthis.irq.audio = this.audio;\n\tthis.irq.video = this.video;\n\tthis.irq.core = this;\n\n\tthis.io.cpu = this.cpu;\n\tthis.io.audio = this.audio;\n\tthis.io.video = this.video;\n\tthis.io.keypad = this.keypad;\n\tthis.io.sio = this.sio;\n\tthis.io.core = this;\n\n\tthis.audio.cpu = this.cpu;\n\tthis.audio.core = this;\n\n\tthis.video.cpu = this.cpu;\n\tthis.video.core = this;\n\n\tthis.keypad.core = this;\n\n\tthis.sio.core = this;\n\n\tthis.keypad.registerHandlers();\n\tthis.doStep = this.waitFrame;\n\tthis.paused = false;\n\n\tthis.seenFrame = false;\n\tthis.seenSave = false;\n\tthis.lastVblank = 0;\n\n\tthis.queue = null;\n\tthis.reportFPS = null;\n\tthis.throttle = 16; // This is rough, but the 2/3ms difference gives us a good overhead\n\n\tvar self = this;\n\twindow.queueFrame = function (f) {\n\t\tself.queue = window.setTimeout(f, self.throttle);\n\t};\n\n\twindow.URL = window.URL || window.webkitURL;\n\n\tthis.video.vblankCallback = function() {\n\t\tself.seenFrame = true;\n\t};\n};\n\nwindow.GameBoyAdvance = GameBoyAdvance\n\nGameBoyAdvance.prototype.setCanvas = function(canvas) {\n\tvar self = this;\n\tif (canvas.offsetWidth != 240 || canvas.offsetHeight != 160) {\n\t\tthis.indirectCanvas = document.createElement(\"canvas\");\n\t\tthis.indirectCanvas.setAttribute(\"height\", \"160\");\n\t\tthis.indirectCanvas.setAttribute(\"width\", \"240\");\n\t\tthis.targetCanvas = canvas;\n\t\tthis.setCanvasDirect(this.indirectCanvas);\n\t\tvar targetContext = canvas.getContext('2d');\n\t\tthis.video.drawCallback = function() {\n\t\t\ttargetContext.drawImage(self.indirectCanvas, 0, 0, canvas.offsetWidth, canvas.offsetHeight);\n\t\t}\n\t} else {\n\t\tthis.setCanvasDirect(canvas);\n\t\tvar self = this;\n\t}\n};\n\nGameBoyAdvance.prototype.setCanvasDirect = function(canvas) {\n\tthis.context = canvas.getContext('2d');\n\tthis.video.setBacking(this.context);\n};\n\nGameBoyAdvance.prototype.setBios = function(bios, real) {\n\tthis.mmu.loadBios(bios, real);\n};\n\nGameBoyAdvance.prototype.setRom = function(rom) {\n\tthis.reset();\n\n\tthis.rom = this.mmu.loadRom(rom, true);\n\tif (!this.rom) {\n\t\treturn false;\n\t}\n\tthis.retrieveSavedata();\n\treturn true;\n};\n\nGameBoyAdvance.prototype.hasRom = function() {\n\treturn !!this.rom;\n};\n\nGameBoyAdvance.prototype.loadRomFromFile = function(romBuffer, callback) {\n  this.setRom(romBuffer.buffer)\n\n  if (callback) {\n    callback(romBuffer.buffer)\n  }\n}\n\nGameBoyAdvance.prototype.reset = function() {\n\tthis.audio.pause(true);\n\n\tthis.mmu.clear();\n\tthis.io.clear();\n\tthis.audio.clear();\n\tthis.video.clear();\n\tthis.sio.clear();\n\n\tthis.mmu.mmap(this.mmu.REGION_IO, this.io);\n\tthis.mmu.mmap(this.mmu.REGION_PALETTE_RAM, this.video.renderPath.palette);\n\tthis.mmu.mmap(this.mmu.REGION_VRAM, this.video.renderPath.vram);\n\tthis.mmu.mmap(this.mmu.REGION_OAM, this.video.renderPath.oam);\n\n\tthis.cpu.resetCPU(0);\n};\n\nGameBoyAdvance.prototype.step = function() {\n\twhile (this.doStep()) {\n\t\tthis.cpu.step();\n\t}\n};\n\nGameBoyAdvance.prototype.waitFrame = function() {\n\tvar seen = this.seenFrame;\n\tthis.seenFrame = false;\n\treturn !seen;\n};\n\nGameBoyAdvance.prototype.pause = function() {\n\tthis.paused = true;\n\tthis.audio.pause(true);\n\tif (this.queue) {\n\t\tclearTimeout(this.queue);\n\t\tthis.queue = null;\n\t}\n};\n\nGameBoyAdvance.prototype.advanceFrame = function() {\n\tthis.step();\n\tif (this.seenSave) {\n\t\tif (!this.mmu.saveNeedsFlush()) {\n\t\t\tthis.storeSavedata();\n\t\t\tthis.seenSave = false;\n\t\t} else {\n\t\t\tthis.mmu.flushSave();\n\t\t}\n\t} else if (this.mmu.saveNeedsFlush()) {\n\t\tthis.seenSave = true;\n\t\tthis.mmu.flushSave();\n\t}\n};\n\nGameBoyAdvance.prototype.runStable = function() {\n\tif (this.interval) {\n\t\treturn; // Already running\n\t}\n\tvar self = this;\n\tvar timer = 0;\n\tvar frames = 0;\n\tvar runFunc;\n\tvar start = Date.now();\n\tthis.paused = false;\n\tthis.audio.pause(false);\n\n\tif (this.reportFPS) {\n\t\trunFunc = function() {\n\t\t\ttry {\n\t\t\t\ttimer += Date.now() - start;\n\t\t\t\tif (self.paused) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tqueueFrame(runFunc);\n\t\t\t\t}\n\t\t\t\tstart = Date.now();\n\t\t\t\tself.advanceFrame();\n\t\t\t\t++frames;\n\t\t\t\tif (frames == 60) {\n\t\t\t\t\tself.reportFPS((frames * 1000) / timer);\n\t\t\t\t\tframes = 0;\n\t\t\t\t\ttimer = 0;\n\t\t\t\t}\n\t\t\t} catch(exception) {\n\t\t\t\tself.ERROR(exception);\n\t\t\t\tif (exception.stack) {\n\t\t\t\t\tself.logStackTrace(exception.stack.split('\\n'));\n\t\t\t\t}\n\t\t\t\tthrow exception;\n\t\t\t}\n\t\t};\n\t} else {\n\t\trunFunc = function() {\n\t\t\ttry {\n\t\t\t\tif (self.paused) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tqueueFrame(runFunc);\n\t\t\t\t}\n\t\t\t\tself.advanceFrame();\n\t\t\t} catch(exception) {\n\t\t\t\tself.ERROR(exception);\n\t\t\t\tif (exception.stack) {\n\t\t\t\t\tself.logStackTrace(exception.stack.split('\\n'));\n\t\t\t\t}\n\t\t\t\tthrow exception;\n\t\t\t}\n\t\t};\n\t}\n\tqueueFrame(runFunc);\n};\n\nGameBoyAdvance.prototype.setSavedata = function(data) {\n\tthis.mmu.loadSavedata(data);\n};\n\nGameBoyAdvance.prototype.loadSavedataFromFile = function(saveFile) {\n\tvar reader = new FileReader();\n\tvar self = this;\n\treader.onload = function(e) { self.setSavedata(e.target.result); }\n\treader.readAsArrayBuffer(saveFile);\n};\n\nGameBoyAdvance.prototype.decodeSavedata = function(string) {\n\tthis.setSavedata(this.decodeBase64(string));\n};\n\nGameBoyAdvance.prototype.decodeBase64 = function(string) {\n\tvar length = (string.length * 3 / 4);\n\tif (string[string.length - 2] == '=') {\n\t\tlength -= 2;\n\t} else if (string[string.length - 1] == '=') {\n\t\tlength -= 1;\n\t}\n\tvar buffer = new ArrayBuffer(length);\n\tvar view = new Uint8Array(buffer);\n\tvar bits = string.match(/..../g);\n\tfor (var i = 0; i + 2 < length; i += 3) {\n\t\tvar s = atob(bits.shift());\n\t\tview[i] = s.charCodeAt(0);\n\t\tview[i + 1] = s.charCodeAt(1);\n\t\tview[i + 2] = s.charCodeAt(2);\n\t}\n\tif (i < length) {\n\t\tvar s = atob(bits.shift());\n\t\tview[i++] = s.charCodeAt(0);\n\t\tif (s.length > 1) {\n\t\t\tview[i++] = s.charCodeAt(1);\n\t\t}\n\t}\n\n\treturn buffer;\n};\n\nGameBoyAdvance.prototype.encodeBase64 = function(view) {\n\tvar data = [];\n\tvar b;\n\tvar wordstring = [];\n\tvar triplet;\n\tfor (var i = 0; i < view.byteLength; ++i) {\n\t\tb = view.getUint8(i, true);\n\t\twordstring.push(String.fromCharCode(b));\n\t\twhile (wordstring.length >= 3) {\n\t\t\ttriplet = wordstring.splice(0, 3);\n\t\t\tdata.push(btoa(triplet.join('')));\n\t\t}\n\t};\n\tif (wordstring.length) {\n\t\tdata.push(btoa(wordstring.join('')));\n\t}\n\treturn data.join('');\n};\n\nGameBoyAdvance.prototype.downloadSavedata = function() {\n\tvar sram = this.mmu.save;\n\tif (!sram) {\n\t\tthis.WARN(\"No save data available\");\n\t\treturn null;\n\t}\n\tif (window.URL) {\n\t\tvar url = window.URL.createObjectURL(new Blob([sram.buffer], { type: 'application/octet-stream' }));\n\t\twindow.open(url);\n\t} else {\n\t\tvar data = this.encodeBase64(sram.view);\n\t\twindow.open('data:application/octet-stream;base64,' + data, this.rom.code + '.sav');\n\t}\n};\n\n\nGameBoyAdvance.prototype.storeSavedata = function() {\n\tvar sram = this.mmu.save;\n\ttry {\n\t\tvar storage = window.localStorage;\n\t\tstorage[this.SYS_ID + '.' + this.mmu.cart.code] = this.encodeBase64(sram.view);\n\t} catch (e) {\n\t\tthis.WARN('Could not store savedata! ' + e);\n\t}\n};\n\nGameBoyAdvance.prototype.retrieveSavedata = function() {\n\ttry {\n\t\tvar storage = window.localStorage;\n\t\tvar data = storage[this.SYS_ID + '.' + this.mmu.cart.code];\n\t\tif (data) {\n\t\t\tthis.decodeSavedata(data);\n\t\t\treturn true;\n\t\t}\n\t} catch (e) {\n\t\tthis.WARN('Could not retrieve savedata! ' + e);\n\t}\n\treturn false;\n};\n\nGameBoyAdvance.prototype.freeze = function() {\n\treturn {\n\t\t'cpu': this.cpu.freeze(),\n\t\t'mmu': this.mmu.freeze(),\n\t\t'irq': this.irq.freeze(),\n\t\t'io': this.io.freeze(),\n\t\t'audio': this.audio.freeze(),\n\t\t'video': this.video.freeze()\n\t}\n};\n\nGameBoyAdvance.prototype.defrost = function(frost) {\n\tthis.cpu.defrost(frost.cpu);\n\tthis.mmu.defrost(frost.mmu);\n\tthis.audio.defrost(frost.audio);\n\tthis.video.defrost(frost.video);\n\tthis.irq.defrost(frost.irq);\n\tthis.io.defrost(frost.io);\n};\n\nGameBoyAdvance.prototype.log = function(level, message) {};\n\nGameBoyAdvance.prototype.setLogger = function(logger) {\n\tthis.log = logger;\n};\n\nGameBoyAdvance.prototype.logStackTrace = function(stack) {\n\tvar overflow = stack.length - 32;\n\tthis.ERROR('Stack trace follows:');\n\tif (overflow > 0) {\n\t\tthis.log(-1, '> (Too many frames)');\n\t}\n\tfor (var i = Math.max(overflow, 0); i < stack.length; ++i) {\n\t\tthis.log(-1, '> ' + stack[i]);\n\t}\n};\n\nGameBoyAdvance.prototype.ERROR = function(error) {\n\tif (this.logLevel & this.LOG_ERROR) {\n\t\tthis.log(this.LOG_ERROR, error);\n\t}\n};\n\nGameBoyAdvance.prototype.WARN = function(warn) {\n\tif (this.logLevel & this.LOG_WARN) {\n\t\tthis.log(this.LOG_WARN, warn);\n\t}\n};\n\nGameBoyAdvance.prototype.STUB = function(func) {\n\tif (this.logLevel & this.LOG_STUB) {\n\t\tthis.log(this.LOG_STUB, func);\n\t}\n};\n\nGameBoyAdvance.prototype.INFO = function(info) {\n\tif (this.logLevel & this.LOG_INFO) {\n\t\tthis.log(this.LOG_INFO, info);\n\t}\n};\n\nGameBoyAdvance.prototype.DEBUG = function(info) {\n\tif (this.logLevel & this.LOG_DEBUG) {\n\t\tthis.log(this.LOG_DEBUG, info);\n\t}\n};\n\nGameBoyAdvance.prototype.ASSERT_UNREACHED = function(err) {\n\tthrow new Error(\"Should be unreached: \" + err);\n};\n\nGameBoyAdvance.prototype.ASSERT = function(test, err) {\n\tif (!test) {\n\t\tthrow new Error(\"Assertion failed: \" + err);\n\t}\n};\n","window.GameBoyAdvanceGPIO = function GameBoyAdvanceGPIO(core, rom) {\n\tthis.core = core;\n\tthis.rom = rom;\n\n\tthis.readWrite = 0;\n\tthis.direction = 0;\n\n\tthis.device = new GameBoyAdvanceRTC(this); // TODO: Support more devices\n};\n\nGameBoyAdvanceGPIO.prototype.store16 = function(offset, value) {\n\tswitch (offset) {\n\tcase 0xC4:\n\t\tthis.device.setPins(value & 0xF);\n\t\tbreak;\n\tcase 0xC6:\n\t\tthis.direction = value & 0xF;\n\t\tthis.device.setDirection(this.direction);\n\t\tbreak;\n\tcase 0xC8:\n\t\tthis.readWrite = value & 1;\n\t\tbreak;\n\tdefault:\n\t\tthrow new Error('BUG: Bad offset passed to GPIO: ' + offset.toString(16));\n\t}\n\tif (this.readWrite) {\n\t\tvar old = this.rom.view.getUint16(offset, true);\n\t\told &= ~this.direction;\n\t\tthis.rom.view.setUint16(offset, old | (value & this.direction), true);\n\t}\n};\n\nGameBoyAdvanceGPIO.prototype.outputPins = function(nybble) {\n\tif (this.readWrite) {\n\t\tvar old = this.rom.view.getUint16(0xC4, true);\n\t\told &= this.direction;\n\t\tthis.rom.view.setUint16(0xC4, old | (nybble & ~this.direction & 0xF), true);\n\t}\n};\n\nfunction GameBoyAdvanceRTC(gpio) {\n\tthis.gpio = gpio;\n\n\t// PINOUT: SCK | SIO | CS | -\n\tthis.pins = 0;\n\tthis.direction = 0;\n\n\tthis.totalBytes = [\n\t\t0, // Force reset\n\t\t0, // Empty\n\t\t7, // Date/Time\n\t\t0, // Force IRQ\n\t\t1, // Control register\n\t\t0, // Empty\n\t\t3, // Time\n\t\t0 // Empty\n\t];\n\tthis.bytesRemaining = 0;\n\n\t// Transfer sequence:\n\t// == Initiate\n\t// > HI | - | LO | -\n\t// > HI | - | HI | -\n\t// == Transfer bit (x8)\n\t// > LO | x | HI | -\n\t// > HI | - | HI | -\n\t// < ?? | x | ?? | -\n\t// == Terminate\n\t// >  - | - | LO | -\n\tthis.transferStep = 0;\n\n\tthis.reading = 0;\n\tthis.bitsRead = 0;\n\tthis.bits = 0;\n\tthis.command = -1;\n\n\tthis.control = 0x40;\n\tthis.time = [\n\t\t0, // Year\n\t\t0, // Month\n\t\t0, // Day\n\t\t0, // Day of week\n\t\t0, // Hour\n\t\t0, // Minute\n\t\t0 // Second\n\t];\n};\n\nGameBoyAdvanceRTC.prototype.setPins = function(nybble) {\n\tswitch (this.transferStep) {\n\tcase 0:\n\t\tif ((nybble & 5) == 1) {\n\t\t\tthis.transferStep = 1;\n\t\t}\n\t\tbreak;\n\tcase 1:\n\t\tif (nybble & 4) {\n\t\t\tthis.transferStep = 2;\n\t\t}\n\t\tbreak;\n\tcase 2:\n\t\tif (!(nybble & 1)) {\n\t\t\tthis.bits &= ~(1 << this.bitsRead);\n\t\t\tthis.bits |= ((nybble & 2) >> 1) << this.bitsRead;\n\t\t} else {\n\t\t\tif (nybble & 4) {\n\t\t\t\t// SIO direction should always != this.read\n\t\t\t\tif ((this.direction & 2) && !this.read) {\n\t\t\t\t\t++this.bitsRead;\n\t\t\t\t\tif (this.bitsRead == 8) {\n\t\t\t\t\t\tthis.processByte();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.gpio.outputPins(5 | (this.sioOutputPin() << 1));\n\t\t\t\t\t++this.bitsRead;\n\t\t\t\t\tif (this.bitsRead == 8) {\n\t\t\t\t\t\t--this.bytesRemaining;\n\t\t\t\t\t\tif (this.bytesRemaining <= 0) {\n\t\t\t\t\t\t\tthis.command = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.bitsRead = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.bitsRead = 0;\n\t\t\t\tthis.bytesRemaining = 0;\n\t\t\t\tthis.command = -1;\n\t\t\t\tthis.transferStep = 0;\n\t\t\t}\n\t\t}\n\t\tbreak;\n\t}\n\n\tthis.pins = nybble & 7;\n};\n\nGameBoyAdvanceRTC.prototype.setDirection = function(direction) {\n\tthis.direction = direction;\n};\n\nGameBoyAdvanceRTC.prototype.processByte = function() {\n\t--this.bytesRemaining;\n\tswitch (this.command) {\n\tcase -1:\n\t\tif ((this.bits & 0x0F) == 0x06) {\n\t\t\tthis.command = (this.bits >> 4) & 7;\n\t\t\tthis.reading = this.bits & 0x80;\n\n\t\t\tthis.bytesRemaining = this.totalBytes[this.command];\n\t\t\tswitch (this.command) {\n\t\t\tcase 0:\n\t\t\t\tthis.control = 0;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\tcase 6:\n\t\t\t\tthis.updateClock();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.gpio.core.WARN('Invalid RTC command byte: ' + this.bits.toString(16));\n\t\t}\n\t\tbreak;\n\tcase 4:\n\t\t// Control\n\t\tthis.control = this.bits & 0x40;\n\t\tbreak;\n\t}\t\n\tthis.bits = 0;\n\tthis.bitsRead = 0;\n\tif (!this.bytesRemaining) {\n\t\tthis.command = -1;\n\t}\n};\n\nGameBoyAdvanceRTC.prototype.sioOutputPin = function() {\n\tvar outputByte = 0;\n\tswitch (this.command) {\n\tcase 4:\n\t\toutputByte = this.control;\n\t\tbreak;\n\tcase 2:\n\tcase 6:\n\t\toutputByte = this.time[7 - this.bytesRemaining];\n\t\tbreak;\n\t}\n\tvar output = (outputByte >> this.bitsRead) & 1;\n\treturn output;\n};\n\nGameBoyAdvanceRTC.prototype.updateClock = function() {\n\tvar date = new Date();\n\tthis.time[0] = this.bcd(date.getFullYear());\n\tthis.time[1] = this.bcd(date.getMonth() + 1);\n\tthis.time[2] = this.bcd(date.getDate());\n\tthis.time[3] = date.getDay() - 1;\n\tif (this.time[3] < 0) {\n\t\tthis.time[3] = 6;\n\t}\n\tif (this.control & 0x40) {\n\t\t// 24 hour\n\t\tthis.time[4] = this.bcd(date.getHours());\n\t} else {\n\t\tthis.time[4] = this.bcd(date.getHours() % 2);\n\t\tif (date.getHours() >= 12) {\n\t\t\tthis.time[4] |= 0x80;\n\t\t}\n\t}\n\tthis.time[5] = this.bcd(date.getMinutes());\n\tthis.time[6] = this.bcd(date.getSeconds());\n};\n\nGameBoyAdvanceRTC.prototype.bcd = function(binary) {\n\tvar counter = binary % 10;\n\tbinary /= 10;\n\tcounter += (binary % 10) << 4;\n\treturn counter;\n};\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport sha1 from 'js-sha1'\nimport { fadeOut } from './fades'\nimport './util'\nimport './core'\nimport './arm'\nimport './thumb'\nimport './mmu'\nimport './io'\nimport './audio'\nimport './video'\nimport './video/proxy'\nimport './video/software'\nimport './irq'\nimport './keypad'\nimport './sio'\nimport './savedata'\nimport './gpio'\nimport './gba'\nimport biosBin from '../../assets/bios.bin'\n\nconst drawEmulator = (buffer) => {\n  var gba\n  var runCommands = []\n  var debug = null\n\n  try {\n    gba = new GameBoyAdvance();\n    gba.keypad.eatInput = true;\n\n    gba.setLogger(function(level, error) {\n      console.log(error);\n      gba.pause();\n      var screen = document.getElementById('screen');\n      if (screen.getAttribute('class') == 'dead') {\n        console.log('We appear to have crashed multiple times without reseting.');\n        return;\n      }\n      var crash = document.createElement('img');\n      crash.setAttribute('id', 'crash');\n      crash.setAttribute('src', '../../assets/crash.png');\n      screen.parentElement.insertBefore(crash, screen);\n      screen.setAttribute('class', 'dead');\n    });\n  } catch (exception) {\n    gba = null;\n  }\n\n  var canvas = document.getElementById('screen');\n  gba.setCanvas(canvas);\n\n  gba.logLevel = gba.LOG_ERROR;\n\n  gba.setBios(biosBin);\n\n  function run(file) {\n    gba.loadRomFromFile(file, function(result) {\n      if (result) {\n        for (var i = 0; i < runCommands.length; ++i) {\n          runCommands[i]();\n        }\n        runCommands = [];\n        fadeOut('preload', 'ingame');\n        fadeOut('instructions', null, true);\n        gba.runStable();\n      } else {\n        setTimeout(function() {\n          load.onclick = function() {\n            document.getElementById('loader').click();\n          }\n        }, 3000);\n      }\n    });\n  }\n\n  function uploadSavedataPending(file) {\n    runCommands.push(function() { gba.loadSavedataFromFile(file) });\n  }\n\n  function togglePause() {\n    if (gba.paused) {\n      if (debug && debug.gbaCon) {\n        debug.gbaCon.run();\n      } else {\n        gba.runStable();\n      }\n    } else {\n      if (debug && debug.gbaCon) {\n        debug.gbaCon.pause();\n      } else {\n        gba.pause();\n      }\n    }\n  }\n\n  function screenshot() {\n    var canvas = gba.indirectCanvas;\n    window.open(canvas.toDataURL('image/png'), 'screenshot');\n  }\n\n  function setPixelated(pixelated) {\n    var screen = document.getElementById('screen');\n    var context = screen.getContext('2d');\n    if (context.webkitImageSmoothingEnabled) {\n      context.webkitImageSmoothingEnabled = !pixelated;\n    } else if (context.mozImageSmoothingEnabled) {\n      context.mozImageSmoothingEnabled = !pixelated;\n    } else if (window.navigator.appName != 'Microsoft Internet Explorer') {\n        if (pixelated) {\n          screen.setAttribute('width', '240');\n          screen.setAttribute('height', '160');\n        } else {\n          screen.setAttribute('width', '480');\n          screen.setAttribute('height', '320');\n        }\n        if (window.navigator.appName == 'Opera') {\n        // Ugly hack! Ew!\n        if (pixelated) {\n          screen.style.marginTop = '0';\n          screen.style.marginBottom = '-325px';\n        } else {\n          delete screen.style;\n        }\n      }\n    }\n  }\n\n  function enableDebug() {\n    window.onmessage = function(message) {\n      if (message.origin != document.domain && (message.origin != 'file://' || document.domain)) {\n        console.log('Failed XSS');\n        return;\n      }\n      switch (message.data) {\n      case 'connect':\n        if (message.source == debug) {\n          debug.postMessage('connect', document.domain || '*');\n        }\n        break;\n      case 'connected':\n        break;\n      case 'disconnect':\n        if (message.source == debug) {\n          debug = null;\n        }\n      }\n    }\n    window.onunload = function() {\n      if (debug && debug.postMessage) {\n        debug.postMessage('disconnect', document.domain || '*');\n      }\n    }\n    if (!debug || !debug.postMessage) {\n      debug = window.open('debugger.html', 'debug');\n    } else {\n      debug.postMessage('connect', document.domain || '*');\n    }\n  }\n\n  document.addEventListener('webkitfullscreenchange', function() {\n    var canvas = document.getElementById('screen');\n    if (document.webkitIsFullScreen) {\n      canvas.setAttribute('height', document.body.offsetHeight);\n      canvas.setAttribute('width', document.body.offsetHeight / 2 * 3);\n      canvas.setAttribute('style', 'margin: 0');\n    } else {\n      canvas.setAttribute('height', 320);\n      canvas.setAttribute('width', 480);\n      canvas.removeAttribute('style');\n    }\n  }, false);\n\n  run(buffer)\n\n  return gba\n}\n\nexport default drawEmulator\n","window.GameBoyAdvanceIO = function GameBoyAdvanceIO() {\n\t// Video\n\tthis.DISPCNT = 0x000;\n\tthis.GREENSWP = 0x002;\n\tthis.DISPSTAT = 0x004;\n\tthis.VCOUNT = 0x006;\n\tthis.BG0CNT = 0x008;\n\tthis.BG1CNT = 0x00A;\n\tthis.BG2CNT = 0x00C;\n\tthis.BG3CNT = 0x00E;\n\tthis.BG0HOFS = 0x010;\n\tthis.BG0VOFS = 0x012;\n\tthis.BG1HOFS = 0x014;\n\tthis.BG1VOFS = 0x016;\n\tthis.BG2HOFS = 0x018;\n\tthis.BG2VOFS = 0x01A;\n\tthis.BG3HOFS = 0x01C;\n\tthis.BG3VOFS = 0x01E;\n\tthis.BG2PA = 0x020;\n\tthis.BG2PB = 0x022;\n\tthis.BG2PC = 0x024;\n\tthis.BG2PD = 0x026;\n\tthis.BG2X_LO = 0x028;\n\tthis.BG2X_HI = 0x02A;\n\tthis.BG2Y_LO = 0x02C;\n\tthis.BG2Y_HI = 0x02E;\n\tthis.BG3PA = 0x030;\n\tthis.BG3PB = 0x032;\n\tthis.BG3PC = 0x034;\n\tthis.BG3PD = 0x036;\n\tthis.BG3X_LO = 0x038;\n\tthis.BG3X_HI = 0x03A;\n\tthis.BG3Y_LO = 0x03C;\n\tthis.BG3Y_HI = 0x03E;\n\tthis.WIN0H = 0x040;\n\tthis.WIN1H = 0x042;\n\tthis.WIN0V = 0x044;\n\tthis.WIN1V = 0x046;\n\tthis.WININ = 0x048;\n\tthis.WINOUT = 0x04A;\n\tthis.MOSAIC = 0x04C;\n\tthis.BLDCNT = 0x050;\n\tthis.BLDALPHA = 0x052;\n\tthis.BLDY = 0x054;\n\n\t// Sound\n\tthis.SOUND1CNT_LO = 0x060;\n\tthis.SOUND1CNT_HI = 0x062;\n\tthis.SOUND1CNT_X = 0x064;\n\tthis.SOUND2CNT_LO = 0x068;\n\tthis.SOUND2CNT_HI = 0x06C;\n\tthis.SOUND3CNT_LO = 0x070;\n\tthis.SOUND3CNT_HI = 0x072;\n\tthis.SOUND3CNT_X = 0x074;\n\tthis.SOUND4CNT_LO = 0x078;\n\tthis.SOUND4CNT_HI = 0x07C;\n\tthis.SOUNDCNT_LO = 0x080;\n\tthis.SOUNDCNT_HI = 0x082;\n\tthis.SOUNDCNT_X = 0x084;\n\tthis.SOUNDBIAS = 0x088;\n\tthis.WAVE_RAM0_LO = 0x090;\n\tthis.WAVE_RAM0_HI = 0x092;\n\tthis.WAVE_RAM1_LO = 0x094;\n\tthis.WAVE_RAM1_HI = 0x096;\n\tthis.WAVE_RAM2_LO = 0x098;\n\tthis.WAVE_RAM2_HI = 0x09A;\n\tthis.WAVE_RAM3_LO = 0x09C;\n\tthis.WAVE_RAM3_HI = 0x09E;\n\tthis.FIFO_A_LO = 0x0A0;\n\tthis.FIFO_A_HI = 0x0A2;\n\tthis.FIFO_B_LO = 0x0A4;\n\tthis.FIFO_B_HI = 0x0A6;\n\n\t// DMA\n\tthis.DMA0SAD_LO = 0x0B0;\n\tthis.DMA0SAD_HI = 0x0B2;\n\tthis.DMA0DAD_LO = 0x0B4;\n\tthis.DMA0DAD_HI = 0x0B6;\n\tthis.DMA0CNT_LO = 0x0B8;\n\tthis.DMA0CNT_HI = 0x0BA;\n\tthis.DMA1SAD_LO = 0x0BC;\n\tthis.DMA1SAD_HI = 0x0BE;\n\tthis.DMA1DAD_LO = 0x0C0;\n\tthis.DMA1DAD_HI = 0x0C2;\n\tthis.DMA1CNT_LO = 0x0C4;\n\tthis.DMA1CNT_HI = 0x0C6;\n\tthis.DMA2SAD_LO = 0x0C8;\n\tthis.DMA2SAD_HI = 0x0CA;\n\tthis.DMA2DAD_LO = 0x0CC;\n\tthis.DMA2DAD_HI = 0x0CE;\n\tthis.DMA2CNT_LO = 0x0D0;\n\tthis.DMA2CNT_HI = 0x0D2;\n\tthis.DMA3SAD_LO = 0x0D4;\n\tthis.DMA3SAD_HI = 0x0D6;\n\tthis.DMA3DAD_LO = 0x0D8;\n\tthis.DMA3DAD_HI = 0x0DA;\n\tthis.DMA3CNT_LO = 0x0DC;\n\tthis.DMA3CNT_HI = 0x0DE;\n\n\t// Timers\n\tthis.TM0CNT_LO = 0x100;\n\tthis.TM0CNT_HI = 0x102;\n\tthis.TM1CNT_LO = 0x104;\n\tthis.TM1CNT_HI = 0x106;\n\tthis.TM2CNT_LO = 0x108;\n\tthis.TM2CNT_HI = 0x10A;\n\tthis.TM3CNT_LO = 0x10C;\n\tthis.TM3CNT_HI = 0x10E;\n\n\t// SIO (note: some of these are repeated)\n\tthis.SIODATA32_LO = 0x120;\n\tthis.SIOMULTI0 = 0x120;\n\tthis.SIODATA32_HI = 0x122;\n\tthis.SIOMULTI1 = 0x122;\n\tthis.SIOMULTI2 = 0x124;\n\tthis.SIOMULTI3 = 0x126;\n\tthis.SIOCNT = 0x128;\n\tthis.SIOMLT_SEND = 0x12A;\n\tthis.SIODATA8 = 0x12A;\n\tthis.RCNT = 0x134;\n\tthis.JOYCNT = 0x140;\n\tthis.JOY_RECV = 0x150;\n\tthis.JOY_TRANS = 0x154;\n\tthis.JOYSTAT = 0x158;\n\n\t// Keypad\n\tthis.KEYINPUT = 0x130;\n\tthis.KEYCNT = 0x132;\n\n\t// Interrupts, etc\n\tthis.IE = 0x200;\n\tthis.IF = 0x202;\n\tthis.WAITCNT = 0x204;\n\tthis.IME = 0x208;\n\n\tthis.POSTFLG = 0x300;\n\tthis.HALTCNT = 0x301;\n\n\tthis.DEFAULT_DISPCNT = 0x0080;\n\tthis.DEFAULT_SOUNDBIAS = 0x200;\n\tthis.DEFAULT_BGPA = 1;\n\tthis.DEFAULT_BGPD = 1;\n\tthis.DEFAULT_RCNT = 0x8000;\n};\n\nGameBoyAdvanceIO.prototype.clear = function() {\n\tthis.registers = new Uint16Array(this.cpu.mmu.SIZE_IO);\n\n\tthis.registers[this.DISPCNT >> 1] = this.DEFAULT_DISPCNT;\n\tthis.registers[this.SOUNDBIAS >> 1] = this.DEFAULT_SOUNDBIAS;\n\tthis.registers[this.BG2PA >> 1] = this.DEFAULT_BGPA;\n\tthis.registers[this.BG2PD >> 1] = this.DEFAULT_BGPD;\n\tthis.registers[this.BG3PA >> 1] = this.DEFAULT_BGPA;\n\tthis.registers[this.BG3PD >> 1] = this.DEFAULT_BGPD;\n\tthis.registers[this.RCNT >> 1] = this.DEFAULT_RCNT;\n};\n\nGameBoyAdvanceIO.prototype.freeze = function() {\n\treturn {\n\t\t'registers': Serializer.prefix(this.registers.buffer)\n\t};\n};\n\nGameBoyAdvanceIO.prototype.defrost = function(frost) {\n\tthis.registers = new Uint16Array(frost.registers);\n\t// Video registers don't serialize themselves\n\tfor (var i = 0; i <= this.BLDY; i += 2) {\n\t\tthis.store16(this.registers[i >> 1]);\n\t}\n};\n\nGameBoyAdvanceIO.prototype.load8 = function(offset) {\n\tthrow 'Unimplmeneted unaligned I/O access';\n}\n\nGameBoyAdvanceIO.prototype.load16 = function(offset) {\n\treturn (this.loadU16(offset) << 16) >> 16;\n}\n\nGameBoyAdvanceIO.prototype.load32 = function(offset) {\n\toffset &= 0xFFFFFFFC;\n\tswitch (offset) {\n\tcase this.DMA0CNT_LO:\n\tcase this.DMA1CNT_LO:\n\tcase this.DMA2CNT_LO:\n\tcase this.DMA3CNT_LO:\n\t\treturn this.loadU16(offset | 2) << 16;\n\tcase this.IME:\n\t\treturn this.loadU16(offset) & 0xFFFF;\n\tcase this.JOY_RECV:\n\tcase this.JOY_TRANS:\n \t\tthis.core.STUB('Unimplemented JOY register read: 0x' + offset.toString(16));\n \t\treturn 0;\n\t}\n\n\treturn this.loadU16(offset) | (this.loadU16(offset | 2) << 16);\n};\n\nGameBoyAdvanceIO.prototype.loadU8 = function(offset) {\n\tvar odd = offset & 0x0001;\n\tvar value = this.loadU16(offset & 0xFFFE);\n\treturn (value >>> (odd << 3)) & 0xFF;\n}\n\nGameBoyAdvanceIO.prototype.loadU16 = function(offset) {\n\tswitch (offset) {\n\tcase this.DISPCNT:\n\tcase this.BG0CNT:\n\tcase this.BG1CNT:\n\tcase this.BG2CNT:\n\tcase this.BG3CNT:\n\tcase this.WININ:\n\tcase this.WINOUT:\n\tcase this.SOUND1CNT_LO:\n\tcase this.SOUND3CNT_LO:\n\tcase this.SOUNDCNT_LO:\n\tcase this.SOUNDCNT_HI:\n\tcase this.SOUNDBIAS:\n\tcase this.BLDCNT:\n\tcase this.BLDALPHA:\n\n\tcase this.TM0CNT_HI:\n\tcase this.TM1CNT_HI:\n\tcase this.TM2CNT_HI:\n\tcase this.TM3CNT_HI:\n\tcase this.DMA0CNT_HI:\n\tcase this.DMA1CNT_HI:\n\tcase this.DMA2CNT_HI:\n\tcase this.DMA3CNT_HI:\n\tcase this.RCNT:\n\tcase this.WAITCNT:\n\tcase this.IE:\n\tcase this.IF:\n\tcase this.IME:\n\tcase this.POSTFLG:\n\t\t// Handled transparently by the written registers\n\t\tbreak;\n\n\t// Video\n\tcase this.DISPSTAT:\n\t\treturn this.registers[offset >> 1] | this.video.readDisplayStat();\n\tcase this.VCOUNT:\n\t\treturn this.video.vcount;\n\n\t// Sound\n\tcase this.SOUND1CNT_HI:\n\tcase this.SOUND2CNT_LO:\n\t\treturn this.registers[offset >> 1] & 0xFFC0;\n\tcase this.SOUND1CNT_X:\n\tcase this.SOUND2CNT_HI:\n\tcase this.SOUND3CNT_X:\n\t\treturn this.registers[offset >> 1] & 0x4000;\n\tcase this.SOUND3CNT_HI:\n\t\treturn this.registers[offset >> 1] & 0xE000;\n\tcase this.SOUND4CNT_LO:\n\t\treturn this.registers[offset >> 1] & 0xFF00;\n\tcase this.SOUND4CNT_HI:\n\t\treturn this.registers[offset >> 1] & 0x40FF;\n\tcase this.SOUNDCNT_X:\n\t\tthis.core.STUB('Unimplemented sound register read: SOUNDCNT_X');\n\t\treturn this.registers[offset >> 1] | 0x0000;\n\n\t// Timers\n\tcase this.TM0CNT_LO:\n\t\treturn this.cpu.irq.timerRead(0);\n\tcase this.TM1CNT_LO:\n\t\treturn this.cpu.irq.timerRead(1);\n\tcase this.TM2CNT_LO:\n\t\treturn this.cpu.irq.timerRead(2);\n\tcase this.TM3CNT_LO:\n\t\treturn this.cpu.irq.timerRead(3);\n\n\t// SIO\n\tcase this.SIOCNT:\n\t\treturn this.sio.readSIOCNT();\n\n\tcase this.KEYINPUT:\n\t\tthis.keypad.pollGamepads();\n\t\treturn this.keypad.currentDown;\n\tcase this.KEYCNT:\n\t\tthis.core.STUB('Unimplemented I/O register read: KEYCNT');\n\t\treturn 0;\n\n\tcase this.BG0HOFS:\n\tcase this.BG0VOFS:\n\tcase this.BG1HOFS:\n\tcase this.BG1VOFS:\n\tcase this.BG2HOFS:\n\tcase this.BG2VOFS:\n\tcase this.BG3HOFS:\n\tcase this.BG3VOFS:\n\tcase this.BG2PA:\n\tcase this.BG2PB:\n\tcase this.BG2PC:\n\tcase this.BG2PD:\n\tcase this.BG3PA:\n\tcase this.BG3PB:\n\tcase this.BG3PC:\n\tcase this.BG3PD:\n\tcase this.BG2X_LO:\n\tcase this.BG2X_HI:\n\tcase this.BG2Y_LO:\n\tcase this.BG2Y_HI:\n\tcase this.BG3X_LO:\n\tcase this.BG3X_HI:\n\tcase this.BG3Y_LO:\n\tcase this.BG3Y_HI:\n\tcase this.WIN0H:\n\tcase this.WIN1H:\n\tcase this.WIN0V:\n\tcase this.WIN1V:\n\tcase this.BLDY:\n\tcase this.DMA0SAD_LO:\n\tcase this.DMA0SAD_HI:\n\tcase this.DMA0DAD_LO:\n\tcase this.DMA0DAD_HI:\n\tcase this.DMA0CNT_LO:\n\tcase this.DMA1SAD_LO:\n\tcase this.DMA1SAD_HI:\n\tcase this.DMA1DAD_LO:\n\tcase this.DMA1DAD_HI:\n\tcase this.DMA1CNT_LO:\n\tcase this.DMA2SAD_LO:\n\tcase this.DMA2SAD_HI:\n\tcase this.DMA2DAD_LO:\n\tcase this.DMA2DAD_HI:\n\tcase this.DMA2CNT_LO:\n\tcase this.DMA3SAD_LO:\n\tcase this.DMA3SAD_HI:\n\tcase this.DMA3DAD_LO:\n\tcase this.DMA3DAD_HI:\n\tcase this.DMA3CNT_LO:\n\tcase this.FIFO_A_LO:\n\tcase this.FIFO_A_HI:\n\tcase this.FIFO_B_LO:\n\tcase this.FIFO_B_HI:\n\t\tthis.core.WARN('Read for write-only register: 0x' + offset.toString(16));\n\t\treturn this.core.mmu.badMemory.loadU16(0);\n\n\tcase this.MOSAIC:\n\t\tthis.core.WARN('Read for write-only register: 0x' + offset.toString(16));\n\t\treturn 0;\n\n\tcase this.SIOMULTI0:\n \tcase this.SIOMULTI1:\n \tcase this.SIOMULTI2:\n \tcase this.SIOMULTI3:\n \t\treturn this.sio.read((offset - this.SIOMULTI0) >> 1);\n\n \tcase this.SIODATA8:\n \t\tthis.core.STUB('Unimplemented SIO register read: 0x' + offset.toString(16));\n \t\treturn 0;\n\tcase this.JOYCNT:\n\tcase this.JOYSTAT:\n \t\tthis.core.STUB('Unimplemented JOY register read: 0x' + offset.toString(16));\n \t\treturn 0;\n\n\tdefault:\n\t\tthis.core.WARN('Bad I/O register read: 0x' + offset.toString(16));\n\t\treturn this.core.mmu.badMemory.loadU16(0);\n\t}\n\treturn this.registers[offset >> 1];\n};\n\nGameBoyAdvanceIO.prototype.store8 = function(offset, value) {\n\tswitch (offset) {\n\tcase this.WININ:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.WININ | 1:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.WINOUT:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.WINOUT | 1:\n\t\tthis.value & 0x3F;\n\t\tbreak;\n\tcase this.SOUND1CNT_LO:\n\tcase this.SOUND1CNT_LO | 1:\n\tcase this.SOUND1CNT_HI:\n\tcase this.SOUND1CNT_HI | 1:\n\tcase this.SOUND1CNT_X:\n\tcase this.SOUND1CNT_X | 1:\n\tcase this.SOUND2CNT_LO:\n\tcase this.SOUND2CNT_LO | 1:\n\tcase this.SOUND2CNT_HI:\n\tcase this.SOUND2CNT_HI | 1:\n\tcase this.SOUND3CNT_LO:\n\tcase this.SOUND3CNT_LO | 1:\n\tcase this.SOUND3CNT_HI:\n\tcase this.SOUND3CNT_HI | 1:\n\tcase this.SOUND3CNT_X:\n\tcase this.SOUND3CNT_X | 1:\n\tcase this.SOUND4CNT_LO:\n\tcase this.SOUND4CNT_LO | 1:\n\tcase this.SOUND4CNT_HI:\n\tcase this.SOUND4CNT_HI | 1:\n\tcase this.SOUNDCNT_LO:\n\tcase this.SOUNDCNT_LO | 1:\n\tcase this.SOUNDCNT_X:\n\tcase this.IF:\n\tcase this.IME:\n\t\tbreak;\n\tcase this.SOUNDBIAS | 1:\n\t\tthis.STUB_REG('sound', offset);\n\t\tbreak;\n\tcase this.HALTCNT:\n\t\tvalue &= 0x80;\n\t\tif (!value) {\n\t\t\tthis.core.irq.halt();\n\t\t} else {\n\t\t\tthis.core.STUB('Stop');\n\t\t}\n\t\treturn;\n\tdefault:\n\t\tthis.STUB_REG('8-bit I/O', offset);\n\t\tbreak;\n\t}\n\n\tif (offset & 1) {\n\t\tvalue <<= 8;\n\t\tvalue |= (this.registers[offset >> 1] & 0x00FF);\n\t} else {\n\t\tvalue &= 0x00FF;\n\t\tvalue |= (this.registers[offset >> 1] & 0xFF00);\n\t}\n\tthis.store16(offset & 0xFFFFFFE, value);\n};\n\nGameBoyAdvanceIO.prototype.store16 = function(offset, value) {\n\tswitch (offset) {\n\t// Video\n\tcase this.DISPCNT:\n\t\tthis.video.renderPath.writeDisplayControl(value);\n\t\tbreak;\n\tcase this.DISPSTAT:\n\t\tvalue &= this.video.DISPSTAT_MASK;\n\t\tthis.video.writeDisplayStat(value);\n\t\tbreak;\n\tcase this.BG0CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(0, value);\n\t\tbreak;\n\tcase this.BG1CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(1, value);\n\t\tbreak;\n\tcase this.BG2CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(2, value);\n\t\tbreak;\n\tcase this.BG3CNT:\n\t\tthis.video.renderPath.writeBackgroundControl(3, value);\n\t\tbreak;\n\tcase this.BG0HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(0, value);\n\t\tbreak;\n\tcase this.BG0VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(0, value);\n\t\tbreak;\n\tcase this.BG1HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(1, value);\n\t\tbreak;\n\tcase this.BG1VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(1, value);\n\t\tbreak;\n\tcase this.BG2HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(2, value);\n\t\tbreak;\n\tcase this.BG2VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(2, value);\n\t\tbreak;\n\tcase this.BG3HOFS:\n\t\tthis.video.renderPath.writeBackgroundHOffset(3, value);\n\t\tbreak;\n\tcase this.BG3VOFS:\n\t\tthis.video.renderPath.writeBackgroundVOffset(3, value);\n\t\tbreak;\n\tcase this.BG2X_LO:\n\t\tthis.video.renderPath.writeBackgroundRefX(2, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG2X_HI:\n\t\tthis.video.renderPath.writeBackgroundRefX(2, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG2Y_LO:\n\t\tthis.video.renderPath.writeBackgroundRefY(2, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG2Y_HI:\n\t\tthis.video.renderPath.writeBackgroundRefY(2, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG2PA:\n\t\tthis.video.renderPath.writeBackgroundParamA(2, value);\n\t\tbreak;\n\tcase this.BG2PB:\n\t\tthis.video.renderPath.writeBackgroundParamB(2, value);\n\t\tbreak;\n\tcase this.BG2PC:\n\t\tthis.video.renderPath.writeBackgroundParamC(2, value);\n\t\tbreak;\n\tcase this.BG2PD:\n\t\tthis.video.renderPath.writeBackgroundParamD(2, value);\n\t\tbreak;\n\tcase this.BG3X_LO:\n\t\tthis.video.renderPath.writeBackgroundRefX(3, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG3X_HI:\n\t\tthis.video.renderPath.writeBackgroundRefX(3, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG3Y_LO:\n\t\tthis.video.renderPath.writeBackgroundRefY(3, (this.registers[(offset >> 1) | 1] << 16) | value);\n\t\tbreak;\n\tcase this.BG3Y_HI:\n\t\tthis.video.renderPath.writeBackgroundRefY(3, this.registers[(offset >> 1) ^ 1] | (value << 16));\n\t\tbreak;\n\tcase this.BG3PA:\n\t\tthis.video.renderPath.writeBackgroundParamA(3, value);\n\t\tbreak;\n\tcase this.BG3PB:\n\t\tthis.video.renderPath.writeBackgroundParamB(3, value);\n\t\tbreak;\n\tcase this.BG3PC:\n\t\tthis.video.renderPath.writeBackgroundParamC(3, value);\n\t\tbreak;\n\tcase this.BG3PD:\n\t\tthis.video.renderPath.writeBackgroundParamD(3, value);\n\t\tbreak;\n\tcase this.WIN0H:\n\t\tthis.video.renderPath.writeWin0H(value);\n\t\tbreak;\n\tcase this.WIN1H:\n\t\tthis.video.renderPath.writeWin1H(value);\n\t\tbreak;\n\tcase this.WIN0V:\n\t\tthis.video.renderPath.writeWin0V(value);\n\t\tbreak;\n\tcase this.WIN1V:\n\t\tthis.video.renderPath.writeWin1V(value);\n\t\tbreak;\n\tcase this.WININ:\n\t\tvalue &= 0x3F3F;\n\t\tthis.video.renderPath.writeWinIn(value);\n\t\tbreak;\n\tcase this.WINOUT:\n\t\tvalue &= 0x3F3F;\n\t\tthis.video.renderPath.writeWinOut(value);\n\t\tbreak;\n\tcase this.BLDCNT:\n\t\tvalue &= 0x7FFF;\n\t\tthis.video.renderPath.writeBlendControl(value);\n\t\tbreak;\n\tcase this.BLDALPHA:\n\t\tvalue &= 0x1F1F;\n\t\tthis.video.renderPath.writeBlendAlpha(value);\n\t\tbreak;\n\tcase this.BLDY:\n\t\tvalue &= 0x001F;\n\t\tthis.video.renderPath.writeBlendY(value);\n\t\tbreak;\n\tcase this.MOSAIC:\n\t\tthis.video.renderPath.writeMosaic(value);\n\t\tbreak;\n\n\t// Sound\n\tcase this.SOUND1CNT_LO:\n\t\tvalue &= 0x007F;\n\t\tthis.audio.writeSquareChannelSweep(0, value);\n\t\tbreak;\n\tcase this.SOUND1CNT_HI:\n\t\tthis.audio.writeSquareChannelDLE(0, value);\n\t\tbreak;\n\tcase this.SOUND1CNT_X:\n\t\tvalue &= 0xC7FF;\n\t\tthis.audio.writeSquareChannelFC(0, value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUND2CNT_LO:\n\t\tthis.audio.writeSquareChannelDLE(1, value);\n\t\tbreak;\n\tcase this.SOUND2CNT_HI:\n\t\tvalue &= 0xC7FF;\n\t\tthis.audio.writeSquareChannelFC(1, value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUND3CNT_LO:\n\t\tvalue &= 0x00E0;\n\t\tthis.audio.writeChannel3Lo(value);\n\t\tbreak;\n\tcase this.SOUND3CNT_HI:\n\t\tvalue &= 0xE0FF;\n\t\tthis.audio.writeChannel3Hi(value);\n\t\tbreak;\n\tcase this.SOUND3CNT_X:\n\t\tvalue &= 0xC7FF;\n\t\tthis.audio.writeChannel3X(value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUND4CNT_LO:\n\t\tvalue &= 0xFF3F;\n\t\tthis.audio.writeChannel4LE(value);\n\t\tbreak;\n\tcase this.SOUND4CNT_HI:\n\t\tvalue &= 0xC0FF;\n\t\tthis.audio.writeChannel4FC(value);\n\t\tvalue &= ~0x8000;\n\t\tbreak;\n\tcase this.SOUNDCNT_LO:\n\t\tvalue &= 0xFF77;\n\t\tthis.audio.writeSoundControlLo(value);\n\t\tbreak;\n\tcase this.SOUNDCNT_HI:\n\t\tvalue &= 0xFF0F;\n\t\tthis.audio.writeSoundControlHi(value);\n\t\tbreak;\n\tcase this.SOUNDCNT_X:\n\t\tvalue &= 0x0080;\n\t\tthis.audio.writeEnable(value);\n\t\tbreak;\n\tcase this.WAVE_RAM0_LO:\n\tcase this.WAVE_RAM0_HI:\n\tcase this.WAVE_RAM1_LO:\n\tcase this.WAVE_RAM1_HI:\n\tcase this.WAVE_RAM2_LO:\n\tcase this.WAVE_RAM2_HI:\n\tcase this.WAVE_RAM3_LO:\n\tcase this.WAVE_RAM3_HI:\n\t\tthis.audio.writeWaveData(offset - this.WAVE_RAM0_LO, value, 2);\n\t\tbreak;\n\n\t// DMA\n\tcase this.DMA0SAD_LO:\n\tcase this.DMA0DAD_LO:\n\tcase this.DMA1SAD_LO:\n\tcase this.DMA1DAD_LO:\n\tcase this.DMA2SAD_LO:\n\tcase this.DMA2DAD_LO:\n\tcase this.DMA3SAD_LO:\n\tcase this.DMA3DAD_LO:\n\t\tthis.store32(offset, (this.registers[(offset >> 1) + 1] << 16) | value);\n\t\treturn;\n\n\tcase this.DMA0SAD_HI:\n\tcase this.DMA0DAD_HI:\n\tcase this.DMA1SAD_HI:\n\tcase this.DMA1DAD_HI:\n\tcase this.DMA2SAD_HI:\n\tcase this.DMA2DAD_HI:\n\tcase this.DMA3SAD_HI:\n\tcase this.DMA3DAD_HI:\n\t\tthis.store32(offset - 2, this.registers[(offset >> 1) - 1] | (value << 16));\n\t\treturn;\n\n\tcase this.DMA0CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(0, value);\n\t\tbreak;\n\tcase this.DMA0CNT_HI:\n\t\t// The DMA registers need to set the values before writing the control, as writing the\n\t\t// control can synchronously trigger a DMA transfer\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(0, value);\n\t\treturn;\n\tcase this.DMA1CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(1, value);\n\t\tbreak;\n\tcase this.DMA1CNT_HI:\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(1, value);\n\t\treturn;\n\tcase this.DMA2CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(2, value);\n\t\tbreak;\n\tcase this.DMA2CNT_HI:\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(2, value);\n\t\treturn;\n\tcase this.DMA3CNT_LO:\n\t\tthis.cpu.irq.dmaSetWordCount(3, value);\n\t\tbreak;\n\tcase this.DMA3CNT_HI:\n\t\tthis.registers[offset >> 1] = value & 0xFFE0;\n\t\tthis.cpu.irq.dmaWriteControl(3, value);\n\t\treturn;\n\n\t// Timers\n\tcase this.TM0CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(0, value);\n\t\treturn;\n\tcase this.TM1CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(1, value);\n\t\treturn;\n\tcase this.TM2CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(2, value);\n\t\treturn;\n\tcase this.TM3CNT_LO:\n\t\tthis.cpu.irq.timerSetReload(3, value);\n\t\treturn;\n\n\tcase this.TM0CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(0, value);\n\t\tbreak;\n\tcase this.TM1CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(1, value);\n\t\tbreak;\n\tcase this.TM2CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(2, value);\n\t\tbreak;\n\tcase this.TM3CNT_HI:\n\t\tvalue &= 0x00C7\n\t\tthis.cpu.irq.timerWriteControl(3, value);\n\t\tbreak;\n\n\t// SIO\n\tcase this.SIOMULTI0:\n \tcase this.SIOMULTI1:\n \tcase this.SIOMULTI2:\n \tcase this.SIOMULTI3:\n \tcase this.SIODATA8:\n \t\tthis.STUB_REG('SIO', offset);\n \t\tbreak;\n\tcase this.RCNT:\n\t\tthis.sio.setMode(((value >> 12) & 0xC) | ((this.registers[this.SIOCNT >> 1] >> 12) & 0x3));\n\t\tthis.sio.writeRCNT(value);\n\t\tbreak;\n\tcase this.SIOCNT:\n\t\tthis.sio.setMode(((value >> 12) & 0x3) | ((this.registers[this.RCNT >> 1] >> 12) & 0xC));\n\t\tthis.sio.writeSIOCNT(value);\n\t\treturn;\n\tcase this.JOYCNT:\n\tcase this.JOYSTAT:\n\t\tthis.STUB_REG('JOY', offset);\n\t\tbreak;\n\n\t// Misc\n\tcase this.IE:\n\t\tvalue &= 0x3FFF;\n\t\tthis.cpu.irq.setInterruptsEnabled(value);\n\t\tbreak;\n\tcase this.IF:\n\t\tthis.cpu.irq.dismissIRQs(value);\n\t\treturn;\n\tcase this.WAITCNT:\n\t\tvalue &= 0xDFFF;\n\t\tthis.cpu.mmu.adjustTimings(value);\n\t\tbreak;\n\tcase this.IME:\n\t\tvalue &= 0x0001;\n\t\tthis.cpu.irq.masterEnable(value);\n\t\tbreak;\n\tdefault:\n\t\tthis.STUB_REG('I/O', offset);\n\t}\n\tthis.registers[offset >> 1] = value;\n};\n\nGameBoyAdvanceIO.prototype.store32 = function(offset, value) {\n\tswitch (offset) {\n\tcase this.BG2X_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefX(2, value);\n\t\tbreak;\n\tcase this.BG2Y_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefY(2, value);\n\t\tbreak;\n\tcase this.BG3X_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefX(3, value);\n\t\tbreak;\n\tcase this.BG3Y_LO:\n\t\tvalue &= 0x0FFFFFFF;\n\t\tthis.video.renderPath.writeBackgroundRefY(3, value);\n\t\tbreak;\n\tcase this.DMA0SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(0, value);\n\t\tbreak;\n\tcase this.DMA0DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(0, value);\n\t\tbreak;\n\tcase this.DMA1SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(1, value);\n\t\tbreak;\n\tcase this.DMA1DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(1, value);\n\t\tbreak;\n\tcase this.DMA2SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(2, value);\n\t\tbreak;\n\tcase this.DMA2DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(2, value);\n\t\tbreak;\n\tcase this.DMA3SAD_LO:\n\t\tthis.cpu.irq.dmaSetSourceAddress(3, value);\n\t\tbreak;\n\tcase this.DMA3DAD_LO:\n\t\tthis.cpu.irq.dmaSetDestAddress(3, value);\n\t\tbreak;\n\tcase this.FIFO_A_LO:\n\t\tthis.audio.appendToFifoA(value);\n\t\treturn;\n\tcase this.FIFO_B_LO:\n\t\tthis.audio.appendToFifoB(value);\n\t\treturn;\n\n\t// High bits of this write should be ignored\n\tcase this.IME:\n\t\tthis.store16(offset, value & 0xFFFF);\n\t\treturn;\n\tcase this.JOY_RECV:\n\tcase this.JOY_TRANS:\n\t\tthis.STUB_REG('JOY', offset);\n\t\treturn;\n\tdefault:\n\t\tthis.store16(offset, value & 0xFFFF);\n\t\tthis.store16(offset | 2, value >>> 16);\n\t\treturn;\n\t}\n\n\tthis.registers[offset >> 1] = value & 0xFFFF;\n\tthis.registers[(offset >> 1) + 1] = value >>> 16;\n};\n\nGameBoyAdvanceIO.prototype.invalidatePage = function(address) {};\n\nGameBoyAdvanceIO.prototype.STUB_REG = function(type, offset) {\n\tthis.core.STUB('Unimplemented ' + type + ' register write: ' + offset.toString(16));\n};\n","window.GameBoyAdvanceInterruptHandler = function GameBoyAdvanceInterruptHandler() {\n\tthis.FREQUENCY = 0x1000000;\n\n\tthis.cpu = null;\n\tthis.enable = false;\n\n\tthis.IRQ_VBLANK = 0x0;\n\tthis.IRQ_HBLANK = 0x1;\n\tthis.IRQ_VCOUNTER = 0x2;\n\tthis.IRQ_TIMER0 = 0x3;\n\tthis.IRQ_TIMER1 = 0x4;\n\tthis.IRQ_TIMER2 = 0x5;\n\tthis.IRQ_TIMER3 = 0x6;\n\tthis.IRQ_SIO = 0x7;\n\tthis.IRQ_DMA0 = 0x8;\n\tthis.IRQ_DMA1 = 0x9;\n\tthis.IRQ_DMA2 = 0xA;\n\tthis.IRQ_DMA3 = 0xB;\n\tthis.IRQ_KEYPAD = 0xC;\n\tthis.IRQ_GAMEPAK = 0xD;\n\n\tthis.MASK_VBLANK = 0x0001;\n\tthis.MASK_HBLANK = 0x0002;\n\tthis.MASK_VCOUNTER = 0x0004;\n\tthis.MASK_TIMER0 = 0x0008;\n\tthis.MASK_TIMER1 = 0x0010;\n\tthis.MASK_TIMER2 = 0x0020;\n\tthis.MASK_TIMER3 = 0x0040;\n\tthis.MASK_SIO = 0x0080;\n\tthis.MASK_DMA0 = 0x0100;\n\tthis.MASK_DMA1 = 0x0200;\n\tthis.MASK_DMA2 = 0x0400;\n\tthis.MASK_DMA3 = 0x0800;\n\tthis.MASK_KEYPAD = 0x1000;\n\tthis.MASK_GAMEPAK = 0x2000;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.clear = function() {\n\tthis.enable = false;\n\tthis.enabledIRQs = 0;\n\tthis.interruptFlags = 0;\n\n\tthis.dma = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.dma.push({\n\t\t\tsource: 0,\n\t\t\tdest: 0,\n\t\t\tcount: 0,\n\t\t\tnextSource: 0,\n\t\t\tnextDest: 0,\n\t\t\tnextCount: 0,\n\t\t\tsrcControl: 0,\n\t\t\tdstControl: 0,\n\t\t\trepeat: false,\n\t\t\twidth: 0,\n\t\t\tdrq: false,\n\t\t\ttiming: 0,\n\t\t\tdoIrq: false,\n\t\t\tenable: false,\n\t\t\tnextIRQ: 0\n\t\t});\n\t}\n\n\tthis.timersEnabled = 0;\n\tthis.timers = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.timers.push({\n\t\t\treload: 0,\n\t\t\toldReload: 0,\n\t\t\tprescaleBits: 0,\n\t\t\tcountUp: false,\n\t\t\tdoIrq: false,\n\t\t\tenable: false,\n\t\t\tlastEvent: 0,\n\t\t\tnextEvent: 0,\n\t\t\toverflowInterval: 1\n\t\t});\n\t}\n\n\tthis.nextEvent = 0;\n\tthis.springIRQ = false;\n\tthis.resetSP();\n};\n\nGameBoyAdvanceInterruptHandler.prototype.freeze = function() {\n\treturn {\n\t\t'enable': this.enable,\n\t\t'enabledIRQs': this.enabledIRQs,\n\t\t'interruptFlags': this.interruptFlags,\n\t\t'dma': this.dma,\n\t\t'timers': this.timers,\n\t\t'nextEvent': this.nextEvent,\n\t\t'springIRQ': this.springIRQ\n\t};\n};\n\nGameBoyAdvanceInterruptHandler.prototype.defrost = function(frost) {\n\tthis.enable = frost.enable;\n\tthis.enabledIRQs = frost.enabledIRQs;\n\tthis.interruptFlags = frost.interruptFlags;\n\tthis.dma = frost.dma;\n\tthis.timers = frost.timers;\n\tthis.timersEnabled = 0;\n\tif (this.timers[0].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tif (this.timers[1].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tif (this.timers[2].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tif (this.timers[3].enable) {\n\t\t++this.timersEnabled;\n\t}\n\tthis.nextEvent = frost.nextEvent;\n\tthis.springIRQ = frost.springIRQ;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.updateTimers = function() {\n\tif (this.nextEvent > this.cpu.cycles) {\n\t\treturn;\n\t}\n\n\tif (this.springIRQ) {\n\t\tthis.cpu.raiseIRQ();\n\t\tthis.springIRQ = false;\n\t}\n\n\tthis.video.updateTimers(this.cpu);\n\tthis.audio.updateTimers();\n\tif (this.timersEnabled) {\n\t\tvar timer = this.timers[0];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tthis.io.registers[this.io.TM0CNT_LO >> 1] = timer.reload;\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER0);\n\t\t\t\t}\n\n\t\t\t\tif (this.audio.enabled) {\n\t\t\t\t\tif (this.audio.enableChannelA && !this.audio.soundTimerA && this.audio.dmaA >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoA();\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (this.audio.enableChannelB && !this.audio.soundTimerB && this.audio.dmaB >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoB();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttimer = this.timers[1];\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\tif (++this.io.registers[this.io.TM1CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\t\ttimer.nextEvent = this.cpu.cycles;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttimer = this.timers[1];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tif (!timer.countUp || this.io.registers[this.io.TM1CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\tthis.io.registers[this.io.TM1CNT_LO >> 1] = timer.reload;\n\t\t\t\t}\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER1);\n\t\t\t\t}\n\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\ttimer.nextEvent = 0;\n\t\t\t\t}\n\n\t\t\t\tif (this.audio.enabled) {\n\t\t\t\t\tif (this.audio.enableChannelA && this.audio.soundTimerA && this.audio.dmaA >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoA();\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (this.audio.enableChannelB && this.audio.soundTimerB && this.audio.dmaB >= 0) {\n\t\t\t\t\t\tthis.audio.sampleFifoB();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttimer = this.timers[2];\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\tif (++this.io.registers[this.io.TM2CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\t\ttimer.nextEvent = this.cpu.cycles;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttimer = this.timers[2];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tif (!timer.countUp || this.io.registers[this.io.TM2CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\tthis.io.registers[this.io.TM2CNT_LO >> 1] = timer.reload;\n\t\t\t\t}\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER2);\n\t\t\t\t}\n\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\ttimer.nextEvent = 0;\n\t\t\t\t}\n\n\t\t\t\ttimer = this.timers[3];\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\tif (++this.io.registers[this.io.TM3CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\t\ttimer.nextEvent = this.cpu.cycles;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttimer = this.timers[3];\n\t\tif (timer.enable) {\n\t\t\tif (this.cpu.cycles >= timer.nextEvent) {\n\t\t\t\ttimer.lastEvent = timer.nextEvent;\n\t\t\t\ttimer.nextEvent += timer.overflowInterval;\n\t\t\t\tif (!timer.countUp || this.io.registers[this.io.TM3CNT_LO >> 1] == 0x10000) {\n\t\t\t\t\tthis.io.registers[this.io.TM3CNT_LO >> 1] = timer.reload;\n\t\t\t\t}\n\t\t\t\ttimer.oldReload = timer.reload;\n\n\t\t\t\tif (timer.doIrq) {\n\t\t\t\t\tthis.raiseIRQ(this.IRQ_TIMER3);\n\t\t\t\t}\n\n\t\t\t\tif (timer.countUp) {\n\t\t\t\t\ttimer.nextEvent = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tvar dma = this.dma[0];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA0);\n\t}\n\n\tdma = this.dma[1];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA1);\n\t}\n\n\tdma = this.dma[2];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA2);\n\t}\n\n\tdma = this.dma[3];\n\tif (dma.enable && dma.doIrq && dma.nextIRQ && this.cpu.cycles >= dma.nextIRQ) {\n\t\tdma.nextIRQ = 0;\n\t\tthis.raiseIRQ(this.IRQ_DMA3);\n\t}\n\n\tthis.pollNextEvent();\n}\n\nGameBoyAdvanceInterruptHandler.prototype.resetSP = function() {\n\tthis.cpu.switchMode(this.cpu.MODE_SUPERVISOR);\n\tthis.cpu.gprs[this.cpu.SP] = 0x3007FE0;\n\tthis.cpu.switchMode(this.cpu.MODE_IRQ);\n\tthis.cpu.gprs[this.cpu.SP] = 0x3007FA0;\n\tthis.cpu.switchMode(this.cpu.MODE_SYSTEM);\n\tthis.cpu.gprs[this.cpu.SP] = 0x3007F00;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.swi32 = function(opcode) {\n\tthis.swi(opcode >> 16);\n};\n\nGameBoyAdvanceInterruptHandler.prototype.swi = function(opcode) {\n\tif (this.core.mmu.bios.real) {\n\t\tthis.cpu.raiseTrap();\n\t\treturn;\n\t}\n\n\tswitch (opcode) {\n\tcase 0x00:\n\t\t// SoftReset\n\t\tvar mem = this.core.mmu.memory[this.core.mmu.REGION_WORKING_IRAM];\n\t\tvar flag = mem.loadU8(0x7FFA);\n\t\tfor (var i = 0x7E00; i < 0x8000; i += 4) {\n\t\t\tmem.store32(i, 0);\n\t\t}\n\t\tthis.resetSP();\n\t\tif (!flag) {\n\t\t\tthis.cpu.gprs[this.cpu.LR] = 0x08000000;\n\t\t} else {\n\t\t\tthis.cpu.gprs[this.cpu.LR] = 0x02000000;\n\t\t}\n\t\tthis.cpu.switchExecMode(this.cpu.MODE_ARM);\n\t\tthis.cpu.instruction.writesPC = true;\n\t\tthis.cpu.gprs[this.cpu.PC] = this.cpu.gprs[this.cpu.LR];\n\t\tbreak;\n\tcase 0x01:\n\t\t// RegisterRamReset\n\t\tvar regions = this.cpu.gprs[0];\n\t\tif (regions & 0x01) {\n\t\t\tthis.core.mmu.memory[this.core.mmu.REGION_WORKING_RAM] = new MemoryBlock(this.core.mmu.SIZE_WORKING_RAM, 9);\n\t\t}\n\t\tif (regions & 0x02) {\n\t\t\tfor (var i = 0; i < this.core.mmu.SIZE_WORKING_IRAM - 0x200; i += 4) {\n\t\t\t\tthis.core.mmu.memory[this.core.mmu.REGION_WORKING_IRAM].store32(i, 0);\n\t\t\t}\n\t\t}\n\t\tif (regions & 0x1C) {\n\t\t\tthis.video.renderPath.clearSubsets(this.core.mmu, regions);\n\t\t}\n\t\tif (regions & 0xE0) {\n\t\t\tthis.core.STUB('Unimplemented RegisterRamReset');\n\t\t}\n\t\tbreak;\n\tcase 0x02:\n\t\t// Halt\n\t\tthis.halt();\n\t\tbreak;\n\tcase 0x05:\n\t\t// VBlankIntrWait\n\t\tthis.cpu.gprs[0] = 1;\n\t\tthis.cpu.gprs[1] = 1;\n\t\t// Fall through:\n\tcase 0x04:\n\t\t// IntrWait\n\t\tif (!this.enable) {\n\t\t\tthis.io.store16(this.io.IME, 1);\n\t\t}\n\t\tif (!this.cpu.gprs[0] && this.interruptFlags & this.cpu.gprs[1]) {\n\t\t\treturn;\n\t\t}\n\t\tthis.dismissIRQs(0xFFFFFFFF);\n\t\tthis.cpu.raiseTrap();\n\t\tbreak;\n\tcase 0x06:\n\t\t// Div\n\t\tvar result = (this.cpu.gprs[0] | 0) / (this.cpu.gprs[1] | 0);\n\t\tvar mod = (this.cpu.gprs[0] | 0) % (this.cpu.gprs[1] | 0);\n\t\tthis.cpu.gprs[0] = result | 0;\n\t\tthis.cpu.gprs[1] = mod | 0;\n\t\tthis.cpu.gprs[3] = Math.abs(result | 0);\n\t\tbreak;\n\tcase 0x07:\n\t\t// DivArm\n\t\tvar result = (this.cpu.gprs[1] | 0) / (this.cpu.gprs[0] | 0);\n\t\tvar mod = (this.cpu.gprs[1] | 0) % (this.cpu.gprs[0] | 0);\n\t\tthis.cpu.gprs[0] = result | 0;\n\t\tthis.cpu.gprs[1] = mod | 0;\n\t\tthis.cpu.gprs[3] = Math.abs(result | 0);\n\t\tbreak;\n\tcase 0x08:\n\t\t// Sqrt\n\t\tvar root = Math.sqrt(this.cpu.gprs[0]);\n\t\tthis.cpu.gprs[0] = root | 0; // Coerce down to int\n\t\tbreak;\n\tcase 0x0A:\n\t\t// ArcTan2\n\t\tvar x = this.cpu.gprs[0] / 16384;\n\t\tvar y = this.cpu.gprs[1] / 16384;\n\t\tthis.cpu.gprs[0] = (Math.atan2(y, x) / (2 * Math.PI)) * 0x10000;\n\t\tbreak;\n\tcase 0x0B:\n\t\t// CpuSet\n\t\tvar source = this.cpu.gprs[0];\n\t\tvar dest = this.cpu.gprs[1];\n\t\tvar mode = this.cpu.gprs[2];\n\t\tvar count = mode & 0x000FFFFF;\n\t\tvar fill = mode & 0x01000000;\n\t\tvar wordsize = (mode & 0x04000000) ? 4 : 2;\n\t\tif (fill) {\n\t\t\tif (wordsize == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\tvar word = this.cpu.mmu.load32(source);\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsource &= 0xFFFFFFFE;\n\t\t\t\tdest &= 0xFFFFFFFE;\n\t\t\t\tvar word = this.cpu.mmu.load16(source);\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tthis.cpu.mmu.store16(dest + (i << 1), word);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (wordsize == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tvar word = this.cpu.mmu.load32(source + (i << 2));\n\t\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsource &= 0xFFFFFFFE;\n\t\t\t\tdest &= 0xFFFFFFFE;\n\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\tvar word = this.cpu.mmu.load16(source + (i << 1));\n\t\t\t\t\tthis.cpu.mmu.store16(dest + (i << 1), word);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\tcase 0x0C:\n\t\t// FastCpuSet\n\t\tvar source = this.cpu.gprs[0] & 0xFFFFFFFC;\n\t\tvar dest = this.cpu.gprs[1] & 0xFFFFFFFC;\n\t\tvar mode = this.cpu.gprs[2];\n\t\tvar count = mode & 0x000FFFFF;\n\t\tcount = ((count + 7) >> 3) << 3;\n\t\tvar fill = mode & 0x01000000;\n\t\tif (fill) {\n\t\t\tvar word = this.cpu.mmu.load32(source);\n\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\tvar word = this.cpu.mmu.load32(source + (i << 2));\n\t\t\t\tthis.cpu.mmu.store32(dest + (i << 2), word);\n\t\t\t}\n\t\t}\n\t\treturn;\n\tcase 0x0E:\n\t\t// BgAffineSet\n\t\tvar i = this.cpu.gprs[2];\n\t\tvar ox, oy;\n\t\tvar cx, cy;\n\t\tvar sx, sy;\n\t\tvar theta;\n\t\tvar offset = this.cpu.gprs[0];\n\t\tvar destination = this.cpu.gprs[1];\n\t\tvar a, b, c, d;\n\t\tvar rx, ry;\n\t\twhile (i--) {\n\t\t\t// [ sx   0  0 ]   [ cos(theta)  -sin(theta)  0 ]   [ 1  0  cx - ox ]   [ A B rx ]\n\t\t\t// [  0  sy  0 ] * [ sin(theta)   cos(theta)  0 ] * [ 0  1  cy - oy ] = [ C D ry ]\n\t\t\t// [  0   0  1 ]   [     0            0       1 ]   [ 0  0     1    ]   [ 0 0  1 ]\n\t\t\tox = this.core.mmu.load32(offset) / 256;\n\t\t\toy = this.core.mmu.load32(offset + 4) / 256;\n\t\t\tcx = this.core.mmu.load16(offset + 8);\n\t\t\tcy = this.core.mmu.load16(offset + 10);\n\t\t\tsx = this.core.mmu.load16(offset + 12) / 256;\n\t\t\tsy = this.core.mmu.load16(offset + 14) / 256;\n\t\t\ttheta = (this.core.mmu.loadU16(offset + 16) >> 8) / 128 * Math.PI;\n\t\t\toffset += 20;\n\t\t\t// Rotation\n\t\t\ta = d = Math.cos(theta);\n\t\t\tb = c = Math.sin(theta);\n\t\t\t// Scale\n\t\t\ta *= sx;\n\t\t\tb *= -sx;\n\t\t\tc *= sy;\n\t\t\td *= sy;\n\t\t\t// Translate\n\t\t\trx = ox - (a * cx + b * cy);\n\t\t\try = oy - (c * cx + d * cy);\n\t\t\tthis.core.mmu.store16(destination, (a * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + 2, (b * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + 4, (c * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + 6, (d * 256) | 0);\n\t\t\tthis.core.mmu.store32(destination + 8, (rx * 256) | 0);\n\t\t\tthis.core.mmu.store32(destination + 12, (ry * 256) | 0);\n\t\t\tdestination += 16;\n\t\t}\n\t\tbreak;\n\tcase 0x0F:\n\t\t// ObjAffineSet\n\t\tvar i = this.cpu.gprs[2];\n\t\tvar sx, sy;\n\t\tvar theta;\n\t\tvar offset = this.cpu.gprs[0];\n\t\tvar destination = this.cpu.gprs[1]\n\t\tvar diff = this.cpu.gprs[3];\n\t\tvar a, b, c, d;\n\t\twhile (i--) {\n\t\t\t// [ sx   0 ]   [ cos(theta)  -sin(theta) ]   [ A B ]\n\t\t\t// [  0  sy ] * [ sin(theta)   cos(theta) ] = [ C D ]\n\t\t\tsx = this.core.mmu.load16(offset) / 256;\n\t\t\tsy = this.core.mmu.load16(offset + 2) / 256;\n\t\t\ttheta = (this.core.mmu.loadU16(offset + 4) >> 8) / 128 * Math.PI;\n\t\t\toffset += 6;\n\t\t\t// Rotation\n\t\t\ta = d = Math.cos(theta);\n\t\t\tb = c = Math.sin(theta);\n\t\t\t// Scale\n\t\t\ta *= sx;\n\t\t\tb *= -sx;\n\t\t\tc *= sy;\n\t\t\td *= sy;\n\t\t\tthis.core.mmu.store16(destination, (a * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + diff, (b * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + diff * 2, (c * 256) | 0);\n\t\t\tthis.core.mmu.store16(destination + diff * 3, (d * 256) | 0);\n\t\t\tdestination += diff * 4;\n\t\t}\n\t\tbreak;\n\tcase 0x11:\n\t\t// LZ77UnCompWram\n\t\tthis.lz77(this.cpu.gprs[0], this.cpu.gprs[1], 1);\n\t\tbreak;\n\tcase 0x12:\n\t\t// LZ77UnCompVram\n\t\tthis.lz77(this.cpu.gprs[0], this.cpu.gprs[1], 2);\n\t\tbreak;\n\tcase 0x13:\n\t\t// HuffUnComp\n\t\tthis.huffman(this.cpu.gprs[0], this.cpu.gprs[1]);\n\t\tbreak;\n\tcase 0x14:\n\t\t// RlUnCompWram\n\t\tthis.rl(this.cpu.gprs[0], this.cpu.gprs[1], 1);\n\t\tbreak;\n\tcase 0x15:\n\t\t// RlUnCompVram\n\t\tthis.rl(this.cpu.gprs[0], this.cpu.gprs[1], 2);\n\t\tbreak;\n\tcase 0x1F:\n\t\t// MidiKey2Freq\n\t\tvar key = this.cpu.mmu.load32(this.cpu.gprs[0] + 4);\n\t\tthis.cpu.gprs[0] = key / Math.pow(2, (180 - this.cpu.gprs[1] - this.cpu.gprs[2] / 256) / 12) >>> 0;\n\t\tbreak;\n\tdefault:\n\t\tthrow \"Unimplemented software interrupt: 0x\" + opcode.toString(16);\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.masterEnable = function(value) {\n\tthis.enable = value;\n\n\tif (this.enable && this.enabledIRQs & this.interruptFlags) {\n\t\tthis.cpu.raiseIRQ();\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.setInterruptsEnabled = function(value) {\n\tthis.enabledIRQs = value;\n\n\tif (this.enabledIRQs & this.MASK_SIO) {\n\t\tthis.core.STUB('Serial I/O interrupts not implemented');\n\t}\n\n\tif (this.enabledIRQs & this.MASK_KEYPAD) {\n\t\tthis.core.STUB('Keypad interrupts not implemented');\n\t}\n\n\tif (this.enable && this.enabledIRQs & this.interruptFlags) {\n\t\tthis.cpu.raiseIRQ();\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.pollNextEvent = function() {\n\tvar nextEvent = this.video.nextEvent;\n\tvar test;\n\n\tif (this.audio.enabled) {\n\t\ttest = this.audio.nextEvent;\n\t\tif (!nextEvent || test < nextEvent) {\n\t\t\tnextEvent = test;\n\t\t}\n\t}\n\n\tif (this.timersEnabled) {\n\t\tvar timer = this.timers[0];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\n\t\ttimer = this.timers[1];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\t\ttimer = this.timers[2];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\t\ttimer = this.timers[3];\n\t\ttest = timer.nextEvent;\n\t\tif (timer.enable && test && (!nextEvent || test < nextEvent)) {\n\t\t\tnextEvent = test;\n\t\t}\n\t}\n\n\tvar dma = this.dma[0];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tdma = this.dma[1];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tdma = this.dma[2];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tdma = this.dma[3];\n\ttest = dma.nextIRQ;\n\tif (dma.enable && dma.doIrq && test && (!nextEvent || test < nextEvent)) {\n\t\tnextEvent = test;\n\t}\n\n\tthis.core.ASSERT(nextEvent >= this.cpu.cycles, \"Next event is before present\");\n\tthis.nextEvent = nextEvent;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.waitForIRQ = function() {\n\tvar timer;\n\tvar irqPending = this.testIRQ() || this.video.hblankIRQ || this.video.vblankIRQ || this.video.vcounterIRQ;\n\tif (this.timersEnabled) {\n\t\ttimer = this.timers[0];\n\t\tirqPending = irqPending || timer.doIrq;\n\t\ttimer = this.timers[1];\n\t\tirqPending = irqPending || timer.doIrq;\n\t\ttimer = this.timers[2];\n\t\tirqPending = irqPending || timer.doIrq;\n\t\ttimer = this.timers[3];\n\t\tirqPending = irqPending || timer.doIrq;\n\t}\n\tif (!irqPending) {\n\t\treturn false;\n\t}\n\n\tfor (;;) {\n\t\tthis.pollNextEvent();\n\n\t\tif (!this.nextEvent) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tthis.cpu.cycles = this.nextEvent;\n\t\t\tthis.updateTimers();\n\t\t\tif (this.interruptFlags) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.testIRQ = function() {\n\tif (this.enable && this.enabledIRQs & this.interruptFlags) {\n\t\tthis.springIRQ = true;\n\t\tthis.nextEvent = this.cpu.cycles;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.raiseIRQ = function(irqType) {\n\tthis.interruptFlags |= 1 << irqType;\n\tthis.io.registers[this.io.IF >> 1] = this.interruptFlags;\n\n\tif (this.enable && (this.enabledIRQs & 1 << irqType)) {\n\t\tthis.cpu.raiseIRQ();\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dismissIRQs = function(irqMask) {\n\tthis.interruptFlags &= ~irqMask;\n\tthis.io.registers[this.io.IF >> 1] = this.interruptFlags;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaSetSourceAddress = function(dma, address) {\n\tthis.dma[dma].source = address & 0xFFFFFFFE;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaSetDestAddress = function(dma, address) {\n\tthis.dma[dma].dest = address & 0xFFFFFFFE;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaSetWordCount = function(dma, count) {\n\tthis.dma[dma].count = count ? count : (dma == 3 ? 0x10000 : 0x4000);\n};\n\nGameBoyAdvanceInterruptHandler.prototype.dmaWriteControl = function(dma, control) {\n\tvar currentDma = this.dma[dma];\n\tvar wasEnabled = currentDma.enable;\n\tcurrentDma.dstControl = (control & 0x0060) >> 5;\n\tcurrentDma.srcControl = (control & 0x0180) >> 7;\n\tcurrentDma.repeat = !!(control & 0x0200);\n\tcurrentDma.width = (control & 0x0400) ? 4 : 2;\n\tcurrentDma.drq = !!(control & 0x0800);\n\tcurrentDma.timing = (control & 0x3000) >> 12;\n\tcurrentDma.doIrq = !!(control & 0x4000);\n\tcurrentDma.enable = !!(control & 0x8000);\n\tcurrentDma.nextIRQ = 0;\n\n\tif (currentDma.drq) {\n\t\tthis.core.WARN('DRQ not implemented');\n\t}\n\n\tif (!wasEnabled && currentDma.enable) {\n\t\tcurrentDma.nextSource = currentDma.source;\n\t\tcurrentDma.nextDest = currentDma.dest;\n\t\tcurrentDma.nextCount = currentDma.count;\n\t\tthis.cpu.mmu.scheduleDma(dma, currentDma);\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.timerSetReload = function(timer, reload) {\n\tthis.timers[timer].reload = reload & 0xFFFF;\n};\n\nGameBoyAdvanceInterruptHandler.prototype.timerWriteControl = function(timer, control) {\n\tvar currentTimer = this.timers[timer];\n\tvar oldPrescale = currentTimer.prescaleBits;\n\tswitch (control & 0x0003) {\n\tcase 0x0000:\n\t\tcurrentTimer.prescaleBits = 0;\n\t\tbreak;\n\tcase 0x0001:\n\t\tcurrentTimer.prescaleBits = 6;\n\t\tbreak;\n\tcase 0x0002:\n\t\tcurrentTimer.prescaleBits = 8;\n\t\tbreak;\n\tcase 0x0003:\n\t\tcurrentTimer.prescaleBits = 10;\n\t\tbreak;\n\t}\n\tcurrentTimer.countUp = !!(control & 0x0004);\n\tcurrentTimer.doIrq = !!(control & 0x0040);\n\tcurrentTimer.overflowInterval = (0x10000 - currentTimer.reload) << currentTimer.prescaleBits;\n\tvar wasEnabled = currentTimer.enable;\n\tcurrentTimer.enable = !!(((control & 0x0080) >> 7) << timer);\n\tif (!wasEnabled && currentTimer.enable) {\n\t\tif (!currentTimer.countUp) {\n\t\t\tcurrentTimer.lastEvent = this.cpu.cycles;\n\t\t\tcurrentTimer.nextEvent = this.cpu.cycles + currentTimer.overflowInterval;\n\t\t} else {\n\t\t\tcurrentTimer.nextEvent = 0;\n\t\t}\n\t\tthis.io.registers[(this.io.TM0CNT_LO + (timer << 2)) >> 1] = currentTimer.reload;\n\t\tcurrentTimer.oldReload = currentTimer.reload;\n\t\t++this.timersEnabled;\n\t} else if (wasEnabled && !currentTimer.enable) {\n\t\tif (!currentTimer.countUp) {\n\t\t\tthis.io.registers[(this.io.TM0CNT_LO + (timer << 2)) >> 1] = currentTimer.oldReload + (this.cpu.cycles - currentTimer.lastEvent) >> oldPrescale;\n\t\t}\n\t\t--this.timersEnabled;\n\t} else if (currentTimer.prescaleBits != oldPrescale && !currentTimer.countUp) {\n\t\t// FIXME: this might be before present\n\t\tcurrentTimer.nextEvent = currentTimer.lastEvent + currentTimer.overflowInterval;\n\t}\n\n\t// We've changed the timers somehow...we need to reset the next event\n\tthis.pollNextEvent();\n};\n\nGameBoyAdvanceInterruptHandler.prototype.timerRead = function(timer) {\n\tvar currentTimer = this.timers[timer];\n\tif (currentTimer.enable && !currentTimer.countUp) {\n\t\treturn currentTimer.oldReload + (this.cpu.cycles - currentTimer.lastEvent) >> currentTimer.prescaleBits;\n\t} else {\n\t\treturn this.io.registers[(this.io.TM0CNT_LO + (timer << 2)) >> 1];\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.halt = function() {\n\tif (!this.enable) {\n\t\tthrow \"Requested HALT when interrupts were disabled!\";\n\t}\n\tif (!this.waitForIRQ()) {\n\t\tthrow \"Waiting on interrupt forever.\";\n\t}\n}\n\nGameBoyAdvanceInterruptHandler.prototype.lz77 = function(source, dest, unitsize) {\n\t// TODO: move to a different file\n\tvar remaining = (this.cpu.mmu.load32(source) & 0xFFFFFF00) >> 8;\n\t// We assume the signature byte (0x10) is correct\n\tvar blockheader;\n\tvar sPointer = source + 4;\n\tvar dPointer = dest;\n\tvar blocksRemaining = 0;\n\tvar block;\n\tvar disp;\n\tvar bytes;\n\tvar buffer = 0;\n\tvar loaded;\n\twhile (remaining > 0) {\n\t\tif (blocksRemaining) {\n\t\t\tif (blockheader & 0x80) {\n\t\t\t\t// Compressed\n\t\t\t\tblock = this.cpu.mmu.loadU8(sPointer) | (this.cpu.mmu.loadU8(sPointer + 1) << 8);\n\t\t\t\tsPointer += 2;\n\t\t\t\tdisp = dPointer - (((block & 0x000F) << 8) | ((block & 0xFF00) >> 8)) - 1;\n\t\t\t\tbytes = ((block & 0x00F0) >> 4) + 3;\n\t\t\t\twhile (bytes-- && remaining) {\n\t\t\t\t\tloaded = this.cpu.mmu.loadU8(disp++);\n\t\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\t\tbuffer |= loaded << 8;\n\t\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cpu.mmu.store8(dPointer, loaded);\n\t\t\t\t\t}\n\t\t\t\t\t--remaining;\n\t\t\t\t\t++dPointer;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Uncompressed\n\t\t\t\tloaded = this.cpu.mmu.loadU8(sPointer++);\n\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\tbuffer |= loaded << 8;\n\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cpu.mmu.store8(dPointer, loaded);\n\t\t\t\t}\n\t\t\t\t--remaining;\n\t\t\t\t++dPointer;\n\t\t\t}\n\t\t\tblockheader <<= 1;\n\t\t\t--blocksRemaining;\n\t\t} else {\n\t\t\tblockheader = this.cpu.mmu.loadU8(sPointer++);\n\t\t\tblocksRemaining = 8;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.huffman = function(source, dest) {\n\tsource = source & 0xFFFFFFFC;\n\tvar header = this.cpu.mmu.load32(source);\n\tvar remaining = header >> 8;\n\tvar bits = header & 0xF;\n\tif (32 % bits) {\n\t\tthrow 'Unimplemented unaligned Huffman';\n\t}\n\tvar padding = (4 - remaining) & 0x3;\n\tremaining &= 0xFFFFFFFC;\n\t// We assume the signature byte (0x20) is correct\n\tvar tree = [];\n\tvar treesize = (this.cpu.mmu.loadU8(source + 4) << 1) + 1;\n\tvar block;\n\tvar sPointer = source + 5 + treesize;\n\tvar dPointer = dest & 0xFFFFFFFC;\n\tvar i;\n\tfor (i = 0; i < treesize; ++i) {\n\t\ttree.push(this.cpu.mmu.loadU8(source + 5 + i));\n\t}\n\tvar node;\n\tvar offset = 0;\n\tvar bitsRemaining;\n\tvar readBits;\n\tvar bitsSeen = 0;\n\tnode = tree[0];\n\twhile (remaining > 0) {\n\t\tvar bitstream = this.cpu.mmu.load32(sPointer);\n\t\tsPointer += 4;\n\t\tfor (bitsRemaining = 32; bitsRemaining > 0; --bitsRemaining, bitstream <<= 1) {\n\t\t\tif (typeof (node) === 'number') {\n\t\t\t\t// Lazily construct tree\n\t\t\t\tvar next = (offset - 1 | 1) + ((node & 0x3F) << 1) + 2;\n\t\t\t\tnode = {\n\t\t\t\t\tl: next,\n\t\t\t\t\tr: next + 1,\n\t\t\t\t\tlTerm: node & 0x80,\n\t\t\t\t\trTerm: node & 0x40\n\t\t\t\t};\n\t\t\t\ttree[offset] = node;\n\t\t\t}\n\n\t\t\tif (bitstream & 0x80000000) {\n\t\t\t\t// Go right\n\t\t\t\tif (node.rTerm) {\n\t\t\t\t\treadBits = tree[node.r];\n\t\t\t\t} else {\n\t\t\t\t\toffset = node.r;\n\t\t\t\t\tnode = tree[node.r];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Go left\n\t\t\t\tif (node.lTerm) {\n\t\t\t\t\treadBits = tree[node.l];\n\t\t\t\t} else {\n\t\t\t\t\toffset = node.l;\n\t\t\t\t\tnode = tree[offset];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tblock |= (readBits & ((1 << bits) - 1)) << bitsSeen;\n\t\t\tbitsSeen += bits;\n\t\t\toffset = 0;\n\t\t\tnode = tree[0];\n\t\t\tif (bitsSeen == 32) {\n\t\t\t\tbitsSeen = 0;\n\t\t\t\tthis.cpu.mmu.store32(dPointer, block);\n\t\t\t\tdPointer += 4;\n\t\t\t\tremaining -= 4;\n\t\t\t\tblock = 0;\n\t\t\t}\n\t\t}\n\n\t}\n\tif (padding) {\n\t\tthis.cpu.mmu.store32(dPointer, block);\n\t}\n};\n\nGameBoyAdvanceInterruptHandler.prototype.rl = function(source, dest, unitsize) {\n\tsource = source & 0xFFFFFFFC;\n\tvar remaining = (this.cpu.mmu.load32(source) & 0xFFFFFF00) >> 8;\n\tvar padding = (4 - remaining) & 0x3;\n\t// We assume the signature byte (0x30) is correct\n\tvar blockheader;\n\tvar block;\n\tvar sPointer = source + 4;\n\tvar dPointer = dest;\n\tvar buffer = 0;\n\twhile (remaining > 0) {\n\t\tblockheader = this.cpu.mmu.loadU8(sPointer++);\n\t\tif (blockheader & 0x80) {\n\t\t\t// Compressed\n\t\t\tblockheader &= 0x7F;\n\t\t\tblockheader += 3;\n\t\t\tblock = this.cpu.mmu.loadU8(sPointer++);\n\t\t\twhile (blockheader-- && remaining) {\n\t\t\t\t--remaining;\n\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\tbuffer |= block << 8;\n\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cpu.mmu.store8(dPointer, block);\n\t\t\t\t}\n\t\t\t\t++dPointer;\n\t\t\t}\n\t\t} else {\n\t\t\t// Uncompressed\n\t\t\tblockheader++;\n\t\t\twhile (blockheader-- && remaining) {\n\t\t\t\t--remaining;\n\t\t\t\tblock = this.cpu.mmu.loadU8(sPointer++);\n\t\t\t\tif (unitsize == 2) {\n\t\t\t\t\tbuffer >>= 8;\n\t\t\t\t\tbuffer |= block << 8;\n\t\t\t\t\tif (dPointer & 1) {\n\t\t\t\t\t\tthis.cpu.mmu.store16(dPointer - 1, buffer);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.cpu.mmu.store8(dPointer, block);\n\t\t\t\t}\n\t\t\t\t++dPointer;\n\t\t\t}\n\t\t}\n\t}\n\twhile (padding--) {\n\t\tthis.cpu.mmu.store8(dPointer++, 0);\n\t}\n};\n","window.GameBoyAdvanceKeypad = function GameBoyAdvanceKeypad() {\n\tthis.KEYCODE_LEFT = 37;\n\tthis.KEYCODE_UP = 38;\n\tthis.KEYCODE_RIGHT = 39;\n\tthis.KEYCODE_DOWN = 40;\n\tthis.KEYCODE_START = 13;\n\tthis.KEYCODE_SELECT = 220;\n\tthis.KEYCODE_A = 90;\n\tthis.KEYCODE_B = 88;\n\tthis.KEYCODE_L = 65;\n\tthis.KEYCODE_R = 83;\n\n\tthis.GAMEPAD_LEFT = 14;\n\tthis.GAMEPAD_UP = 12;\n\tthis.GAMEPAD_RIGHT = 15;\n\tthis.GAMEPAD_DOWN = 13;\n\tthis.GAMEPAD_START = 9;\n\tthis.GAMEPAD_SELECT = 8;\n\tthis.GAMEPAD_A = 1;\n\tthis.GAMEPAD_B = 0;\n\tthis.GAMEPAD_L = 4;\n\tthis.GAMEPAD_R = 5;\n\tthis.GAMEPAD_THRESHOLD = 0.2;\n\n\tthis.A = 0;\n\tthis.B = 1;\n\tthis.SELECT = 2;\n\tthis.START = 3;\n\tthis.RIGHT = 4;\n\tthis.LEFT = 5;\n\tthis.UP = 6;\n\tthis.DOWN = 7;\n\tthis.R = 8;\n\tthis.L = 9;\n\n\tthis.currentDown = 0x03FF;\n\tthis.eatInput = false;\n\n\tthis.gamepads = [];\n};\n\nGameBoyAdvanceKeypad.prototype.keyboardHandler = function(e) {\n\tvar toggle = 0;\n\tswitch (e.keyCode) {\n\tcase this.KEYCODE_START:\n\t\ttoggle = this.START;\n\t\tbreak;\n\tcase this.KEYCODE_SELECT:\n\t\ttoggle = this.SELECT;\n\t\tbreak;\n\tcase this.KEYCODE_A:\n\t\ttoggle = this.A;\n\t\tbreak;\n\tcase this.KEYCODE_B:\n\t\ttoggle = this.B;\n\t\tbreak;\n\tcase this.KEYCODE_L:\n\t\ttoggle = this.L;\n\t\tbreak;\n\tcase this.KEYCODE_R:\n\t\ttoggle = this.R;\n\t\tbreak;\n\tcase this.KEYCODE_UP:\n\t\ttoggle = this.UP;\n\t\tbreak;\n\tcase this.KEYCODE_RIGHT:\n\t\ttoggle = this.RIGHT;\n\t\tbreak;\n\tcase this.KEYCODE_DOWN:\n\t\ttoggle = this.DOWN;\n\t\tbreak;\n\tcase this.KEYCODE_LEFT:\n\t\ttoggle = this.LEFT;\n\t\tbreak;\n\tdefault:\n\t\treturn;\n\t}\n\n\ttoggle = 1 << toggle;\n\tif (e.type == \"keydown\") {\n\t\tthis.currentDown &= ~toggle;\n\t} else {\n\t\tthis.currentDown |= toggle;\n\t}\n\n\tif (this.eatInput) {\n\t\te.preventDefault();\n\t}\n};\n\nGameBoyAdvanceKeypad.prototype.gamepadHandler = function(gamepad) {\n\tvar value = 0;\n\tif (gamepad.buttons[this.GAMEPAD_LEFT] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.LEFT;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_UP] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.UP;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_RIGHT] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.RIGHT;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_DOWN] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.DOWN;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_START] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.START;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_SELECT] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.SELECT;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_A] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.A;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_B] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.B;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_L] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.L;\n\t}\n\tif (gamepad.buttons[this.GAMEPAD_R] > this.GAMEPAD_THRESHOLD) {\n\t\tvalue |= 1 << this.R;\n\t}\n\n\tthis.currentDown = ~value & 0x3FF;\n};\n\nGameBoyAdvanceKeypad.prototype.gamepadConnectHandler = function(gamepad) {\n\tthis.gamepads.push(gamepad);\n};\n\nGameBoyAdvanceKeypad.prototype.gamepadDisconnectHandler = function(gamepad) {\n\tthis.gamepads = self.gamepads.filter(function(other) { return other != gamepad });\n};\n\nGameBoyAdvanceKeypad.prototype.pollGamepads = function() {\n\tvar navigatorList = [];\n\tif (navigator.webkitGetGamepads) {\n\t\tnavigatorList = navigator.webkitGetGamepads();\n\t} else if (navigator.getGamepads) {\n\t\tnavigatorList = navigator.getGamepads();\n\t}\n\n\t// Let's all give a shout out to Chrome for making us get the gamepads EVERY FRAME\n\tif (navigatorList.length) {\n\t\tthis.gamepads = [];\n\t}\n\tfor (var i = 0; i < navigatorList.length; ++i) {\n\t\tif (navigatorList[i]) {\n\t\t\tthis.gamepads.push(navigatorList[i]);\n\t\t}\n\t}\n\tif (this.gamepads.length > 0) {\n\t\tthis.gamepadHandler(this.gamepads[0]);\n\t}\n\n};\n\nGameBoyAdvanceKeypad.prototype.registerHandlers = function() {\n\twindow.addEventListener(\"keydown\", this.keyboardHandler.bind(this), true);\n\twindow.addEventListener(\"keyup\", this.keyboardHandler.bind(this), true);\n\n\twindow.addEventListener(\"gamepadconnected\", this.gamepadConnectHandler.bind(this), true);\n\twindow.addEventListener(\"mozgamepadconnected\", this.gamepadConnectHandler.bind(this), true);\n\twindow.addEventListener(\"webkitgamepadconnected\", this.gamepadConnectHandler.bind(this), true);\n\n\twindow.addEventListener(\"gamepaddisconnected\", this.gamepadDisconnectHandler.bind(this), true);\n\twindow.addEventListener(\"mozgamepaddisconnected\", this.gamepadDisconnectHandler.bind(this), true);\n\twindow.addEventListener(\"webkitgamepaddisconnected\", this.gamepadDisconnectHandler.bind(this), true);\n};\n","window.MemoryView = function MemoryView(memory, offset) {\n\tthis.buffer = memory;\n\tthis.view = new DataView(this.buffer, typeof(offset) === \"number\" ? offset : 0);\n\tthis.mask = memory.byteLength - 1;\n\tthis.resetMask();\n};\n\nMemoryView.prototype.resetMask = function() {\n\tthis.mask8 = this.mask & 0xFFFFFFFF;\n\tthis.mask16 = this.mask & 0xFFFFFFFE;\n\tthis.mask32 = this.mask & 0xFFFFFFFC;\n};\n\nMemoryView.prototype.load8 = function(offset) {\n\treturn this.view.getInt8(offset & this.mask8);\n};\n\nMemoryView.prototype.load16 = function(offset) {\n\t// Unaligned 16-bit loads are unpredictable...let's just pretend they work\n\treturn this.view.getInt16(offset & this.mask, true);\n};\n\nMemoryView.prototype.loadU8 = function(offset) {\n\treturn this.view.getUint8(offset & this.mask8);\n};\n\nMemoryView.prototype.loadU16 = function(offset) {\n\t// Unaligned 16-bit loads are unpredictable...let's just pretend they work\n\treturn this.view.getUint16(offset & this.mask, true);\n};\n\nMemoryView.prototype.load32 = function(offset) {\n\t// Unaligned 32-bit loads are \"rotated\" so they make some semblance of sense\n\tvar rotate = (offset & 3) << 3;\n\tvar mem = this.view.getInt32(offset & this.mask32, true);\n\treturn (mem >>> rotate) | (mem << (32 - rotate));\n};\n\nMemoryView.prototype.store8 = function(offset, value) {\n\tthis.view.setInt8(offset & this.mask8, value);\n};\n\nMemoryView.prototype.store16 = function(offset, value) {\n\tthis.view.setInt16(offset & this.mask16, value, true);\n};\n\nMemoryView.prototype.store32 = function(offset, value) {\n\tthis.view.setInt32(offset & this.mask32, value, true);\n};\n\nMemoryView.prototype.invalidatePage = function(address) {};\n\nMemoryView.prototype.replaceData = function(memory, offset) {\n\tthis.buffer = memory;\n\tthis.view = new DataView(this.buffer, typeof(offset) === \"number\" ? offset : 0);\n\tif (this.icache) {\n\t\tthis.icache = new Array(this.icache.length);\n\t}\n};\n\nwindow.MemoryBlock = function MemoryBlock(size, cacheBits) {\n\tMemoryView.call(this, new ArrayBuffer(size));\n\tthis.ICACHE_PAGE_BITS = cacheBits;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\tthis.icache = new Array(size >> (this.ICACHE_PAGE_BITS + 1));\n};\n\nMemoryBlock.prototype = Object.create(MemoryView.prototype);\n\nMemoryBlock.prototype.invalidatePage = function(address) {\n\tvar page = this.icache[(address & this.mask) >> this.ICACHE_PAGE_BITS];\n\tif (page) {\n\t\tpage.invalid = true;\n\t}\n};\n\nfunction ROMView(rom, offset) {\n\tMemoryView.call(this, rom, offset);\n\tthis.ICACHE_PAGE_BITS = 10;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\tthis.icache = new Array(rom.byteLength >> (this.ICACHE_PAGE_BITS + 1));\n\tthis.mask = 0x01FFFFFF;\n\tthis.resetMask();\n};\n\nROMView.prototype = Object.create(MemoryView.prototype);\n\nROMView.prototype.store8 = function(offset, value) {};\n\nROMView.prototype.store16 = function(offset, value) {\n\tif (offset < 0xCA && offset >= 0xC4) {\n\t\tif (!this.gpio) {\n\t\t\tthis.gpio = this.mmu.allocGPIO(this);\n\t\t}\n\t\tthis.gpio.store16(offset, value);\n\t}\n};\n\nROMView.prototype.store32 = function(offset, value) {\n\tif (offset < 0xCA && offset >= 0xC4) {\n\t\tif (!this.gpio) {\n\t\t\tthis.gpio = this.mmu.allocGPIO(this);\n\t\t}\n\t\tthis.gpio.store32(offset, value);\n\t}\n};\n\nfunction BIOSView(rom, offset) {\n\tMemoryView.call(this, rom, offset);\n\tthis.ICACHE_PAGE_BITS = 16;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\tthis.icache = new Array(1);\n};\n\nBIOSView.prototype = Object.create(MemoryView.prototype);\n\nBIOSView.prototype.load8 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getInt8(offset);\n};\n\nBIOSView.prototype.load16 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getInt16(offset, true);\n};\n\nBIOSView.prototype.loadU8 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getUint8(offset);\n};\n\nBIOSView.prototype.loadU16 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getUint16(offset, true);\n};\n\nBIOSView.prototype.load32 = function(offset) {\n\tif (offset >= this.buffer.byteLength) {\n\t\treturn -1;\n\t}\n\treturn this.view.getInt32(offset, true);\n};\n\nBIOSView.prototype.store8 = function(offset, value) {};\n\nBIOSView.prototype.store16 = function(offset, value) {};\n\nBIOSView.prototype.store32 = function(offset, value) {};\n\nfunction BadMemory(mmu, cpu) {\n\tthis.cpu = cpu;\n\tthis.mmu = mmu\n};\n\nBadMemory.prototype.load8 = function(offset) {\n\treturn this.mmu.load8(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x3));\n};\n\nBadMemory.prototype.load16 = function(offset) {\n\treturn this.mmu.load16(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x2));\n};\n\nBadMemory.prototype.loadU8 = function(offset) {\n\treturn this.mmu.loadU8(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x3));\n};\n\nBadMemory.prototype.loadU16 = function(offset) {\n\treturn this.mmu.loadU16(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth + (offset & 0x2));\n};\n\nBadMemory.prototype.load32 = function(offset) {\n\tif (this.cpu.execMode == this.cpu.MODE_ARM) {\n\t\treturn this.mmu.load32(this.cpu.gprs[this.cpu.gprs.PC] - this.cpu.instructionWidth);\n\t} else {\n\t\tvar halfword = this.mmu.loadU16(this.cpu.gprs[this.cpu.PC] - this.cpu.instructionWidth);\n\t\treturn halfword | (halfword << 16);\n\t}\n};\n\nBadMemory.prototype.store8 = function(offset, value) {};\n\nBadMemory.prototype.store16 = function(offset, value) {};\n\nBadMemory.prototype.store32 = function(offset, value) {};\n\nBadMemory.prototype.invalidatePage = function(address) {};\n\nwindow.GameBoyAdvanceMMU = function GameBoyAdvanceMMU() {\n\tthis.REGION_BIOS = 0x0;\n\tthis.REGION_WORKING_RAM = 0x2;\n\tthis.REGION_WORKING_IRAM = 0x3;\n\tthis.REGION_IO = 0x4;\n\tthis.REGION_PALETTE_RAM = 0x5;\n\tthis.REGION_VRAM = 0x6;\n\tthis.REGION_OAM = 0x7;\n\tthis.REGION_CART0 = 0x8;\n\tthis.REGION_CART1 = 0xA;\n\tthis.REGION_CART2 = 0xC;\n\tthis.REGION_CART_SRAM = 0xE;\n\n\tthis.BASE_BIOS = 0x00000000;\n\tthis.BASE_WORKING_RAM = 0x02000000;\n\tthis.BASE_WORKING_IRAM = 0x03000000;\n\tthis.BASE_IO = 0x04000000;\n\tthis.BASE_PALETTE_RAM = 0x05000000;\n\tthis.BASE_VRAM = 0x06000000;\n\tthis.BASE_OAM = 0x07000000;\n\tthis.BASE_CART0 = 0x08000000;\n\tthis.BASE_CART1 = 0x0A000000;\n\tthis.BASE_CART2 = 0x0C000000;\n\tthis.BASE_CART_SRAM = 0x0E000000;\n\n\tthis.BASE_MASK = 0x0F000000;\n\tthis.BASE_OFFSET = 24;\n\tthis.OFFSET_MASK = 0x00FFFFFF;\n\n\tthis.SIZE_BIOS = 0x00004000;\n\tthis.SIZE_WORKING_RAM = 0x00040000;\n\tthis.SIZE_WORKING_IRAM = 0x00008000;\n\tthis.SIZE_IO = 0x00000400;\n\tthis.SIZE_PALETTE_RAM = 0x00000400;\n\tthis.SIZE_VRAM = 0x00018000;\n\tthis.SIZE_OAM = 0x00000400;\n\tthis.SIZE_CART0 = 0x02000000;\n\tthis.SIZE_CART1 = 0x02000000;\n\tthis.SIZE_CART2 = 0x02000000;\n\tthis.SIZE_CART_SRAM = 0x00008000;\n\tthis.SIZE_CART_FLASH512 = 0x00010000;\n\tthis.SIZE_CART_FLASH1M = 0x00020000;\n\tthis.SIZE_CART_EEPROM = 0x00002000;\n\n\tthis.DMA_TIMING_NOW = 0;\n\tthis.DMA_TIMING_VBLANK = 1;\n\tthis.DMA_TIMING_HBLANK = 2;\n\tthis.DMA_TIMING_CUSTOM = 3;\n\n\tthis.DMA_INCREMENT = 0;\n\tthis.DMA_DECREMENT = 1;\n\tthis.DMA_FIXED = 2;\n\tthis.DMA_INCREMENT_RELOAD = 3;\n\n\tthis.DMA_OFFSET = [ 1, -1, 0, 1 ];\n\n\tthis.WAITSTATES = [ 0, 0, 2, 0, 0, 0, 0, 0, 4, 4, 4, 4, 4, 4, 4 ];\n\tthis.WAITSTATES_32 = [ 0, 0, 5, 0, 0, 1, 0, 1, 7, 7, 9, 9, 13, 13, 8 ];\n\tthis.WAITSTATES_SEQ = [ 0, 0, 2, 0, 0, 0, 0, 0, 2, 2, 4, 4, 8, 8, 4 ];\n\tthis.WAITSTATES_SEQ_32 = [ 0, 0, 5, 0, 0, 1, 0, 1, 5, 5, 9, 9, 17, 17, 8 ];\n\tthis.NULLWAIT = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\tfor (var i = 15; i < 256; ++i) {\n\t\tthis.WAITSTATES[i] = 0;\n\t\tthis.WAITSTATES_32[i] = 0;\n\t\tthis.WAITSTATES_SEQ[i] = 0;\n\t\tthis.WAITSTATES_SEQ_32[i] = 0;\n\t\tthis.NULLWAIT[i] = 0;\n\t}\n\n\tthis.ROM_WS = [ 4, 3, 2, 8 ];\n\tthis.ROM_WS_SEQ = [\n\t\t[ 2, 1 ],\n\t\t[ 4, 1 ],\n\t\t[ 8, 1 ]\n\t];\n\n\tthis.ICACHE_PAGE_BITS = 8;\n\tthis.PAGE_MASK = (2 << this.ICACHE_PAGE_BITS) - 1;\n\n\tthis.bios = null;\n};\n\nGameBoyAdvanceMMU.prototype.mmap = function(region, object) {\n\tthis.memory[region] = object;\n}\n\nGameBoyAdvanceMMU.prototype.clear = function() {\n\tthis.badMemory = new BadMemory(this, this.cpu);\n\tthis.memory = [\n\t\tthis.bios,\n\t\tthis.badMemory, // Unused\n\t\tnew MemoryBlock(this.SIZE_WORKING_RAM, 9),\n\t\tnew MemoryBlock(this.SIZE_WORKING_IRAM, 7),\n\t\tnull, // This is owned by GameBoyAdvanceIO\n\t\tnull, // This is owned by GameBoyAdvancePalette\n\t\tnull, // This is owned by GameBoyAdvanceVRAM\n\t\tnull, // This is owned by GameBoyAdvanceOAM\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory,\n\t\tthis.badMemory // Unused\n\t];\n\tfor (var i = 16; i < 256; ++i) {\n\t\tthis.memory[i] = this.badMemory;\n\t}\n\n\tthis.waitstates = this.WAITSTATES.slice(0);\n\tthis.waitstatesSeq = this.WAITSTATES_SEQ.slice(0);\n\tthis.waitstates32 = this.WAITSTATES_32.slice(0);\n\tthis.waitstatesSeq32 = this.WAITSTATES_SEQ_32.slice(0);\n\tthis.waitstatesPrefetch = this.WAITSTATES_SEQ.slice(0);\n\tthis.waitstatesPrefetch32 = this.WAITSTATES_SEQ_32.slice(0);\n\n\tthis.cart = null;\n\tthis.save = null;\n\n\tthis.DMA_REGISTER = [\n\t\tthis.core.io.DMA0CNT_HI >> 1,\n\t\tthis.core.io.DMA1CNT_HI >> 1,\n\t\tthis.core.io.DMA2CNT_HI >> 1,\n\t\tthis.core.io.DMA3CNT_HI >> 1\n\t];\n};\n\nGameBoyAdvanceMMU.prototype.freeze = function() {\n\treturn {\n\t\t'ram': Serializer.prefix(this.memory[this.REGION_WORKING_RAM].buffer),\n\t\t'iram': Serializer.prefix(this.memory[this.REGION_WORKING_IRAM].buffer),\n\t};\n};\n\nGameBoyAdvanceMMU.prototype.defrost = function(frost) {\n\tthis.memory[this.REGION_WORKING_RAM].replaceData(frost.ram);\n\tthis.memory[this.REGION_WORKING_IRAM].replaceData(frost.iram);\n};\n\nGameBoyAdvanceMMU.prototype.loadBios = function(bios, real) {\n\tthis.bios = new BIOSView(bios);\n\tthis.bios.real = !!real;\n};\n\nGameBoyAdvanceMMU.prototype.loadRom = function(rom, process) {\n\tvar cart = {\n\t\ttitle: null,\n\t\tcode: null,\n\t\tmaker: null,\n\t\tmemory: rom,\n\t\tsaveType: null,\n\t};\n\n\tvar lo = new ROMView(rom);\n\tif (lo.view.getUint8(0xB2) != 0x96) {\n\t\t// Not a valid ROM\n\t\treturn null;\n\t}\n\tlo.mmu = this; // Needed for GPIO\n\tthis.memory[this.REGION_CART0] = lo;\n\tthis.memory[this.REGION_CART1] = lo;\n\tthis.memory[this.REGION_CART2] = lo;\n\n\tif (rom.byteLength > 0x01000000) {\n\t\tvar hi = new ROMView(rom, 0x01000000);\n\t\tthis.memory[this.REGION_CART0 + 1] = hi;\n\t\tthis.memory[this.REGION_CART1 + 1] = hi;\n\t\tthis.memory[this.REGION_CART2 + 1] = hi;\n\t}\n\n\tif (process) {\n\t\tvar name = '';\n\t\tfor (var i = 0; i < 12; ++i) {\n\t\t\tvar c = lo.loadU8(i + 0xA0);\n\t\t\tif (!c) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tname += String.fromCharCode(c);\n\t\t}\n\t\tcart.title = name;\n\n\t\tvar code = '';\n\t\tfor (var i = 0; i < 4; ++i) {\n\t\t\tvar c = lo.loadU8(i + 0xAC);\n\t\t\tif (!c) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcode += String.fromCharCode(c);\n\t\t}\n\t\tcart.code = code;\n\n\t\tvar maker = '';\n\t\tfor (var i = 0; i < 2; ++i) {\n\t\t\tvar c = lo.loadU8(i + 0xB0);\n\t\t\tif (!c) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmaker += String.fromCharCode(c);\n\t\t}\n\t\tcart.maker = maker;\n\n\t\t// Find savedata type\n\t\tvar state = '';\n\t\tvar next;\n\t\tvar terminal = false;\n\t\tfor (var i = 0xE4; i < rom.byteLength && !terminal; ++i) {\n\t\t\tnext = String.fromCharCode(lo.loadU8(i));\n\t\t\tstate += next;\n\t\t\tswitch (state) {\n\t\t\tcase 'F':\n\t\t\tcase 'FL':\n\t\t\tcase 'FLA':\n\t\t\tcase 'FLAS':\n\t\t\tcase 'FLASH':\n\t\t\tcase 'FLASH_':\n\t\t\tcase 'FLASH5':\n\t\t\tcase 'FLASH51':\n\t\t\tcase 'FLASH512':\n\t\t\tcase 'FLASH512_':\n\t\t\tcase 'FLASH1':\n\t\t\tcase 'FLASH1M':\n\t\t\tcase 'FLASH1M_':\n\t\t\tcase 'S':\n\t\t\tcase 'SR':\n\t\t\tcase 'SRA':\n\t\t\tcase 'SRAM':\n\t\t\tcase 'SRAM_':\n\t\t\tcase 'E':\n\t\t\tcase 'EE':\n\t\t\tcase 'EEP':\n\t\t\tcase 'EEPR':\n\t\t\tcase 'EEPRO':\n\t\t\tcase 'EEPROM':\n\t\t\tcase 'EEPROM_':\n\t\t\t\tbreak;\n\t\t\tcase 'FLASH_V':\n\t\t\tcase 'FLASH512_V':\n\t\t\tcase 'FLASH1M_V':\n\t\t\tcase 'SRAM_V':\n\t\t\tcase 'EEPROM_V':\n\t\t\t\tterminal = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tstate = next;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (terminal) {\n\t\t\tcart.saveType = state;\n\t\t\tswitch (state) {\n\t\t\tcase 'FLASH_V':\n\t\t\tcase 'FLASH512_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new FlashSavedata(this.SIZE_CART_FLASH512);\n\t\t\t\tbreak;\n\t\t\tcase 'FLASH1M_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new FlashSavedata(this.SIZE_CART_FLASH1M);\n\t\t\t\tbreak;\n\t\t\tcase 'SRAM_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new SRAMSavedata(this.SIZE_CART_SRAM);\n\t\t\t\tbreak;\n\t\t\tcase 'EEPROM_V':\n\t\t\t\tthis.save = this.memory[this.REGION_CART2 + 1] = new EEPROMSavedata(this.SIZE_CART_EEPROM, this);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!this.save) {\n\t\t\t// Assume we have SRAM\n\t\t\tthis.save = this.memory[this.REGION_CART_SRAM] = new SRAMSavedata(this.SIZE_CART_SRAM);\n\t\t}\n\t}\n\n\tthis.cart = cart;\n\treturn cart;\n};\n\nGameBoyAdvanceMMU.prototype.loadSavedata = function(save) {\n\tthis.save.replaceData(save);\n};\n\nGameBoyAdvanceMMU.prototype.load8 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].load8(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.load16 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].load16(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.load32 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].load32(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.loadU8 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].loadU8(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.loadU16 = function(offset) {\n\treturn this.memory[offset >>> this.BASE_OFFSET].loadU16(offset & 0x00FFFFFF);\n};\n\nGameBoyAdvanceMMU.prototype.store8 = function(offset, value) {\n\tvar maskedOffset = offset & 0x00FFFFFF;\n\tvar memory = this.memory[offset >>> this.BASE_OFFSET];\n\tmemory.store8(maskedOffset, value);\n\tmemory.invalidatePage(maskedOffset);\n};\n\nGameBoyAdvanceMMU.prototype.store16 = function(offset, value) {\n\tvar maskedOffset = offset & 0x00FFFFFE;\n\tvar memory = this.memory[offset >>> this.BASE_OFFSET];\n\tmemory.store16(maskedOffset, value);\n\tmemory.invalidatePage(maskedOffset);\n};\n\nGameBoyAdvanceMMU.prototype.store32 = function(offset, value) {\n\tvar maskedOffset = offset & 0x00FFFFFC;\n\tvar memory = this.memory[offset >>> this.BASE_OFFSET];\n\tmemory.store32(maskedOffset, value);\n\tmemory.invalidatePage(maskedOffset);\n\tmemory.invalidatePage(maskedOffset + 2);\n};\n\nGameBoyAdvanceMMU.prototype.waitPrefetch = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesPrefetch[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitPrefetch32 = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesPrefetch32[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.wait = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstates[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.wait32 = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstates32[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitSeq = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesSeq[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitSeq32 = function(memory) {\n\tthis.cpu.cycles += 1 + this.waitstatesSeq32[memory >>> this.BASE_OFFSET];\n};\n\nGameBoyAdvanceMMU.prototype.waitMul = function(rs) {\n\tif ((rs & 0xFFFFFF00 == 0xFFFFFF00) || !(rs & 0xFFFFFF00)) {\n\t\tthis.cpu.cycles += 1;\n\t} else if ((rs & 0xFFFF0000 == 0xFFFF0000) || !(rs & 0xFFFF0000)) {\n\t\tthis.cpu.cycles += 2;\n\t} else if ((rs & 0xFF000000 == 0xFF000000) || !(rs & 0xFF000000)) {\n\t\tthis.cpu.cycles += 3;\n\t} else {\n\t\tthis.cpu.cycles += 4;\n\t}\n}\n\nGameBoyAdvanceMMU.prototype.waitMulti32 = function(memory, seq) {\n\tthis.cpu.cycles += 1 + this.waitstates32[memory >>> this.BASE_OFFSET];\n\tthis.cpu.cycles += (1 + this.waitstatesSeq32[memory >>> this.BASE_OFFSET]) * (seq - 1);\n};\n\nGameBoyAdvanceMMU.prototype.addressToPage = function(region, address) {\n\treturn address >> this.memory[region].ICACHE_PAGE_BITS;\n};\n\nGameBoyAdvanceMMU.prototype.accessPage = function(region, pageId) {\n\tvar memory = this.memory[region];\n\tvar page = memory.icache[pageId];\n\tif (!page || page.invalid) {\n\t\tpage = {\n\t\t\tthumb: new Array(1 << (memory.ICACHE_PAGE_BITS)),\n\t\t\tarm: new Array(1 << memory.ICACHE_PAGE_BITS - 1),\n\t\t\tinvalid: false\n\t\t}\n\t\tmemory.icache[pageId] = page;\n\t}\n\treturn page;\n};\n\nGameBoyAdvanceMMU.prototype.scheduleDma = function(number, info) {\n\tswitch (info.timing) {\n\tcase this.DMA_TIMING_NOW:\n\t\tthis.serviceDma(number, info);\n\t\tbreak;\n\tcase this.DMA_TIMING_HBLANK:\n\t\t// Handled implicitly\n\t\tbreak;\n\tcase this.DMA_TIMING_VBLANK:\n\t\t// Handled implicitly\n\t\tbreak;\n\tcase this.DMA_TIMING_CUSTOM:\n\t\tswitch (number) {\n\t\tcase 0:\n\t\t\tthis.core.WARN('Discarding invalid DMA0 scheduling');\n\t\t\tbreak;\n\t\tcase 1:\n\t\tcase 2:\n\t\t\tthis.cpu.irq.audio.scheduleFIFODma(number, info);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tthis.cpu.irq.video.scheduleVCaptureDma(dma, info);\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.runHblankDmas = function() {\n\tvar dma;\n\tfor (var i = 0; i < this.cpu.irq.dma.length; ++i) {\n\t\tdma = this.cpu.irq.dma[i];\n\t\tif (dma.enable && dma.timing == this.DMA_TIMING_HBLANK) {\n\t\t\tthis.serviceDma(i, dma);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.runVblankDmas = function() {\n\tvar dma;\n\tfor (var i = 0; i < this.cpu.irq.dma.length; ++i) {\n\t\tdma = this.cpu.irq.dma[i];\n\t\tif (dma.enable && dma.timing == this.DMA_TIMING_VBLANK) {\n\t\t\tthis.serviceDma(i, dma);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.serviceDma = function(number, info) {\n\tif (!info.enable) {\n\t\t// There was a DMA scheduled that got canceled\n\t\treturn;\n\t}\n\n\tvar width = info.width;\n\tvar sourceOffset = this.DMA_OFFSET[info.srcControl] * width;\n\tvar destOffset = this.DMA_OFFSET[info.dstControl] * width;\n\tvar wordsRemaining = info.nextCount;\n\tvar source = info.nextSource & this.OFFSET_MASK;\n\tvar dest = info.nextDest & this.OFFSET_MASK;\n\tvar sourceRegion = info.nextSource >>> this.BASE_OFFSET;\n\tvar destRegion = info.nextDest >>> this.BASE_OFFSET;\n\tvar sourceBlock = this.memory[sourceRegion];\n\tvar destBlock = this.memory[destRegion];\n\tvar sourceView = null;\n\tvar destView = null;\n\tvar sourceMask = 0xFFFFFFFF;\n\tvar destMask = 0xFFFFFFFF;\n\tvar word;\n\n\tif (destBlock.ICACHE_PAGE_BITS) {\n\t\tvar endPage = (dest + wordsRemaining * width) >> destBlock.ICACHE_PAGE_BITS;\n\t\tfor (var i = dest >> destBlock.ICACHE_PAGE_BITS; i <= endPage; ++i) {\n\t\t\tdestBlock.invalidatePage(i << destBlock.ICACHE_PAGE_BITS);\n\t\t}\n\t}\n\n\tif (destRegion == this.REGION_WORKING_RAM || destRegion == this.REGION_WORKING_IRAM) {\n\t\tdestView = destBlock.view;\n\t\tdestMask = destBlock.mask;\n\t}\n\n\tif (sourceRegion == this.REGION_WORKING_RAM || sourceRegion == this.REGION_WORKING_IRAM || sourceRegion == this.REGION_CART0 || sourceRegion == this.REGION_CART1) {\n\t\tsourceView = sourceBlock.view;\n\t\tsourceMask = sourceBlock.mask;\n\t}\n\n\tif (sourceBlock && destBlock) {\n\t\tif (sourceView && destView) {\n\t\t\tif (width == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getInt32(source & sourceMask);\n\t\t\t\t\tdestView.setInt32(dest & destMask, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getUint16(source & sourceMask);\n\t\t\t\t\tdestView.setUint16(dest & destMask, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (sourceView) {\n\t\t\tif (width == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getInt32(source & sourceMask, true);\n\t\t\t\t\tdestBlock.store32(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceView.getUint16(source & sourceMask, true);\n\t\t\t\t\tdestBlock.store16(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (width == 4) {\n\t\t\t\tsource &= 0xFFFFFFFC;\n\t\t\t\tdest &= 0xFFFFFFFC;\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceBlock.load32(source);\n\t\t\t\t\tdestBlock.store32(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile (wordsRemaining--) {\n\t\t\t\t\tword = sourceBlock.loadU16(source);\n\t\t\t\t\tdestBlock.store16(dest, word);\n\t\t\t\t\tsource += sourceOffset;\n\t\t\t\t\tdest += destOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.core.WARN('Invalid DMA');\n\t}\n\n\tif (info.doIrq) {\n\t\tinfo.nextIRQ = this.cpu.cycles + 2;\n\t\tinfo.nextIRQ += (width == 4 ? this.waitstates32[sourceRegion] + this.waitstates32[destRegion]\n\t\t                            : this.waitstates[sourceRegion] + this.waitstates[destRegion]);\n\t\tinfo.nextIRQ += (info.count - 1) * (width == 4 ? this.waitstatesSeq32[sourceRegion] + this.waitstatesSeq32[destRegion]\n\t\t                                               : this.waitstatesSeq[sourceRegion] + this.waitstatesSeq[destRegion]);\n\t}\n\n\tinfo.nextSource = source | (sourceRegion << this.BASE_OFFSET);\n\tinfo.nextDest = dest | (destRegion << this.BASE_OFFSET);\n\tinfo.nextCount = wordsRemaining;\n\n\tif (!info.repeat) {\n\t\tinfo.enable = false;\n\n\t\t// Clear the enable bit in memory\n\t\tvar io = this.memory[this.REGION_IO];\n\t\tio.registers[this.DMA_REGISTER[number]] &= 0x7FE0;\n\t} else {\n\t\tinfo.nextCount = info.count;\n\t\tif (info.dstControl == this.DMA_INCREMENT_RELOAD) {\n\t\t\tinfo.nextDest = info.dest;\n\t\t}\n\t\tthis.scheduleDma(number, info);\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.adjustTimings = function(word) {\n\tvar sram = word & 0x0003;\n\tvar ws0 = (word & 0x000C) >> 2;\n\tvar ws0seq = (word & 0x0010) >> 4;\n\tvar ws1 = (word & 0x0060) >> 5;\n\tvar ws1seq = (word & 0x0080) >> 7;\n\tvar ws2 = (word & 0x0300) >> 8;\n\tvar ws2seq = (word & 0x0400) >> 10;\n\tvar prefetch = word & 0x4000;\n\n\tthis.waitstates[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\tthis.waitstatesSeq[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\tthis.waitstates32[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\tthis.waitstatesSeq32[this.REGION_CART_SRAM] = this.ROM_WS[sram];\n\n\tthis.waitstates[this.REGION_CART0] = this.waitstates[this.REGION_CART0 + 1] = this.ROM_WS[ws0];\n\tthis.waitstates[this.REGION_CART1] = this.waitstates[this.REGION_CART1 + 1] = this.ROM_WS[ws1];\n\tthis.waitstates[this.REGION_CART2] = this.waitstates[this.REGION_CART2 + 1] = this.ROM_WS[ws2];\n\n\tthis.waitstatesSeq[this.REGION_CART0] = this.waitstatesSeq[this.REGION_CART0 + 1] = this.ROM_WS_SEQ[0][ws0seq];\n\tthis.waitstatesSeq[this.REGION_CART1] = this.waitstatesSeq[this.REGION_CART1 + 1] = this.ROM_WS_SEQ[1][ws1seq];\n\tthis.waitstatesSeq[this.REGION_CART2] = this.waitstatesSeq[this.REGION_CART2 + 1] = this.ROM_WS_SEQ[2][ws2seq];\n\n\tthis.waitstates32[this.REGION_CART0] = this.waitstates32[this.REGION_CART0 + 1] = this.waitstates[this.REGION_CART0] + 1 + this.waitstatesSeq[this.REGION_CART0];\n\tthis.waitstates32[this.REGION_CART1] = this.waitstates32[this.REGION_CART1 + 1] = this.waitstates[this.REGION_CART1] + 1 + this.waitstatesSeq[this.REGION_CART1];\n\tthis.waitstates32[this.REGION_CART2] = this.waitstates32[this.REGION_CART2 + 1] = this.waitstates[this.REGION_CART2] + 1 + this.waitstatesSeq[this.REGION_CART2];\n\n\tthis.waitstatesSeq32[this.REGION_CART0] = this.waitstatesSeq32[this.REGION_CART0 + 1] = 2 * this.waitstatesSeq[this.REGION_CART0] + 1;\n\tthis.waitstatesSeq32[this.REGION_CART1] = this.waitstatesSeq32[this.REGION_CART1 + 1] = 2 * this.waitstatesSeq[this.REGION_CART1] + 1;\n\tthis.waitstatesSeq32[this.REGION_CART2] = this.waitstatesSeq32[this.REGION_CART2 + 1] = 2 * this.waitstatesSeq[this.REGION_CART2] + 1;\n\n\tif (prefetch) {\n\t\tthis.waitstatesPrefetch[this.REGION_CART0] = this.waitstatesPrefetch[this.REGION_CART0 + 1] = 0;\n\t\tthis.waitstatesPrefetch[this.REGION_CART1] = this.waitstatesPrefetch[this.REGION_CART1 + 1] = 0;\n\t\tthis.waitstatesPrefetch[this.REGION_CART2] = this.waitstatesPrefetch[this.REGION_CART2 + 1] = 0;\n\n\t\tthis.waitstatesPrefetch32[this.REGION_CART0] = this.waitstatesPrefetch32[this.REGION_CART0 + 1] = 0;\n\t\tthis.waitstatesPrefetch32[this.REGION_CART1] = this.waitstatesPrefetch32[this.REGION_CART1 + 1] = 0;\n\t\tthis.waitstatesPrefetch32[this.REGION_CART2] = this.waitstatesPrefetch32[this.REGION_CART2 + 1] = 0;\n\t} else {\n\t\tthis.waitstatesPrefetch[this.REGION_CART0] = this.waitstatesPrefetch[this.REGION_CART0 + 1] = this.waitstatesSeq[this.REGION_CART0];\n\t\tthis.waitstatesPrefetch[this.REGION_CART1] = this.waitstatesPrefetch[this.REGION_CART1 + 1] = this.waitstatesSeq[this.REGION_CART1];\n\t\tthis.waitstatesPrefetch[this.REGION_CART2] = this.waitstatesPrefetch[this.REGION_CART2 + 1] = this.waitstatesSeq[this.REGION_CART2];\n\n\t\tthis.waitstatesPrefetch32[this.REGION_CART0] = this.waitstatesPrefetch32[this.REGION_CART0 + 1] = this.waitstatesSeq32[this.REGION_CART0];\n\t\tthis.waitstatesPrefetch32[this.REGION_CART1] = this.waitstatesPrefetch32[this.REGION_CART1 + 1] = this.waitstatesSeq32[this.REGION_CART1];\n\t\tthis.waitstatesPrefetch32[this.REGION_CART2] = this.waitstatesPrefetch32[this.REGION_CART2 + 1] = this.waitstatesSeq32[this.REGION_CART2];\n\t}\n};\n\nGameBoyAdvanceMMU.prototype.saveNeedsFlush = function() {\n\treturn this.save.writePending;\n};\n\nGameBoyAdvanceMMU.prototype.flushSave = function() {\n\tthis.save.writePending = false;\n};\n\nGameBoyAdvanceMMU.prototype.allocGPIO = function(rom) {\n\treturn new GameBoyAdvanceGPIO(this.core, rom);\n};\n","import { lcdFade, fadeOut } from './fades'\n\nconst reset = gba => {\n  gba.pause()\n  gba.reset()\n\n  const crash = document.getElementById('crash')\n\n  if (crash) {\n    const context = gba.targetCanvas.getContext('2d')\n    context.clearRect(0, 0, 480, 320)\n    gba.video.drawCallback()\n    crash.parentElement.removeChild(crash)\n\n    var canvas = document.getElementById('screen')\n    canvas.removeAttribute('class')\n  } else {\n    lcdFade(\n      gba.context,\n      gba.targetCanvas.getContext('2d'),\n      gba.video.drawCallback\n    )\n  }\n  fadeOut('ingame', 'preload');\n}\n\nexport default reset\n","import './mmu'\n\nfunction SRAMSavedata(size) {\n\tMemoryView.call(this, new ArrayBuffer(size), 0);\n\n\tthis.writePending = false;\n};\n\nSRAMSavedata.prototype = Object.create(MemoryView.prototype);\n\nSRAMSavedata.prototype.store8 = function(offset, value) {\n\tthis.view.setInt8(offset, value);\n\tthis.writePending = true;\n};\n\nSRAMSavedata.prototype.store16 = function(offset, value) {\n\tthis.view.setInt16(offset, value, true);\n\tthis.writePending = true;\n};\n\nSRAMSavedata.prototype.store32 = function(offset, value) {\n\tthis.view.setInt32(offset, value, true);\n\tthis.writePending = true;\n};\n\nfunction FlashSavedata(size) {\n\tMemoryView.call(this, new ArrayBuffer(size), 0);\n\n\tthis.COMMAND_WIPE = 0x10;\n\tthis.COMMAND_ERASE_SECTOR = 0x30;\n\tthis.COMMAND_ERASE = 0x80;\n\tthis.COMMAND_ID = 0x90;\n\tthis.COMMAND_WRITE = 0xA0;\n\tthis.COMMAND_SWITCH_BANK = 0xB0;\n\tthis.COMMAND_TERMINATE_ID = 0xF0;\n\n\tthis.ID_PANASONIC = 0x1B32;\n\tthis.ID_SANYO = 0x1362;\n\n\tthis.bank0 = new DataView(this.buffer, 0, 0x00010000);\n\tif (size > 0x00010000) {\n\t\tthis.id = this.ID_SANYO;\n\t\tthis.bank1 = new DataView(this.buffer, 0x00010000);\n\t} else {\n\t\tthis.id = this.ID_PANASONIC;\n\t\tthis.bank1 = null;\n\t}\n\tthis.bank = this.bank0;\n\n\tthis.idMode = false;\n\tthis.writePending = false;\n\n\tthis.first = 0;\n\tthis.second = 0;\n\tthis.command = 0;\n\tthis.pendingCommand = 0;\n};\n\nFlashSavedata.prototype = Object.create(MemoryView.prototype);\n\nFlashSavedata.prototype.load8 = function(offset) {\n\tif (this.idMode && offset < 2) {\n\t\treturn (this.id >> (offset << 3)) & 0xFF;\n\t} else if (offset < 0x10000) {\n\t\treturn this.bank.getInt8(offset);\n\t} else {\n\t\treturn 0;\n\t}\n};\n\nFlashSavedata.prototype.load16 = function(offset) {\n\treturn (this.load8(offset) & 0xFF) | (this.load8(offset + 1) << 8);\n};\n\nFlashSavedata.prototype.load32 = function(offset) {\n\treturn (this.load8(offset) & 0xFF) | (this.load8(offset + 1) << 8) | (this.load8(offset + 2) << 16) | (this.load8(offset + 3) << 24);\n};\n\nFlashSavedata.prototype.loadU8 = function(offset) {\n\treturn this.load8(offset) & 0xFF;\n};\n\nFlashSavedata.prototype.loadU16 = function(offset) {\n\treturn (this.loadU8(offset) & 0xFF) | (this.loadU8(offset + 1) << 8);\n};\n\nFlashSavedata.prototype.store8 = function(offset, value) {\n\tswitch (this.command) {\n\tcase 0:\n\t\tif (offset == 0x5555) {\n\t\t\tif (this.second == 0x55) {\n\t\t\t\tswitch (value) {\n\t\t\t\tcase this.COMMAND_ERASE:\n\t\t\t\t\tthis.pendingCommand = value;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.COMMAND_ID:\n\t\t\t\t\tthis.idMode = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase this.COMMAND_TERMINATE_ID:\n\t\t\t\t\tthis.idMode = false;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.command = value;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.second = 0;\n\t\t\t\tthis.first = 0;\n\t\t\t} else {\n\t\t\t\tthis.command = 0;\n\t\t\t\tthis.first = value;\n\t\t\t\tthis.idMode = false;\n\t\t\t}\n\t\t} else if (offset == 0x2AAA && this.first == 0xAA) {\n\t\t\tthis.first = 0;\n\t\t\tif (this.pendingCommand) {\n\t\t\t\tthis.command = this.pendingCommand;\n\t\t\t} else {\n\t\t\t\tthis.second = value;\n\t\t\t}\n\t\t}\n\t\tbreak;\n\tcase this.COMMAND_ERASE:\n\t\tswitch (value) {\n\t\tcase this.COMMAND_WIPE:\n\t\t\tif (offset == 0x5555) {\n\t\t\t\tfor (var i = 0; i < this.view.byteLength; i += 4) {\n\t\t\t\t\tthis.view.setInt32(i, -1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase this.COMMAND_ERASE_SECTOR:\n\t\t\tif ((offset & 0x0FFF) == 0) {\n\t\t\t\tfor (var i = offset; i < offset + 0x1000; i += 4) {\n\t\t\t\t\tthis.bank.setInt32(i, -1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tthis.pendingCommand = 0;\n\t\tthis.command = 0;\n\t\tbreak;\n\tcase this.COMMAND_WRITE:\n\t\tthis.bank.setInt8(offset, value);\n\t\tthis.command = 0;\n\n\t\tthis.writePending = true;\n\t\tbreak;\n\tcase this.COMMAND_SWITCH_BANK:\n\t\tif (this.bank1 && offset == 0) {\n\t\t\tif (value == 1) {\n\t\t\t\tthis.bank = this.bank1;\n\t\t\t} else {\n\t\t\t\tthis.bank = this.bank0;\n\t\t\t}\n\t\t}\n\t\tthis.command = 0;\n\t\tbreak;\n\t}\n};\n\nFlashSavedata.prototype.store16 = function(offset, value) {\n\tthrow new Error(\"Unaligned save to flash!\");\n};\n\nFlashSavedata.prototype.store32 = function(offset, value) {\n\tthrow new Error(\"Unaligned save to flash!\");\n};\n\nFlashSavedata.prototype.replaceData = function(memory) {\n\tvar bank = this.view === this.bank1;\n\tMemoryView.prototype.replaceData.call(this, memory, 0);\n\n\tthis.bank0 = new DataView(this.buffer, 0, 0x00010000);\n\tif (memory.byteLength > 0x00010000) {\n\t\tthis.bank1 = new DataView(this.buffer, 0x00010000);\n\t} else {\n\t\tthis.bank1 = null;\n\t}\n\tthis.bank = bank ? this.bank1 : this.bank0;\n};\n\nwindow.EEPROMSavedata = function EEPROMSavedata(size, mmu) {\n\tMemoryView.call(this, new ArrayBuffer(size), 0);\n\n\tthis.writeAddress = 0;\n\tthis.readBitsRemaining = 0;\n\tthis.readAddress = 0;\n\n\tthis.command = 0;\n\tthis.commandBitsRemaining = 0;\n\n\tthis.realSize = 0;\n\tthis.addressBits = 0;\n\tthis.writePending = false;\n\n\tthis.dma = mmu.core.irq.dma[3];\n\n\tthis.COMMAND_NULL = 0;\n\tthis.COMMAND_PENDING = 1;\n\tthis.COMMAND_WRITE = 2;\n\tthis.COMMAND_READ_PENDING = 3;\n\tthis.COMMAND_READ = 4;\n};\n\nEEPROMSavedata.prototype = Object.create(MemoryView.prototype);\n\nEEPROMSavedata.prototype.load8 = function(offset) {\n\tthrow new Error(\"Unsupported 8-bit access!\");\n};\n\nEEPROMSavedata.prototype.load16 = function(offset) {\n\treturn this.loadU16(offset);\n};\n\nEEPROMSavedata.prototype.loadU8 = function(offset) {\n\tthrow new Error(\"Unsupported 8-bit access!\");\n};\n\nEEPROMSavedata.prototype.loadU16 = function(offset) {\n\tif (this.command != this.COMMAND_READ || !this.dma.enable) {\n\t\treturn 1;\n\t}\n\t--this.readBitsRemaining;\n\tif (this.readBitsRemaining < 64) {\n\t\tvar step = 63 - this.readBitsRemaining;\n\t\tvar data = this.view.getUint8((this.readAddress + step) >> 3, false) >> (0x7 - (step & 0x7));\n\t\tif (!this.readBitsRemaining) {\n\t\t\tthis.command = this.COMMAND_NULL;\n\t\t}\n\t\treturn data & 0x1;\n\t}\n\treturn 0;\n};\n\nEEPROMSavedata.prototype.load32 = function(offset) {\n\tthrow new Error(\"Unsupported 32-bit access!\");\n};\n\nEEPROMSavedata.prototype.store8 = function(offset, value) {\n\tthrow new Error(\"Unsupported 8-bit access!\");\n};\n\nEEPROMSavedata.prototype.store16 = function(offset, value) {\n\tswitch (this.command) {\n\t// Read header\n\tcase this.COMMAND_NULL:\n\tdefault:\n\t\tthis.command = value & 0x1;\n\t\tbreak;\n\tcase this.COMMAND_PENDING:\n\t\tthis.command <<= 1;\n\t\tthis.command |= value & 0x1;\n\t\tif (this.command == this.COMMAND_WRITE) {\n\t\t\tif (!this.realSize) {\n\t\t\t\tvar bits = this.dma.count - 67;\n\t\t\t\tthis.realSize = 8 << bits;\n\t\t\t\tthis.addressBits = bits;\n\t\t\t}\n\t\t\tthis.commandBitsRemaining = this.addressBits + 64 + 1;\n\t\t\tthis.writeAddress = 0;\n\t\t} else {\n\t\t\tif (!this.realSize) {\n\t\t\t\tvar bits = this.dma.count - 3;\n\t\t\t\tthis.realSize = 8 << bits;\n\t\t\t\tthis.addressBits = bits;\n\t\t\t}\n\t\t\tthis.commandBitsRemaining = this.addressBits + 1;\n\t\t\tthis.readAddress = 0;\n\t\t}\n\t\tbreak;\n\t// Do commands\n\tcase this.COMMAND_WRITE:\n\t\t// Write\n\t\tif (--this.commandBitsRemaining > 64) {\n\t\t\tthis.writeAddress <<= 1;\n\t\t\tthis.writeAddress |= (value & 0x1) << 6;\n\t\t} else if (this.commandBitsRemaining <= 0) {\n\t\t\tthis.command = this.COMMAND_NULL;\n\t\t\tthis.writePending = true;\n\t\t} else {\n\t\t\tvar current = this.view.getUint8(this.writeAddress >> 3);\n\t\t\tcurrent &= ~(1 << (0x7 - (this.writeAddress & 0x7)));\n\t\t\tcurrent |= (value & 0x1) << (0x7 - (this.writeAddress & 0x7));\n\t\t\tthis.view.setUint8(this.writeAddress >> 3, current);\n\t\t\t++this.writeAddress;\n\t\t}\n\t\tbreak;\n\tcase this.COMMAND_READ_PENDING:\n\t\t// Read\n\t\tif (--this.commandBitsRemaining > 0) {\n\t\t\tthis.readAddress <<= 1;\n\t\t\tif (value & 0x1) {\n\t\t\t\tthis.readAddress |= 0x40;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.readBitsRemaining = 68;\n\t\t\tthis.command = this.COMMAND_READ;\n\t\t}\n\t\tbreak;\n\t}\n};\n\nEEPROMSavedata.prototype.store32 = function(offset, value) {\n\tthrow new Error(\"Unsupported 32-bit access!\");\n};\n\nEEPROMSavedata.prototype.replaceData = function(memory) {\n\tMemoryView.prototype.replaceData.call(this, memory, 0);\n};\n","const setVolume = (gba, value) =>\n  gba.audio.masterVolume = Math.pow(2, value) - 1\n\nexport default setVolume\n","window.GameBoyAdvanceSIO = function GameBoyAdvanceSIO() {\n\tthis.SIO_NORMAL_8 = 0;\n\tthis.SIO_NORMAL_32 = 1;\n\tthis.SIO_MULTI = 2;\n\tthis.SIO_UART = 3;\n\tthis.SIO_GPIO = 8;\n\tthis.SIO_JOYBUS = 12;\n\n\tthis.BAUD = [ 9600, 38400, 57600, 115200 ];\n}\n\nGameBoyAdvanceSIO.prototype.clear = function() {\n\tthis.mode = this.SIO_GPIO;\n\tthis.sd = false;\n\n\tthis.irq = false;\n\tthis.multiplayer = {\n\t\tbaud: 0,\n\t\tsi: 0,\n\t\tid: 0,\n\t\terror: 0,\n\t\tbusy: 0,\n\n\t\tstates: [ 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF ]\n\t};\n\n\tthis.linkLayer = null;\n};\n\nGameBoyAdvanceSIO.prototype.setMode = function(mode) {\n\tif (mode & 0x8) {\n\t\tmode &= 0xC;\n\t} else {\n\t\tmode &= 0x3;\n\t}\n\tthis.mode = mode;\n\n\tthis.core.INFO('Setting SIO mode to ' + hex(mode, 1));\n};\n\nGameBoyAdvanceSIO.prototype.writeRCNT = function(value) {\n\tif (this.mode != this.SIO_GPIO) {\n\t\treturn;\n\t}\n\n\tthis.core.STUB('General purpose serial not supported');\n};\n\nGameBoyAdvanceSIO.prototype.writeSIOCNT = function(value) {\n\tswitch (this.mode) {\n\tcase this.SIO_NORMAL_8:\n\t\tthis.core.STUB('8-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_NORMAL_32:\n\t\tthis.core.STUB('32-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_MULTI:\n\t\tthis.multiplayer.baud = value & 0x0003;\n\t\tif (this.linkLayer) {\n\t\t\tthis.linkLayer.setBaud(this.BAUD[this.multiplayer.baud]);\n\t\t}\n\n\t\tif (!this.multiplayer.si) {\n\t\t\tthis.multiplayer.busy = value & 0x0080;\n\t\t\tif (this.linkLayer && this.multiplayer.busy) {\n\t\t\t\tthis.linkLayer.startMultiplayerTransfer();\n\t\t\t}\n\t\t}\n\t\tthis.irq = value & 0x4000;\n\t\tbreak;\n\tcase this.SIO_UART:\n\t\tthis.core.STUB('UART unsupported');\n\t\tbreak;\n\tcase this.SIO_GPIO:\n\t\t// This register isn't used in general-purpose mode\n\t\tbreak;\n\tcase this.SIO_JOYBUS:\n\t\tthis.core.STUB('JOY BUS unsupported');\n\t\tbreak;\n\t}\n};\n\nGameBoyAdvanceSIO.prototype.readSIOCNT = function() {\n\tvar value = (this.mode << 12) & 0xFFFF;\n\tswitch (this.mode) {\n\tcase this.SIO_NORMAL_8:\n\t\tthis.core.STUB('8-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_NORMAL_32:\n\t\tthis.core.STUB('32-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_MULTI:\n\t\tvalue |= this.multiplayer.baud;\n\t\tvalue |= this.multiplayer.si;\n\t\tvalue |= (!!this.sd) << 3;\n\t\tvalue |= this.multiplayer.id << 4;\n\t\tvalue |= this.multiplayer.error;\n\t\tvalue |= this.multiplayer.busy;\n\t\tvalue |= (!!this.multiplayer.irq) << 14;\n\t\tbreak;\n\tcase this.SIO_UART:\n\t\tthis.core.STUB('UART unsupported');\n\t\tbreak;\n\tcase this.SIO_GPIO:\n\t\t// This register isn't used in general-purpose mode\n\t\tbreak;\n\tcase this.SIO_JOYBUS:\n\t\tthis.core.STUB('JOY BUS unsupported');\n\t\tbreak;\n\t}\n\treturn value;\n};\n\nGameBoyAdvanceSIO.prototype.read = function(slot) {\n\tswitch (this.mode) {\n\tcase this.SIO_NORMAL_32:\n\t\tthis.core.STUB('32-bit transfer unsupported');\n\t\tbreak;\n\tcase this.SIO_MULTI:\n\t\treturn this.multiplayer.states[slot];\n\tcase this.SIO_UART:\n\t\tthis.core.STUB('UART unsupported');\n\t\tbreak;\n\tdefault:\n\t\tthis.core.WARN('Reading from transfer register in unsupported mode');\n\t\tbreak;\n\t}\n\treturn 0;\n};\n","window.ARMCoreThumb = ARMCoreThumb = function (cpu) {\n\tthis.cpu = cpu;\n};\n\nARMCoreThumb.prototype.constructADC = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar m = (gprs[rm] >>> 0) + !!cpu.cpsrC;\n\t\tvar oldD = gprs[rd];\n\t\tvar d = (oldD >>> 0) + m;\n\t\tvar oldDn = oldD >> 31;\n\t\tvar dn = d >> 31;\n\t\tvar mn = m >> 31;\n\t\tcpu.cpsrN = dn;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = oldDn == mn && oldDn != dn && mn != dn;\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = (gprs[rn] >>> 0) + immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = !(gprs[rn] >> 31) && ((gprs[rn] >> 31 ^ d) >> 31) && (d >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD2 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = (gprs[rn] >>> 0) + immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = !(gprs[rn] >> 31) && ((gprs[rn] ^ d) >> 31) && ((immediate ^ d) >> 31);\n\t\tgprs[rn] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD3 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = (gprs[rn] >>> 0) + (gprs[rm] >>> 0);\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = d > 0xFFFFFFFF;\n\t\tcpu.cpsrV = !((gprs[rn] ^ gprs[rm]) >> 31) && ((gprs[rn] ^ d) >> 31) && ((gprs[rm] ^ d) >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD4 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] += gprs[rm];\n\t};\n};\n\nARMCoreThumb.prototype.constructADD5 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = (gprs[cpu.PC] & 0xFFFFFFFC) + immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD6 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[cpu.SP] + immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructADD7 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[cpu.SP] += immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructAND = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] & gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructASR1 = function(rd, rm, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (immediate == 0) {\n\t\t\tcpu.cpsrC = gprs[rm] >> 31;\n\t\t\tif (cpu.cpsrC) {\n\t\t\t\tgprs[rd] = 0xFFFFFFFF;\n\t\t\t} else {\n\t\t\t\tgprs[rd] = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tcpu.cpsrC = gprs[rm] & (1 << (immediate - 1));\n\t\t\tgprs[rd] = gprs[rm] >> immediate;\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructASR2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tif (rs < 32) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (rs - 1));\n\t\t\t\tgprs[rd] >>= rs;\n\t\t\t} else {\n\t\t\t\tcpu.cpsrC = gprs[rd] >> 31;\n\t\t\t\tif (cpu.cpsrC) {\n\t\t\t\t\tgprs[rd] = 0xFFFFFFFF;\n\t\t\t\t} else {\n\t\t\t\t\tgprs[rd] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructB1 = function(immediate, condOp) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (condOp()) {\n\t\t\tgprs[cpu.PC] += immediate;\n\t\t}\n\t};\n};\n\nARMCoreThumb.prototype.constructB2 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[cpu.PC] += immediate;\n\t};\n};\n\nARMCoreThumb.prototype.constructBIC = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] & ~gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructBL1 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[cpu.LR] = gprs[cpu.PC] + immediate;\n\t}\n};\n\nARMCoreThumb.prototype.constructBL2 = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar pc = gprs[cpu.PC];\n\t\tgprs[cpu.PC] = gprs[cpu.LR] + (immediate << 1);\n\t\tgprs[cpu.LR] = pc - 1;\n\t}\n};\n\nARMCoreThumb.prototype.constructBX = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tcpu.switchExecMode(gprs[rm] & 0x00000001);\n\t\tvar misalign = 0;\n\t\tif (rm == 15) {\n\t\t\tmisalign = gprs[rm] & 0x00000002;\n\t\t}\n\t\tgprs[cpu.PC] = gprs[rm] & 0xFFFFFFFE - misalign;\n\t};\n};\n\nARMCoreThumb.prototype.constructCMN = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = (gprs[rd] >>> 0) + (gprs[rm] >>> 0);\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = aluOut > 0xFFFFFFFF;\n\t\tcpu.cpsrV = (gprs[rd] >> 31) == (gprs[rm] >> 31) &&\n\t\t\t\t\t(gprs[rd] >> 31) != (aluOut >> 31) &&\n\t\t\t\t\t(gprs[rm] >> 31) != (aluOut >> 31);\n\t};\n};\n\nARMCoreThumb.prototype.constructCMP1 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = gprs[rn] - immediate;\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= immediate;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) && ((gprs[rn] ^ aluOut) >> 31);\n\t};\n}\n\nARMCoreThumb.prototype.constructCMP2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rd];\n\t\tvar m = gprs[rm];\n\t\tvar aluOut = d - m;\n\t\tvar an = aluOut >> 31;\n\t\tvar dn = d >> 31;\n\t\tcpu.cpsrN = an;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (d >>> 0) >= (m >>> 0);\n\t\tcpu.cpsrV = dn != (m >> 31) && dn != an;\n\t};\n};\n\nARMCoreThumb.prototype.constructCMP3 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = gprs[rd] - gprs[rm];\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rd] >>> 0) >= (gprs[rm] >>> 0);\n\t\tcpu.cpsrV = ((gprs[rd] ^ gprs[rm]) >> 31) && ((gprs[rd] ^ aluOut) >> 31);\n\t};\n};\n\nARMCoreThumb.prototype.constructEOR = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] ^ gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructLDMIA = function(rn, rs) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar address = gprs[rn];\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = 0x01, i = 0; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tgprs[i] = cpu.mmu.load32(address);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tif (!((1 << rn) & rs)) {\n\t\t\tgprs[rn] = address;\n\t\t}\n\t};\n};\n\nARMCoreThumb.prototype.constructLDR1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar n = gprs[rn] + immediate;\n\t\tgprs[rd] = cpu.mmu.load32(n);\n\t\tcpu.mmu.wait32(n);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDR2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load32(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait32(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t}\n};\n\nARMCoreThumb.prototype.constructLDR3 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load32((gprs[cpu.PC] & 0xFFFFFFFC) + immediate);\n\t\tcpu.mmu.wait32(gprs[cpu.PC]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDR4 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load32(gprs[cpu.SP] + immediate);\n\t\tcpu.mmu.wait32(gprs[cpu.SP] + immediate);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRB1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU8(n);\n\t\tcpu.mmu.wait(n);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRB2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU8(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRH1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU16(n);\n\t\tcpu.mmu.wait(n);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRH2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.loadU16(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRSB = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load8(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLDRSH = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = cpu.mmu.load16(gprs[rn] + gprs[rm]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t\t++cpu.cycles;\n\t};\n};\n\nARMCoreThumb.prototype.constructLSL1 = function(rd, rm, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (immediate == 0) {\n\t\t\tgprs[rd] = gprs[rm];\n\t\t} else {\n\t\t\tcpu.cpsrC = gprs[rm] & (1 << (32 - immediate));\n\t\t\tgprs[rd] = gprs[rm] << immediate;\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructLSL2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tif (rs < 32) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (32 - rs));\n\t\t\t\tgprs[rd] <<= rs;\n\t\t\t} else {\n\t\t\t\tif (rs > 32) {\n\t\t\t\t\tcpu.cpsrC = 0;\n\t\t\t\t} else {\n\t\t\t\t\tcpu.cpsrC = gprs[rd] & 0x00000001;\n\t\t\t\t}\n\t\t\t\tgprs[rd] = 0;\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructLSR1 = function(rd, rm, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (immediate == 0) {\n\t\t\tcpu.cpsrC = gprs[rm] >> 31;\n\t\t\tgprs[rd] = 0;\n\t\t} else {\n\t\t\tcpu.cpsrC = gprs[rm] & (1 << (immediate - 1));\n\t\t\tgprs[rd] = gprs[rm] >>> immediate;\n\t\t}\n\t\tcpu.cpsrN = 0;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n}\n\nARMCoreThumb.prototype.constructLSR2 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tif (rs < 32) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (rs - 1));\n\t\t\t\tgprs[rd] >>>= rs;\n\t\t\t} else {\n\t\t\t\tif (rs > 32) {\n\t\t\t\t\tcpu.cpsrC = 0;\n\t\t\t\t} else {\n\t\t\t\t\tcpu.cpsrC = gprs[rd] >> 31;\n\t\t\t\t}\n\t\t\t\tgprs[rd] = 0;\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructMOV1 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rn] = immediate;\n\t\tcpu.cpsrN = immediate >> 31;\n\t\tcpu.cpsrZ = !(immediate & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructMOV2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn];\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = 0;\n\t\tcpu.cpsrV = 0;\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructMOV3 = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rm];\n\t};\n};\n\nARMCoreThumb.prototype.constructMUL = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tcpu.mmu.waitMul(gprs[rm]);\n\t\tif ((gprs[rm] & 0xFFFF0000) && (gprs[rd] & 0xFFFF0000)) {\n\t\t\t// Our data type is a double--we'll lose bits if we do it all at once!\n\t\t\tvar hi = ((gprs[rd] & 0xFFFF0000) * gprs[rm]) & 0xFFFFFFFF;\n\t\t\tvar lo = ((gprs[rd] & 0x0000FFFF) * gprs[rm]) & 0xFFFFFFFF;\n\t\t\tgprs[rd] = (hi + lo) & 0xFFFFFFFF;\n\t\t} else {\n\t\t\tgprs[rd] *= gprs[rm];\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructMVN = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = ~gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructNEG = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = -gprs[rm];\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = 0 >= (d >>> 0);\n\t\tcpu.cpsrV = (gprs[rm] >> 31) && (d >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructORR = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tgprs[rd] = gprs[rd] | gprs[rm];\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructPOP = function(rs, r) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\t++cpu.cycles;\n\t\tvar address = gprs[cpu.SP];\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = 0x01, i = 0; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.waitSeq32(address);\n\t\t\t\tgprs[i] = cpu.mmu.load32(address);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tif (r) {\n\t\t\tgprs[cpu.PC] = cpu.mmu.load32(address) & 0xFFFFFFFE;\n\t\t\taddress += 4;\n\t\t\t++total;\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tgprs[cpu.SP] = address;\n\t};\n};\n\nARMCoreThumb.prototype.constructPUSH = function(rs, r) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar address = gprs[cpu.SP] - 4;\n\t\tvar total = 0;\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tif (r) {\n\t\t\tcpu.mmu.store32(address, gprs[cpu.LR]);\n\t\t\taddress -= 4;\n\t\t\t++total;\n\t\t}\n\t\tvar m, i;\n\t\tfor (m = 0x80, i = 7; m; m >>= 1, --i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress -= 4;\n\t\t\t\t++total;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor (m >>= 1, --i; m; m >>= 1, --i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress -= 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tgprs[cpu.SP] = address + 4;\n\t};\n};\n\nARMCoreThumb.prototype.constructROR = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar rs = gprs[rm] & 0xFF;\n\t\tif (rs) {\n\t\t\tvar r4 = rs & 0x1F;\n\t\t\tif (r4 > 0) {\n\t\t\t\tcpu.cpsrC = gprs[rd] & (1 << (r4 - 1));\n\t\t\t\tgprs[rd] = (gprs[rd] >>> r4) | (gprs[rd] << (32 - r4));\n\t\t\t} else {\n\t\t\t\tcpu.cpsrC = gprs[rd] >> 31;\n\t\t\t}\n\t\t}\n\t\tcpu.cpsrN = gprs[rd] >> 31;\n\t\tcpu.cpsrZ = !(gprs[rd] & 0xFFFFFFFF);\n\t};\n};\n\nARMCoreThumb.prototype.constructSBC = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar m = (gprs[rm] >>> 0) + !cpu.cpsrC;\n\t\tvar d = (gprs[rd] >>> 0) - m;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rd] >>> 0) >= (d >>> 0);\n\t\tcpu.cpsrV = ((gprs[rd] ^ m) >> 31) && ((gprs[rd] ^ d) >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructSTMIA = function(rn, rs) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tvar address = gprs[rn];\n\t\tvar total = 0;\n\t\tvar m, i;\n\t\tfor (m = 0x01, i = 0; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor (m <<= 1, ++i; i < 8; m <<= 1, ++i) {\n\t\t\tif (rs & m) {\n\t\t\t\tcpu.mmu.store32(address, gprs[i]);\n\t\t\t\taddress += 4;\n\t\t\t\t++total;\n\t\t\t}\n\t\t}\n\t\tcpu.mmu.waitMulti32(address, total);\n\t\tgprs[rn] = address;\n\t};\n};\n\nARMCoreThumb.prototype.constructSTR1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.store32(n, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait32(n);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTR2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store32(gprs[rn] + gprs[rm], gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait32(gprs[rn] + gprs[rm]);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTR3 = function(rd, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store32(gprs[cpu.SP] + immediate, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait32(gprs[cpu.SP] + immediate);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTRB1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.store8(n, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(n);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTRB2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store8(gprs[rn] + gprs[rm], gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t}\n};\n\nARMCoreThumb.prototype.constructSTRH1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tvar n = gprs[rn] + immediate;\n\t\tcpu.mmu.store16(n, gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(n);\n\t};\n};\n\nARMCoreThumb.prototype.constructSTRH2 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.store16(gprs[rn] + gprs[rm], gprs[rd]);\n\t\tcpu.mmu.wait(gprs[cpu.PC]);\n\t\tcpu.mmu.wait(gprs[rn] + gprs[rm]);\n\t}\n};\n\nARMCoreThumb.prototype.constructSUB1 = function(rd, rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn] - immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= immediate;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) && ((gprs[rn] ^ d) >> 31);\n\t\tgprs[rd] = d;\n\t};\n}\n\nARMCoreThumb.prototype.constructSUB2 = function(rn, immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn] - immediate;\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= immediate;\n\t\tcpu.cpsrV = (gprs[rn] >> 31) && ((gprs[rn] ^ d) >> 31);\n\t\tgprs[rn] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructSUB3 = function(rd, rn, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar d = gprs[rn] - gprs[rm];\n\t\tcpu.cpsrN = d >> 31;\n\t\tcpu.cpsrZ = !(d & 0xFFFFFFFF);\n\t\tcpu.cpsrC = (gprs[rn] >>> 0) >= (gprs[rm] >>> 0);\n\t\tcpu.cpsrV = (gprs[rn] >> 31) != (gprs[rm] >> 31) &&\n\t\t\t\t\t(gprs[rn] >> 31) != (d >> 31);\n\t\tgprs[rd] = d;\n\t};\n};\n\nARMCoreThumb.prototype.constructSWI = function(immediate) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.irq.swi(immediate);\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t}\n};\n\nARMCoreThumb.prototype.constructTST = function(rd, rm) {\n\tvar cpu = this.cpu;\n\tvar gprs = cpu.gprs;\n\treturn function() {\n\t\tcpu.mmu.waitPrefetch(gprs[cpu.PC]);\n\t\tvar aluOut = gprs[rd] & gprs[rm];\n\t\tcpu.cpsrN = aluOut >> 31;\n\t\tcpu.cpsrZ = !(aluOut & 0xFFFFFFFF);\n\t};\n};\n","function hex(number, leading, usePrefix) {\n\tif (typeof(usePrefix) === 'undefined') {\n\t\tusePrefix = true;\n\t}\n\tif (typeof(leading) === 'undefined') {\n\t\tleading = 8;\n\t}\n\tvar string = (number >>> 0).toString(16).toUpperCase();\n\tleading -= string.length;\n\tif (leading < 0)\n\t\treturn string;\n\treturn (usePrefix ? '0x' : '') + new Array(leading + 1).join('0') + string;\n}\n\nconst Serializer = {\n\tTAG_INT: 1,\n\tTAG_STRING: 2,\n\tTAG_STRUCT: 3,\n\tTAG_BLOB: 4,\n\tTAG_BOOLEAN: 5,\n\tTYPE: 'application/octet-stream',\n\n\tpointer: function() {\n\t\tthis.index = 0;\n\t\tthis.top = 0;\n\t\tthis.stack = [];\n\t},\n\n\tpack: function(value) {\n\t\tvar object = new DataView(new ArrayBuffer(4));\n\t\tobject.setUint32(0, value, true);\n\t\treturn object.buffer;\n\t},\n\n\tpack8: function(value) {\n\t\tvar object = new DataView(new ArrayBuffer(1));\n\t\tobject.setUint8(0, value, true);\n\t\treturn object.buffer;\n\t},\n\n\tprefix: function(value) {\n\t\treturn new Blob([Serializer.pack(value.size || value.length || value.byteLength), value], { type: Serializer.TYPE });\n\t},\n\n\tserialize: function(stream) {\n\t\tvar parts = [];\n\t\tvar size = 4;\n\t\tfor (i in stream) {\n\t\t\tif (stream.hasOwnProperty(i)) {\n\t\t\t\tvar tag;\n\t\t\t\tvar head = Serializer.prefix(i);\n\t\t\t\tvar body;\n\t\t\t\tswitch (typeof(stream[i])) {\n\t\t\t\tcase 'number':\n\t\t\t\t\ttag = Serializer.TAG_INT;\n\t\t\t\t\tbody = Serializer.pack(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'string':\n\t\t\t\t\ttag = Serializer.TAG_STRING;\n\t\t\t\t\tbody = Serializer.prefix(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t\tif (stream[i].type == Serializer.TYPE) {\n\t\t\t\t\t\ttag = Serializer.TAG_BLOB;\n\t\t\t\t\t\tbody = stream[i];\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttag = Serializer.TAG_STRUCT;\n\t\t\t\t\t\tbody = Serializer.serialize(stream[i]);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'boolean':\n\t\t\t\t\ttag = Serializer.TAG_BOOLEAN;\n\t\t\t\t\tbody = Serializer.pack8(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(stream[i]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tsize += 1 + head.size + (body.size || body.byteLength || body.length);\n\t\t\t\tparts.push(Serializer.pack8(tag));\n\t\t\t\tparts.push(head);\n\t\t\t\tparts.push(body);\n\t\t\t}\n\t\t}\n\t\tparts.unshift(Serializer.pack(size));\n\t\treturn new Blob(parts);\n\t},\n\n\tdeserialize: function(blob, callback) {\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(data) {\n\t\t\tcallback(Serializer.deserealizeStream(new DataView(data.target.result), new Serializer.pointer));\n\t\t}\n\t\treader.readAsArrayBuffer(blob);\n\t},\n\n\tdeserealizeStream: function(view, pointer) {\n\t\tpointer.push();\n\t\tvar object = {};\n\t\tvar remaining = view.getUint32(pointer.advance(4), true);\n\t\twhile (pointer.mark() < remaining) {\n\t\t\tvar tag = view.getUint8(pointer.advance(1));\n\t\t\tvar head = pointer.readString(view);\n\t\t\tvar body;\n\t\t\tswitch (tag) {\n\t\t\tcase Serializer.TAG_INT:\n\t\t\t\tbody = view.getUint32(pointer.advance(4), true);\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_STRING:\n\t\t\t\tbody = pointer.readString(view);\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_STRUCT:\n\t\t\t\tbody = Serializer.deserealizeStream(view, pointer);\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_BLOB:\n\t\t\t\tvar size = view.getUint32(pointer.advance(4), true);\n\t\t\t\tbody = view.buffer.slice(pointer.advance(size), pointer.advance(0));\n\t\t\t\tbreak;\n\t\t\tcase Serializer.TAG_BOOLEAN:\n\t\t\t\tbody = !!view.getUint8(pointer.advance(1));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tobject[head] = body;\n\t\t}\n\t\tif (pointer.mark() > remaining) {\n\t\t\tthrow \"Size of serialized data exceeded\";\n\t\t}\n\t\tpointer.pop();\n\t\treturn object;\n\t},\n\n\tserializePNG: function(blob, base, callback) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tvar context = canvas.getContext('2d');\n\t\tvar pixels = base.getContext('2d').getImageData(0, 0, base.width, base.height);\n\t\tvar transparent = 0;\n\t\tfor (var y = 0; y < base.height; ++y) {\n\t\t\tfor (var x = 0; x < base.width; ++x) {\n\t\t\t\tif (!pixels.data[(x + y * base.width) * 4 + 3]) {\n\t\t\t\t\t++transparent;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar bytesInCanvas = transparent * 3 + (base.width * base.height - transparent);\n\t\tfor (var multiplier = 1; (bytesInCanvas * multiplier * multiplier) < blob.size; ++multiplier);\n\t\tvar edges = bytesInCanvas * multiplier * multiplier - blob.size;\n\t\tvar padding = Math.ceil(edges / (base.width * multiplier));\n\t\tcanvas.setAttribute('width', base.width * multiplier);\n\t\tcanvas.setAttribute('height', base.height * multiplier + padding);\n\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(data) {\n\t\t\tvar view = new Uint8Array(data.target.result);\n\t\t\tvar pointer = 0;\n\t\t\tvar pixelPointer = 0;\n\t\t\tvar newPixels = context.createImageData(canvas.width, canvas.height + padding);\n\t\t\tfor (var y = 0; y < canvas.height; ++y) {\n\t\t\t\tfor (var x = 0; x < canvas.width; ++x) {\n\t\t\t\t\tvar oldY = (y / multiplier) | 0;\n\t\t\t\t\tvar oldX = (x / multiplier) | 0;\n\t\t\t\t\tif (oldY > base.height || !pixels.data[(oldX + oldY * base.width) * 4 + 3]) {\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar byte = view[pointer++];\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 0] | (byte & 7);\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 1] | ((byte >> 3) & 7);\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 2] | ((byte >> 6) & 7);\n\t\t\t\t\t\tnewPixels.data[pixelPointer++] = pixels.data[(oldX + oldY * base.width) * 4 + 3];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontext.putImageData(newPixels, 0, 0);\n\t\t\tcallback(canvas.toDataURL('image/png'));\n\t\t}\n\t\treader.readAsArrayBuffer(blob);\n\t\treturn canvas;\n\t},\n\n\tdeserializePNG: function(blob, callback) {\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(data) {\n\t\t\tvar image = document.createElement('img');\n\t\t\timage.setAttribute('src', data.target.result);\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.setAttribute('height', image.height);\n\t\t\tcanvas.setAttribute('width', image.width);\n\t\t\tvar context = canvas.getContext('2d');\n\t\t\tcontext.drawImage(image, 0, 0);\n\t\t\tvar pixels = context.getImageData(0, 0, canvas.width, canvas.height);\n\t\t\tvar data = [];\n\t\t\tfor (var y = 0; y < canvas.height; ++y) {\n\t\t\t\tfor (var x = 0; x < canvas.width; ++x) {\n\t\t\t\t\tif (!pixels.data[(x + y * canvas.width) * 4 + 3]) {\n\t\t\t\t\t\tdata.push(pixels.data[(x + y * canvas.width) * 4 + 0]);\n\t\t\t\t\t\tdata.push(pixels.data[(x + y * canvas.width) * 4 + 1]);\n\t\t\t\t\t\tdata.push(pixels.data[(x + y * canvas.width) * 4 + 2]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar byte = 0;\n\t\t\t\t\t\tbyte |= pixels.data[(x + y * canvas.width) * 4 + 0] & 7;\n\t\t\t\t\t\tbyte |= (pixels.data[(x + y * canvas.width) * 4 + 1] & 7) << 3;\n\t\t\t\t\t\tbyte |= (pixels.data[(x + y * canvas.width) * 4 + 2] & 7) << 6;\n\t\t\t\t\t\tdata.push(byte);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnewBlob = new Blob(data.map(function (byte) {\n\t\t\t\tvar array = new Uint8Array(1);\n\t\t\t\tarray[0] = byte;\n\t\t\t\treturn array;\n\t\t\t}), { type: Serializer.TYPE});\n\t\t\tSerializer.deserialize(newBlob, callback);\n\t\t}\n\t\treader.readAsDataURL(blob);\n\t}\n};\n\nSerializer.pointer.prototype.advance = function(amount) {\n\tvar index = this.index;\n\tthis.index += amount;\n\treturn index;\n};\n\nSerializer.pointer.prototype.mark = function() {\n\treturn this.index - this.top;\n};\n\nSerializer.pointer.prototype.push = function() {\n\tthis.stack.push(this.top);\n\tthis.top = this.index;\n};\n\nSerializer.pointer.prototype.pop = function() {\n\tthis.top = this.stack.pop();\n};\n\nSerializer.pointer.prototype.readString = function(view) {\n\tvar length = view.getUint32(this.advance(4), true);\n\tvar bytes = [];\n\tfor (var i = 0; i < length; ++i) {\n\t\tbytes.push(String.fromCharCode(view.getUint8(this.advance(1))));\n\t}\n\treturn bytes.join('');\n};\n","window.GameBoyAdvanceVideo = function GameBoyAdvanceVideo() {\n\tthis.renderPath = new GameBoyAdvanceSoftwareRenderer();\n\n\tthis.CYCLES_PER_PIXEL = 4;\n\n\tthis.HORIZONTAL_PIXELS = 240;\n\tthis.HBLANK_PIXELS = 68;\n\tthis.HDRAW_LENGTH = 1006;\n\tthis.HBLANK_LENGTH = 226;\n\tthis.HORIZONTAL_LENGTH = 1232;\n\n\tthis.VERTICAL_PIXELS = 160;\n\tthis.VBLANK_PIXELS = 68;\n\tthis.VERTICAL_TOTAL_PIXELS = 228;\n\n\tthis.TOTAL_LENGTH = 280896;\n\n\tthis.drawCallback = function() {};\n\tthis.vblankCallback = function() {};\n};\n\nGameBoyAdvanceVideo.prototype.clear = function() {\n\tthis.renderPath.clear(this.cpu.mmu);\n\n\t// DISPSTAT\n\tthis.DISPSTAT_MASK = 0xFF38;\n\tthis.inHblank = false;\n\tthis.inVblank = false;\n\tthis.vcounter = 0;\n\tthis.vblankIRQ = 0;\n\tthis.hblankIRQ = 0;\n\tthis.vcounterIRQ = 0;\n\tthis.vcountSetting = 0;\n\n\t// VCOUNT\n\tthis.vcount = -1;\n\n\tthis.lastHblank = 0;\n\tthis.nextHblank = this.HDRAW_LENGTH;\n\tthis.nextEvent = this.nextHblank;\n\n\tthis.nextHblankIRQ = 0;\n\tthis.nextVblankIRQ = 0;\n\tthis.nextVcounterIRQ = 0;\n};\n\nGameBoyAdvanceVideo.prototype.freeze = function() {\n\treturn {\n\t\t'inHblank': this.inHblank,\n\t\t'inVblank': this.inVblank,\n\t\t'vcounter': this.vcounter,\n\t\t'vblankIRQ': this.vblankIRQ,\n\t\t'hblankIRQ': this.hblankIRQ,\n\t\t'vcounterIRQ': this.vcounterIRQ,\n\t\t'vcountSetting': this.vcountSetting,\n\t\t'vcount': this.vcount,\n\t\t'lastHblank': this.lastHblank,\n\t\t'nextHblank': this.nextHblank,\n\t\t'nextEvent': this.nextEvent,\n\t\t'nextHblankIRQ': this.nextHblankIRQ,\n\t\t'nextVblankIRQ': this.nextVblankIRQ,\n\t\t'nextVcounterIRQ': this.nextVcounterIRQ,\n\t\t'renderPath': this.renderPath.freeze(this.core.encodeBase64)\n\t};\n};\n\nGameBoyAdvanceVideo.prototype.defrost = function(frost) {\n\tthis.inHblank = frost.inHblank;\n\tthis.inVblank = frost.inVblank;\n\tthis.vcounter = frost.vcounter;\n\tthis.vblankIRQ = frost.vblankIRQ;\n\tthis.hblankIRQ = frost.hblankIRQ;\n\tthis.vcounterIRQ = frost.vcounterIRQ;\n\tthis.vcountSetting = frost.vcountSetting;\n\tthis.vcount = frost.vcount;\n\tthis.lastHblank = frost.lastHblank;\n\tthis.nextHblank = frost.nextHblank;\n\tthis.nextEvent = frost.nextEvent;\n\tthis.nextHblankIRQ = frost.nextHblankIRQ;\n\tthis.nextVblankIRQ = frost.nextVblankIRQ;\n\tthis.nextVcounterIRQ = frost.nextVcounterIRQ;\n\tthis.renderPath.defrost(frost.renderPath, this.core.decodeBase64);\n};\n\nGameBoyAdvanceVideo.prototype.setBacking = function(backing) {\n\tvar pixelData = backing.createImageData(this.HORIZONTAL_PIXELS, this.VERTICAL_PIXELS);\n\tthis.context = backing;\n\n\t// Clear backing first\n\tfor (var offset = 0; offset < this.HORIZONTAL_PIXELS * this.VERTICAL_PIXELS * 4;) {\n\t\tpixelData.data[offset++] = 0xFF;\n\t\tpixelData.data[offset++] = 0xFF;\n\t\tpixelData.data[offset++] = 0xFF;\n\t\tpixelData.data[offset++] = 0xFF;\n\t}\n\n\tthis.renderPath.setBacking(pixelData);\n}\n\nGameBoyAdvanceVideo.prototype.updateTimers = function(cpu) {\n\tvar cycles = cpu.cycles;\n\n\tif (this.nextEvent <= cycles) {\n\t\tif (this.inHblank) {\n\t\t\t// End Hblank\n\t\t\tthis.inHblank = false;\n\t\t\tthis.nextEvent = this.nextHblank;\n\n\t\t\t++this.vcount;\n\n\t\t\tswitch (this.vcount) {\n\t\t\tcase this.VERTICAL_PIXELS:\n\t\t\t\tthis.inVblank = true;\n\t\t\t\tthis.renderPath.finishDraw(this);\n\t\t\t\tthis.nextVblankIRQ = this.nextEvent + this.TOTAL_LENGTH;\n\t\t\t\tthis.cpu.mmu.runVblankDmas();\n\t\t\t\tif (this.vblankIRQ) {\n\t\t\t\t\tthis.cpu.irq.raiseIRQ(this.cpu.irq.IRQ_VBLANK);\n\t\t\t\t}\n\t\t\t\tthis.vblankCallback();\n\t\t\t\tbreak;\n\t\t\tcase this.VERTICAL_TOTAL_PIXELS - 1:\n\t\t\t\tthis.inVblank = false;\n\t\t\t\tbreak;\n\t\t\tcase this.VERTICAL_TOTAL_PIXELS:\n\t\t\t\tthis.vcount = 0;\n\t\t\t\tthis.renderPath.startDraw();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.vcounter = this.vcount == this.vcountSetting;\n\t\t\tif (this.vcounter && this.vcounterIRQ) {\n\t\t\t\tthis.cpu.irq.raiseIRQ(this.cpu.irq.IRQ_VCOUNTER);\n\t\t\t\tthis.nextVcounterIRQ += this.TOTAL_LENGTH;\n\t\t\t}\n\n\t\t\tif (this.vcount < this.VERTICAL_PIXELS) {\n\t\t\t\tthis.renderPath.drawScanline(this.vcount);\n\t\t\t}\n\t\t} else {\n\t\t\t// Begin Hblank\n\t\t\tthis.inHblank = true;\n\t\t\tthis.lastHblank = this.nextHblank;\n\t\t\tthis.nextEvent = this.lastHblank + this.HBLANK_LENGTH;\n\t\t\tthis.nextHblank = this.nextEvent + this.HDRAW_LENGTH;\n\t\t\tthis.nextHblankIRQ = this.nextHblank;\n\n\t\t\tif (this.vcount < this.VERTICAL_PIXELS) {\n\t\t\t\tthis.cpu.mmu.runHblankDmas();\n\t\t\t}\n\t\t\tif (this.hblankIRQ) {\n\t\t\t\tthis.cpu.irq.raiseIRQ(this.cpu.irq.IRQ_HBLANK);\n\t\t\t}\n\t\t}\n\t}\n};\n\nGameBoyAdvanceVideo.prototype.writeDisplayStat = function(value) {\n\tthis.vblankIRQ = value & 0x0008;\n\tthis.hblankIRQ = value & 0x0010;\n\tthis.vcounterIRQ = value & 0x0020;\n\tthis.vcountSetting = (value & 0xFF00) >> 8;\n\n\tif (this.vcounterIRQ) {\n\t\t// FIXME: this can be too late if we're in the middle of an Hblank\n\t\tthis.nextVcounterIRQ = this.nextHblank + this.HBLANK_LENGTH + (this.vcountSetting - this.vcount) * this.HORIZONTAL_LENGTH;\n\t\tif (this.nextVcounterIRQ < this.nextEvent) {\n\t\t\tthis.nextVcounterIRQ += this.TOTAL_LENGTH;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceVideo.prototype.readDisplayStat = function() {\n\treturn (this.inVblank) | (this.inHblank << 1) | (this.vcounter << 2);\n};\n\nGameBoyAdvanceVideo.prototype.finishDraw = function(pixelData) {\n\tthis.context.putImageData(pixelData, 0, 0);\n\tthis.drawCallback();\n};\n","function MemoryProxy(owner, size, blockSize) {\n\tthis.owner = owner;\n\tthis.blocks = [];\n\tthis.blockSize = blockSize;\n\tthis.mask = (1 << blockSize) - 1;\n\tthis.size = size;\n\tif (blockSize) {\n\t\tfor (var i = 0; i < (size >> blockSize); ++i) {\n\t\t\tthis.blocks.push(new MemoryView(new ArrayBuffer(1 << blockSize)));\n\t\t}\n\t} else {\n\t\tthis.blockSize = 31;\n\t\tthis.mask = -1;\n\t\tthis.blocks[0] = new MemoryView(new ArrayBuffer(size));\n\t}\n};\n\nMemoryProxy.prototype.combine = function() {\n\tif (this.blocks.length > 1) {\n\t\tvar combined = new Uint8Array(this.size);\n\t\tfor (var i = 0; i < this.blocks.length; ++i) {\n\t\t\tcombined.set(new Uint8Array(this.blocks[i].buffer), i << this.blockSize);\n\t\t}\n\t\treturn combined.buffer;\n\t} else {\n\t\treturn this.blocks[0].buffer;\n\t}\n};\n\nMemoryProxy.prototype.replace = function(buffer) {\n\tfor (var i = 0; i < this.blocks.length; ++i) {\n\t\tthis.blocks[i] = new MemoryView(buffer.slice(i << this.blockSize, (i << this.blockSize) + this.blocks[i].buffer.byteLength));\n\t}\n};\n\nMemoryProxy.prototype.load8 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].load8(offset & this.mask);\n};\n\nMemoryProxy.prototype.load16 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].load16(offset & this.mask);\n};\n\nMemoryProxy.prototype.loadU8 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].loadU8(offset & this.mask);\n};\n\nMemoryProxy.prototype.loadU16 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].loadU16(offset & this.mask);\n};\n\nMemoryProxy.prototype.load32 = function(offset) {\n\treturn this.blocks[offset >> this.blockSize].load32(offset & this.mask);\n};\n\nMemoryProxy.prototype.store8 = function(offset, value) {\n\tif (offset >= this.size) {\n\t\treturn;\n\t}\n\tthis.owner.memoryDirtied(this, offset >> this.blockSize);\n\tthis.blocks[offset >> this.blockSize].store8(offset & this.mask, value);\n\tthis.blocks[offset >> this.blockSize].store8((offset & this.mask) ^ 1, value);\n};\n\nMemoryProxy.prototype.store16 = function(offset, value) {\n\tif (offset >= this.size) {\n\t\treturn;\n\t}\n\tthis.owner.memoryDirtied(this, offset >> this.blockSize);\n\treturn this.blocks[offset >> this.blockSize].store16(offset & this.mask, value);\n};\n\nMemoryProxy.prototype.store32 = function(offset, value) {\n\tif (offset >= this.size) {\n\t\treturn;\n\t}\n\tthis.owner.memoryDirtied(this, offset >> this.blockSize);\n\treturn this.blocks[offset >> this.blockSize].store32(offset & this.mask, value);\n};\n\nMemoryProxy.prototype.invalidatePage = function(address) {};\n\nfunction GameBoyAdvanceRenderProxy() {\n\tthis.worker = new Worker('js/video/worker.js');\n\n\tthis.currentFrame = 0;\n\tthis.delay = 0;\n\tthis.skipFrame = false;\n\n\tthis.dirty = null;\n\tvar self = this;\n\tvar handlers = {\n\t\tfinish: function(data) {\n\t\t\tself.backing = data.backing;\n\t\t\tself.caller.finishDraw(self.backing);\n\t\t\t--self.delay;\n\t\t}\n\t};\n\tthis.worker.onmessage = function(message) {\n\t\thandlers[message.data['type']](message.data);\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.memoryDirtied = function(mem, block) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.memory = this.dirty.memory || {};\n\tif (mem === this.palette) {\n\t\tthis.dirty.memory.palette = mem.blocks[0].buffer;\n\t}\n\tif (mem === this.oam) {\n\t\tthis.dirty.memory.oam = mem.blocks[0].buffer;\n\t}\n\tif (mem === this.vram) {\n\t\tthis.dirty.memory.vram = this.dirty.memory.vram || [];\n\t\tthis.dirty.memory.vram[block] = mem.blocks[block].buffer;\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.clear = function(mmu) {\n\tthis.palette = new MemoryProxy(this, mmu.SIZE_PALETTE_RAM, 0);\n\tthis.vram = new MemoryProxy(this, mmu.SIZE_VRAM, 13);\n\tthis.oam = new MemoryProxy(this, mmu.SIZE_OAM, 0);\n\n\tthis.dirty = null;\n\tthis.scanlineQueue = [];\n\n\tthis.worker.postMessage({ type: 'clear', SIZE_VRAM: mmu.SIZE_VRAM, SIZE_OAM: mmu.SIZE_OAM });\n};\n\nGameBoyAdvanceRenderProxy.prototype.freeze = function(encodeBase64) {\n\treturn {\n\t\t'palette': Serializer.prefix(this.palette.combine()),\n\t\t'vram': Serializer.prefix(this.vram.combine()),\n\t\t'oam': Serializer.prefix(this.oam.combine())\n\t};\n};\n\nGameBoyAdvanceRenderProxy.prototype.defrost = function(frost, decodeBase64) {\n\tthis.palette.replace(frost.palette);\n\tthis.memoryDirtied(this.palette, 0);\n\tthis.vram.replace(frost.vram);\n\tfor (var i = 0; i < this.vram.blocks.length; ++i) {\n\t\tthis.memoryDirtied(this.vram, i);\n\t}\n\tthis.oam.replace(frost.oam);\n\tthis.memoryDirtied(this.oam, 0);\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeDisplayControl = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.DISPCNT = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundControl = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGCNT = this.dirty.BGCNT || [];\n\tthis.dirty.BGCNT[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundHOffset = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGHOFS = this.dirty.BGHOFS || [];\n\tthis.dirty.BGHOFS[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundVOffset = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGVOFS = this.dirty.BGVOFS || [];\n\tthis.dirty.BGVOFS[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundRefX = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGX = this.dirty.BGX || [];\n\tthis.dirty.BGX[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundRefY = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGY = this.dirty.BGY || [];\n\tthis.dirty.BGY[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamA = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPA = this.dirty.BGPA || [];\n\tthis.dirty.BGPA[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamB = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPB = this.dirty.BGPB || [];\n\tthis.dirty.BGPB[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamC = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPC = this.dirty.BGPC || [];\n\tthis.dirty.BGPC[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBackgroundParamD = function(bg, value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BGPD = this.dirty.BGPD || [];\n\tthis.dirty.BGPD[bg] = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin0H = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN0H = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin1H = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN1H = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin0V = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN0V = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWin1V = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WIN1V = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWinIn = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WININ = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeWinOut = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.WINOUT = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBlendControl = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BLDCNT = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBlendAlpha = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BLDALPHA = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeBlendY = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.BLDY = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.writeMosaic = function(value) {\n\tthis.dirty = this.dirty || {};\n\tthis.dirty.MOSAIC = value;\n};\n\nGameBoyAdvanceRenderProxy.prototype.clearSubsets = function(mmu, regions) {\n\tthis.dirty = this.dirty || {};\n\tif (regions & 0x04) {\n\t\tthis.palette = new MemoryProxy(this, mmu.SIZE_PALETTE_RAM, 0);\n\t\tmmu.mmap(mmu.REGION_PALETTE_RAM, this.palette);\n\t\tthis.memoryDirtied(this.palette, 0);\n\t}\n\tif (regions & 0x08) {\n\t\tthis.vram = new MemoryProxy(this, mmu.SIZE_VRAM, 13);\n\t\tmmu.mmap(mmu.REGION_VRAM, this.vram);\n\t\tfor (var i = 0; i < this.vram.blocks.length; ++i) {\n\t\t\tthis.memoryDirtied(this.vram, i);\n\t\t}\n\t}\n\tif (regions & 0x10) {\n\t\tthis.oam = new MemoryProxy(this, mmu.SIZE_OAM, 0);\n\t\tmmu.mmap(mmu.REGION_OAM, this.oam);\n\t\tthis.memoryDirtied(this.oam, 0);\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.setBacking = function(backing) {\n\tthis.backing = backing;\n\tthis.worker.postMessage({ type: 'start', backing: this.backing });\n};\n\nGameBoyAdvanceRenderProxy.prototype.drawScanline = function(y) {\n\tif (!this.skipFrame) {\n\t\tif (this.dirty) {\n\t\t\tif (this.dirty.memory) {\n\t\t\t\tif (this.dirty.memory.palette) {\n\t\t\t\t\tthis.dirty.memory.palette = this.dirty.memory.palette.slice(0);\n\t\t\t\t}\n\t\t\t\tif (this.dirty.memory.oam) {\n\t\t\t\t\tthis.dirty.memory.oam = this.dirty.memory.oam.slice(0);\n\t\t\t\t}\n\t\t\t\tif (this.dirty.memory.vram) {\n\t\t\t\t\tfor (var i = 0; i < 12; ++i) {\n\t\t\t\t\t\tif (this.dirty.memory.vram[i]) {\n\t\t\t\t\t\t\tthis.dirty.memory.vram[i] = this.dirty.memory.vram[i].slice(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scanlineQueue.push({ y: y, dirty: this.dirty });\n\t\t\tthis.dirty = null;\n\t\t}\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.startDraw = function() {\n\t++this.currentFrame;\n\tif (this.delay <= 0) {\n\t\tthis.skipFrame = false;\n\t}\n\tif (!this.skipFrame) {\n\t\t++this.delay;\n\t}\n};\n\nGameBoyAdvanceRenderProxy.prototype.finishDraw = function(caller) {\n\tthis.caller = caller;\n\tif (!this.skipFrame) {\n\t\tthis.worker.postMessage({ type: 'finish', scanlines: this.scanlineQueue, frame: this.currentFrame });\n\t\tthis.scanlineQueue = [];\n\t\tif (this.delay > 2) {\n\t\t\tthis.skipFrame = true;\n\t\t}\n\t}\n};\n","function MemoryAligned16(size) {\n\tthis.buffer = new Uint16Array(size >> 1);\n};\n\nMemoryAligned16.prototype.load8 = function(offset) {\n\treturn (this.loadU8(offset) << 24) >> 24;\n};\n\nMemoryAligned16.prototype.load16 = function(offset) {\n\treturn (this.loadU16(offset) << 16) >> 16;\n};\n\nMemoryAligned16.prototype.loadU8 = function(offset) {\n\tvar index = offset >> 1;\n\tif (offset & 1) {\n\t\treturn (this.buffer[index] & 0xFF00) >>> 8;\n\t} else {\n\t\treturn this.buffer[index] & 0x00FF;\n\t}\n};\n\nMemoryAligned16.prototype.loadU16 = function(offset) {\n\treturn this.buffer[offset >> 1];\n};\n\nMemoryAligned16.prototype.load32 = function(offset) {\n\treturn this.buffer[(offset >> 1) & ~1] | (this.buffer[(offset >> 1) | 1] << 16);\n};\n\nMemoryAligned16.prototype.store8 = function(offset, value) {\n\tvar index = offset >> 1;\n\tthis.store16(offset, (value << 8) | value);\n};\n\nMemoryAligned16.prototype.store16 = function(offset, value) {\n\tthis.buffer[offset >> 1] = value;\n};\n\nMemoryAligned16.prototype.store32 = function(offset, value) {\n\tvar index = offset >> 1;\n\tthis.store16(offset, this.buffer[index] = value & 0xFFFF);\n\tthis.store16(offset + 2, this.buffer[index + 1] = value >>> 16);\n};\n\nMemoryAligned16.prototype.insert = function(start, data) {\n\tthis.buffer.set(data, start);\n};\n\nMemoryAligned16.prototype.invalidatePage = function(address) {};\n\nfunction GameBoyAdvanceVRAM(size) {\n\tMemoryAligned16.call(this, size);\n\tthis.vram = this.buffer;\n};\n\nGameBoyAdvanceVRAM.prototype = Object.create(MemoryAligned16.prototype);\n\nfunction GameBoyAdvanceOAM(size) {\n\tMemoryAligned16.call(this, size);\n\tthis.oam = this.buffer;\n\tthis.objs = new Array(128);\n\tfor (var i = 0; i < 128; ++i) {\n\t\tthis.objs[i] = new GameBoyAdvanceOBJ(this, i);\n\t}\n\tthis.scalerot = new Array(32);\n\tfor (var i = 0; i < 32; ++i) {\n\t\tthis.scalerot[i] = {\n\t\t\ta: 1,\n\t\t\tb: 0,\n\t\t\tc: 0,\n\t\t\td: 1\n\t\t};\n\t}\n};\n\nGameBoyAdvanceOAM.prototype = Object.create(MemoryAligned16.prototype);\n\nGameBoyAdvanceOAM.prototype.overwrite = function(memory) {\n\tfor (var i = 0; i < (this.buffer.byteLength >> 1); ++i) {\n\t\tthis.store16(i << 1, memory[i]);\n\t}\n};\n\nGameBoyAdvanceOAM.prototype.store16 = function(offset, value) {\n\tvar index = (offset & 0x3F8) >> 3;\n\tvar obj = this.objs[index];\n\tvar scalerot = this.scalerot[index >> 2];\n\tvar layer = obj.priority;\n\tvar disable = obj.disable;\n\tvar y = obj.y;\n\tswitch (offset & 0x00000006) {\n\tcase 0:\n\t\t// Attribute 0\n\t\tobj.y = value & 0x00FF;\n\t\tvar wasScalerot = obj.scalerot;\n\t\tobj.scalerot = value & 0x0100;\n\t\tif (obj.scalerot) {\n\t\t\tobj.scalerotOam = this.scalerot[obj.scalerotParam];\n\t\t\tobj.doublesize = !!(value & 0x0200);\n\t\t\tobj.disable = 0;\n\t\t\tobj.hflip = 0;\n\t\t\tobj.vflip = 0;\n\t\t} else {\n\t\t\tobj.doublesize = false;\n\t\t\tobj.disable = value & 0x0200;\n\t\t\tif (wasScalerot) {\n\t\t\t\tobj.hflip = obj.scalerotParam & 0x0008;\n\t\t\t\tobj.vflip = obj.scalerotParam & 0x0010;\n\t\t\t}\n\t\t}\n\t\tobj.mode = (value & 0x0C00) >> 6; // This lines up with the stencil format\n\t\tobj.mosaic = value & 0x1000;\n\t\tobj.multipalette = value & 0x2000;\n\t\tobj.shape = (value & 0xC000) >> 14;\n\n\t\tobj.recalcSize();\n\t\tbreak;\n\tcase 2:\n\t\t// Attribute 1\n\t\tobj.x = value & 0x01FF;\n\t\tif (obj.scalerot) {\n\t\t\tobj.scalerotParam = (value & 0x3E00) >> 9;\n\t\t\tobj.scalerotOam = this.scalerot[obj.scalerotParam];\n\t\t\tobj.hflip = 0;\n\t\t\tobj.vflip = 0;\n\t\t\tobj.drawScanline = obj.drawScanlineAffine;\n\t\t} else {\n\t\t\tobj.hflip = value & 0x1000;\n\t\t\tobj.vflip = value & 0x2000;\n\t\t\tobj.drawScanline = obj.drawScanlineNormal;\n\t\t}\n\t\tobj.size = (value & 0xC000) >> 14;\n\n\t\tobj.recalcSize();\n\t\tbreak;\n\tcase 4:\n\t\t// Attribute 2\n\t\tobj.tileBase = value & 0x03FF;\n\t\tobj.priority = (value & 0x0C00) >> 10;\n\t\tobj.palette = (value & 0xF000) >> 8; // This is shifted up 4 to make pushPixel faster\n\t\tbreak;\n\tcase 6:\n\t\t// Scaling/rotation parameter\n\t\tswitch (index & 0x3) {\n\t\tcase 0:\n\t\t\tscalerot.a = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tscalerot.b = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tscalerot.c = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tscalerot.d = (value << 16) / 0x1000000;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\t}\n\n\tMemoryAligned16.prototype.store16.call(this, offset, value);\n};\n\nfunction GameBoyAdvancePalette() {\n\tthis.colors = [ new Array(0x100), new Array(0x100) ];\n\tthis.adjustedColors = [ new Array(0x100), new Array(0x100) ];\n\tthis.passthroughColors = [\n\t\tthis.colors[0], // BG0\n\t\tthis.colors[0], // BG1\n\t\tthis.colors[0], // BG2\n\t\tthis.colors[0], // BG3\n\t\tthis.colors[1], // OBJ\n\t\tthis.colors[0] // Backdrop\n\t];\n\tthis.blendY = 1;\n};\n\nGameBoyAdvancePalette.prototype.overwrite = function(memory) {\n\tfor (var i = 0; i < 512; ++i) {\n\t\tthis.store16(i << 1, memory[i]);\n\t}\n};\n\nGameBoyAdvancePalette.prototype.loadU8 = function(offset) {\n\treturn (this.loadU16(offset) >> (8 * (offset & 1))) & 0xFF;\n};\n\nGameBoyAdvancePalette.prototype.loadU16 = function(offset) {\n\treturn this.colors[(offset & 0x200) >> 9][(offset & 0x1FF) >> 1];\n};\n\nGameBoyAdvancePalette.prototype.load16 = function(offset) {\n\treturn (this.loadU16(offset) << 16) >> 16;\n};\n\nGameBoyAdvancePalette.prototype.load32 = function(offset) {\n\treturn this.loadU16(offset) | (this.loadU16(offset + 2) << 16);\n};\n\nGameBoyAdvancePalette.prototype.store16 = function(offset, value) {\n\tvar type = (offset & 0x200) >> 9;\n\tvar index = (offset & 0x1FF) >> 1;\n\tthis.colors[type][index] = value;\n\tthis.adjustedColors[type][index] = this.adjustColor(value);\n};\n\nGameBoyAdvancePalette.prototype.store32 = function(offset, value) {\n\tthis.store16(offset, value & 0xFFFF);\n\tthis.store16(offset + 2, value >> 16);\n};\n\nGameBoyAdvancePalette.prototype.invalidatePage = function(address) {};\n\nGameBoyAdvancePalette.prototype.convert16To32 = function(value, input) {\n\tvar r = (value & 0x001F) << 3;\n\tvar g = (value & 0x03E0) >> 2;\n\tvar b = (value & 0x7C00) >> 7;\n\n\tinput[0] = r;\n\tinput[1] = g;\n\tinput[2] = b;\n};\n\nGameBoyAdvancePalette.prototype.mix = function(aWeight, aColor, bWeight, bColor) {\n\tvar ar = (aColor & 0x001F);\n\tvar ag = (aColor & 0x03E0) >> 5;\n\tvar ab = (aColor & 0x7C00) >> 10;\n\n\tvar br = (bColor & 0x001F);\n\tvar bg = (bColor & 0x03E0) >> 5;\n\tvar bb = (bColor & 0x7C00) >> 10;\n\n\tvar r = Math.min(aWeight * ar + bWeight * br, 0x1F);\n\tvar g = Math.min(aWeight * ag + bWeight * bg, 0x1F);\n\tvar b = Math.min(aWeight * ab + bWeight * bb, 0x1F);\n\n\treturn r | (g << 5) | (b << 10);\n};\n\nGameBoyAdvancePalette.prototype.makeDarkPalettes = function(layers) {\n\tif (this.adjustColor != this.adjustColorDark) {\n\t\tthis.adjustColor = this.adjustColorDark;\n\t\tthis.resetPalettes();\n\t}\n\tthis.resetPaletteLayers(layers);\n};\n\nGameBoyAdvancePalette.prototype.makeBrightPalettes = function(layers) {\n\tif (this.adjustColor != this.adjustColorBright) {\n\t\tthis.adjustColor = this.adjustColorBright;\n\t\tthis.resetPalettes();\n\t}\n\tthis.resetPaletteLayers(layers);\n};\n\nGameBoyAdvancePalette.prototype.makeNormalPalettes = function() {\n\tthis.passthroughColors[0] = this.colors[0];\n\tthis.passthroughColors[1] = this.colors[0];\n\tthis.passthroughColors[2] = this.colors[0];\n\tthis.passthroughColors[3] = this.colors[0];\n\tthis.passthroughColors[4] = this.colors[1];\n\tthis.passthroughColors[5] = this.colors[0];\n};\n\nGameBoyAdvancePalette.prototype.makeSpecialPalette = function(layer) {\n\tthis.passthroughColors[layer] = this.adjustedColors[layer == 4 ? 1 : 0];\n};\n\nGameBoyAdvancePalette.prototype.makeNormalPalette = function(layer) {\n\tthis.passthroughColors[layer] = this.colors[layer == 4 ? 1 : 0];\n};\n\nGameBoyAdvancePalette.prototype.resetPaletteLayers = function(layers) {\n\tif (layers & 0x01) {\n\t\tthis.passthroughColors[0] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[0] = this.colors[0];\n\t}\n\tif (layers & 0x02) {\n\t\tthis.passthroughColors[1] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[1] = this.colors[0];\n\t}\n\tif (layers & 0x04) {\n\t\tthis.passthroughColors[2] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[2] = this.colors[0];\n\t}\n\tif (layers & 0x08) {\n\t\tthis.passthroughColors[3] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[3] = this.colors[0];\n\t}\n\tif (layers & 0x10) {\n\t\tthis.passthroughColors[4] = this.adjustedColors[1];\n\t} else {\n\t\tthis.passthroughColors[4] = this.colors[1];\n\t}\n\tif (layers & 0x20) {\n\t\tthis.passthroughColors[5] = this.adjustedColors[0];\n\t} else {\n\t\tthis.passthroughColors[5] = this.colors[0];\n\t}\n};\n\nGameBoyAdvancePalette.prototype.resetPalettes = function() {\n\tvar i;\n\tvar outPalette = this.adjustedColors[0];\n\tvar inPalette = this.colors[0];\n\tfor (i = 0; i < 256; ++i) {\n\t\toutPalette[i] = this.adjustColor(inPalette[i]);\n\t}\n\n\toutPalette = this.adjustedColors[1];\n\tinPalette = this.colors[1];\n\tfor (i = 0; i < 256; ++i) {\n\t\toutPalette[i] = this.adjustColor(inPalette[i]);\n\t}\n}\n\nGameBoyAdvancePalette.prototype.accessColor = function(layer, index) {\n\treturn this.passthroughColors[layer][index];\n};\n\nGameBoyAdvancePalette.prototype.adjustColorDark = function(color) {\n\tvar r = (color & 0x001F);\n\tvar g = (color & 0x03E0) >> 5;\n\tvar b = (color & 0x7C00) >> 10;\n\n\tr = r - (r * this.blendY);\n\tg = g - (g * this.blendY);\n\tb = b - (b * this.blendY);\n\n\treturn r | (g << 5) | (b << 10);\n};\n\nGameBoyAdvancePalette.prototype.adjustColorBright = function(color) {\n\tvar r = (color & 0x001F);\n\tvar g = (color & 0x03E0) >> 5;\n\tvar b = (color & 0x7C00) >> 10;\n\n\tr = r + ((31 - r) * this.blendY);\n\tg = g + ((31 - g) * this.blendY);\n\tb = b + ((31 - b) * this.blendY);\n\n\treturn r | (g << 5) | (b << 10);\n};\n\nGameBoyAdvancePalette.prototype.adjustColor = GameBoyAdvancePalette.prototype.adjustColorBright;\n\nGameBoyAdvancePalette.prototype.setBlendY = function(y) {\n\tif (this.blendY != y) {\n\t\tthis.blendY = y;\n\t\tthis.resetPalettes();\n\t}\n};\n\nfunction GameBoyAdvanceOBJ(oam, index) {\n\tthis.TILE_OFFSET = 0x10000;\n\tthis.oam = oam;\n\n\tthis.index = index;\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.scalerot = 0;\n\tthis.doublesize = false;\n\tthis.disable = 1;\n\tthis.mode = 0;\n\tthis.mosaic = false;\n\tthis.multipalette = false;\n\tthis.shape = 0;\n\tthis.scalerotParam = 0;\n\tthis.hflip = 0;\n\tthis.vflip = 0;\n\tthis.tileBase = 0;\n\tthis.priority = 0;\n\tthis.palette = 0;\n\tthis.drawScanline = this.drawScanlineNormal;\n\tthis.pushPixel = GameBoyAdvanceSoftwareRenderer.pushPixel;\n\tthis.cachedWidth = 8;\n\tthis.cachedHeight = 8;\n};\n\nGameBoyAdvanceOBJ.prototype.drawScanlineNormal = function(backing, y, yOff, start, end) {\n\tvar video = this.oam.video;\n\tvar x;\n\tvar underflow;\n\tvar offset;\n\tvar mask = this.mode | video.target2[video.LAYER_OBJ] | (this.priority << 1);\n\tif (this.mode == 0x10) {\n\t\tmask |= video.TARGET1_MASK;\n\t}\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[video.LAYER_OBJ];\n\t}\n\n\tvar totalWidth = this.cachedWidth;\n\tif (this.x < video.HORIZONTAL_PIXELS) {\n\t\tif (this.x < start) {\n\t\t\tunderflow = start - this.x;\n\t\t\toffset = start;\n\t\t} else {\n\t\t\tunderflow = 0;\n\t\t\toffset = this.x;\n\t\t}\n\t\tif (end < this.cachedWidth + this.x) {\n\t\t\ttotalWidth = end - this.x;\n\t\t}\n\t} else {\n\t\tunderflow = start + 512 - this.x;\n\t\toffset = start;\n\t\tif (end < this.cachedWidth - underflow) {\n\t\t\ttotalWidth = end;\n\t\t}\n\t}\n\t\n\tvar localX;\n\tvar localY;\n\tif (!this.vflip) {\n\t\tlocalY = y - yOff;\n\t} else {\n\t\tlocalY = this.cachedHeight - y + yOff - 1;\n\t}\n\tvar localYLo = localY & 0x7;\n\tvar mosaicX;\n\tvar tileOffset;\n\n\tvar paletteShift = this.multipalette ? 1 : 0;\n\n\tif (video.objCharacterMapping) {\n\t\ttileOffset = ((localY & 0x01F8) * this.cachedWidth) >> 6;\n\t} else {\n\t\ttileOffset = (localY & 0x01F8) << (2 - paletteShift);\n\t}\n\n\tif (this.mosaic) {\n\t\tmosaicX = video.objMosaicX - 1 - (video.objMosaicX + offset - 1) % video.objMosaicX;\n\t\toffset += mosaicX;\n\t\tunderflow += mosaicX;\n\t}\n\tif (!this.hflip) {\n\t\tlocalX = underflow;\n\t} else {\n\t\tlocalX = this.cachedWidth - underflow - 1;\n\t}\n\n\tvar tileRow = video.accessTile(this.TILE_OFFSET + (x & 0x4) * paletteShift, this.tileBase + (tileOffset << paletteShift) + ((localX & 0x01F8) >> (3 - paletteShift)), localYLo << paletteShift);\n\tfor (x = underflow; x < totalWidth; ++x) {\n\t\tmosaicX = this.mosaic ? offset % video.objMosaicX : 0;\n\t\tif (!this.hflip) {\n\t\t\tlocalX = x - mosaicX;\n\t\t} else {\n\t\t\tlocalX = this.cachedWidth - (x - mosaicX) - 1;\n\t\t}\n\t\tif (!paletteShift) {\n\t\t\tif (!(x & 0x7) || (this.mosaic && !mosaicX)) {\n\t\t\t\ttileRow = video.accessTile(this.TILE_OFFSET, this.tileBase + tileOffset + (localX >> 3), localYLo);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!(x & 0x3) || (this.mosaic && !mosaicX)) {\n\t\t\t\ttileRow = video.accessTile(this.TILE_OFFSET + (localX & 0x4), this.tileBase + (tileOffset << 1) + ((localX & 0x01F8) >> 2), localYLo << 1);\n\t\t\t}\n\t\t}\n\t\tthis.pushPixel(video.LAYER_OBJ, this, video, tileRow, localX & 0x7, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceOBJ.prototype.drawScanlineAffine = function(backing, y, yOff, start, end) {\n\tvar video = this.oam.video;\n\tvar x;\n\tvar underflow;\n\tvar offset;\n\tvar mask = this.mode | video.target2[video.LAYER_OBJ] | (this.priority << 1);\n\tif (this.mode == 0x10) {\n\t\tmask |= video.TARGET1_MASK;\n\t}\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[video.LAYER_OBJ];\n\t}\n\n\tvar localX;\n\tvar localY;\n\tvar yDiff = y - yOff;\n\tvar tileOffset;\n\n\tvar paletteShift = this.multipalette ? 1 : 0;\n\tvar totalWidth = this.cachedWidth << this.doublesize;\n\tvar totalHeight = this.cachedHeight << this.doublesize;\n\tvar drawWidth = totalWidth;\n\tif (drawWidth > video.HORIZONTAL_PIXELS) {\n\t\ttotalWidth = video.HORIZONTAL_PIXELS;\n\t}\n\n\tif (this.x < video.HORIZONTAL_PIXELS) {\n\t\tif (this.x < start) {\n\t\t\tunderflow = start - this.x;\n\t\t\toffset = start;\n\t\t} else {\n\t\t\tunderflow = 0;\n\t\t\toffset = this.x;\n\t\t}\n\t\tif (end < drawWidth + this.x) {\n\t\t\tdrawWidth = end - this.x;\n\t\t}\n\t} else {\n\t\tunderflow = start + 512 - this.x;\n\t\toffset = start;\n\t\tif (end < drawWidth - underflow) {\n\t\t\tdrawWidth = end;\n\t\t}\n\t}\n\n\tfor (x = underflow; x < drawWidth; ++x) {\n\t\tlocalX = this.scalerotOam.a * (x - (totalWidth >> 1)) + this.scalerotOam.b * (yDiff - (totalHeight >> 1)) + (this.cachedWidth >> 1);\n\t\tlocalY = this.scalerotOam.c * (x - (totalWidth >> 1)) + this.scalerotOam.d * (yDiff - (totalHeight >> 1)) + (this.cachedHeight >> 1);\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.objMosaicX) * this.scalerotOam.a + (y % video.objMosaicY) * this.scalerotOam.b;\n\t\t\tlocalY -= (x % video.objMosaicX) * this.scalerotOam.c + (y % video.objMosaicY) * this.scalerotOam.d;\n\t\t}\n\n\t\tif (localX < 0 || localX >= this.cachedWidth || localY < 0 || localY >= this.cachedHeight) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (video.objCharacterMapping) {\n\t\t\ttileOffset = ((localY & 0x01F8) * this.cachedWidth) >> 6;\n\t\t} else {\n\t\t\ttileOffset = (localY & 0x01F8) << (2 - paletteShift);\n\t\t}\n\t\ttileRow = video.accessTile(this.TILE_OFFSET + (localX & 0x4) * paletteShift, this.tileBase + (tileOffset << paletteShift) + ((localX & 0x01F8) >> (3 - paletteShift)), (localY & 0x7) << paletteShift);\n\t\tthis.pushPixel(video.LAYER_OBJ, this, video, tileRow, localX & 0x7, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceOBJ.prototype.recalcSize = function() {\n\tswitch (this.shape) {\n\tcase 0:\n\t\t// Square\n\t\tthis.cachedHeight = this.cachedWidth = 8 << this.size;\n\t\tbreak;\n\tcase 1:\n\t\t// Horizontal\n\t\tswitch (this.size) {\n\t\tcase 0:\n\t\t\tthis.cachedHeight = 8;\n\t\t\tthis.cachedWidth = 16;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tthis.cachedHeight = 8;\n\t\t\tthis.cachedWidth = 32;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tthis.cachedHeight = 16;\n\t\t\tthis.cachedWidth = 32;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tthis.cachedHeight = 32;\n\t\t\tthis.cachedWidth = 64;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tcase 2:\n\t\t// Vertical\n\t\tswitch (this.size) {\n\t\tcase 0:\n\t\t\tthis.cachedHeight = 16;\n\t\t\tthis.cachedWidth = 8;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tthis.cachedHeight = 32;\n\t\t\tthis.cachedWidth = 8;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tthis.cachedHeight = 32;\n\t\t\tthis.cachedWidth = 16;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tthis.cachedHeight = 64;\n\t\t\tthis.cachedWidth = 32;\n\t\t\tbreak;\n\t\t}\n\t\tbreak;\n\tdefault:\n\t\t// Bad!\n\t}\n};\n\nfunction GameBoyAdvanceOBJLayer(video, index) {\n\tthis.video = video;\n\tthis.bg = false;\n\tthis.index = video.LAYER_OBJ;\n\tthis.priority = index;\n\tthis.enabled = false;\n\tthis.objwin = 0;\n};\n\nGameBoyAdvanceOBJLayer.prototype.drawScanline = function(backing, layer, start, end) {\n\tvar y = this.video.vcount;\n\tvar wrappedY;\n\tvar mosaicY;\n\tvar obj;\n\tif (start >= end) {\n\t\treturn;\n\t}\n\tvar objs = this.video.oam.objs;\n\tfor (var i = 0; i < objs.length; ++i) {\n\t\tobj = objs[i];\n\t\tif (obj.disable) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ((obj.mode & this.video.OBJWIN_MASK) != this.objwin) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (!(obj.mode & this.video.OBJWIN_MASK) && this.priority != obj.priority) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (obj.y < this.video.VERTICAL_PIXELS) {\n\t\t\twrappedY = obj.y;\n\t\t} else {\n\t\t\twrappedY = obj.y - 256;\n\t\t}\n\t\tvar totalHeight;\n\t\tif (!obj.scalerot) {\n\t\t\ttotalHeight = obj.cachedHeight;\n\t\t} else {\n\t\t\ttotalHeight = obj.cachedHeight << obj.doublesize;\n\t\t}\n\t\tif (!obj.mosaic) {\n\t\t\tmosaicY = y;\n\t\t} else {\n\t\t\tmosaicY = y - y % this.video.objMosaicY;\n\t\t}\n\t\tif (wrappedY <= y && (wrappedY + totalHeight) > y) {\n\t\t\tobj.drawScanline(backing, mosaicY, wrappedY, start, end);\n\t\t}\n\t}\n};\n\nGameBoyAdvanceOBJLayer.prototype.objComparator = function(a, b) {\n\treturn a.index - b.index;\n};\n\nwindow.GameBoyAdvanceSoftwareRenderer = function GameBoyAdvanceSoftwareRenderer() {\n\tthis.LAYER_BG0 = 0;\n\tthis.LAYER_BG1 = 1;\n\tthis.LAYER_BG2 = 2;\n\tthis.LAYER_BG3 = 3;\n\tthis.LAYER_OBJ = 4;\n\tthis.LAYER_BACKDROP = 5;\n\n\tthis.HORIZONTAL_PIXELS = 240;\n\tthis.VERTICAL_PIXELS = 160;\n\n\tthis.LAYER_MASK = 0x06;\n\tthis.BACKGROUND_MASK = 0x01;\n\tthis.TARGET2_MASK = 0x08;\n\tthis.TARGET1_MASK = 0x10;\n\tthis.OBJWIN_MASK = 0x20;\n\tthis.WRITTEN_MASK = 0x80;\n\n\tthis.PRIORITY_MASK = this.LAYER_MASK | this.BACKGROUND_MASK;\n\n\tthis.drawBackdrop = new (function(video) {\n\t\tthis.bg = true;\n\t\tthis.priority = -1;\n\t\tthis.index = video.LAYER_BACKDROP;\n\t\tthis.enabled = true;\n\n\t\tthis.drawScanline = function(backing, layer, start, end) {\n\t\t\t// TODO: interactions with blend modes and OBJWIN\n\t\t\tfor (var x = start; x < end; ++x) {\n\t\t\t\tif (!(backing.stencil[x] & video.WRITTEN_MASK)) {\n\t\t\t\t\tbacking.color[x] = video.palette.accessColor(this.index, 0);\n\t\t\t\t\tbacking.stencil[x] = video.WRITTEN_MASK;\n\t\t\t\t} else if (backing.stencil[x] & video.TARGET1_MASK) {\n\t\t\t\t\tbacking.color[x] = video.palette.mix(video.blendB, video.palette.accessColor(this.index, 0), video.blendA, backing.color[x]);\n\t\t\t\t\tbacking.stencil[x] = video.WRITTEN_MASK;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})(this);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.clear = function(mmu) {\n\tthis.palette = new GameBoyAdvancePalette();\n\tthis.vram = new GameBoyAdvanceVRAM(mmu.SIZE_VRAM);\n\tthis.oam = new GameBoyAdvanceOAM(mmu.SIZE_OAM);\n\tthis.oam.video = this;\n\tthis.objLayers = [\n\t\tnew GameBoyAdvanceOBJLayer(this, 0),\n\t\tnew GameBoyAdvanceOBJLayer(this, 1),\n\t\tnew GameBoyAdvanceOBJLayer(this, 2),\n\t\tnew GameBoyAdvanceOBJLayer(this, 3)\n\t];\n\tthis.objwinLayer = new GameBoyAdvanceOBJLayer(this, 4);\n\tthis.objwinLayer.objwin = this.OBJWIN_MASK;\n\n\t// DISPCNT\n\tthis.backgroundMode = 0;\n\tthis.displayFrameSelect = 0;\n\tthis.hblankIntervalFree = 0;\n\tthis.objCharacterMapping = 0;\n\tthis.forcedBlank = 1;\n\tthis.win0 = 0;\n\tthis.win1 = 0;\n\tthis.objwin = 0;\n\n\t// VCOUNT\n\tthis.vcount = -1;\n\n\t// WIN0H\n\tthis.win0Left = 0;\n\tthis.win0Right = 240;\n\n\t// WIN1H\n\tthis.win1Left = 0;\n\tthis.win1Right = 240;\n\n\t// WIN0V\n\tthis.win0Top = 0;\n\tthis.win0Bottom = 160;\n\n\t// WIN1V\n\tthis.win1Top = 0;\n\tthis.win1Bottom = 160;\n\n\t// WININ/WINOUT\n\tthis.windows = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.windows.push({\n\t\t\tenabled: [ false, false, false, false, false, true ],\n\t\t\tspecial: 0\n\t\t});\n\t};\n\n\t// BLDCNT\n\tthis.target1 = new Array(5);\n\tthis.target2 = new Array(5);\n\tthis.blendMode = 0;\n\n\t// BLDALPHA\n\tthis.blendA = 0;\n\tthis.blendB = 0;\n\n\t// BLDY\n\tthis.blendY = 0;\n\n\t// MOSAIC\n\tthis.bgMosaicX = 1;\n\tthis.bgMosaicY = 1;\n\tthis.objMosaicX = 1;\n\tthis.objMosaicY = 1;\n\n\tthis.lastHblank = 0;\n\tthis.nextHblank = this.HDRAW_LENGTH;\n\tthis.nextEvent = this.nextHblank;\n\n\tthis.nextHblankIRQ = 0;\n\tthis.nextVblankIRQ = 0;\n\tthis.nextVcounterIRQ = 0;\n\n\tthis.bg = new Array();\n\tfor (var i = 0; i < 4; ++i) {\n\t\tthis.bg.push({\n\t\t\tbg: true,\n\t\t\tindex: i,\n\t\t\tenabled: false,\n\t\t\tvideo: this,\n\t\t\tvram: this.vram,\n\t\t\tpriority: 0,\n\t\t\tcharBase: 0,\n\t\t\tmosaic: false,\n\t\t\tmultipalette: false,\n\t\t\tscreenBase: 0,\n\t\t\toverflow: 0,\n\t\t\tsize: 0,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\trefx: 0,\n\t\t\trefy: 0,\n\t\t\tdx: 1,\n\t\t\tdmx: 0,\n\t\t\tdy: 0,\n\t\t\tdmy: 1,\n\t\t\tsx: 0,\n\t\t\tsy: 0,\n\t\t\tpushPixel: GameBoyAdvanceSoftwareRenderer.pushPixel,\n\t\t\tdrawScanline: this.drawScanlineBGMode0\n\t\t});\n\t}\n\n\tthis.bgModes = [\n\t\tthis.drawScanlineBGMode0,\n\t\tthis.drawScanlineBGMode2, // Modes 1 and 2 are identical for layers 2 and 3\n\t\tthis.drawScanlineBGMode2,\n\t\tthis.drawScanlineBGMode3,\n\t\tthis.drawScanlineBGMode4,\n\t\tthis.drawScanlineBGMode5\n\t];\n\n\tthis.drawLayers = [\n\t\tthis.bg[0],\n\t\tthis.bg[1],\n\t\tthis.bg[2],\n\t\tthis.bg[3],\n\t\tthis.objLayers[0],\n\t\tthis.objLayers[1],\n\t\tthis.objLayers[2],\n\t\tthis.objLayers[3],\n\t\tthis.objwinLayer,\n\t\tthis.drawBackdrop\n\t];\n\n\tthis,objwinActive = false;\n\tthis.alphaEnabled = false;\n\n\tthis.scanline = {\n\t\tcolor: new Uint16Array(this.HORIZONTAL_PIXELS),\n\t\t// Stencil format:\n\t\t// Bits 0-1: Layer\n\t\t// Bit 2: Is background\n\t\t// Bit 3: Is Target 2\n\t\t// Bit 4: Is Target 1\n\t\t// Bit 5: Is OBJ Window\n\t\t// Bit 6: Reserved\n\t\t// Bit 7: Has been written\n\t\tstencil: new Uint8Array(this.HORIZONTAL_PIXELS)\n\t};\n\tthis.sharedColor = [ 0, 0, 0 ];\n\tthis.sharedMap = {\n\t\ttile: 0,\n\t\thflip: false,\n\t\tvflip: false,\n\t\tpalette: 0\n\t};\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.clearSubsets = function(mmu, regions) {\n\tif (regions & 0x04) {\n\t\tthis.palette.overwrite(new Uint16Array(mmu.SIZE_PALETTE >> 1));\n\t}\n\n\tif (regions & 0x08) {\n\t\tthis.vram.insert(0, new Uint16Array(mmu.SIZE_VRAM >> 1));\n\t}\n\n\tif (regions & 0x10) {\n\t\tthis.oam.overwrite(new Uint16Array(mmu.SIZE_OAM >> 1));\n\t\tthis.oam.video = this;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.freeze = function() {\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.defrost = function(frost) {\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.setBacking = function(backing) {\n\tthis.pixelData = backing;\n\n\t// Clear backing first\n\tfor (var offset = 0; offset < this.HORIZONTAL_PIXELS * this.VERTICAL_PIXELS * 4;) {\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t\tthis.pixelData.data[offset++] = 0xFF;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeDisplayControl = function(value) {\n\tthis.backgroundMode = value & 0x0007;\n\tthis.displayFrameSelect = value & 0x0010;\n\tthis.hblankIntervalFree = value & 0x0020;\n\tthis.objCharacterMapping = value & 0x0040;\n\tthis.forcedBlank = value & 0x0080;\n\tthis.bg[0].enabled = value & 0x0100;\n\tthis.bg[1].enabled = value & 0x0200;\n\tthis.bg[2].enabled = value & 0x0400;\n\tthis.bg[3].enabled = value & 0x0800;\n\tthis.objLayers[0].enabled = value & 0x1000;\n\tthis.objLayers[1].enabled = value & 0x1000;\n\tthis.objLayers[2].enabled = value & 0x1000;\n\tthis.objLayers[3].enabled = value & 0x1000;\n\tthis.win0 = value & 0x2000;\n\tthis.win1 = value & 0x4000;\n\tthis.objwin = value & 0x8000;\n\tthis.objwinLayer.enabled = value & 0x1000 && value & 0x8000;\n\n\t// Total hack so we can store both things that would set it to 256-color mode in the same variable\n\tthis.bg[2].multipalette &= ~0x0001;\n\tthis.bg[3].multipalette &= ~0x0001;\n\tif (this.backgroundMode > 0) {\n\t\tthis.bg[2].multipalette |= 0x0001;\n\t}\n\tif (this.backgroundMode == 2) {\n\t\tthis.bg[3].multipalette |= 0x0001;\n\t}\n\t\n\tthis.resetLayers();\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundControl = function(bg, value) {\n\tvar bgData = this.bg[bg];\n\tbgData.priority = value & 0x0003;\n\tbgData.charBase = (value & 0x000C) << 12;\n\tbgData.mosaic = value & 0x0040;\n\tbgData.multipalette &= ~0x0080;\n\tif (bg < 2 || this.backgroundMode == 0) {\n\t\tbgData.multipalette |= value & 0x0080;\n\t}\n\tbgData.screenBase = (value & 0x1F00) << 3;\n\tbgData.overflow = value & 0x2000;\n\tbgData.size = (value & 0xC000) >> 14;\n\n\tthis.drawLayers.sort(this.layerComparator);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundHOffset = function(bg, value) {\n\tthis.bg[bg].x = value & 0x1FF;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundVOffset = function(bg, value) {\n\tthis.bg[bg].y = value & 0x1FF;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundRefX = function(bg, value) {\n\tthis.bg[bg].refx = (value << 4) / 0x1000;\n\tthis.bg[bg].sx = this.bg[bg].refx;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundRefY = function(bg, value) {\n\tthis.bg[bg].refy = (value << 4) / 0x1000;\n\tthis.bg[bg].sy = this.bg[bg].refy;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamA = function(bg, value) {\n\tthis.bg[bg].dx = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamB = function(bg, value) {\n\tthis.bg[bg].dmx = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamC = function(bg, value) {\n\tthis.bg[bg].dy = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBackgroundParamD = function(bg, value) {\n\tthis.bg[bg].dmy = (value << 16) / 0x1000000;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin0H = function(value) {\n\tthis.win0Left = (value & 0xFF00) >> 8;\n\tthis.win0Right = Math.min(this.HORIZONTAL_PIXELS, value & 0x00FF);\n\tif (this.win0Left > this.win0Right) {\n\t\tthis.win0Right = this.HORIZONTAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin1H = function(value) {\n\tthis.win1Left = (value & 0xFF00) >> 8;\n\tthis.win1Right = Math.min(this.HORIZONTAL_PIXELS, value & 0x00FF);\n\tif (this.win1Left > this.win1Right) {\n\t\tthis.win1Right = this.HORIZONTAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin0V = function(value) {\n\tthis.win0Top = (value & 0xFF00) >> 8;\n\tthis.win0Bottom = Math.min(this.VERTICAL_PIXELS, value & 0x00FF);\n\tif (this.win0Top > this.win0Bottom) {\n\t\tthis.win0Bottom = this.VERTICAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWin1V = function(value) {\n\tthis.win1Top = (value & 0xFF00) >> 8;\n\tthis.win1Bottom = Math.min(this.VERTICAL_PIXELS, value & 0x00FF);\n\tif (this.win1Top > this.win1Bottom) {\n\t\tthis.win1Bottom = this.VERTICAL_PIXELS;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWindow = function(index, value) {\n\tvar window = this.windows[index];\n\twindow.enabled[0] = value & 0x01;\n\twindow.enabled[1] = value & 0x02;\n\twindow.enabled[2] = value & 0x04;\n\twindow.enabled[3] = value & 0x08;\n\twindow.enabled[4] = value & 0x10;\n\twindow.special = value & 0x20;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWinIn = function(value) {\n\tthis.writeWindow(0, value);\n\tthis.writeWindow(1, value >> 8);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeWinOut = function(value) {\n\tthis.writeWindow(2, value);\n\tthis.writeWindow(3, value >> 8);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBlendControl = function(value) {\n\tthis.target1[0] = !!(value & 0x0001) * this.TARGET1_MASK;\n\tthis.target1[1] = !!(value & 0x0002) * this.TARGET1_MASK;\n\tthis.target1[2] = !!(value & 0x0004) * this.TARGET1_MASK;\n\tthis.target1[3] = !!(value & 0x0008) * this.TARGET1_MASK;\n\tthis.target1[4] = !!(value & 0x0010) * this.TARGET1_MASK;\n\tthis.target1[5] = !!(value & 0x0020) * this.TARGET1_MASK;\n\tthis.target2[0] = !!(value & 0x0100) * this.TARGET2_MASK;\n\tthis.target2[1] = !!(value & 0x0200) * this.TARGET2_MASK;\n\tthis.target2[2] = !!(value & 0x0400) * this.TARGET2_MASK;\n\tthis.target2[3] = !!(value & 0x0800) * this.TARGET2_MASK;\n\tthis.target2[4] = !!(value & 0x1000) * this.TARGET2_MASK;\n\tthis.target2[5] = !!(value & 0x2000) * this.TARGET2_MASK;\n\tthis.blendMode = (value & 0x00C0) >> 6;\n\n\tswitch (this.blendMode) {\n\tcase 1:\n\t\t// Alpha\n\t\t// Fall through\n\tcase 0:\n\t\t// Normal\n\t\tthis.palette.makeNormalPalettes();\n\t\tbreak;\n\tcase 2:\n\t\t// Brighter\n\t\tthis.palette.makeBrightPalettes(value & 0x3F);\n\t\tbreak;\n\tcase 3:\n\t\t// Darker\n\t\tthis.palette.makeDarkPalettes(value & 0x3F);\n\t\tbreak;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.setBlendEnabled = function(layer, enabled, override) {\n\tthis.alphaEnabled = enabled && override == 1;\n\tif (enabled) {\n\t\tswitch (override) {\n\t\tcase 1:\n\t\t\t// Alpha\n\t\t\t// Fall through\n\t\tcase 0:\n\t\t\t// Normal\n\t\t\tthis.palette.makeNormalPalette(layer);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\t// Brighter\n\t\tcase 3:\n\t\t\t// Darker\n\t\t\tthis.palette.makeSpecialPalette(layer);\n\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tthis.palette.makeNormalPalette(layer);\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBlendAlpha = function(value) {\n\tthis.blendA = (value & 0x001F) / 16;\n\tif (this.blendA > 1) {\n\t\tthis.blendA = 1;\n\t}\n\tthis.blendB = ((value & 0x1F00) >> 8) / 16;\n\tif (this.blendB > 1) {\n\t\tthis.blendB = 1;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeBlendY = function(value) {\n\tthis.blendY = value;\n\tthis.palette.setBlendY(value >= 16 ? 1 : (value / 16));\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.writeMosaic = function(value) {\n\tthis.bgMosaicX = (value & 0xF) + 1;\n\tthis.bgMosaicY = ((value >> 4) & 0xF) + 1;\n\tthis.objMosaicX = ((value >> 8) & 0xF) + 1;\n\tthis.objMosaicY = ((value >> 12) & 0xF) + 1;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.resetLayers = function() {\n\tif (this.backgroundMode > 1) {\n\t\tthis.bg[0].enabled = false;\n\t\tthis.bg[1].enabled = false;\n\t}\n\tif (this.bg[2].enabled) {\n\t\tthis.bg[2].drawScanline = this.bgModes[this.backgroundMode];\n\t}\n\tif ((this.backgroundMode == 0 || this.backgroundMode == 2)) {\n\t\tif (this.bg[3].enabled) {\n\t\t\tthis.bg[3].drawScanline = this.bgModes[this.backgroundMode];\n\t\t}\n\t} else {\n\t\tthis.bg[3].enabled = false;\n\t}\n\tthis.drawLayers.sort(this.layerComparator);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.layerComparator = function(a, b) {\n\tvar diff = b.priority - a.priority;\n\tif (!diff) {\n\t\tif (a.bg && !b.bg) {\n\t\t\treturn -1;\n\t\t} else if (!a.bg && b.bg) {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn b.index - a.index;\n\t}\n\treturn diff;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.accessMapMode0 = function(base, size, x, yBase, out) {\n\tvar offset = base + ((x >> 2) & 0x3E) + yBase;\n\n\tif (size & 1) {\n\t\toffset += (x & 0x100) << 3;\n\t}\n\n\tvar mem = this.vram.loadU16(offset);\n\tout.tile = mem & 0x03FF;\n\tout.hflip = mem & 0x0400;\n\tout.vflip = mem & 0x0800;\n\tout.palette = (mem & 0xF000) >> 8 // This is shifted up 4 to make pushPixel faster\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.accessMapMode1 = function(base, size, x, yBase, out) {\n\tvar offset = base + (x >> 3) + yBase;\n\n\tout.tile = this.vram.loadU8(offset);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.accessTile = function(base, tile, y) {\n\tvar offset = base + (tile << 5);\n\toffset |= y << 2;\n\n\treturn this.vram.load32(offset);\n}\n\nGameBoyAdvanceSoftwareRenderer.pushPixel = function(layer, map, video, row, x, offset, backing, mask, raw) {\n\tvar index;\n\tif (!raw) {\n\t\tif (this.multipalette) {\n\t\t\tindex = (row >> (x << 3)) & 0xFF;\n\t\t} else {\n\t\t\tindex = (row >> (x << 2)) & 0xF;\n\t\t}\n\t\t// Index 0 is transparent\n\t\tif (!index) {\n\t\t\treturn;\n\t\t} else if (!this.multipalette) {\n\t\t\tindex |= map.palette;\n\t\t}\n\t}\n\n\tvar stencil = video.WRITTEN_MASK;\n\tvar oldStencil = backing.stencil[offset];\n\tvar blend = video.blendMode;\n\tif (video.objwinActive) {\n\t\tif (oldStencil & video.OBJWIN_MASK) {\n\t\t\tif (video.windows[3].enabled[layer]) {\n\t\t\t\tvideo.setBlendEnabled(layer, video.windows[3].special && video.target1[layer], blend);\n\t\t\t\tif (video.windows[3].special && video.alphaEnabled) {\n\t\t\t\t\tmask |= video.target1[layer];\n\t\t\t\t}\n\t\t\t\tstencil |= video.OBJWIN_MASK;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (video.windows[2].enabled[layer]) {\n\t\t\tvideo.setBlendEnabled(layer, video.windows[2].special && video.target1[layer], blend);\n\t\t\tif (video.windows[2].special && video.alphaEnabled) {\n\t\t\t\tmask |= video.target1[layer];\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif ((mask & video.TARGET1_MASK) && (oldStencil & video.TARGET2_MASK)) {\n\t\tvideo.setBlendEnabled(layer, true, 1);\n\t}\n\n\tvar pixel = raw ? row : video.palette.accessColor(layer, index);\n\n\tif (mask & video.TARGET1_MASK) {\n\t\tvideo.setBlendEnabled(layer, !!blend, blend);\n\t}\n\tvar highPriority = (mask & video.PRIORITY_MASK) < (oldStencil & video.PRIORITY_MASK);\n\t// Backgrounds can draw over each other, too.\n\tif ((mask & video.PRIORITY_MASK) == (oldStencil & video.PRIORITY_MASK)) {\n\t\thighPriority = mask & video.BACKGROUND_MASK;\n\t}\n\n\tif (!(oldStencil & video.WRITTEN_MASK)) {\n\t\t// Nothing here yet, just continue\n\t\tstencil |= mask;\n\t} else if (highPriority) {\n\t\t// We are higher priority\n\t\tif (mask & video.TARGET1_MASK && oldStencil & video.TARGET2_MASK) {\n\t\t\tpixel = video.palette.mix(video.blendA, pixel, video.blendB, backing.color[offset]);\n\t\t}\n\t\t// We just drew over something, so it doesn't make sense for us to be a TARGET1 anymore...\n\t\tstencil |= mask & ~video.TARGET1_MASK;\n\t} else if ((mask & video.PRIORITY_MASK) > (oldStencil & video.PRIORITY_MASK)) {\n\t\t// We're below another layer, but might be the blend target for it\n\t\tstencil = oldStencil & ~(video.TARGET1_MASK | video.TARGET2_MASK);\n\t\tif (mask & video.TARGET2_MASK && oldStencil & video.TARGET1_MASK) {\n\t\t\tpixel = video.palette.mix(video.blendB, pixel, video.blendA, backing.color[offset]);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t} else {\n\t\treturn;\n\t}\n\n\tif (mask & video.OBJWIN_MASK) {\n\t\t// We ARE the object window, don't draw pixels!\n\t\tbacking.stencil[offset] |= video.OBJWIN_MASK;\n\t\treturn;\n\t}\n\tbacking.color[offset] = pixel;\n\tbacking.stencil[offset] = stencil;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.identity = function(x) {\n\treturn x;\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBlank = function(backing) {\n\tfor (var x = 0; x < this.HORIZONTAL_PIXELS; ++x) {\n\t\tbacking.color[x] = 0xFFFF;\n\t\tbacking.stencil[x] = 0;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.prepareScanline = function(backing) {\n\tfor (var x = 0; x < this.HORIZONTAL_PIXELS; ++x) {\n\t\tbacking.stencil[x] = this.target2[this.LAYER_BACKDROP];\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode0 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar xOff = bg.x;\n\tvar yOff = bg.y;\n\tvar localX;\n\tvar localXLo;\n\tvar localY = y + yOff;\n\tif (this.mosaic) {\n\t\tlocalY -= y % video.bgMosaicY;\n\t}\n\tvar localYLo = localY & 0x7;\n\tvar mosaicX;\n\tvar screenBase = bg.screenBase;\n\tvar charBase = bg.charBase;\n\tvar size = bg.size;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar paletteShift = bg.multipalette ? 1 : 0;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase = (localY << 3) & 0x7C0;\n\tif (size == 2) {\n\t\tyBase += (localY << 3) & 0x800;\n\t} else if (size == 3) {\n\t\tyBase += (localY << 4) & 0x1000;\n\t}\n\n\tvar xMask;\n\tif (size & 1) {\n\t\txMask = 0x1FF;\n\t} else {\n\t\txMask = 0xFF;\n\t}\n\n\tvideo.accessMapMode0(screenBase, size, (start + xOff) & xMask, yBase, map);\n\tvar tileRow = video.accessTile(charBase, map.tile << paletteShift, (!map.vflip ? localYLo : 7 - localYLo) << paletteShift);\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = (x + xOff) & xMask;\n\t\tmosaicX = this.mosaic ? offset % video.bgMosaicX : 0;\n\t\tlocalX -= mosaicX;\n\t\tlocalXLo = localX & 0x7;\n\t\tif (!paletteShift) {\n\t\t\tif (!localXLo || (this.mosaic && !mosaicX)) {\n\t\t\t\tvideo.accessMapMode0(screenBase, size, localX, yBase, map);\n\t\t\t\ttileRow = video.accessTile(charBase, map.tile, !map.vflip ? localYLo : 7 - localYLo);\n\t\t\t\tif (!tileRow && !localXLo) {\n\t\t\t\t\tx += 7;\n\t\t\t\t\toffset += 8;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!localXLo || (this.mosaic && !mosaicX)) {\n\t\t\t\tvideo.accessMapMode0(screenBase, size, localX, yBase, map);\n\t\t\t}\n\t\t\tif (!(localXLo & 0x3) || (this.mosaic && !mosaicX)) {\n\t\t\t\ttileRow = video.accessTile(charBase + (!!(localX & 0x4) == !map.hflip ? 4 : 0), map.tile << 1, (!map.vflip ? localYLo : 7 - localYLo) << 1);\n\t\t\t\tif (!tileRow && !(localXLo & 0x3)) {\n\t\t\t\t\tx += 3;\n\t\t\t\t\toffset += 4;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (map.hflip) {\n\t\t\tlocalXLo = 7 - localXLo;\n\t\t}\n\t\tbg.pushPixel(index, map, video, tileRow, localXLo, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode2 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar screenBase = bg.screenBase;\n\tvar charBase = bg.charBase;\n\tvar size = bg.size;\n\tvar sizeAdjusted = 128 << size;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tif (bg.overflow) {\n\t\t\tlocalX &= sizeAdjusted - 1;\n\t\t\tif (localX < 0) {\n\t\t\t\tlocalX += sizeAdjusted;\n\t\t\t}\n\t\t\tlocalY &= sizeAdjusted - 1;\n\t\t\tif (localY < 0) {\n\t\t\t\tlocalY += sizeAdjusted;\n\t\t\t}\n\t\t} else if (localX < 0 || localY < 0 || localX >= sizeAdjusted || localY >= sizeAdjusted) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tyBase = ((localY << 1) & 0x7F0) << size;\n\t\tvideo.accessMapMode1(screenBase, size, localX, yBase, map);\n\t\tcolor = this.vram.loadU8(charBase + (map.tile << 6) + ((localY & 0x7) << 3) + (localX & 0x7));\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode3 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tif (localX < 0 || localY < 0 || localX >= video.HORIZONTAL_PIXELS || localY >= video.VERTICAL_PIXELS) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tcolor = this.vram.loadU16(((localY * video.HORIZONTAL_PIXELS) + localX) << 1);\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, true);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode4 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar charBase = 0;\n\tif (video.displayFrameSelect) {\n\t\tcharBase += 0xA000;\n\t}\n\tvar size = bg.size;\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = 0 | bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tyBase = (localY << 2) & 0x7E0;\n\t\tif (localX < 0 || localY < 0 || localX >= video.HORIZONTAL_PIXELS || localY >= video.VERTICAL_PIXELS) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tcolor = this.vram.loadU8(charBase + (localY * video.HORIZONTAL_PIXELS) + localX);\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, false);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanlineBGMode5 = function(backing, bg, start, end) {\n\tvar video = this.video;\n\tvar x;\n\tvar y = video.vcount;\n\tvar offset = start;\n\tvar localX;\n\tvar localY;\n\tvar charBase = 0;\n\tif (video.displayFrameSelect) {\n\t\tcharBase += 0xA000;\n\t}\n\tvar index = bg.index;\n\tvar map = video.sharedMap;\n\tvar color;\n\tvar mask = video.target2[index] | (bg.priority << 1) | video.BACKGROUND_MASK;\n\tif (video.blendMode == 1 && video.alphaEnabled) {\n\t\tmask |= video.target1[index];\n\t}\n\n\tvar yBase;\n\n\tfor (x = start; x < end; ++x) {\n\t\tlocalX = bg.dx * x + bg.sx;\n\t\tlocalY = bg.dy * x + bg.sy;\n\t\tif (this.mosaic) {\n\t\t\tlocalX -= (x % video.bgMosaicX) * bg.dx + (y % video.bgMosaicY) * bg.dmx;\n\t\t\tlocalY -= (x % video.bgMosaicX) * bg.dy + (y % video.bgMosaicY) * bg.dmy;\n\t\t}\n\t\tif (localX < 0 || localY < 0 || localX >= 160 || localY >= 128) {\n\t\t\toffset++;\n\t\t\tcontinue;\n\t\t}\n\t\tcolor = this.vram.loadU16(charBase + ((localY * 160) + localX) << 1);\n\t\tbg.pushPixel(index, map, video, color, 0, offset, backing, mask, true);\n\t\toffset++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.drawScanline = function(y) {\n\tvar backing = this.scanline;\n\tif (this.forcedBlank) {\n\t\tthis.drawScanlineBlank(backing);\n\t\treturn;\n\t}\n\tthis.prepareScanline(backing);\n\tvar layer;\n\tvar firstStart;\n\tvar firstEnd;\n\tvar lastStart;\n\tvar lastEnd;\n\tthis.vcount = y;\n\t// Draw lower priority first and then draw over them\n\tfor (var i = 0; i < this.drawLayers.length; ++i) {\n\t\tlayer = this.drawLayers[i];\n\t\tif (!layer.enabled) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.objwinActive = false;\n\t\tif (!(this.win0 || this.win1 || this.objwin)) {\n\t\t\tthis.setBlendEnabled(layer.index, this.target1[layer.index], this.blendMode);\n\t\t\tlayer.drawScanline(backing, layer, 0, this.HORIZONTAL_PIXELS);\n\t\t} else {\n\t\t\tfirstStart = 0;\n\t\t\tfirstEnd = this.HORIZONTAL_PIXELS;\n\t\t\tlastStart = 0;\n\t\t\tlastEnd = this.HORIZONTAL_PIXELS;\n\t\t\tif (this.win0 && y >= this.win0Top && y < this.win0Bottom) {\n\t\t\t\tif (this.windows[0].enabled[layer.index]) {\n\t\t\t\t\tthis.setBlendEnabled(layer.index, this.windows[0].special && this.target1[layer.index], this.blendMode);\n\t\t\t\t\tlayer.drawScanline(backing, layer, this.win0Left, this.win0Right);\n\t\t\t\t}\n\t\t\t\tfirstStart = Math.max(firstStart, this.win0Left);\n\t\t\t\tfirstEnd = Math.min(firstEnd, this.win0Left);\n\t\t\t\tlastStart = Math.max(lastStart, this.win0Right);\n\t\t\t\tlastEnd = Math.min(lastEnd, this.win0Right);\n\t\t\t}\n\t\t\tif (this.win1 && y >= this.win1Top && y < this.win1Bottom) {\n\t\t\t\tif (this.windows[1].enabled[layer.index]) {\n\t\t\t\t\tthis.setBlendEnabled(layer.index, this.windows[1].special && this.target1[layer.index], this.blendMode);\n\t\t\t\t\tif (!this.windows[0].enabled[layer.index] && (this.win1Left < firstStart || this.win1Right < lastStart)) {\n\t\t\t\t\t\t// We've been cut in two by window 0!\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, this.win1Left, firstStart);\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, lastEnd, this.win1Right);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, this.win1Left, this.win1Right);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfirstStart = Math.max(firstStart, this.win1Left);\n\t\t\t\tfirstEnd = Math.min(firstEnd, this.win1Left);\n\t\t\t\tlastStart = Math.max(lastStart, this.win1Right);\n\t\t\t\tlastEnd = Math.min(lastEnd, this.win1Right);\n\t\t\t}\n\t\t\t// Do last two\n\t\t\tif (this.windows[2].enabled[layer.index] || (this.objwin && this.windows[3].enabled[layer.index])) {\n\t\t\t\t// WINOUT/OBJWIN\n\t\t\t\tthis.objwinActive = this.objwin;\n\t\t\t\tthis.setBlendEnabled(layer.index, this.windows[2].special && this.target1[layer.index], this.blendMode); // Window 3 handled in pushPixel\n\t\t\t\tif (firstEnd > lastStart) {\n\t\t\t\t\tlayer.drawScanline(backing, layer, 0, this.HORIZONTAL_PIXELS);\n\t\t\t\t} else {\n\t\t\t\t\tif (firstEnd) {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, 0, firstEnd);\n\t\t\t\t\t}\n\t\t\t\t\tif (lastStart < this.HORIZONTAL_PIXELS) {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, lastStart, this.HORIZONTAL_PIXELS);\n\t\t\t\t\t}\n\t\t\t\t\tif (lastEnd < firstStart) {\n\t\t\t\t\t\tlayer.drawScanline(backing, layer, lastEnd, firstStart);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setBlendEnabled(this.LAYER_BACKDROP, this.target1[this.LAYER_BACKDROP] && this.windows[2].special, this.blendMode);\n\t\t}\n\t\tif (layer.bg) {\n\t\t\tlayer.sx += layer.dmx;\n\t\t\tlayer.sy += layer.dmy;\n\t\t}\n\t}\n\n\tthis.finishScanline(backing);\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.finishScanline = function(backing) {\n\tvar color;\n\tvar bd = this.palette.accessColor(this.LAYER_BACKDROP, 0);\n\tvar xx = this.vcount * this.HORIZONTAL_PIXELS * 4;\n\tvar isTarget2 = this.target2[this.LAYER_BACKDROP];\n\tfor (var x = 0; x < this.HORIZONTAL_PIXELS; ++x) {\n\t\tif (backing.stencil[x] & this.WRITTEN_MASK) {\n\t\t\tcolor = backing.color[x];\n\t\t\tif (isTarget2 && backing.stencil[x] & this.TARGET1_MASK) {\n\t\t\t\tcolor = this.palette.mix(this.blendA, color, this.blendB, bd);\n\t\t\t}\n\t\t\tthis.palette.convert16To32(color, this.sharedColor);\n\t\t} else {\n\t\t\tthis.palette.convert16To32(bd, this.sharedColor);\n\t\t}\n\t\tthis.pixelData.data[xx++] = this.sharedColor[0];\n\t\tthis.pixelData.data[xx++] = this.sharedColor[1];\n\t\tthis.pixelData.data[xx++] = this.sharedColor[2];\n\t\txx++;\n\t}\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.startDraw = function() {\n\t// Nothing to do\n};\n\nGameBoyAdvanceSoftwareRenderer.prototype.finishDraw = function(caller) {\n\tthis.bg[2].sx = this.bg[2].refx;\n\tthis.bg[2].sy = this.bg[2].refy;\n\tthis.bg[3].sx = this.bg[3].refx;\n\tthis.bg[3].sy = this.bg[3].refy;\n\tcaller.finishDraw(this.pixelData);\n};\n","import ReactGbaJs from './react'\n\nexport default ReactGbaJs\n","import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport sha1 from 'js-sha1'\nimport drawEmulator from '../emulator'\nimport reset from '../emulator/reset'\nimport setVolume from '../emulator/setVolume'\n\nconst ReactGbaJs = ({ romBufferMemory, volume }) => {\n  const [gba, setGba] = useState(null)\n\n  useEffect(() => {\n    if (gba !== null) {\n      reset(gba)\n    }\n\n    const newGbaInstance = drawEmulator(romBufferMemory)\n    setGba(newGbaInstance)\n  }, [sha1(romBufferMemory)])\n\n  useEffect(() => {\n    if (gba === null) {\n      return\n    }\n\n    setVolume(gba, volume)\n  }, [gba, volume])\n\n  return (\n    <canvas id=\"screen\" width=\"480\" height=\"320\" />\n  )\n}\n\nReactGbaJs.propTypes = {\n  romBufferMemory: PropTypes.object.isRequired,\n  volume: PropTypes.number.isRequired,\n}\n\nexport default ReactGbaJs\n","module.exports = require(\"react\");"],"sourceRoot":""}